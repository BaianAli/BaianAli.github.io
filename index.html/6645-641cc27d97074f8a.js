!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c771503a-bb5a-44c9-927b-ec3739692f73",e._sentryDebugIdIdentifier="sentry-dbid-c771503a-bb5a-44c9-927b-ec3739692f73")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"6af6db66"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6645],{14819:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(74985),o=t(1498),i=t(74833),a=t(56596),l=t(93918),c=t(88936),u=t(29287);t(50959);var s=a.K.form,d=(0,l.X)({content:[u.l0.colWithGap(24)],buttons:[u.l0.rowWithGap(12),u.l0.justify.end]});function f(e){return(0,r.BX)(s,{css:d.content,onSubmit:function(n){n.preventDefault(),e.onConfirm()},children:[(0,r.tZ)(i.h4,{variant:"headerDefault",level:2,children:e.title}),"string"==typeof e.children?(0,r.tZ)(i.xv,{children:e.children}):e.children,(0,r.BX)(a.G,{css:d.buttons,children:[(0,r.tZ)(o.zx,{type:"button",onClick:e.onCancel,text:"Cancel"}),(0,r.tZ)(o.zx,{type:"submit",disabled:e.loading,iconLeft:e.loading?(0,r.tZ)(c.Z,{}):e.confirmIcon,colorway:e.isDestructive?"negative":"primary",text:e.confirmLabel||"Confirm"})]})]})}},82897:function(e,n,t){t.d(n,{Vg:function(){return R},Wj:function(){return D},cF:function(){return C},q2:function(){return A}});var r=t(41733),o=t(30509),i=t(74985),a=t(1498),l=t(93496),c=t(3630),u=t(23291),s=t(1415),d=t(38080),f=t(74833),p=t(56596),h=t(93918),g=t(2454),v=t(32377),m=t(79217),y=t(68934),b=t(29287),w=t(57),x=t(98934),k=t(87001),Z=(0,h.X)({root:[b.l0.rowWithGap(8),b.l0.align.center],left:[b.l0.rowWithGap(2),b.l0.flex.grow(1)],right:[b.l0.width("50%")],rightInline:[b.l0.minWidth(24)],bar:[b.l0.height(6)]});function C(e){var n=e.total-e.used,t=Math.max(0,Math.min(100,Math.round(n/e.total*100)));return(0,i.BX)(p.G,{css:Z.root,children:[(0,i.tZ)(p.G,{css:Z.left,children:e.used===e.total?(0,i.tZ)(f.xv,{variant:"small",color:"dimmest",children:"No quota left"}):(0,i.BX)(i.HY,{children:[(0,i.BX)(f.xv,{variant:"small",children:[t,"%"]}),(0,i.tZ)(f.xv,{variant:"small",color:"dimmest",children:"left"})]})}),(0,i.tZ)(p.G,{css:e.inline?Z.rightInline:Z.right,children:(0,i.tZ)(c.J,{css:Z.bar,tooltipHidden:!0,current:n,total:e.total,color:b.TV.blurpleDefault})})]})}var S=(0,h.X)({root:[b.l0.rowWithGap(4),b.l0.align.center],title:[{fontFamily:b.TV.fontWeightMedium},b.l0.color.foregroundDefault]});function T(e){return(0,i.BX)(p.G,{css:S.root,children:[e.icon,(0,i.tZ)(f.xv,{css:S.title,variant:"small",children:e.title})]})}var E=(0,h.X)({root:[b.l0.px(8),b.l0.py(12),b.l0.colWithGap(4)],content:[b.l0.colWithGap(0)],header:[b.l0.align.center,b.l0.rowWithGap(4),b.l0.color.foregroundDimmer],headerLeft:[b.l0.rowWithGap(4),b.l0.align.center,b.l0.flex.growAndShrink(1)],proPill:[b.l0.borderRadius(4),b.l0.height(16)]});function R(e){var n=e.selected,t=e.quota,r=e.hasAccessToAdvancedModel;return(0,i.BX)(p.G,{css:E.root,children:[(0,i.BX)(p.G,{css:E.content,children:[(0,i.BX)(p.G,{css:E.header,children:[(0,i.tZ)(p.G,{css:E.headerLeft,children:(0,i.tZ)(T,{icon:(0,i.tZ)(g.Z,{size:12}),title:"Basic"})}),n?(0,i.tZ)(v.Z,{}):null]}),(0,i.tZ)(f.xv,{variant:"small",color:"dimmer",children:"Faster. For common tasks like writing boilerplate code or reformatting data."})]}),r?(0,i.BX)(f.xv,{variant:"small",color:"dimmer",children:["Unlimited for ",k.we]}):(0,i.tZ)(C,{used:t.used,total:t.total})]})}function D(e){var n=e.hasAccessToAdvancedModel,t=e.selected,r=e.quota,o=e.onUpgrade;return(0,i.BX)(p.G,{css:E.root,children:[(0,i.tZ)(p.G,{css:E.content,children:(0,i.BX)(p.G,{css:E.header,children:[(0,i.BX)(p.G,{css:E.headerLeft,children:[(0,i.tZ)(T,{icon:(0,i.tZ)(y.Z,{size:12}),title:"Advanced"}),n?null:(0,i.tZ)(u.D,{css:E.proPill,text:k.we,color:b.TV.foregroundDimmer})]}),t?(0,i.tZ)(v.Z,{}):null]})}),(0,i.tZ)(f.xv,{variant:"small",color:"dimmer",children:"For complex code generation, editing, and explanation. Limited amount per week."}),n?(0,i.tZ)(C,{used:r.used,total:r.total}):(0,i.tZ)(a.zx,{size:"small",text:"Upgrade to Replit ".concat(k.we),colorway:"blurple",onClick:function(){return null==o?void 0:o()}})]})}var P=(0,h.X)({button:[b.l0.reset.button,b.l0.rowWithGap(4),b.l0.cursor.pointer,b.l0.align.center,b.l0.px(4),b.l0.py(2),l.gU.nofill,b.l0.color.foregroundDimmest,{"&:hover":b.l0.color.foregroundDefault}],header:[b.l0.p(4)],item:[b.l0.cursor.pointer,l.gU.listItem]}),_=["basic","advanced"];function A(e){var n=(0,w.L7)({items:_,selectedItem:e.selectedItem,onSelectedItemChange:function(n){n.selectedItem&&e.onChange(n.selectedItem)}}),t=(0,x.w)(),a=t.setTriggerEl,c=t.setPopoverEl,u=t.attributes,h=t.styles,v=e.userLimits,b=v.basicModelLimits,k=v.advancedModelLimits;return(0,i.BX)(p.G,{children:[(0,i.BX)(p.G,(0,o._)((0,r._)({tag:"button",css:P.button},n.getToggleButtonProps({refKey:"innerRef",ref:a})),{children:["basic"===n.selectedItem?(0,i.BX)(i.HY,{children:[(0,i.tZ)(g.Z,{size:12}),(0,i.tZ)(f.xv,{variant:"small",children:"Basic"})]}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(y.Z,{size:12}),(0,i.tZ)(f.xv,{variant:"small",children:"Advanced"})]}),(0,i.tZ)(m.Z,{rotate:n.isOpen?180:0,size:12})]})),(0,i.tZ)(p.G,(0,o._)((0,r._)({},n.getMenuProps({refKey:"innerRef"})),{children:n.isOpen?(0,i.tZ)(s.h,{children:(0,i.BX)(d.Tg,(0,o._)((0,r._)({elevated:!0,style:h,innerRef:c,css:x.L.popover},u),{children:[(0,i.tZ)(f.xv,{variant:"small",color:"dimmest",css:P.header,children:"Select a model"}),_.map(function(t,a){var c=n.highlightedIndex===a?{backgroundColor:l.vb.interactiveBackground}:void 0;return(0,i.tZ)(p.G,(0,o._)((0,r._)({css:P.item,style:c},n.getItemProps({refKey:"innerRef",item:t,index:a})),{children:"basic"===t?(0,i.tZ)(R,{quota:{used:b.usage,total:b.limit},selected:"basic"===e.selectedItem,hasAccessToAdvancedModel:e.hasAccessToAdvancedModel}):(0,i.tZ)(D,{quota:{used:k.usage,total:k.limit},selected:"advanced"===e.selectedItem,hasAccessToAdvancedModel:e.hasAccessToAdvancedModel})}),t)})]}))}):null}))]})}},87722:function(e,n,t){t.d(n,{hG:function(){return s}});var r=t(41733),o=t(21262),i=t(71440),a=t(58995);function l(){var e=(0,o._)(['\n  query ChatEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-chat-engine")\n      hasOverride: gate(feature: "flag-ghostwriter-chat-engine-override")\n    }\n  }\n']);return l=function(){return e},e}var c={},u=(0,i.Ps)(l());function s(e){var n=(0,r._)({},c,e);return a.a(u,n)}},75129:function(e,n,t){t.d(n,{v:function(){return s}});var r=t(66626),o=t(25632),i=t(45434),a=t(1228),l=t(87722),c=t(90719),u=t(4736);function s(){var e,n,t=(0,o.Gn)("chatEngine").preferences,s=(0,l.hG)().data,d=(0,r._)((0,c.Ni)(),1)[0],f=(0,u.ll)(),p=null==s?void 0:null===(e=s.currentUser)||void 0===e?void 0:e.hasOverride,h=null==t?void 0:t.chatEngine,g=null==s?void 0:null===(n=s.currentUser)||void 0===n?void 0:n.defaultEngine;return p&&h&&(0,i.uL)(h)?h:(0,i.uL)(g)?"advanced"===d&&f?i.hf.model:g:a.Fp}},51944:function(e,n,t){t.d(n,{Q:function(){return o},h:function(){return i}});var r=t(51051),o=r.Py.define(),i=r.Py.define()},38003:function(e,n,t){t.d(n,{X:function(){return nf}});var r,o=t(42516),i=t(41733),a=t(74985),l=t(74652),c=t(7444),u=t(26508),s=t(50199),d=t(93496),f=t(8279),p=t(37951),h=t(56596),g=t(93918),v=t(88936),m=t(29287),y=t(50959),b=t(27387),w=t(66626),x=t(96583),k=t(10981),Z=t(64461),C=t(90234),S=t(15859),T=t(63257);function E(e,n){for(var t=e.indexPath,r=n.indexPath,o=Math.min(t.length,r.length),i=0;i<o;i++){if(t[i]>r[i])return 1;if(t[i]<r[i])return -1}return t.length-r.length}function R(e){return e.map(function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label}).join(":")}function D(e,n){var t=[],r=!0,o=!1,i=void 0;try{for(var a,l=e.slice(n)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;"group"!==c.data.type&&t.push(c.data.label)}}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return(0,T._)(new Set(t))}var P=t(66368),_=t(71999),A=t(28999),L=(0,y.createContext)(void 0);function I(){var e=(0,y.useContext)(L);if(!e)throw Error("Expected store in context");return e}function q(e){var n=I();return(0,_.Dv)(e,{store:n})}function M(e){return(0,A.lV)((0,y.useCallback)(function(n){return n(e)},[e]),{store:I()})}var B=function(e){var n=I();return(0,_.b9)(e,{store:n})};function G(e){return(0,P.b)(e,I())}var W=function(e){return"item-"+e},F=(0,C.cn)(0),U=(0,C.cn)(0),X=(0,C.cn)(0),O=(0,C.cn)(function(e){return e(F)+e(U)+e(X)}),N=(0,C.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),H=(0,C.cn)(!0),z=(0,C.cn)(!1),j=(0,C.cn)(null),V=(0,C.cn)({}),K=(0,S.kv)(V,function(e){return!!e.openOnInput}),Y=(0,S.kv)(V,function(e){return!!e.autoFocus}),$=(0,S.kv)(V,function(e){return e.keyboardShortcut}),J=(0,S.kv)(V,function(e){return e.command}),Q=(0,S.kv)(V,function(e){return e.overscan}),ee=(0,S.kv)(V,function(e){return e.footer}),en=(0,S.kv)(V,function(e){return e.focusRef}),et=(0,S.kv)(V,function(e){var n;return null!==(n=e.fontSize)&&void 0!==n?n:14}),er=(0,S.kv)(V,function(e){return!!e.compact}),eo=(0,S.kv)(V,function(e){var n;return null!==(n=e.minItemHeight)&&void 0!==n?n:32}),ei=(0,C.cn)(function(e){return!e(K)}),ea=(0,S.kv)(V,function(e){return!!e.iconBreadcrumbs}),el=(0,C.cn)(null),ec=(0,C.cn)(function(e){return e(eh)>-1}),eu=(0,C.cn)(function(e){var n=e(N);return!n.isLoading&&0===n.rows.length}),es=(0,C.cn)({label:"",input:"",menu:""}),ed=(0,C.cn)(""),ef=(0,C.cn)(""),ep=(0,C.cn)(""),eh=(0,C.cn)(-1),eg=(0,C.cn)(function(e){var n=e(eh);return e(ev).findIndex(function(e){return"item"===e.type&&e.index===n})}),ev=(0,C.cn)(function(e){return e(N).rows}),em=(0,C.cn)(function(e){return e(N).items}),ey=(0,C.cn)(function(e){return e(em).length}),eb=(0,C.cn)(function(e){return e(eR).filter(function(e){return"context"===e.data.type&&!!e.match})}),ew=(0,C.cn)(function(e){return e(eb).length>0}),ex=(0,C.cn)(!1),ek=(0,C.cn)(null,function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(ex,!0),n(N,function(e){return(0,Z.Uy)(e,function(e){e.path=[e.path[0]]})}),e(eF).setPath(e(eR)),n(eh,-1),n(ed,""),n(ef,""),n(ep,""),e(K)&&n(H,!1),r.focus&&(null===(t=e(eM))||void 0===t||t.focus())}),eZ=(0,C.cn)(function(e){return e(N).placeholder}),eC=(0,C.cn)(function(e){return e(N).isLoading}),eS=(0,C.cn)(function(e){return e(N).path.length}),eT=(0,C.cn)(function(e){return e(ew)||!!e(ed)}),eE=(0,C.cn)(null,(r=(0,b._)(function(e,n,t,r){var o,i,a,l,c,u;function s(t){var r;n(eL,null!=t?t:"Something went wrong"),null===(r=e(eM))||void 0===r||r.focus()}return(0,x.Jh)(this,function(d){switch(d.label){case 0:if("group"===t.data.type)return[2];if(n(el,t),i=e(V),"context"===t.data.type)return n(eq,l=t.path),n(eh,-1),e(eF).setPath(l),null===(a=e(eM))||void 0===a||a.focus(),[2];switch(t.data.type){case"output":case"error":return n(ek),null===(c=i.onSelect)||void 0===c||c.call(i,t),[2]}n(z,!0),u=null,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,Promise.resolve(t.data.run(r.nativeEvent))];case 2:return u=d.sent(),[3,4];case 3:return d.sent(),n(z,!1),s(),[2];case 4:if(n(z,!1),(null==u?void 0:u.type)==="error")return s(u.message),[2];return n(ek),null===(o=i.onAction)||void 0===o||o.call(i),[2]}})}),function(e,n,t,o){return r.apply(this,arguments)})),eR=(0,C.cn)(function(e){return e(N).path}),eD=(0,C.cn)(function(e){return 1===e(eR).length}),eP=(0,C.cn)(null,function(e,n,t){var r=e(eR),o=r.indexOf(t);-1!==o&&(r=r.slice(0,o+1),n(eh,0),e(eF).setPath(r),n(ed,""))});function e_(e,n){return n.match.score-e.match.score}var eA=(0,C.cn)(null,function(e,n,t){var r,o=e(ep);if(o===e(ep)){var i=t.items.sort(e_),a=t.path.length?t.path[t.path.length-1]:null,l=function(e,n){var t=new Map;e.forEach(function(e){var n=e.path.slice(0,-1),r="section:"+R(n),o=t.get(r);if(o)o.items.push(e);else{var i=n[n.length-1],a=(null==i?void 0:i.data.type)==="group";t.set(r,{type:"section",path:n,score:e.match.score,items:[e],unlabeled:a,key:r})}});var r=(0,T._)(t.entries()).sort(function(e,t){var r=(0,w._)(e,2),o=r[0],i=r[1],a=(0,w._)(t,2),l=a[0],c=a[1];if(!n||!n.includes(o)&&!n.includes(l))return c.score-i.score;var u=n.indexOf(o),s=n.indexOf(l);return u>-1&&s>-1?u-s:-1===u?1:-1}),o={items:[],rows:[]},i=0;return r.forEach(function(e){var n=(0,w._)(e,2),t=n[0],r=n[1];o.rows.push({type:r.type,key:t,path:r.path,unlabeled:r.unlabeled}),r.items.forEach(function(e){o.items.push(e),o.rows.push({type:"item",item:e,index:i++})})}),o}(i,o?e(N).rows.filter(function(e){return"section"===e.type}).map(function(e){return e.key}):void 0),c=l.items,u=l.rows,s=null!==(r=null==a?void 0:a.data)&&void 0!==r?r:null,d=null==s?void 0:s.description;e(ea)&&(null==s?void 0:s.type)!=="group"&&(d=null==s?void 0:s.label),n(N,function(e){return{items:c,rows:u,isLoading:!!t.partial,path:t.path,placeholder:d||e.placeholder}})}}),eL=(0,C.cn)(null,function(e,n,t){n(j,t),n(N,function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}})}),eI=(0,C.cn)(null,function(e,n,t){n(ed,t),n(eh,t?0:-1),n(j,null),n(N,function(e){return(0,Z.Uy)(e,function(e){e.isLoading=!!t})}),e(K)&&n(H,!!t)}),eq=(0,C.cn)(null,function(e,n,t){n(N,function(e){return(0,Z.Uy)(e,function(e){e.items=[],e.rows=[],e.path=t})}),n(eI,""),n(ef,""),n(ep,"")}),eM=(0,C.cn)(null),eB=(0,C.cn)(null,function(e,n,t){var r=e(eh);if(!(r<0)){var o=e(em)[r];o&&n(eE,o,t)}}),eG=(0,C.cn)(null,function(e,n,t){var r=e(H),o=e(ey),i=e(eh);switch(t.key){case"ArrowDown":t.preventDefault();var a=i+1;n(eh,a<o?a:0),n(H,!0);return;case"ArrowUp":t.preventDefault(),n(eh,Math.max(-1,i-1));return;case"Home":t.preventDefault(),t.shiftKey?t.currentTarget.selectionStart=0:t.currentTarget.setSelectionRange(0,0);return;case"End":t.preventDefault();var l=t.currentTarget.value.length;t.shiftKey?t.currentTarget.selectionEnd=l:t.currentTarget.setSelectionRange(l,l);return;case"Escape":if(!e(ed)||(t.preventDefault(),n(eI,""),n(ef,""),e(ei)))return;n(H,!1);return;case"Enter":if(!r)return;t.preventDefault(),n(eB,t);return;case"PageUp":case"PageDown":if(!r)return;t.preventDefault();var c="PageUp"===t.key?-10:10;n(eh,function(e){return Math.max(Math.min(e+c,o-1),0)});return}}),eW=(0,C.cn)(null,function(e,n,t){var r=Array.isArray(t)?t:[t];e(ex)&&(r=[r[0]]);var o=e(ef);n(ep,o),e(eF).setPath(r,o)}),eF=(0,C.cn)({}),eU=(0,C.cn)(null,function(e,n){var t=e(eR),r=e(eb);if(r.pop()){var o=r.pop();if(!o){n(ek);return}var i=t.indexOf(o);t=t.slice(0,i+1),n(eh,0),n(eq,t),e(eF).setPath(t)}}),eX=t(38080),eO=t(9331),eN=t(1643),eH=(0,g.X)({root:[m.l0.reset.button,m.l0.viewStyle,m.l0.flex.row,m.l0.align.center,m.l0.borderRadius(0),m.l0.cursor.pointer,m.l0.color.foregroundDimmer,{gap:(0,eN.fP)(4),paddingLeft:(0,eN.fP)(4),paddingRight:(0,eN.fP)(4),"&:hover":{color:m.TV.foregroundDefault}}],icon:[m.l0.position.relative,(0,eN.D$)(16),{width:(0,eN.fP)(16),height:(0,eN.fP)(16)}],iconRight:[(0,eN.D$)(12),{width:(0,eN.fP)(12),height:(0,eN.fP)(12)}],text:[m.l0.truncate,m.l0.flex.shrink(1),{fontSize:"1em"}]}),ez=(0,y.memo)(function(){var e={iconOnly:q(ea),breadcrumbs:q(eb),onClick:B(eP)},n=e.breadcrumbs,t=e.iconOnly,r=e.onClick;return n.length?(0,a.tZ)(a.HY,{children:n.map(function(e,n){if(!e.data||!("label"in e.data))return null;var o=e.data,i=o.label,l=o.icon;return(0,a.BX)("button",{css:eH.root,onClick:function(){return r(e)},children:[(0,a.tZ)(h.G,{css:eH.icon,children:l}),t?null:(0,a.tZ)(h.G,{css:eH.text,children:i}),(0,a.tZ)(h.G,{css:eH.iconRight,children:(0,a.tZ)(eO.Z,{})})]},i+n)})}):null}),ej=t(43312),eV=t(58719),eK=(0,ej.iv)([m.l0.reset.button,m.l0.viewStyle,m.l0.center,m.l0.height("100%"),m.l0.cursor.pointer,m.l0.color.foregroundDimmest,{paddingLeft:(0,eN.fP)(4),paddingRight:(0,eN.fP)(4),"&:hover":{color:m.TV.foregroundDefault}},(0,eN.D$)(16)]);function eY(e){return(0,a.tZ)("button",{css:eK,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,a.tZ)(v.Z,{}):(0,a.tZ)(eV.Z,{})})}var e$=t(30509),eJ=t(47357),eQ=t(69119),e0=function(e){return Math.round(e.value/14*e.fontSize)},e1=[m.l0.position.absolute,m.l0.top(0),m.l0.left(0),m.l0.width("100%")],e2=(0,g.X)({item:[e1,{userSelect:"none",cursor:"pointer","&:hover > div":{backgroundColor:"var(".concat(d.dj.interactiveBackground,")")}}],divider:[e1,m.l0.justify.center,{padding:"0 ".concat((0,eN.fP)(8))}]}),e3=(0,y.memo)(function(e){var n,t,r,o,l,c,u,s,d=(n=e.index,t=B(eE),r=(0,y.useRef)(null),l="item"===(o=q((0,y.useMemo)(function(){return(0,S.kv)(ev,function(e){return e[n]})},[n]))).type?o.index:null,c=q((0,y.useMemo)(function(){return(0,C.cn)(function(e){return null!==l&&e(eh)===l})},[l])),u=(null==o?void 0:o.type)==="item"?function(e){return t(o.item,e)}:void 0,s="item"===o.type?{id:W(n),role:"option","aria-selected":c}:void 0,{row:o,active:c,ref:r,onClick:u,ariaAttrs:s}),f=d.row,p=d.active,g=d.onClick,v=d.ariaAttrs,m=d.ref;if(!f)return null;var b={height:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===f.type)return(0,a.tZ)(e7,{path:f.path,style:b,border:e.index>0});var w=f.item,x=w.data,k=w.match;if("group"===x.type)return null;var Z=k.render;if(Z&&"content"in Z&&Z.content)return(0,a.tZ)(h.G,(0,e$._)((0,i._)({innerRef:m,css:e2.item,style:b,onClick:g},v),{children:(0,a.tZ)(eX.Tg,{elevated:p,children:(0,y.cloneElement)(Z.content,{active:p})})}));var T=x.label,E=x.icon,R=x.dataCy,D=Z&&"ranges"in Z?Z.ranges:void 0;return(0,a.tZ)(h.G,(0,e$._)((0,i._)({innerRef:m,css:e2.item,style:b,onClick:g,dataCy:R},v),{children:(0,a.tZ)(e5,{active:p,icon:E,text:T,highlight:D,description:x.description,shortcut:x.keyboardShortcut,hasChildren:"context"===w.data.type})}))}),e9=[{padding:(0,eN.fP)(8)}],e4=(0,g.X)({root:[e9,m.l0.align.center,m.l0.flex.row,m.l0.height("100%"),{gap:(0,eN.fP)(8),userSelect:"none"}],iconText:[m.l0.align.center,m.l0.flex.row,m.l0.maxWidth("100%"),{gap:(0,eN.fP)(8)}],description:[m.l0.truncate,m.l0.flex.growAndShrink(1),{fontSize:"0.9em"}],right:[m.l0.flex.row,m.l0.align.center,{gap:(0,eN.fP)(4),justifySelf:"end",marginLeft:"auto"}],shortcut:[{"& > div > div":{fontSize:"0.8em",paddingLeft:(0,eN.fP)(4),paddingRight:(0,eN.fP)(4),paddingTop:(0,eN.fP)(2),paddingBottom:(0,eN.fP)(2)}}],chevron:(0,eN.D$)(12)});function e5(e){return(0,a.BX)(eX.Tg,{elevated:e.active,css:e4.root,children:[(0,a.BX)(h.G,{css:e4.iconText,children:[(0,a.tZ)(h.G,{className:"icon",css:e6.root,children:e.icon}),(0,a.tZ)(eQ.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,a.tZ)(h.G,{css:e4.description,style:{color:e.active?m.TV.foregroundDimmer:m.TV.foregroundDimmest},children:e.description}):null,(0,a.BX)(h.G,{css:e4.right,children:[e.shortcut?(0,a.tZ)(h.G,{css:e4.shortcut,children:(0,a.tZ)(l.bM,{keyCombo:e.shortcut,small:!0})}):null,e.hasChildren?(0,a.tZ)(h.G,{css:e4.chevron,children:(0,a.tZ)(eO.Z,{size:12})}):null]})]})}var e6=(0,g.X)({root:[m.l0.position.relative,(0,eN.D$)(16),{width:(0,eN.fP)(16),height:(0,eN.fP)(16)}]}),e8=(0,g.X)({borderHeaderWrap:[{userSelect:"none",padding:[8,8,4,8].map(eN.fP).join(" ")},e1,m.l0.colWithGap(0),m.l0.justify.spaceBetween],borderWrap:[{userSelect:"none",paddingLeft:(0,eN.fP)(8),paddingRight:(0,eN.fP)(8)},e1,m.l0.justify.center],headerWrap:[{userSelect:"none",paddingLeft:(0,eN.fP)(8),paddingRight:(0,eN.fP)(8),paddingBottom:(0,eN.fP)(4)},e1,m.l0.justify.end],header:[{userSelect:"none"},m.l0.align.center,m.l0.flex.row,{gap:(0,eN.fP)(4)},(0,eN.D$)(12)],text:[{userSelect:"none"},m.l0.flex.shrink(1),m.l0.color.foregroundDimmest,m.l0.truncate,{fontSize:"0.9em"}],border:[m.l0.height(1),m.l0.width("100%")]}),e7=(0,y.memo)(function(e){var n=q(eS),t=D(e.path,n),r=(0,a.tZ)(eX.Tg,{elevated:!0,css:e8.border}),o=0===t.length;if(e.border&&o)return(0,a.tZ)(h.G,{css:e8.borderWrap,style:e.style,children:r});var i=(0,a.tZ)(h.G,{css:e8.header,children:t.map(function(e,n){return(0,a.BX)(y.Fragment,{children:[n>0?(0,a.tZ)(eO.Z,{color:m.TV.foregroundDimmest}):null,(0,a.tZ)(h.G,{css:e8.text,children:e})]},e+n)})});return e.border||o?(0,a.BX)(h.G,{css:e8.borderHeaderWrap,style:e.style,children:[r,i]}):(0,a.tZ)(h.G,{css:e8.headerWrap,style:e.style,children:i})}),ne=(0,g.X)({root:[m.l0.flex.growAndShrink(1),m.l0.overflow("hidden"),{paddingTop:eN.Cn.menuPaddingTop}],scrollParent:[m.l0.height("100%"),m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1)]}),nn=(0,y.memo)(function(e){var n,t,r,o,l=(n=q(ev),t=q(H),{rows:n,isOpen:t,scrollRef:(0,y.useRef)(null),currentPathIndex:q(eS),ariaAttrs:{id:(r=q(es)).menu,"aria-labelledby":r.label,role:"listbox"}}),c=l.rows,u=l.isOpen,s=l.scrollRef,d=l.currentPathIndex,f=l.ariaAttrs,p=B(U),g=q(et),v=q(er),b=(0,eJ.MG)({count:c.length,overscan:null!==(o=e.overscan)&&void 0!==o?o:1,getScrollElement:function(){return s.current},getItemKey:function(e){var n=c[e];return n?"section"===n.type?n.key:R(n.item.path):""},estimateSize:function(n){var t=c[n];return t?function(e){var n,t=e.row,r=e.currentPathIndex,o=e.compact,i=e.isFirst,a=e.fontSize,l=e.minItemHeight;if("section"===t.type){var c=D(t.path,r).length?24:0;if(i){var u=o?c+e0({fontSize:a,value:6}):c;return 0===c?u:e0({fontSize:a,value:c})}return c+e0({fontSize:a,value:16})}var s=t.item.match.render;return s&&"content"in s?Math.max(e0({fontSize:a,value:null!==(n=s.height)&&void 0!==n?n:32}),l):Math.max(e0({fontSize:a,value:32}),l)}({fontSize:g,row:t,currentPathIndex:d,compact:v,isFirst:0===n,minItemHeight:e.minItemHeight}):0},onChange:function(e){p(e.getTotalSize())}}),w={borderRadius:e.hasFooter?void 0:m.TV.space8,display:u?void 0:"none"},x=b.scrollToIndex,k=b.getVirtualItems,Z=q(eg);return(0,y.useEffect)(function(){var e=Z;!(e<0)&&(1===e&&(e=0),k()[e]&&x(e,{behavior:"smooth"}))},[x,k,Z]),(0,a.tZ)(h.G,(0,e$._)((0,i._)({css:ne.root},f),{style:w,children:(0,a.tZ)(h.G,{innerRef:s,css:ne.scrollParent,children:(0,a.tZ)(h.G,{style:{height:"".concat(b.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:u?b.getVirtualItems().map(function(e){return(0,a.tZ)(e3,{index:e.index,height:e.size,y:e.start},e.key)}):null})})}))}),nt=(0,g.X)({root:[m.l0.flex.shrink(1),m.l0.height("100%"),{fontSize:eN.Cn.fontSize}],footer:{paddingTop:(0,eN.fP)(8)},keyComboBlocks:{paddingRight:(0,eN.fP)(8)},menuWrap:[m.l0.flex.shrink(1)],row:[m.l0.position.absolute,m.l0.top(0),m.l0.left(0),m.l0.width("100%")],menu:[m.l0.flex.shrink(1),m.l0.overflow("auto")],running:[m.l0.center,m.l0.flex.growAndShrink(1)],error:{padding:(0,eN.fP)(8)}}),nr=(0,g.X)({root:[m.l0.viewStyle,m.l0.flex.growAndShrink(1),m.l0.height("100%"),{fontSize:"1em",padding:"0 ".concat((0,eN.fP)(8)),backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:m.TV.foregroundDimmest},"&:hover::placeholder":{color:m.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:m.TV.foregroundDimmest}}]}),no=(0,y.memo)(function(e){var n,t,r,o,l,c,u,s,d,f,p,h,g,v=(n=B(eM),t=q(eZ),s=(u=(0,w._)((r=q(ed),o=B(eI),l=B(ef),c=(0,w._)((0,y.useTransition)(),2)[1],[r,(0,y.useCallback)(function(e){var n="string"==typeof e?e:e.currentTarget.value;o(n),c(function(){return l(n)})},[o,c,l])]),2))[0],d=u[1],f=B(eh),p=q(eh),h=q(es),g=q(H),{onBlur:function(){return f(-1)},onChange:d,placeholder:t,value:s,ref:n,disabled:q(z),ariaAttrs:{id:h.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":p>-1?W(p):"","aria-controls":h.menu,"aria-expanded":g,"aria-labelledby":h.label}});return(0,a.tZ)("input",(0,i._)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:nr.root,placeholder:v.placeholder,value:v.value,onChange:v.onChange,ref:v.ref,onBlur:v.onBlur,disabled:v.disabled,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off"},v.ariaAttrs))}),ni=[d.gU.filled,m.l0.viewStyle,m.l0.flex.row,m.l0.align.center,m.l0.flex.growAndShrink(1),{height:(0,eN.fP)(32),borderRadius:(0,eN.fP)(4)}],na=(0,g.X)({container:[{padding:(0,eN.fP)(8),"& > div > button + input":{paddingLeft:0}},m.l0.pb(0)],surface:ni,surfaceRunning:[ni,f.p.foregroundPulse()]}),nl=[d.gU.nofill,m.l0.flex.row,m.l0.align.center,m.l0.flex.growAndShrink(1),{height:(0,eN.fP)(36),borderRadius:(0,eN.fP)(8),borderBottomLeftRadius:0,borderBottomRightRadius:0}],nc=(0,g.X)({container:[{"& > div > button + input":{paddingLeft:0}},m.l0.pb(0)],surface:nl,surfaceRunning:[nl,f.p.foregroundPulse()],border:[m.l0.height(1)]});function nu(e){var n=q(z),t=B(F),r=(0,u.Z)(function(e){return t(e.height)}),o=q(er),i=o?nc:na;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(h.G,{css:i.container,innerRef:r,children:(0,a.tZ)(h.G,{css:n?i.surfaceRunning:i.surface,children:e.children})}),o?(0,a.tZ)(eX.Tg,{elevated:!0,css:nc.border}):null]})}var ns=(0,y.memo)(function(e){var n=q(eT),t=q(eC);return n?(0,a.tZ)(eY,{onClick:e.onClick,isLoading:t}):null}),nd=(0,y.memo)(function(){var e,n,t,r,i,d,f,g,b,w,x,k,Z,C,S,T,E,R,D,P,_,A,L,I=(r=q(H),i=q(eT),d=q(ed),f=q(eu),g=q(z),b=q(j),w=B(eG),x=q(ec),k=B(ek),Z=M(eM),C=q(eF),S=q(J),T=G(eD),E=G(ef),R=B(ep),D=B(eW),P=(0,c.Z)(S),(0,y.useEffect)(function(){T.current&&D(S)},[C,T,S,E,D]),(0,y.useEffect)(function(){return T.subscribe(function(e){e&&D(P.current)})},[C,E,T,D,P]),(0,y.useEffect)(function(){var e=function(e){R(e),C.search(e)};return e(E.current),E.subscribe(e)},[C,E,T,R,P]),_=(0,s.Z)(function(){return function(){var e;return null===(e=Z())||void 0===e?void 0:e.focus()}},[Z]),A=B(eU),{focus:_,onKeyDown:(0,s.Z)(function(){return function(e){if("Backspace"===e.key&&!e.currentTarget.value){A();return}return w(e)}},[w,A]),inputValue:d,isOpen:r,isClearable:i,noResults:f,hasHighlightedItem:x,isRunning:g,actionError:b,clearCommands:k}),W=I.isOpen,U=I.focus,N=I.clearCommands,K=I.isClearable,ei=I.onKeyDown,ea=I.inputValue,el=I.noResults,eh=I.hasHighlightedItem,eg=I.isRunning,ev=I.actionError,em=(0,c.Z)({inputValue:ea,noResults:el,hasHighlightedItem:eh});e=M(V),n=q(F),t=G(O),(0,y.useEffect)(function(){var r=function(n){var t=e().onTotalHeightChange;t&&(0===o&&(o=n),t({initial:o,current:n}))};if(0!==n){var o=0;return r(t.current),t.subscribe(r)}},[n,e,t]);var ey=q(Y),eb=q($),ew=q(Q),ex=q(ee),eZ=q(en),eC=q(eo),eS=M(V),eE=(0,s.Z)(function(){return function(e){var n,t=em.current,r=eS();if(null===(n=r.onKeyDown)||void 0===n||n.call(r,e,{inputValue:t.inputValue,noResults:t.noResults,hasHighlightedItem:t.hasHighlightedItem}),!e.defaultPrevented){if("Enter"===e.key&&t.inputValue&&t.noResults&&r.onSubmit){r.onSubmit(t.inputValue);return}ei(e)}}},[em,ei,eS]);(0,y.useEffect)(function(){eZ&&(eZ.current=U)},[U,eZ]);var eR=q(es),eP=B(X),e_=(0,u.Z)(function(e){return eP(e.height)}),eA=q(et),eL=q(er);return(0,a.BX)(h.G,{css:nt.root,style:(L={},(0,o._)(L,eN.Dq.fontSize,eA+"px"),(0,o._)(L,eN.Dq.menuPaddingTop,eL?"0px":(0,eN.fP)(8)),L),children:[(0,a.tZ)("label",{id:eR.label,htmlFor:eR.input,css:m.l0.visuallyHidden,children:"Commands"}),(0,a.BX)(nu,{children:[(0,a.tZ)(ez,{}),(0,a.tZ)(no,{autoFocus:ey,onKeyDown:eE}),(0,a.tZ)(ns,{onClick:function(){return N({focus:!0})}}),eb&&!K?(0,a.tZ)(h.G,{css:nt.keyComboBlocks,children:(0,a.tZ)(l.bM,{keyCombo:eb,small:!0})}):null]}),ev?(0,a.tZ)(h.G,{css:nt.error,children:(0,a.tZ)(p.E,{colorway:"warning",text:ev})}):null,W&&!eg?(0,a.BX)(a.HY,{children:[(0,a.tZ)(nn,{minItemHeight:eC,overscan:ew,hasFooter:!!ex}),ex?(0,a.tZ)(h.G,{innerRef:e_,css:nt.footer,children:ex}):null]}):null,eg?(0,a.tZ)(h.G,{css:nt.running,children:(0,a.tZ)(v.Z,{size:24})}):null]})});function nf(e){var n,t,r,o=(t={label:(n=(0,k.U)())("label"),input:n("input"),menu:n("menu")},r=(0,w._)((0,y.useState)(function(){var n,r,o=(0,C.MT)();o.set(es,t),o.set(V,e),o.set(H,!e.openOnInput),o.set(eF,function(e){var n=e.initialPath,t=e.partialUpdateTimeout,r=e.onUpdate,o=n,i=null,a=0;function l(e){i&&clearTimeout(i);var n=++a,l=0,c=[],u=o[o.length-1];if(!u.commands){r({items:c,path:o});return}void 0!==t&&(i=setTimeout(function(){c.length&&r({items:(0,T._)(c).sort(E),partial:!0,path:o})},t)),function t(u,s,d){if(l++,!u.commands)throw Error("Expected commands");var f=(0,T._)(s).concat([u]),p=f.length===o.length;Promise.resolve(u.commands({active:p,search:e,path:f})).then(function(u){if(n!==a){i&&clearTimeout(i);return}l--,u.forEach(function(n,r){var o=(0,T._)(f).concat([n]),i=(0,T._)(d).concat([r]),a=n.match?n.match({search:e,data:n.data,path:o,active:p}):null;a&&c.push({path:o,data:n.data,match:a,indexPath:i}),n.commands&&t(n,f,i)}),l>0||(i&&clearTimeout(i),r({items:(0,T._)(c).sort(E),path:o}))})}(u,o.slice(0,o.length-1),[])}return{search:l,setPath:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";o=e,l(n)},getPath:function(){return o}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:30,onUpdate:function(e){return o.set(eA,e)}}));var i=Array.isArray(e.command)?e.command[0]:e.command,a=null!==(r=null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.description)&&void 0!==r?r:null;return a&&o.set(N,function(e){return(0,Z.Uy)(e,function(e){e.placeholder=a})}),o}),1)[0],(0,y.useEffect)(function(){r.set(V,e)},[r,e]),r);return(0,a.tZ)(L.Provider,{value:o,children:(0,a.tZ)(nd,{})})}},1643:function(e,n,t){t.d(n,{Cn:function(){return i},D$:function(){return c},Dq:function(){return o},fP:function(){return l}});var r=(0,t(91608).$)(["fontSize","menuPaddingTop"]),o=r.cssVars,i=r.styleTokens,a=function(e){return Math.round(100*e)/100},l=function(e){return a(e/14)+"em"},c=function(e){var n=a(e/14)+"em";return{"&& svg":{minWidth:n,minHeight:n,width:n,height:n}}}},45726:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(66626),o=t(74985),i=t(1498),a=t(18836),l=t(74833),c=t(56596),u=t(29287),s=t(50959),d=(0,t(93918).X)({styles0:[u.l0.colWithGap(24)],styles1:[u.l0.color.accentNegativeStronger],styles2:[u.l0.rowWithGap(12),u.l0.justify.end]});function f(e){var n=e.prompt,t=e.desc,u=e.type,f=e.placeholder,p=e.confirmText,h=e.loading,g=e.errorMessage,v=e.onCancel,m=e.onConfirm,y=e.isDanger,b=e.buttonIcon,w=(0,r._)((0,s.useState)(),2),x=w[0],k=w[1];return(0,o.BX)(c.G,{css:d.styles0,children:[(0,o.tZ)(l.h4,{variant:"headerDefault",level:2,children:n}),(0,o.tZ)(l.xv,{children:t}),(0,o.tZ)(a.II,{type:u,value:x,placeholder:f,autoFocus:!0,onChange:function(e){return k(e.target.value)}}),g?(0,o.tZ)(l.xv,{css:d.styles1,multiline:!1,children:g}):null,(0,o.BX)(c.G,{css:d.styles2,children:[(0,o.tZ)(i.zx,{disabled:h,onClick:v,text:"Cancel"}),(0,o.tZ)(i.zx,{colorway:y?"negative":"primary",disabled:h,onClick:function(){return x&&m(x)},text:p||"Ok",iconLeft:b,dataCy:"prompt-confirm-button"})]})]})}},75245:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(66626),o=t(50959);function i(e){var n=(0,r._)((0,o.useState)(!1),2),t=n[0],i=n[1],a=(0,o.useRef)(0);return[t,(0,o.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),a.current++,i(!0)},onDragLeave:function(e){e.preventDefault(),a.current--,0===a.current&&i(!1)},onDrop:function(n){n.preventDefault(),a.current=0,i(!1),n.persist();var t,r,o=Array.from(null!==(r=null==n?void 0:null===(t=n.dataTransfer)||void 0===t?void 0:t.files)&&void 0!==r?r:[]);if(0===o.length){e(null);return}e(o)},onDragOver:function(e){e.preventDefault()}}},[e])]}},62624:function(e,n,t){function r(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function o(){return!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)}t.d(n,{Z:function(){return r},y:function(){return o}})},1228:function(e,n,t){t.d(n,{Fp:function(){return r},Fv:function(){return a},HH:function(){return i},hI:function(){return o}});var r="gpt-3.5-turbo-0613",o=["package.json","package-lock.json","yarn.lock","poetry.lock","package.json","package-lock.json",".replit","replit.nix","pyproject.toml",".breakpoints"],i=[".md",".yml",".yaml",".json",".toml",".out",".pkl",".bin",".txt",".csv",".log",".zip",".tar",".gz"],a=["node_modules",".config","venv",".next",".git"]},10009:function(e,n,t){t.d(n,{Z:function(){return r}});function r(e){var n=e.length;if(0===n)return!1;var t=0,r=Math.min(n,512);if(n>=3&&239===e[0]&&187===e[1]&&191===e[2]||n>=4&&0===e[0]&&0===e[1]&&254===e[2]&&255===e[3]||n>=4&&255===e[0]&&254===e[1]&&0===e[2]&&0===e[3]||n>=4&&132===e[0]&&49===e[1]&&149===e[2]&&51===e[3])return!1;if(r>=5&&"%PDF-"===e.slice(0,5).toString())return!0;if(n>=2&&254===e[0]&&255===e[1]||n>=2&&255===e[0]&&254===e[1])return!1;for(var o=0;o<r;o++){if(0===e[o])return!0;if((e[o]<7||e[o]>14)&&(e[o]<32||e[o]>127)){if(e[o]>193&&e[o]<224&&o+1<r){if(e[++o]>127&&e[o]<192)continue}else if(e[o]>223&&e[o]<240&&o+2<r&&e[++o]>127&&e[o]<192&&e[o+1]>127&&e[o+1]<192){o++;continue}if(t++,o>=32&&100*t/r>10)return!0}}return 100*t/r>10}},82960:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(19659),o=t(1228);function i(e){var n=(0,r.r6)(e),t=o.hI.some(function(n){return e.endsWith(n)}),i=o.HH.some(function(n){return e.endsWith(n)}),a=o.Fv.some(function(n){return e.split("/").some(function(e){return e.includes(n)})});return!n||t||i||a}},95683:function(e,n,t){t.d(n,{S:function(){return l}});var r=t(19659),o={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",go:"go"},i={rs:"rust",lsp:"lisp",sh:"bash",cpp:"c++",hs:"haskell",go:"go",rb:"ruby",md:"markdown"},a={lua:"lua",hs:"haskell",lhs:"haskell",jl:"julia",lisp:"common-lisp",ml:"ocaml",mli:"ocaml",sol:"solidity",scm:"scheme",ss:"scheme",zig:"zig",rkt:"racket",d:"d",scala:"scala",sc:"scala",swift:"swift"};function l(e){var n=(0,r.r6)(e);return Object.prototype.hasOwnProperty.call(o,n)?o[n]:Object.prototype.hasOwnProperty.call(i,n)?i[n]:Object.prototype.hasOwnProperty.call(a,n)?a[n]:n}},62582:function(e,n){n.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true"}},917:function(e,n,t){var r,o;t.d(n,{y:function(){return r}}),(o=r||(r={})).Welcome="Welcome",o.Editor="Editor",o.Examples="Examples",o.Run="Run",o.Output="Output",o.Sidepane="Sidepane",o.Share="Share"},28099:function(e,n,t){t.d(n,{Z:function(){return L},y:function(){return D}});var r=t(41733),o=t(30509),i=t(66626),a=t(74985),l=t(43312),c=t(14819),u=t(76588),s=t(75245),d=t(85805),f=t(43973),p=t(1498),h=t(15146),g=t(49344),v=t(37951),m=t(74833),y=t(56596),b=t(66061),w=t(27187),x=t(52682),k=t(6620),Z=t(20573),C=t(29287),S=t(50959),T=t(88205),E=t(23855),R=(0,l.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function D(e){var n=e.src,t=e.alt;return(0,a.BX)(y.G,{css:[R,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,a.tZ)(u.Z,{objectFit:"cover",layout:"fill",src:n,alt:t}),(0,a.tZ)(y.G,{css:[R,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}function P(e){var n=e.onClick;return(0,a.tZ)(y.G,{dataCy:"run-button",onClick:n,css:[R,C.l0.center,{":hover > svg":{transform:"scale(1.2)"},"> svg":{transition:"transform 200ms",width:64,height:"auto",cursor:"pointer",filter:C.TV.shadowDefault}}],children:(0,a.tZ)(w.Z,{color:C.TV.white})})}function _(e){var n=e.isPublished,t=e.onChangeClick,r=e.onRemoveClick,o=(0,i._)((0,S.useState)(!1),2),l=o[0],u=o[1];return(0,a.BX)(y.G,{css:[C.l0.rowWithGap(8),C.l0.align.center],children:[(0,a.tZ)(p.zx,{onClick:t,text:"Change image"}),n?(0,a.tZ)(h.hU,{alt:"Cannot remove cover image of a published Repl",disabled:!0,colorway:"negative",children:(0,a.tZ)(x.Z,{})}):null,n?null:(0,a.tZ)(y.G,{children:(0,a.tZ)(h.hU,{alt:"Remove Image",colorway:"negative",onClick:function(){u(!0)},children:(0,a.tZ)(x.Z,{})})}),(0,a.tZ)(g.u,{isOpen:l,onRequestClose:function(){return u(!1)},children:(0,a.tZ)(c.Z,{confirmLabel:"Yes, remove this image",title:"Remove image",isDestructive:!0,onConfirm:function(){r(),u(!1)},onCancel:function(){return u(!1)},children:"This will remove your Repl’s cover image. You can always add one back at any time."})})]})}function A(e){var n=e.onClick,t=e.isActive;return(0,a.BX)(y.G,{css:[C.l0.colWithGap(16),C.l0.center],children:[(0,a.BX)(y.G,{css:[C.l0.colWithGap(8),C.l0.center],children:[(0,a.tZ)(y.G,{css:[{"> svg":{width:44,height:"auto"}},t&&{color:C.TV.accentPrimaryDefault}],children:(0,a.tZ)(k.Z,{})}),(0,a.tZ)(m.xv,{multiline:!1,children:"Drag and drop a cover image"})]}),(0,a.tZ)(y.G,{children:(0,a.tZ)(p.zx,{onClick:n,iconLeft:(0,a.tZ)(b.Z,{}),colorway:"primary",text:"Or select a file"})})]})}function L(e){var n=e.onClick,t=e.repl,l=(0,S.useRef)(null),c=(0,i._)((0,S.useState)(null),2),u=c[0],p=c[1],h=(0,i._)((0,S.useState)(t.imageUrl),2),g=h[0],m=h[1],b=(0,d.Z)({onUpload:function(e){var n=e.url;w({variables:{input:{id:t.id,imageUrl:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,o._)((0,r._)({},t),{imageUrl:n})}}})},onUploadPreview:function(e){m(e.dataUrl)},onError:function(e){p(e.message)}}),w=(0,i._)((0,E.wP)({onCompleted:function(e){p(null),m(e.updateRepl.repl.imageUrl)}}),1)[0],x=t.currentUserPermissions.changeImageUrl;function k(e){if(null!==e&&0!==e.length){var n=e.find(function(e){return e.type.startsWith("image/")});if(!n){p("Expected an image file");return}p(null),b.uploadImage(n,T.N.ReplCoverImage)}}var R=(0,i._)((0,s.Z)(k),2),L=R[0],I=R[1],q=!g&&x;return(0,S.useEffect)(function(){m(t.imageUrl)},[t.id]),(0,a.BX)(y.G,(0,o._)((0,r._)({css:[C.l0.center,C.l0.flex.growAndShrink(1),!q&&{backgroundColor:C.TV.black},{borderBottomLeftRadius:8,borderBottomRightRadius:8,position:"relative",":hover .image-controls":{opacity:1}}]},I),{children:[g?(0,a.tZ)(D,{src:g,alt:t.title}):null,q?null:(0,a.tZ)(P,{onClick:n}),g&&x?(0,a.BX)(y.G,{className:"image-controls",css:[{position:"absolute",top:C.TV.space8,right:C.TV.space8,opacity:0,".is-touch-device &":{opacity:1}}],children:[(0,a.tZ)(_,{onChangeClick:function(){var e;null===(e=l.current)||void 0===e||e.click()},onRemoveClick:function(){w({variables:{input:{id:t.id,imageUrl:null}}})},isPublished:!!t.lastPublishedAt}),u?(0,a.tZ)("div",{className:"error",children:u}):null]}):null,q?(0,a.BX)(y.G,{css:C.l0.colWithGap(16),children:[(0,a.tZ)(A,{isActive:L,onClick:function(){var e;null===(e=l.current)||void 0===e||e.click()}}),u?(0,a.tZ)(v.E,{colorway:"negative",icon:(0,a.tZ)(Z.Z,{}),text:u}):null]}):null,x?(0,a.tZ)("input",{css:{width:.1,height:.1,opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},ref:l,accept:f.W9.join(","),type:"file",onChange:function(e){var n=e.target,t=n.validity,r=n.files;t.valid&&k(r?Array.from(r):null)}}):null]}))}},3630:function(e,n,t){t.d(n,{J:function(){return m}});var r=t(41733),o=t(30509),i=t(98924),a=t(74985),l=t(43312),c=t(48796),u=t(93918),s=t(93496),d=t(8279),f=t(29287),p=t(30983),h=t(56596),g=(0,l.F4)("from{opacity:0}to{opacity:1}"),v=(0,u.X)({self:[f.l0.flex.row,f.l0.flex.growAndShrink(1),f.l0.height(f.TV.space12),f.l0.borderRadius(16),f.l0.position.relative,s.gU.filledAndOutlined],progressWrapper:[f.l0.flex.row,f.l0.flex.growAndShrink(1),f.l0.height("100%"),f.l0.width("100%"),f.l0.borderRadius(16),f.l0.overflow("clip"),f.l0.position.relative],progress:[f.l0.position.relative,f.l0.width("100%"),f.l0.height("100%"),{top:0,left:0}],loading:d.p.backgroundPulse(),smoke:[f.l0.width("100%"),f.l0.height("500%"),f.l0.position.absolute,f.l0.left("50%"),f.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(g," 120ms forwards ease-out alternate")}});function m(e){var n,t=e.total,u=e.tooltip,s=e.className,d=e.disabled,f=void 0!==d&&d,g=e.smoke,m=void 0!==g&&g,b=e.loading,w=void 0!==b&&b,x=e.tooltipHidden,k=(0,i._)(e,["total","tooltip","className","disabled","smoke","loading","tooltipHidden"]),Z=!(0,c.T)(),C=null;return u?C=u:"current"in k?C="".concat(k.current||"0","/").concat(t):"data"in k&&(C=null===(n=k.data)||void 0===n?void 0:n.map(function(e){var n=e.current;return"".concat(n||"0","/").concat(t)}).join(" | ")),(0,a.tZ)(p.u,{placement:"top",tooltip:C,maxWidth:280,isDisabled:w||void 0!==x&&x,children:function(e,n){var i,c;return w?i=null:"current"in k&&k.current?i=(0,a.tZ)(y,{total:t,disabled:f,current:k.current,color:k.color}):"data"in k&&(i=null===(c=k.data)||void 0===c?void 0:c.map(function(e,n){var i;return(0,l.az)(y,(0,o._)((0,r._)({},e),{key:"measure-bar-".concat(n),total:t,disabled:f,isLast:n+1===(null===(i=k.data)||void 0===i?void 0:i.length)}))})),(0,l.az)(h.G,(0,o._)((0,r._)({},e),{css:[v.self,v.fadeInAnim,w&&v.loading],className:s,innerRef:n,onClick:void 0,key:w?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group",children:[(0,a.tZ)(h.G,{css:v.progressWrapper,children:i},"measureBarProgress"),Z?(0,a.tZ)("img",{src:"/public/images/smoke.gif",alt:"",style:{opacity:m?void 0:0},css:v.smoke},"measureBarSmoke"):null]}))}})}function y(e){var n=e.current,t=e.total,o=e.color,i=void 0===o?f.TV.accentPrimaryDefault:o,l=e.disabled,c=e.isLast,u=(0,r._)({backgroundColor:void 0!==l&&l?f.TV.outlineDefault:i,width:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===n||0===e?0:Math.max(0,Math.min(100,e/n*100))}(n,t)+"%"},void 0!==c&&c?{borderTopRightRadius:f.TV.borderRadiusRound,borderBottomRightRadius:f.TV.borderRadiusRound}:{});return(0,a.tZ)(h.G,{css:v.progress,style:u,role:"meter","aria-label":"".concat(n," out of ").concat(t),"aria-valuemin":0,"aria-valuenow":n,"aria-valuemax":t})}},37770:function(e,n,t){t.d(n,{T:function(){return s}});var r=t(41733),o=t(30509),i=t(98924),a=t(74985);t(50959);var l=t(56596),c=t(23291),u=l.K.button;function s(e){var n=e.iconLeft,t=e.iconRight,l=e.text,s=e.innerRef,d=e.colorway,f=(0,i._)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.BX)(u,(0,o._)((0,r._)({ref:s},f),{css:[(0,c.E)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!n,iconRight:!!t}),{color:"inherit"}],children:[n,(0,a.tZ)("span",{children:l}),t]}))}},72067:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(66626),o=t(50959),i={isConnecting:!0,channel:null,context:null};function a(e){var n=e.container,t=e.service,a=e.name,l=e.skip,c=void 0!==l&&l,u=(0,r._)((0,o.useState)(i),2),s=u[0],d=u[1];return(0,o.useEffect)(function(){d(i);var e=!1,r=n.openChannel({service:t,name:a,skip:function(){return c}},function(n){if(!e)return d({context:n.context,channel:n.channel,isConnecting:!1}),function(n){e||d({isConnecting:n.willReconnect,channel:null,context:null})}});return function(){e=!0,r()}},[n,t,a,c]),s}},17867:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(66626),o=t(50959);function i(e){var n=(0,r._)((0,o.useState)(e.getConnectionState()),2),t=n[0],i=n[1];return(0,o.useEffect)(function(){return e.onConnectionStateChanged(i)},[e]),t}},86612:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(66626),o=t(17867),i=t(50959),a=t(82481);function l(e){var n=(0,o.Z)(e),t=(0,r._)((0,i.useState)(null),2),l=t[0],c=t[1];return(0,i.useEffect)(function(){var n=e.getDotdevUrl();if(n){var t=(0,a.bR)();if(!t||t.dotDev){c(n);return}c(n.replace(/.replit.dev$/,".repl.co"))}},[e,n]),l}},37463:function(e,n,t){t.d(n,{bg:function(){return l},dF:function(){return c},r4:function(){return u}});var r=t(16643),o=t(54916),i=t(50959),a=t(35375);function l(){var e=(0,o.Z)().ports,n=(0,r.Z)(e.portsState);return(0,i.useMemo)(function(){return n?n.filter(function(e){return e.isOpen&&e.configuration.type===a.DL.FORWARDED}):[]},[n])}function c(e){return u((0,o.Z)().ports,e)}function u(e,n){var t=(0,r.Z)(e.portsState);return(0,i.useMemo)(function(){return n&&t?t.filter(function(e){var t;return null!==(t=e.isOpen&&(null==n?void 0:n.endsWith(e.processInfo.cgroup)))&&void 0!==t&&t}):[]},[t,n])}},26851:function(e,n,t){t.d(n,{K:function(){return l}});var r=t(41733),o=t(25425),i=t(50959),a=t(54916);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,a.Z)().userEvents,t=(0,o.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1});return(0,i.useCallback)(function(o,i){t&&n.emit(o,(0,r._)({},e,i))},[n,e,t])}},14818:function(e,n,t){t.d(n,{X:function(){return i},z:function(){return a}});var r=t(50959),o=(0,r.createContext)(null);function i(){return(0,r.useContext)(o)}var a=o.Provider},41084:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(89783),o=function(){};function i(e){var n=(0,r.e)(e);return n?n.delegateTooltip:o}},89783:function(e,n,t){t.d(n,{e:function(){return i}});var r=t(50959),o=t(14818);function i(e){var n=(0,o.X)(),t=(0,r.useCallback)(function(t){null==n||n.setStepTargetElement(e,t)},[e,null==n?void 0:n.setStepTargetElement]);return n&&n.steps.some(function(n){return n.id===e})?{delegateTooltip:t,isActive:!n.isLoading&&!n.isDone&&n.activeStep.id===e,activeStep:n.activeStep,done:n.done,goto:n.goto,id:n.id,isDone:n.isDone,isLoading:n.isLoading,next:n.next,prev:n.prev,restart:n.restart,steps:n.steps}:null}},9617:function(e,n,t){var r=t(42516),o=t(41733),i=t(30509),a=t(98924),l=t(74985),c=t(76999),u=t.n(c),s=t(97754),d=t.n(s),f=t(54237);t(50959),n.Z=function(e){var n,t=e.level,c=e.fontFamily,s=void 0===c?"sans-serif":c,p=e.fontWeight,h=void 0===p?"medium":p,g=e.foreground,v=void 0===g?1:g,m=e.align,y=void 0===m?"left":m,b=e.truncate,w=e.className,x=void 0===w?"":w,k=e.children,Z=(0,a._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children"]);return(0,l.BX)("h".concat(t),(0,i._)((0,o._)({},Z),{className:u().dynamic([["e5be6eb40aa527b5",[f.Z.levels[t],f.Z.fontFamily[s],f.Z.fontWeight[h],f.Z.foreground[v],y]]])+" "+(d()("heading",(n={},(0,r._)(n,x,!!x),(0,r._)(n,"truncate",void 0!==b&&b),n))||""),children:[k,(0,l.tZ)(u(),{id:"e5be6eb40aa527b5",dynamic:[f.Z.levels[t],f.Z.fontFamily[s],f.Z.fontWeight[h],f.Z.foreground[v],y],children:".heading.__jsx-style-dynamic-selector{font-size:".concat(f.Z.levels[t],";font-family:").concat(f.Z.fontFamily[s],";font-weight:").concat(f.Z.fontWeight[h],";color:").concat(f.Z.foreground[v],";text-align:").concat(y,"}.truncate.__jsx-style-dynamic-selector{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:100%}")})]}))}},36032:function(e,n,t){t.d(n,{Z:function(){return _}});var r=t(27387),o=t(66626),i=t(78950),a=t(63257),l=t(96583),c=t(74985),u=t(76999),s=t.n(u),d=t(79378),f=t(49344),p=t(29287),h=t(50831),g=t(9617),v=t(35972),m=t(63461),y=t(50959),b=t(41733),w=t(21262),x=t(71440),k=t(58995);function Z(){var e=(0,w._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return Z=function(){return e},e}var C={},S=(0,x.Ps)(Z()),T=t(63009),E=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,R=/at (https:\/\/.+\.js):(\d+):(\d+)/;function D(){return(D=(0,r._)(function(e){var n,c,u,s,d,f,p,h;function g(){return(g=(0,r._)(function(e){var t,r,o;return(0,l.Jh)(this,function(i){switch(i.label){case 0:if(t=n.get(e))return[2,t];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=i.sent(),o=new c.SourceMapConsumer(r),n.set(e,o),[2,o];case 3:return i.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,l.Jh)(this,function(v){switch(v.label){case 0:n=new Map,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,t.e(4552).then(t.t.bind(t,94552,19))];case 2:return c=v.sent(),[3,4];case 3:throw v.sent(),Error("source-map not available");case 4:var m;if(!(u=e.stack))throw Error("expected error.stack to be defined");return s=u.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),f=(d=(0,i._)(s))[0],[4,Promise.all(d.slice(1).map((m=(0,r._)(function(e){var n,t,r,i,a,c,u,s,d,f;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(E.test(e)){if(!(a=E.exec(e)))throw Error("expected result");t=(c=(0,o._)(a.slice(2),3))[0],r=c[1],i=c[2]}else{if(!R.test(e))return[2,e];if(!(u=R.exec(e)))throw Error("expected result");t=(s=(0,o._)(u.slice(1),3))[0],r=s[1],i=s[2]}return[4,function(e){return g.apply(this,arguments)}("".concat(t,".map"))];case 1:if(!(d=l.sent()))return[2,"    ".concat(e)];if(f=d.originalPositionFor({line:Number(r),column:Number(i)}),n)return[2,"    at ".concat(f.name," (").concat(f.source,":").concat(f.line,":").concat(f.column,")")];return[2,"    at ".concat(f.source,":").concat(f.line,":").concat(f.column)]}})}),function(e){return m.apply(this,arguments)})))];case 5:return p=v.sent(),Object.assign(h=Error(),{name:e.name,stack:[f].concat((0,a._)(p)).join("\n"),message:e.message},e),[2,h]}})})).apply(this,arguments)}var P=function(e){var n=e.bsod,t=(0,o._)((0,y.useState)(null),2),i=t[0],a=t[1];(0,y.useEffect)(function(){(0,r._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return D.apply(this,arguments)}(n.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[n.error]);var u=(0,y.useMemo)(function(){var e,t,r,o;return i?null!==(r=null===(t=i.stack)||void 0===t?void 0:t.split("\n"))&&void 0!==r?r:[]:null!==(o=null===(e=n.error.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==o?o:[]},[i,n.error.stack]);return(0,c.tZ)("div",{css:[p.l0.p(16),p.l0.width("100%"),p.l0.backgroundColor.backgroundHigher,p.l0.borderRadius(8),p.l0.overflowY("hidden"),{whiteSpace:"pre"}],children:(0,c.tZ)(v.gC,{spacing:1,children:(0,c.BX)("div",{css:[p.l0.font.code,p.l0.fontSize(12)],children:[(0,c.BX)("div",{children:["Origin: ",n.origin]}),null==u?void 0:u.map(function(e,n){var t=e.replace("webpack-internal:///./",""),r=t.includes("node_modules");return(0,c.tZ)("div",{css:r?p.l0.color.foregroundDimmest:null,children:t},n)})]})})})},_=function(){var e,n,t,r=(0,o._)((0,T.qg)(),1)[0],i=(e=(0,b._)({},C,{skip:!r}),k.a(S,e)),a=i.data,l=i.loading;if((0,T.ic)(),!r)return null;var u=(null==a?void 0:null===(n=a.currentUser)||void 0===n?void 0:n.isStaff)||(null==a?void 0:null===(t=a.currentUser)||void 0===t?void 0:t.isAdmin);return(0,c.BX)(f.u,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,c.BX)(v.gC,{spacing:2,align:"center",children:[(0,c.tZ)(g.Z,{level:2,children:" Your Repl is having a bit of trouble."}),(0,c.tZ)("div",{className:s().dynamic([["d03b8962c5704815",[p.n0]]])+" spacer"}),(0,c.tZ)(m.Z,{size:"large",children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,c.tZ)("div",{css:[p.l0.p(16),p.l0.width("100%"),p.l0.backgroundColor.backgroundHigher,p.l0.borderRadius(8)],className:s().dynamic([["d03b8962c5704815",[p.n0]]]),children:(0,c.BX)(v.gC,{spacing:1,children:[!l&&(null==a?void 0:a.currentUser)?(0,c.BX)(v.Ug,{spacing:2,align:"center",children:[(0,c.tZ)(d.q,{src:a.currentUser.image,username:a.currentUser.username,size:48}),(0,c.tZ)(m.Z,{size:"medium",children:a.currentUser.username})]}):null,(0,c.BX)("div",{css:[p.l0.font.code],className:s().dynamic([["d03b8962c5704815",[p.n0]]]),children:["Error: ",r.eventId]})]})}),u?(0,c.tZ)(P,{bsod:r}):null,(0,c.tZ)("div",{className:s().dynamic([["d03b8962c5704815",[p.n0]]])+" spacer"}),(0,c.tZ)(h.Z,{onClick:function(){return window.location.reload()},color:"primary",filled:!0,fullWidth:!0,children:"reload"}),!1]}),(0,c.tZ)(s(),{id:"d03b8962c5704815",dynamic:[p.n0],children:".sentry-error-embed-wrapper{z-index:".concat(p.n0,"!important}")})]})}},80431:function(e,n,t){t.d(n,{Z:function(){return v}});var r=t(12285),o=t(4955),i=t(41733),a=t(30509),l=t(9670),c=t(74985),u=t(43182),s=t(56596),d=t(29287),f=t(50959),p=t(63009),h=t(49500),g=function(e){"use strict";(0,o._)(t,e);var n=(0,l._)(t);function t(){var e;return(0,r._)(this,t),e=n.apply(this,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}var i=t.prototype;return i.componentDidCatch=function(e,n){this.setState({hasErrored:!0,error:e,errorInfo:n}),this.props.handleError(e,n),h.error(e)},i.render=function(){if(this.state.hasErrored){var e,n,t;return(0,c.tZ)(s.G,{css:[d.l0.font.code,d.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},d.l0.backgroundColor.blurpleDefault,d.l0.height("100%")],children:(0,c.tZ)(s.G,{children:null!==(t=null===(n=this.state)||void 0===n?void 0:null===(e=n.error)||void 0===e?void 0:e.stack)&&void 0!==t?t:"An unknown error occurred."})})}return this.props.children},t}(f.Component);function v(e){var n=e.bsod,t=void 0!==n&&n,r=e.sentry,o=void 0===r||r,l=e.handleError,s=e.children,d=e.origin,f=void 0===d?"ErrorBoundary: (no origin provided)":d,h=e.tags,v=void 0===h?{}:h,m=e.extras,y=void 0===m?{}:m,b=(0,p.uV)();return(0,c.tZ)(g,{handleError:function(e,n){t?b({error:e,extras:(0,a._)((0,i._)({},y),{errorInfo:n}),tags:(0,a._)((0,i._)({},v),{errorBoundary:!0}),origin:f}):o&&u.$e(function(t){t.setTag("errorBoundary",!0),t.setTags(v),t.setExtra("errorInfo",n),t.setExtras(y),u.Tb(e)}),l&&l(e,n)},children:s})}},31384:function(e,n,t){t.d(n,{xV:function(){return $},du:function(){return T},av:function(){return V}});var r=t(42516),o=t(41733),i=t(74985),a=t(38003),l=t(62624),c=t(31950),u=t(1415),s=t(38080),d=t(93918),f=t(29287),p=t(50959),h=t(46053),g=t(64461),v=t(90234),m=t(15859),y=t(66626),b=t(66368),w=t(71999),x=(0,p.createContext)(null);function k(){var e=(0,p.useContext)(x);if(!e)throw Error("Expected store in context");return e}function Z(e){return(0,w.Dv)(e,{store:k()})}function C(e){return(0,b.b)(e,k())}var S=function(e){return(0,w.b9)(e,{store:k()})};function T(e){var n=(0,y._)((0,p.useState)(function(){return(0,v.MT)()}),1)[0];return(0,i.tZ)(x.Provider,{value:n,children:e.children})}var E=(0,t(91608).$)(["display","visibility","transform","maxHeight","width"]),R=E.cssVars,D=E.styleTokens,P=(0,v.cn)(null),_=(0,v.cn)("default"),A=(0,v.cn)({command:null,offset:{x:0,y:0},visible:!1}),L=(0,m.kv)(A,function(e){return e.offset}),I=(0,m.kv)(A,function(e){return e.command}),q=(0,m.kv)(A,function(e){return e.visible}),M=(0,m.kv)(A,function(e){return e.onKeyDownHandler}),B=(0,m.kv)(P,function(e){var n;return null!==(n=null==e?void 0:e.initial)&&void 0!==n?n:null}),G=(0,v.cn)(function(e){var n=e(L);if(!n)return null;var t=n.y,r=window.innerHeight-t,o=e(B),i=null!==o?o-r:0;return i>0&&(t=Math.max(16,t-Math.min(200,i))),t}),W=(0,v.cn)(function(e){var n=e(L);if(!n)return null;var t=n.x,r=window.innerWidth,o=e(U),i=t+(null!=o?o:X)-r+16;return i>0&&(t=Math.max(16,t-i)),t}),F=(0,v.cn)(function(e){var n=e(W),t=e(G);return null==n||null===t?null:(0,r._)({},R.transform,"translate(".concat(n,"px, ").concat(t,"px)"))}),U=(0,v.cn)(null),X=180,O=(0,v.cn)(function(e){var n=e(U);return(0,r._)({},R.width,(null===n?X:n)+"px")}),N=(0,v.cn)(function(e){var n=e(G);return null===n?null:(0,r._)({},R.maxHeight,"calc(100vh - ".concat(f.TV.space16," - ").concat(n,"px)"))}),H=(0,v.cn)(null,function(e,n){n(P,null),n(U,null),n(z,null),n(A,function(e){return(0,g.Uy)(e,function(e){e.visible=!1,e.command=null})})}),z=(0,v.cn)(null),j=(0,v.cn)(null,function(e,n,t){if(n(_,t.background),t.width&&n(U,t.width),t.target){var r=t.target.getBoundingClientRect(),o={x:r.x,y:r.y+r.height+8};n(z,r),n(A,function(e){return(0,g.Uy)(e,function(e){e.command=t.command,e.offset=o,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})});return}n(A,function(e){return(0,g.Uy)(e,function(e){e.command=t.command,e.offset=t.offset,e.visible=!0,e.onKeyDownHandler=t.onKeyDownHandler})})});function V(){var e=S(j),n=S(H),t=(0,s.nZ)({elevated:!0});return{openContextMenu:(0,p.useCallback)(function(n){e(n.target instanceof HTMLElement?{command:n.command,target:n.target,width:n.width,background:t,onKeyDownHandler:n.onKeyDownHandler}:{command:n.command,offset:n.target,target:null,width:n.width,background:t,onKeyDownHandler:n.onKeyDownHandler})},[e,t]),closeContextMenu:n,onContextMenu:(0,p.useCallback)(function(n,r){var o=r.command,i=r.width,a=r.onKeyDownHandler;n.preventDefault(),e({command:o,offset:{x:n.clientX,y:n.clientY},target:null,width:i,background:t,onKeyDownHandler:a})},[e,t])}}var K=(0,d.X)({surface:[f.l0.shadow(3),f.l0.borderRadius(8),f.l0.position.absolute,{top:0,left:0,border:"1px solid",borderColor:f.TV.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(f.TV.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(f.TV.space16,"))"),maxHeight:D.maxHeight,width:D.width,transform:D.transform,visibility:D.visibility,display:D.display}]});function Y(){var e=Z(z);return e?(0,i.tZ)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var $=(0,p.memo)(function(e){var n=e.fontSize,t=S(H),d=Z(I),f=Z(M),g=C(q),v=(0,p.useRef)(function(){});(0,p.useEffect)(function(){var e=function(e){if(e){var n;null===(n=v.current)||void 0===n||n.call(v);return}};return e(g.current),g.subscribe(e)},[g]);var m=S(P),y=(0,p.useRef)(null);(0,p.useEffect)(function(){var e=function(e){var n;e.target instanceof HTMLElement&&(null===(n=y.current)||void 0===n?void 0:n.contains(e.target))||t()},n=function(){t()},r=function(t){t?(window.addEventListener("blur",n),document.addEventListener("pointerdown",e)):(window.removeEventListener("blur",n),document.removeEventListener("pointerdown",e))},o=g.subscribe(r);return function(){o(),r(!1)}},[g,t]);var b=C(F);(0,c.j)(y,b),(0,c.j)(y,C(N)),(0,c.j)(y,g,function(e){var n;return n={},(0,r._)(n,R.visibility,e?"visible":"hidden"),(0,r._)(n,R.display,e?"flex":"none"),n});var w=C(O);(0,c.j)(y,w);var x=(0,l.Z)(),k=Z(q)&&!x,T=Z(_),E=(0,o._)({},b.current,w.current);return d?(0,i.BX)(u.h,{children:[(0,i.tZ)(Y,{}),(0,i.tZ)(h.MT,{autoFocus:k,restoreFocus:!0,contain:!0,children:(0,i.tZ)(s.Tg,{onKeyDown:function(e){"Escape"===e.key&&t()},innerRef:y,css:K.surface,style:E,background:T,children:(0,i.tZ)(a.X,{iconBreadcrumbs:!0,command:d,onAction:t,onSelect:t,onTotalHeightChange:m,onKeyDown:f,focusRef:v,fontSize:void 0===n?14:n,compact:!0})})})]}):null})},30965:function(e,n,t){t.d(n,{Z:function(){return h}});var r=t(74985),o=t(43312),i=t(96179),a=t(2689),l=t(56596),c=t(29287),u=t(50959),s=t(39756),d=t(49932),f=(0,o.iv)([c.l0.justify.center,c.l0.pl(8),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:.5,width:250,display:"flex"}}]);function p(e){var n=e.index,t=32*n+8;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("rect",{x:0,y:t,rx:"3",ry:"3",width:16,height:16}),(0,r.tZ)("rect",{x:28,y:t,rx:"3",ry:"3",width:"".concat(100+(n%2!=0?-10*n:10*n)),height:16})]})}function h(e){var n=e.path,t=n===s.Ql,o=t?5:1;(0,u.useEffect)(function(){var e=a.kg.timeStart({isRootPath:t});return function(){e("time to load filetree folder")}},[t,n]);var c="fileTreeLoader-"+Math.random().toString();return(0,r.tZ)(l.G,{css:f,children:(0,r.tZ)(i.Z,{speed:2,backgroundColor:d.TV.backgroundHighest,foregroundColor:d.TV.backgroundHigher,height:32*o,width:250,viewBox:"0 0 250 ".concat(32*o),uniqueKey:c,children:Array(o).fill(null).map(function(e,n){return(0,r.tZ)(p,{index:n},n)})})})}},6033:function(e,n,t){t.d(n,{st:function(){return y}});var r,o,i=t(41733),a=t(30509),l=t(74985);t(43312),t(76588);var c=t(95891),u=t(25425),s=t(93496),d=t(38080),f=t(74833),p=t(56596),h=t(13900),g=t(29287),v=t(21371),m=t(50959);t(13090),(r=o||(o={})).AddFile="AddFile",r.AddFolder="AddFolder",r.UploadFile="UploadFile",r.UploadFolder="UploadFolder",r.DownloadZip="DownloadZip",r.Duplicate="Duplicate",r.ShowHiddenFiles="ShowHiddenFiles",r.HideHiddenFiles="HideHiddenFiles",r.OpenTab="OpenTab",r.OpenPane="OpenPane",r.CopyLink="CopyLink",r.CopyFilePath="CopyFilePath",r.CopyFolderPath="CopyFolderPath",r.OpenShellHere="OpenShellHere",r.Rename="Rename",r.Download="Download",r.Delete="Delete",r.OpenWith="OpenWith";var y={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload file"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}};g.l0.position.relative,g.l0.width(16),g.l0.height(16);var b={self:[g.l0.position.relative,g.l0.width(20),g.l0.height("100%"),g.l0.justify.center,{"& span":{height:"100%"}}],self2:[g.l0.position.relative,g.l0.width(16),g.l0.height("100%"),g.l0.justify.center,g.l0.pr(1)],button:[g.l0.display.flex,g.l0.align.center,g.l0.justify.center,g.l0.py(2),g.l0.top(0),g.l0.width("100%"),g.l0.border({width:0,color:"none"}),g.l0.cursor.pointer,g.l0.color.foregroundDimmest,g.l0.borderRadius(4),s.gU.filled,g.l0.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[g.l0.display.flex,g.l0.align.center,g.l0.py(2),g.l0.width("100%"),g.l0.height("100%"),g.l0.cursor.pointer,g.l0.color.foregroundDimmest,g.l0.focusRing,g.l0.borderRadius(4),{backgroundColor:"transparent",":hover":{color:g.TV.foregroundDefault}}],list:[g.l0.flex.column,g.l0.justify.center,g.l0.borderRadius(8),g.l0.zIndex(1),g.l0.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,n){return[g.l0.color.foregroundDefault,g.l0.p(8),g.l0.fontWeight.normal,g.l0.cursor.pointer,{whiteSpace:"nowrap"},n&&[g.l0.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:g.TV.accentNegativeDefault},":hover .option-label":{color:g.TV.white}}]]},optionLabel:function(e){return e?[g.l0.color.accentNegativeStronger]:[]}};function w(e){var n=e.isNegative,t=e.isHighlighted,r=e.children;return(0,l.tZ)(p.G,{css:b.option(n,t),children:(0,l.tZ)(f.xv,{className:"option-label",css:b.optionLabel(n),multiline:!1,children:r})})}var x=p.K.ul,k=p.K.li,Z=p.K.button,C=p.K.div,S=m.forwardRef(function(e,n){var t=e.isActive,r=e.actions,o=e.onAction,s=e.onOpenChange,S=(0,m.useRef)(!1),T=(0,v.L7)({items:r,onSelectedItemChange:function(e){var n=e.selectedItem;n&&(S.current||o(n),L())}}),E=T.isOpen,R=T.getToggleButtonProps,D=T.getMenuProps,P=T.highlightedIndex,_=T.getItemProps,A=T.openMenu,L=T.reset;(0,m.useImperativeHandle)(n,function(){return{open:A}}),(0,m.useEffect)(function(){s&&s(E)},[E,s]);var I=R(),q=(0,u.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,l.tZ)(p.G,{css:q?b.self2:b.self,children:(0,l.BX)(c.Z,{elevated:!0,showArrow:!0,isOpen:E,placement:"right-start",padding:0,onClickOutside:L,children:[(0,l.tZ)(d.Tg,{background:t?"default":"root",css:[g.l0.height("100%"),{background:t?g.TV.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,l.tZ)(Z,(0,a._)((0,i._)({},I),{css:q?b.button2:b.button,size:20,onClick:function(e){e.stopPropagation(),I.onClick(e)},children:(0,l.tZ)(h.Z,{})}))}),(0,l.tZ)(C,(0,a._)((0,i._)({},D({},{suppressRefError:!0})),{children:E?(0,l.tZ)(x,{css:b.list,children:r.map(function(e,n){return(0,l.tZ)(k,(0,a._)((0,i._)({"data-cy":"filetree-node-action-".concat(e.type)},_({item:e,index:n,onClick:function(n){S.current=!0,setTimeout(function(){S.current=!1}),o(e),n.stopPropagation()}})),{children:(0,l.tZ)(w,{isHighlighted:P===n,isNegative:e.type===y.Delete.type,children:(0,l.BX)(p.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,l.tZ)(f.xv,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})});S.displayName="NodeActionsMenu",n.ZP=S},90719:function(e,n,t){t.d(n,{O3:function(){return w},Lw:function(){return x},Ni:function(){return k}});var r=t(66626),o=t(74985),i=t(82897),a=t(25632),l=t(78272),c=t(75582),u=t(50959),s=t(4736),d=t(41733),f=t(21262),p=t(71440),h=t(58995);function g(){var e=(0,f._)(["\n  fragment AiModelSelectorCurrenttUser on CurrentUser {\n    id\n    userSubscriptionType\n    userPowerUpsByType {\n      ... on UserPowerUpsTypes {\n        ghostwriter {\n          active\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}function v(){var e=(0,f._)(["\n  query AiModelSelector {\n    currentUser {\n      ...AiModelSelectorCurrenttUser\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var m={},y=(0,p.Ps)(g()),b=(0,p.Ps)(v(),y);function w(){var e=(0,r._)((0,u.useState)(!1),2),n=e[0],t=e[1],a=(0,s.Tt)(),c=x(),d=(0,r._)(k(),2),f=d[0],p=d[1];if(!a)return null;var h={basicModelLimits:{usage:a.basicModelUsage,limit:a.basicModelLimit},advancedModelLimits:{usage:a.advancedModelUsage,limit:a.advancedModelLimit}};return(0,o.BX)(o.HY,{children:[(0,o.tZ)(i.q2,{userLimits:h,hasAccessToAdvancedModel:c,selectedItem:f,onChange:function(e){if(!c&&"advanced"===e){t(!0);return}p(e)}}),(0,o.tZ)(l.Z,{isOpen:n,onClose:function(){return t(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}function x(){var e,n=(e=(0,d._)({},m,void 0),h.a(b,e)).data,t=null==n?void 0:n.currentUser;return!!t&&(t.userSubscriptionType===c.HP.HackerPro||!!((null==t?void 0:t.userPowerUpsByType.__typename)==="UserPowerUpsTypes"&&t.userPowerUpsByType.ghostwriter.active))}function k(){var e=x(),n=(0,a.Gn)("ghostwriterUseAdvancedModel"),t=n.preferences,r=n.update;return[t.ghostwriterUseAdvancedModel&&e?"advanced":"basic",(0,u.useCallback)(function(e){return r({ghostwriterUseAdvancedModel:"advanced"===e})},[r])]}},98934:function(e,n,t){t.d(n,{L:function(){return u},w:function(){return c}});var r=t(66626),o=t(93918),i=t(29287),a=t(50959),l=t(34335);function c(){var e=(0,r._)((0,a.useState)(null),2),n=e[0],t=e[1],o=(0,r._)((0,a.useState)(null),2),i=o[0],c=o[1],u=(0,l.D)(n,i,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom-start"});return{setPopoverEl:c,setTriggerEl:t,attributes:u.attributes.popper,styles:u.styles.popper}}var u=(0,o.X)({popover:[i.l0.borderRadius(4),i.l0.border({color:i.TV.outlineDefault}),i.l0.overflow("hidden"),i.l0.maxWidth(260)]})},10700:function(e,n,t){t.d(n,{r:function(){return E},B:function(){return R}});var r=t(27387),o=t(66626),i=t(63257),a=t(96583),l=t(75129),c=t(23394),u=t(39426),s=t(2689),d=t(1574),f=t(19659),p=t(39756),h=t(37685),g=t(30084),v=t(10009),m=t(82960),y=t(95683);function b(){return(b=(0,r._)(function(e){var n,t,r,o,l,c,u,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=e.files,t=e.fs,r=e.entrypointFile,o=e.hiddenFiles,!(r&&n.length<10))return[3,2];return n.push(r),u=""===(c=(0,f.Il)(r))?p.Ql:c,[4,t.readDir(u)];case 1:if(!("children"in(s=a.sent())))return[2];(l=n).push.apply(l,(0,i._)(s.children.filter(function(e){return e.type===g.Tv.File}).filter(function(e){return!((0,m.Z)(e.filename)||(0,h.lv)(e.filename,o)||!(0,f.Mb)(e.filename))}).map(function(e){return u===p.Ql?e.filename:"".concat(c,"/").concat(e.filename)}).filter(function(e){return!n.includes(e)}).slice(0,1))),a.label=2;case 2:return[2]}})})).apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var n,t,r,o,l,c,p,g,w,x,k,Z,C,S,T,E,R,D,P,_,A,L,I,q,M,B,G,W,F,U,X,O,N,H;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=e.recentFiles,t=e.fs,r=e.dotReplit,o=e.maxCharacters,l=e.replLanguage,c=e.filePreferences,[4,r.getConfig()];case 1:return k=(null==(x=a.sent().config)?void 0:x.entrypoint)||u.ZP.getMainFileName(l)||null,Z=((null==x?void 0:x.hidden)||[]).map(function(e){return(0,d.Z)(e)}).filter(Boolean),C=[],T=null!==(S=null==c?void 0:null===(w=c.filter(function(e){return"include"===e.preference}))||void 0===w?void 0:w.map(function(e){return e.path}))&&void 0!==S?S:[],(p=C).push.apply(p,(0,i._)(T)),E=T.length,R=n.slice(0,3),(g=C).push.apply(g,(0,i._)(R)),D=R.length,[4,function(e){return b.apply(this,arguments)}({files:C,entrypointFile:k,fs:t,hiddenFiles:Z})];case 2:return a.sent(),P=C.length-D-E,s.kg.info("GhostwriterChat got file context",{numRecentFiles:D,numEntrypointFiles:P,maxFiles:10}),A=(_=function(e){var n=e.files,t=e.hiddenFiles,r=e.filePreferences,o=null!==(b=null==r?void 0:null===(v=r.filter(function(e){return"include"===e.preference}))||void 0===v?void 0:v.map(function(e){return e.path}))&&void 0!==b?b:[],a=null!==(w=null==r?void 0:null===(y=r.filter(function(e){return"exclude"===e.preference}))||void 0===y?void 0:y.map(function(e){return e.path}))&&void 0!==w?w:[],l=0,c=[],u=[],d=!0,p=!1,g=void 0;try{for(var v,y,b,w,x,k=(0,i._)(new Set(n))[Symbol.iterator]();!(d=(x=k.next()).done);d=!0){var Z=x.value;if(!(!o.includes(Z)&&((0,m.Z)(Z)||(0,h.lv)(Z,t)||a.includes(Z)||!(0,f.Mb)(Z)))){if(l>=10){u.push(Z);continue}c.push(Z),l+=1}}}catch(e){p=!0,g=e}finally{try{d||null==k.return||k.return()}finally{if(p)throw g}}return 0===c.length&&s.kg.info("GhostwriterChat filtered out all files for file context",{numFiles:n.length}),{validFilePaths:c,pathsExceedingMaxFilesLimit:u}}({files:C,hiddenFiles:Z,filePreferences:c})).validFilePaths,L=_.pathsExceedingMaxFilesLimit,[4,Promise.all(A.map(function(e){return t.readFile(e)}))];case 3:for(W=0,I=a.sent(),q=[],M=[],B=L,G=o;W<A.length;W++){if(F=A[W],U=(0,y.S)(F),(X=I[W]).error){s.kg.info("GhostwriterChat failed to read file",{filePath:F});continue}if((0,v.Z)(X.content.toBuffer())){s.kg.info("GhostwriterChat filtered out binary file",{filePath:F});continue}if(G<=0){B.push(F);continue}N=(O=X.content.toString()).slice(0,G),H=O.length>N.length,G<=0&&B.push(F),H?M.push(F):q.push({filePath:F,language:U,code:N}),G-=N.length}return G<=0?s.kg.info("GhostwriterChat hit character limit for file context",{numFilesIncluded:A.length,filesExcluded:A.length-q.length}):s.kg.info("GhostwriterChat has remaining file context characters",{remainingChars:G}),[2,{fileContext:q,truncatedFiles:M,overflowingFiles:B}]}})})).apply(this,arguments)}var x=t(54916),k=t(90841),Z=t(58091),C=t(50959),S=t(45434),T=t(50455);function E(){var e=(0,x.Z)(),n=e.fs,t=e.dotReplit,o=(0,l.v)(),i=(0,Z.AA)(),u=(0,c.Z)(),s=(0,T.P)(o),d=(0,k.Ji)();return(0,C.useCallback)((0,r._)(function(){var e,r,o,l,c,f;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!n||!t)throw Error("Expected fs and dotReplit services");return e=(0,S.yL)(s).fileContextCharacters,r=i(),o=d(),[4,function(e){return w.apply(this,arguments)}({recentFiles:r,fs:n,dotReplit:t,maxCharacters:e,replLanguage:u,filePreferences:o})];case 1:return l=a.sent(),c=r[0],[2,{ghostwriterFileContext:l,mostRecentFile:(null!==(f=null==o?void 0:o.filter(function(e){return"exclude"===e.preference}).map(function(e){return e.path}))&&void 0!==f?f:[]).includes(c)?null:c}]}})}),[n,t,s,i,d,u])}function R(){var e=(0,Z.Bx)(),n=E(),t=(0,k.Xy)(),c=(0,o._)((0,C.useState)([]),2),u=c[0],s=c[1],d=(0,l.v)();return(0,C.useEffect)(function(){var e;(e=(0,r._)(function(){var e,t,r,o,l,c,u,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return e=new Set,[4,n()];case 1:return r=(t=a.sent().ghostwriterFileContext).fileContext,o=t.truncatedFiles,l=t.overflowingFiles,r.forEach(function(n){e.add(n.filePath)}),c=Array.from(e).map(function(e){return{path:e,inclusionStatus:"included"}}),u=o.map(function(e){return{path:e,inclusionStatus:"truncated"}}),d=l.map(function(e){return{path:e,inclusionStatus:"overflowing"}}),s((0,i._)(c).concat((0,i._)(u),(0,i._)(d))),[2]}})}),function(){return e.apply(this,arguments)})()},[e,d,t,n]),u}},50455:function(e,n,t){t.d(n,{P:function(){return l}});var r=t(66626),o=t(90719),i=t(4736),a=t(45434);function l(e){var n=(0,r._)((0,o.Ni)(),1)[0],t=(0,i.ll)();return"advanced"===n&&t?a.hf.model:e}},20766:function(e,n,t){t.d(n,{Cd:function(){return v},KI:function(){return p},Og:function(){return h},Oy:function(){return g},RN:function(){return u},YY:function(){return d},d$:function(){return c},wK:function(){return f}});var r=t(41733),o=t(78094),i=t(64461),a=t(90234),l=(0,a.cn)(!1),c=function(){return(0,o.c1)(l)},u=function(){return(0,o.wM)(l)},s=(0,a.cn)({}),d=(0,a.cn)(null,function(e,n,t){var o=t.id,a=t.debugInfo,l=e(s);n(s,(0,i.Uy)(l,function(e){e[o]||(e[o]={}),e[o]=(0,r._)({},e[o],a)}))}),f=function(e){var n=e.messageId;return(0,o.c1)(s)[n]},p=(0,a.cn)(""),h=function(){return(0,o.c1)(p)},g=(0,a.cn)(""),v=function(){return(0,o.c1)(g)}},83898:function(e,n,t){t.d(n,{Cd:function(){return B.Cd},Gd:function(){return en},J:function(){return et},Og:function(){return B.Og},Qn:function(){return ei},ZT:function(){return Y},fr:function(){return eo},gp:function(){return j},kL:function(){return X},qQ:function(){return ea},ql:function(){return ee},zu:function(){return U}});var r,o,i,a,l=t(31417),c=t(27387),u=t(41733),s=t(30509),d=t(66626),f=t(96583),p=t(43182),h=t(99149),g=t(75129),v=t(50782),m=t(2689),y=t(59868),b=t(74997),w=t(14917),x=t(99952),k=t(52590),Z=t(4736),C=t(29217),S=t(78094),T=t(64461),E=t(28999),R=t(15859),D=t(90234),P=t(50959),_=t(52297),A=t(45434),L=t(85234),I=t.n(L),q=t(90719),M=t(10700),B=t(20766),G=t(49275),W=t(84657),F=t(3590),U=function(){return(0,S.wM)(G.qw)},X=function(){return(0,S.$X)(G.qw)},O=(0,D.cn)(new Set),N=(0,D.cn)(null,function(e,n,t){var r=(0,T.Uy)(e(O),function(e){e.add(t)});n(O,r)}),H=(0,D.cn)(null,function(e,n,t){var r=(0,T.Uy)(e(O),function(e){e.delete(t)});n(O,r)}),z=(0,D.cn)(function(e){return e(O).size>0}),j=function(){return(0,S.c1)(z)};function V(e){return{user:e.attribution,message:e.text}}var K=(0,D.cn)(null,(r=(0,c._)(function(e,n){var t;return(0,f.Jh)(this,function(r){switch(r.label){case 0:if(n(G.mJ),n(G.qw,[]),n(k.r),!(t=e(C.tV)))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.createNewSession()];case 2:return r.sent(),[3,4];case 3:return r.sent(),p.Tb(Error("Unable to initialize Ghostwriter Chat session")),[2];case 4:return[2]}})}),function(e,n){return r.apply(this,arguments)})),Y=function(){return(0,S.$X)(K)},$=(0,D.cn)(null,(o=(0,c._)(function(e,n,t){var r,o,i,a,c,d,p,h,g,v,b,w,x,k,S,E,R,D,P,_,L,I,q,M,U,X,O,N,H,z,j,K,Y,$,J,Q,ee,en,et,eo;return(0,f.Jh)(this,function(f){switch(f.label){case 0:return r=t.chatInput,o=t.responseId,i=t.timesRegenerated,a=t.modelType,c=t.chatModel,d=t.replId,p=r.chatMessage,h=r.workspaceContext,g=r.messages,v=e(Z.yH),b="advanced"===a&&v,w=p.type,x=p.codeReference,[4,Promise.resolve(h)];case 1:if(S=(k=f.sent()).fileContext,E=k.mostRecentFile,R=e(F.qy),D=e(C.tV),void 0!==(P=e(er))&&(p.action=P),(0,y.j)(y.U3.GHOSTWRITER_CHAT_MESSAGE_SENT,{type:w,model:c,isAdvancedModel:b}),_={id:o,type:w,codeReference:x,text:"",loading:!0,attribution:"Assistant",model:c,useAdvancedModel:b,timesRegenerated:i},(I=null!==(L=t.abortController)&&void 0!==L?L:new AbortController).signal.aborted)return n(G.Mk,{message:(0,T.Uy)(_,function(e){e.loading=!1,e.stopReason="unknown"})}),[2];n(G.WU,{messageId:o,abortController:I}),f.label=2;case 2:var ei,ea;if(f.trys.push([2,15,16,17]),n(W.Et,!0),ei=g,ea=function(e){return!e.loading&&!e.error},q=ei.filter(function(e,n){return(!(n<ei.length-1)||!!ea(ei[n+1]))&&ea(ei[n])&&"feedback"!==ei[n].type}).map(V),M=performance.now(),U=void 0,!(0,A.uL)(c))throw Error("Invalid chat model");if(!D)throw Error("Invalid Ghostwriter Chat client");X={fileContext:S,mostRecentFile:E},O=D.sendMessage({body:{chatHistory:q,message:p,model:c,useAdvancedModel:b,sessionId:R,context:X},options:{abortSignal:I.signal}}),N=void 0,H="",z=!1,j=!1,f.label=3;case 3:f.trys.push([3,8,9,14]),Y=(0,l._)(O),f.label=4;case 4:return[4,Y.next()];case 5:if(!(z=!($=f.sent()).done))return[3,7];if((J=$.value).intentStreamChunk&&(N=J.intentStreamChunk.intent),J.debugStreamChunk&&(n(B.KI,J.debugStreamChunk.fullPrompt),n(B.YY,{id:o,debugInfo:{fullPrompt:J.debugStreamChunk.fullPrompt}}),n(B.YY,{id:o,debugInfo:{workspaceContext:X}})),U||(U=performance.now()-M,m.kg.time("ghostwriter chat time to first stream",U,{replid:d,chatId:R,chatModel:c,messageId:o,isAdvancedModel:b}),n(B.YY,{id:o,debugInfo:{timeToFirstStream:U}})),!J.responseStreamChunk)return[3,6];ee=(Q=J.responseStreamChunk).stopReason,Q.stopReason&&(n(B.Oy,Q.stopReason),n(B.YY,{id:o,debugInfo:{stopReason:Q.stopReason}}),ee=Q.stopReason),H+=Q.data,_=(0,s._)((0,u._)({},_),{loading:!1,streaming:!ee&&!J.responseStreamChunk.isComplete,text:H,intent:N,inferenceId:J.responseId,useAdvancedModel:b,stopReason:ee}),n(G.Mk,{message:_}),f.label=6;case 6:return z=!1,[3,4];case 7:return[3,14];case 8:return en=f.sent(),j=!0,K=en,[3,14];case 9:if(f.trys.push([9,,12,13]),!(z&&null!=Y.return))return[3,11];return[4,Y.return()];case 10:f.sent(),f.label=11;case 11:return[3,13];case 12:if(j)throw K;return[7];case 13:return[7];case 14:return n(er,void 0),[3,17];case 15:if(et=f.sent(),n(W.Et,!1),"AbortError"===et.name)return n(G.Mk,{message:(0,s._)((0,u._)({},_),{aborted:!0,streaming:!1})}),[2];return n(G.b9,{messageId:o,error:et.message}),m.kg.error("ghostwriter chat client response error",{replid:d,chatId:R,chatModel:c,messageId:o,originalError:null!==(eo=null==et?void 0:et.message)&&void 0!==eo?eo:et}),[3,17];case 16:return n(G.mV,{messageId:o}),[7];case 17:return[2]}})}),function(e,n,t){return o.apply(this,arguments)})),J=(0,D.cn)(null,(i=(0,c._)(function(e,n,t,r){var o,i,a,l,c,u,s,d,p,g,v,m,y,k,Z,S,T;return(0,f.Jh)(this,function(f){switch(f.label){case 0:if(o=r.modelType,i=r.chatModel,a=r.replId,l=r.getContext,c=t.text,u=t.type,s=t.codeReference,d=(null==c?void 0:c.trim())||"",p=e(G.qw),g=I()(),v=I()(),e(C.Rr))return m={id:v,type:u,codeReference:s,loading:!1,text:"AI features are disabled in this team's Repls.",attribution:"Assistant",useAdvancedModel:!1},n(G.OV,{message:m}),[2];return h.B4.Check(_.cZ,t)?n(b.W,t.codeReference.filePath):h.B4.Check(_.FL,t)?n(w.k8,t.codeReference.filePath):h.B4.Check(_.Mx,t)&&n(x.ev,t.codeReference.filePath),n(N,g),y={id:g,type:u,codeReference:s,text:d,attribution:"Human",timeCreated:new Date},n(G.TC,{message:y}),k={id:v,type:u,codeReference:s,loading:!0,text:"Please wait while I think through your request…",attribution:"Assistant",useAdvancedModel:"advanced"===o},n(G.OV,{message:k}),[4,l()];case 1:S={fileContext:(Z=f.sent()).ghostwriterFileContext.fileContext,mostRecentFile:Z.mostRecentFile},T={type:u,text:d,codeReference:s},f.label=2;case 2:return f.trys.push([2,,4,5]),[4,n($,{chatInput:{chatMessage:T,workspaceContext:S,messages:p},responseId:v,modelType:o,chatModel:i,replId:a})];case 3:return f.sent(),[3,5];case 4:return n(H,g),[7];case 5:return[2]}})}),function(e,n,t,r){return i.apply(this,arguments)})),Q=(0,D.cn)(null,(a=(0,c._)(function(e,n,t){var r,o,i,a,l,c,u,s,d,p,h,g,v,y,b,w,x,k,Z,C;return(0,f.Jh)(this,function(f){switch(f.label){case 0:if(r=t.responseId,o=t.action,i=t.modelType,a=t.chatModel,l=t.replId,c=t.getContext,!(d=-1!==(s=(u=e(G.qw)).findIndex(function(e){return e.id===r}))&&"Assistant"===u[s].attribution))return m.kg.error("GW Chat error regenerate assistant message",{responseId:r,isResponseAssistantMessage:d}),[2];if(!(h=(p=u.slice(0,s)).pop()))return m.kg.error("GW Chat error no human message before response message"),[2];return n(N,h.id),g=(u[s].timesRegenerated||0)+1,v="advanced"===i,y=h.text,b=h.type,w=h.codeReference,x={id:r,type:b,codeReference:w,loading:!0,text:"Please wait while I think through your request…",attribution:"Assistant",timesRegenerated:g,useAdvancedModel:v},n(G.Mk,{message:x}),[4,c()];case 1:Z={fileContext:(k=f.sent()).ghostwriterFileContext.fileContext,mostRecentFile:k.mostRecentFile},C={type:b,parentEventId:"this_message_was_retried",text:y,codeReference:w,action:o},n(er,o),f.label=2;case 2:return f.trys.push([2,,4,5]),[4,n($,{chatInput:{chatMessage:C,messages:p,workspaceContext:Z},responseId:r,timesRegenerated:g,modelType:i,chatModel:a,replId:l})];case 3:return f.sent(),[3,5];case 4:return n(H,h.id),[7];case 5:return[2]}})}),function(e,n,t){return a.apply(this,arguments)})),ee=function(){var e,n=(0,S.Uu)(),t=(0,d._)((0,q.Ni)(),1)[0],r=(0,g.v)(),o=(0,v.Z)(),i=(0,M.r)();return(0,E.lV)((0,P.useCallback)((e=(0,c._)(function(e,n,a){return(0,f.Jh)(this,function(e){switch(e.label){case 0:return[4,n(J,a.chatMessage,{modelType:t,chatModel:r,replId:o,getContext:i})];case 1:return[2,e.sent()]}})}),function(n,t,r){return e.apply(this,arguments)}),[t,o,r,i]),{store:n})},en=function(){var e,n=(0,S.Uu)(),t=(0,d._)((0,q.Ni)(),1)[0],r=(0,g.v)(),o=(0,v.Z)(),i=(0,M.r)();return(0,E.lV)((0,P.useCallback)((e=(0,c._)(function(e,n,a){return(0,f.Jh)(this,function(e){switch(e.label){case 0:return[4,n(Q,{responseId:a.responseId,action:a.action,modelType:t,chatModel:r,replId:o,getContext:i})];case 1:return[2,e.sent()]}})}),function(n,t,r){return e.apply(this,arguments)}),[t,o,r,i]),{store:n})},et=function(){var e=(0,G.j3)(),n=(0,G.MY)();return j()&&e&&!n},er=(0,D.cn)(void 0),eo=function(){return(0,S.wM)(er)},ei=function(){return(0,S.$X)(er)};function ea(e){var n,t=(0,P.useMemo)(function(){return(0,R.kv)(G.qw,function(n){var t=n.findIndex(function(n){return n.id===e}),r=t>=0?n[t]:null;if(!r)return null;if("Human"===r.attribution){var o=n[t+1];if(!o)return r;if("Assistant"===o.attribution&&"EXPLAIN"===o.intent)return(0,T.Uy)(r,function(e){e.intent="EXPLAIN",e.codeReference=o.codeReference})}return r})},[e]);return null!==(n=(0,S.c1)(t))&&void 0!==n?n:null}},74997:function(e,n,t){t.d(n,{W:function(){return a},j:function(){return c}});var r=t(49275),o=t(78094),i=t(90234),a=(0,i.cn)(null,function(e,n,t){var o=e(r.qw).filter(function(e){var n;return!("explainCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)});n(r.qw,o)}),l=(0,i.cn)(function(e){return e(r.qw).filter(function(e){return"Assistant"===e.attribution&&"explainCode"===e.type})}),c=function(e){return(0,o.c1)(l).find(function(n){return n.codeReference&&n.codeReference.filePath===e})}},14917:function(e,n,t){t.d(n,{eD:function(){return u},k8:function(){return a},oQ:function(){return c}});var r=t(49275),o=t(78094),i=t(90234),a=(0,i.cn)(null,function(e,n,t){var o=e(r.qw).filter(function(e){var n;return!("generateCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)});n(r.qw,o)}),l=(0,i.cn)(function(e){return e(r.qw).filter(function(e){return"Assistant"===e.attribution&&"generateCode"===e.type})}),c=function(e){return(0,o.c1)(l).find(function(n){return n.codeReference&&n.codeReference.filePath===e})},u=function(){return(0,o.$X)(a)}},99952:function(e,n,t){t.d(n,{Ef:function(){return u},ev:function(){return a},iH:function(){return c}});var r=t(49275),o=t(78094),i=t(90234),a=(0,i.cn)(null,function(e,n,t){var o=e(r.qw).filter(function(e){var n;return!("transformCode"===e.type&&(null===(n=e.codeReference)||void 0===n?void 0:n.filePath)===t)});n(r.qw,o)}),l=(0,i.cn)(function(e){return e(r.qw).filter(function(e){return"Assistant"===e.attribution&&"transformCode"===e.type})}),c=function(e){return(0,o.c1)(l).find(function(n){return n.codeReference&&n.codeReference.filePath===e})},u=function(){return(0,o.$X)(a)}},52590:function(e,n,t){t.d(n,{g:function(){return c},r:function(){return u}});var r=t(51944),o=t(78094),i=t(90234),a=t(50959),l=(0,i.cn)(new Set),c=function(e){var n=(0,o.c1)(l);(0,a.useEffect)(function(){if(e)return n.add(e),function(){n.delete(e)}},[n,e])},u=(0,i.cn)(null,function(e,n){var t=e(l),o=!0,i=!1,a=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)c.value.dispatch({effects:r.Q.of(null)})}catch(e){i=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw a}}})},49275:function(e,n,t){t.d(n,{MY:function(){return P},Mk:function(){return g},OV:function(){return h},TC:function(){return p},WS:function(){return S},WU:function(){return w},b9:function(){return v},em:function(){return T},j3:function(){return C},mJ:function(){return Z},mV:function(){return x},nS:function(){return y},qw:function(){return f},tz:function(){return E}});var r=t(66626),o=t(63257),i=t(50199),a=t(78094),l=t(64461),c=t(15859),u=t(90234),s=t(92674),d=t.n(s),f=(0,u.cn)([]),p=(0,u.cn)(null,function(e,n,t){var r=t.message,i=e(f);n(f,(0,o._)(i).concat([r]))}),h=(0,u.cn)(null,function(e,n,t){var r=t.message,i=e(f);n(D,{message:r}),n(f,(0,o._)(i).concat([r]))}),g=(0,u.cn)(null,function(e,n,t){var r=t.message,o=r.id,i=e(f),a=(0,l.Uy)(i,function(e){var n;for(n=e.length-1;n>=0&&i[n].id!==o;n--);n>=0&&(e[n]=r)});n(D,{message:r}),n(f,a)}),v=(0,u.cn)(null,function(e,n,t){var r=t.messageId,o=t.error,i=e(f);n(f,(0,l.Uy)(i,function(e){var n=e.find(function(e){return e.id===r});n&&(n.loading&&(n.text="",n.loading=!1),n.error=o)}))}),m=(0,u.cn)(null,function(e,n,t){var r=t.feedback,i=t.message,a=e(f),l={id:d()(),type:"feedback",text:r,feedbackProvidedMessage:{id:i.id,text:i.text},attribution:"Assistant",useAdvancedModel:i.useAdvancedModel};n(f,(0,o._)(a).concat([l]))}),y=function(){return(0,a.$X)(m)},b=(0,u.cn)(new Map),w=(0,u.cn)(null,function(e,n,t){var r=t.messageId,o=t.abortController,i=(0,l.Uy)(e(b),function(e){e.set(r,o)});n(b,i)}),x=(0,u.cn)(null,function(e,n,t){var r=t.messageId,o=(0,l.Uy)(e(b),function(e){e.delete(r)});n(b,o)}),k=(0,u.cn)(null,function(e,n,t){var r,o=t.messageId;null===(r=e(b).get(o))||void 0===r||r.abort(),n(f,function(e){return(0,l.Uy)(e,function(e){var n=!0,t=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;if(l.id===o){l.stopReason="unknown",l.loading=!1;break}}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}})}),n(x,{messageId:o})}),Z=(0,u.cn)(null,function(e,n){var t=(0,l.Uy)(e(b),function(e){var n=!0,t=!1,o=void 0;try{for(var i,a=e.entries()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=(0,r._)(i.value,2);(l[0],l[1]).abort()}}catch(e){t=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw o}}e.clear()});n(b,t)}),C=function(){return(0,a.c1)(b).size>0},S=function(e){return(0,a.c1)((0,i.Z)(function(){return(0,c.kv)(b,function(n){return!!(e&&n.has(e.id))})},[e]))},T=function(){return(0,a.$X)(Z)},E=function(){return(0,a.$X)(k)},R=(0,u.cn)(new Set),D=(0,u.cn)(null,function(e,n,t){var r=t.message,o=r.id,i=r.loading,a=(0,l.Uy)(e(R),function(e){i?e.add(o):e.delete(o)});n(R,a)}),P=function(){return(0,a.c1)(R).size>0}},84657:function(e,n,t){t.d(n,{Et:function(){return i},Z9:function(){return c},Z_:function(){return a},rM:function(){return u}});var r=t(78094),o=t(90234),i=(0,o.cn)(!1),a=function(){return(0,r.wM)(i)},l=(0,o.cn)(!1),c=function(){return(0,r.wM)(l)},u=function(){return(0,r.$X)(l)}},3590:function(e,n,t){t.d(n,{jC:function(){return u},qy:function(){return l},ub:function(){return c}});var r=t(78094),o=t(90234),i=t(85234),a=t.n(i),l=(0,o.cn)(a()()),c=function(){return(0,r.c1)(l)},u=function(){return(0,r.$X)(l)}},4736:function(e,n,t){t.d(n,{Lv:function(){return l},Tt:function(){return a},ll:function(){return u},yH:function(){return c}});var r=t(78094),o=t(90234),i=(0,o.cn)(null),a=function(){return(0,r.c1)(i)},l=function(){return(0,r.$X)(i)},c=(0,o.cn)(function(e){var n=e(i);return!!n&&n.advancedModelUsage<n.advancedModelLimit}),u=function(){return(0,r.c1)(c)}},90841:function(e,n,t){t.d(n,{Ji:function(){return f},Xy:function(){return d},zU:function(){return s}});var r=t(27387),o=t(96583),i=t(78094),a=t(64461),l=t(90234),c=t(50959),u=(0,l.cn)([]);function s(){var e,n=(0,i.$X)(u);return(0,c.useCallback)((e=(0,r._)(function(e){return(0,o.Jh)(this,function(t){return[2,n(function(n){return(0,a.Uy)(n,function(n){var t=n.findIndex(function(n){return n.path===e.path});-1!==t?n[t]=e:n.push(e)})})]})}),function(n){return e.apply(this,arguments)}),[n])}function d(){return(0,i.c1)(u)}function f(){return(0,i.Dm)(u)}},29217:function(e,n,t){t.d(n,{$0:function(){return s},PM:function(){return p},Rr:function(){return i},U4:function(){return u},e:function(){return l},n3:function(){return f},tV:function(){return a}});var r=t(78094),o=t(90234),i=(0,o.cn)(!1),a=(0,o.cn)(null);function l(){return(0,r.$X)(a)}var c=(0,o.cn)(null),u=function(){return(0,r.c1)(c)},s=function(){return(0,r.$X)(c)},d=(0,o.cn)(null),f=function(){return(0,r.c1)(d)},p=function(){return(0,r.$X)(d)}},78094:function(e,n,t){t.d(n,{$X:function(){return d},Dm:function(){return u},Uu:function(){return l},c1:function(){return s},wM:function(){return c}});var r=t(71999),o=t(28999),i=t(50959),a=t(98372);function l(){var e=(0,i.useContext)(a.W);if(!e)throw Error("Expected store in ghostwriter chat context");return e}function c(e){return(0,r.KO)(e,{store:l()})}function u(e){return(0,o.lV)((0,i.useCallback)(function(n){return n(e)},[e]),{store:l()})}function s(e){return(0,r.Dv)(e,{store:l()})}function d(e){return(0,r.b9)(e,{store:l()})}},10169:function(e,n,t){t.d(n,{B:function(){return d},FF:function(){return s},R$:function(){return f}});var r=t(27387),o=t(96583),i=t(23394),a=t(54916),l=t(78094),c=t(90234),u=t(50959),s=(0,c.cn)("unknown");function d(){var e=(0,a.Z)().dotReplit,n=(0,i.Z)(),t=(0,l.$X)(s);(0,u.useEffect)(function(){function i(){return(i=(0,r._)(function(){var r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getConfig()];case 1:r=o.sent();try{if(i="unknown",i=function(e){if(e.error)return"unknown";var n="unknown";if((null===(r=e.config.interpreter)||void 0===r?void 0:null===(t=r.command)||void 0===t?void 0:t.args)&&(null===(l=e.config.interpreter)||void 0===l||null===(a=l.command)||void 0===a||a.args.forEach(function(e){/nodejs/.test(e)?n="nodejs":/python3/.test(e)&&(n="python3")}),"unknown"!==n)||(null===(o=e.config.run)||void 0===o?void 0:o.args)&&(null===(c=e.config.run)||void 0===c||c.args.forEach(function(e){/vite/.test(e)?n="vite":/node|npm/.test(e)?n="nodejs":/python3/.test(e)&&(n="python3")}),"unknown"!==n))return n;if(null===(i=e.config.packager)||void 0===i?void 0:i.language){var t,r,o,i,a,l,c,u,s=null===(u=e.config.packager)||void 0===u?void 0:u.language;if(/nodejs/.test(s)?n="nodejs":/python3/.test(s)&&(n="python3"),"unknown"!==n)return n}return"unknown"}(r),"unknown"===i){var a;a="unknown",/nodejs|typescript/.test(n)?a="nodejs":/python3/.test(n)&&(a="python3"),i=a}return t(i),[2,i]}catch(e){t("unknown")}return[2]}})})).apply(this,arguments)}return!function(){i.apply(this,arguments)}(),function(){t("unknown")}},[e,n,t])}function f(){return(0,l.c1)(s)}},17137:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(74985),o=t(50782),i=t(1498),a=t(49344),l=t(74833),c=t(30983),u=t(56596),s=t(93918),d=t(75875),f=t(29287),p=t(33988),h=t.n(p),g=t(47611),v=t(41733),m=t(21262),y=t(71440),b=t(58995);function w(){var e=(0,m._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return w=function(){return e},e}var x={},k=(0,y.Ps)(w()),Z=(0,s.X)({root:[f.l0.colWithGap(32)],header:[f.l0.rowWithGap(16),f.l0.align.center],body:[f.l0.colWithGap(16)],staffHelpers:[f.l0.colWithGap(8),f.l0.border({color:"var(--accent-negative-default)",width:1,style:"solid"}),f.l0.overflow("hidden")],buttons:[f.l0.rowWithGap(16),f.l0.justify.end]}),C=function(e){var n,t,s=e.isOpen,p=(0,g.useRouter)(),m=(n=(0,v._)({},x,{skip:!s}),b.a(k,n)).data,y=(0,o.Z)(),w=null==m?void 0:null===(t=m.currentUser)||void 0===t?void 0:t.isStaff;return(0,r.tZ)(a.u,{preventClose:!0,isOpen:s,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(u.G,{css:Z.root,children:[(0,r.tZ)(u.G,{css:Z.header,children:(0,r.tZ)(l.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You can’t run this Repl right now."})}),(0,r.BX)(u.G,{css:Z.body,children:[(0,r.BX)(l.xv,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.tZ)(h(),{legacyBehavior:!0,href:"/site/terms",children:"Terms of Service"}),"."]}),(0,r.tZ)(l.xv,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),w?(0,r.BX)(u.G,{css:Z.staffHelpers,children:[(0,r.BX)(u.G,{css:f.l0.rowWithGap(8),children:[(0,r.tZ)(c.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)(l.h4,{level:3,children:"Debug Info"})]}),(0,r.tZ)(u.G,{children:(0,r.BX)(l.xv,{children:["Repl ID ",y," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.tZ)(u.G,{children:(0,r.BX)(l.xv,{multiline:!1,children:[(0,r.tZ)(h(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(y),children:"All datadog logs"})," ","•"," ",(0,r.tZ)(h(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(y,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.BX)(u.G,{css:Z.buttons,children:[(0,r.tZ)(i.zx,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.tZ)(i.zx,{text:"Leave",onClick:function(){p.push("/home","~/")}})]})]})})}},8607:function(e,n,t){var r=t(74985),o=t(56337),i=t(2038),a=t(1498),l=t(49344),c=t(74833),u=t(56596),s=t(93918),d=t(73722),f=t(29287),p=t(47611),h=(0,s.X)({root:[f.l0.colWithGap(16)],header:[f.l0.rowWithGap(16),f.l0.align.center],body:[f.l0.pr(32),f.l0.colWithGap(16)],buttonRow:[f.l0.rowWithGap(16)],button:[f.l0.flex.growAndShrink(1)]});n.Z=function(e){var n=e.isOpen,t=(0,p.useRouter)(),s=(0,i.Vg)(t),f=(0,o.Z)();return(0,r.tZ)(l.u,{preventClose:!0,isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(u.G,{css:h.root,children:[(0,r.BX)(u.G,{css:h.header,children:[(0,r.tZ)(d.Z,{size:24}),(0,r.tZ)(c.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"Please Refresh"})]}),(0,r.BX)(u.G,{css:h.body,children:[(0,r.tZ)(c.xv,{children:"Your connection to this Repl has been temporarily interrupted. Usually this is because of a network issue. Please refresh."}),s?(0,r.tZ)(c.xv,{children:"If the issue continues please logout and re-login."}):null]}),(0,r.BX)(u.G,{css:h.buttonRow,children:[s||f?null:(0,r.tZ)(a.zx,{css:h.button,text:"Leave",onClick:function(){t.push("/home","~/")}}),(0,r.tZ)(a.zx,{text:"Refresh",colorway:"primary",css:h.button,onClick:function(){window.location.reload()}})]})]})})}},59716:function(e,n,t){t.d(n,{y:function(){return eM}});var r,o=t(42516),i=t(41733),a=t(30509),l=t(66626),c=t(74985),u=t(5621),s=t(6187),d=t(26508),f=t(91608),p=t(27592),h=t(2038),g=t(917),v=t(8279),m=t(56596),y=t(93918),b=t(29287),w=t(37463),x=t(18107),k=t(41084),Z=t(3947),C=t(58200),S=t(64461),T=t(50959),E=t(32911),R=t(73157),D=t(1498),P=t(15146),_=t(23291),A=t(37770),L=t(74833),I=t(30983),q=t(32377),M=t(99741),B=t(9331),G=t(17216),W=t(1128),F=t(73030),U=t(20573),X=t(35375),O=t(56412),N=t(77804),H=t(40028),z=t(8209),j=t(83898),V=t(2689),K=/(((\w+Error)|(Error)): (.*)\r\n((?:\s+at .*\r\n)+))|(\/home\/runner(.*):\d+\r\n[\s\S]*((\w+Error)|(Error)): (.*)\r\n)/g,Y=/(Traceback.*\r\n)?( +File.*(\r\n.*){1,2})*\r\n.*((\wError:)|(Exception:)).*/g,$=["abort","error","exception","fail","fatal","panic","traceback"].map(function(e){return"[".concat(e[0].toLowerCase()).concat(e[0].toUpperCase(),"]").concat(e.slice(1))}).join("|"),J=RegExp("(.*(".concat($,")(.*\\r\\n)+?\\x1b\\[31m(.|\\r\\n)*?\\x1b\\[[0-9;]*m)|(.*\\x1b\\[31m.*?(").concat($,")(.|\\r\\n)*?\\x1b\\[[0-9;]*m.*)"),"g"),Q=/\x1b\[[0-9;]*[A-Za-z]/g,ee=t(10169);function en(e,n){var t=(0,ee.R$)(),r=(0,l._)((0,T.useState)(null),2),o=r[0],i=r[1],a=(0,l._)((0,T.useState)(""),2),c=a[0],u=a[1];return(0,T.useEffect)(function(){return n(function(e){u(function(n){return(n+e).slice(-2400)})})},[n]),(0,T.useEffect)(function(){var n=setTimeout(function(){var n,r=t;if("unknown"===r){var o,a=null===(o=e.configs.current)||void 0===o?void 0:o.entrypoint;(null==a?void 0:a.endsWith(".js"))?r="nodejs":(null==a?void 0:a.endsWith(".py"))&&(r="python3")}i((n=r,c&&function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";return"nodejs"===n?null!==e.match(K):"python3"===n?null!==e.match(Y):null!==e.match(J)}(c,n)?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown",t=e.replace(Q,""),r=null;return(r="nodejs"===n?t.match(K):"python3"===n?t.match(Y):e.match(J))?r[r.length-1].replace(Q,""):(V.kg.error("Ghostwriter Chat Debugger had no error - this should not have happened",{errorBuffer:e,interpreter:n}),"")}(c,n):null))},100);return function(){clearTimeout(n)}},[c,t,e]),{parsedError:o}}function et(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var er=(0,y.X)({outputBlockMetadataWrapper:[{containerType:"size"},b.l0.pl(4),b.l0.pr(8),b.l0.rowWithGap(4),b.l0.align.center,b.l0.justify.spaceBetween,b.l0.height(28),b.l0.backgroundColor.backgroundDefault,b.l0.border({direction:"bottom",width:1,style:"solid",color:b.TV.backgroundHigher}),b.l0.position.sticky,b.l0.top(0),b.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[b.l0.rowWithGap(4),b.l0.align.center,b.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[b.l0.rowWithGap(4),b.l0.align.center],executionPill:[b.l0.flex.shrink(0),b.l0.display.flex,{"@container (max-width: 200px)":[b.l0.display.none]}],ghostwriterDebuggerButton:[b.l0.flex.shrink(0),{"@container (max-width: 400px)":{padding:"0 4px","& > span":[b.l0.display.none],"& > svg":[b.l0.mr(0)]}}],lastLineTextWrapper:[b.l0.flex.shrink(1)],lastLineText:[b.l0.display.block,b.l0.maxWidth("100%"),b.l0.overflow("hidden"),b.l0.font.code,b.l0.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],dateText:[b.l0.flex.row,{"@container (max-width: 260px)":[b.l0.display.none]}],verticalDivider:[b.l0.mx(6),{width:1,height:28,background:b.TV.backgroundHigher}],portInfoDomain:[b.l0.display.flex,b.l0.flex.row,b.l0.align.center,b.l0.m(0),{"@container (max-width: 500px)":b.l0.display.none}],portInfoPorts:[b.l0.display.flex,b.l0.flex.row,b.l0.align.center,b.l0.m(0),{"@container (max-width: 340px)":b.l0.display.none}],portTooltipHeader:[b.l0.color.foregroundDimmer,b.l0.fontWeight.normal,b.l0.px(2),b.l0.pb(2)],portTooltipColumnLeft:[b.l0.textAlign.right],portTooltipColumnMiddle:[b.l0.textAlign.center,b.l0.px(4)]}),eo=(r={},(0,o._)(r,x.kH.DEBUGGER,"debugger"),(0,o._)(r,x.kH.PACKAGER,"packager"),(0,o._)(r,x.kH.UNIT_TEST,"tests"),(0,o._)(r,x.kH.EXECUTION,"run"),(0,o._)(r,x.kH.PORT_INFO,"port"),(0,o._)(r,x.kH.FORMATTER,"formatter"),r);function ei(e){var n=e.parsedError,t=e.openPane,r=(0,j.ql)();return(0,c.tZ)(A.T,{iconLeft:(0,c.tZ)(F.Z,{}),text:"Debug with AI",onClick:function(){n&&(t({type:"ghostwriterChat"}),r({chatMessage:{type:"debugger",errorType:"console",text:(0,N.Vh)(n,"debugger")}}))},colorway:"blurple",css:er.ghostwriterDebuggerButton})}function ea(e){var n=e.openedPorts;return(0,c.tZ)(m.G,{children:(0,c.BX)("table",{children:[(0,c.BX)("tr",{children:[(0,c.tZ)("th",{css:er.portTooltipHeader,children:"Internal"}),(0,c.tZ)("th",{}),(0,c.tZ)("th",{css:er.portTooltipHeader,children:"External"})]}),(0,c.tZ)("tbody",{children:n.map(function(e){var n=e.configuration,t=!0,r=null;switch(n.type){case X.DL.FORWARDED:t=!0,r=":".concat(n.externalPort);break;case X.DL.INTERNAL_ONLY:t=!1,r=null;break;case X.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case X.DL.MISCONFIGURED:case X.DL.CONFIG_MISSING:t=!0,r=(0,c.tZ)(U.Z,{})}return(0,c.BX)("tr",{children:[(0,c.BX)("td",{css:er.portTooltipColumnLeft,children:[":",n.localPort]}),(0,c.tZ)("td",{css:er.portTooltipColumnMiddle,children:t?"→":null}),(0,c.tZ)("td",{children:r})]},n.localPort)})})]})})}function el(e){var n=e.isDone,t=e.error,r=e.finishedTooltipText,o=e.executionPillText,i=e.runningTooltipText,a=e.circleColor,l=void 0===a?b.TV.accentPositiveDefault:a,u=e.duration,s=e.time,d=e.ghostwriterParsedError,f=e.openPane,p=e.isCollapsed,h=e.setIsCollapsed,g=e.lastMeaningfullLine,v=e.renderDebugWithAI,y=e.openedPorts,w=e.renderPortsIntegration,x=(0,O.Z)(new Date(s),"HH:mm:ss, MM/dd"),k=v&&!!d,Z=void 0!==t||!!d,C=void 0!==y&&y.length>0,S="";return C&&(S=1===y.length?":".concat(y[0].configuration.localPort):"".concat(y.length," ").concat((0,R.Z)("port",y.length))),(0,c.BX)(m.G,{css:er.outputBlockMetadataWrapper,onDoubleClick:function(){return h(!p)},children:[(0,c.BX)(m.G,{css:er.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,c.tZ)(P.hU,{alt:p?"Expand":"Collapse",onClick:function(){return h(!p)},children:p?(0,c.tZ)(B.Z,{}):(0,c.tZ)(M.Z,{})}),(0,c.tZ)(_.D,{color:"grey",text:et(o),css:er.executionPill}),k?(0,c.tZ)(ei,{parsedError:d,openPane:f}):null,(0,c.tZ)(m.G,{css:er.lastLineTextWrapper,children:p?(0,c.tZ)(L.xv,{css:er.lastLineText,variant:"small",children:g}):null})]}),(0,c.BX)(m.G,{css:er.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[w&&C?(0,c.BX)(c.HY,{children:[(0,c.BX)(m.G,{css:er.portInfoDomain,children:[(0,c.tZ)(L.xv,{color:"dimmer",css:b.l0.mr(0),children:(0,c.tZ)(I.u,{tooltip:"Open Webview",children:(0,c.tZ)(D.zx,{size:"small",variant:"underlinedOnHover",text:C?"{...}.replit.dev":"",onClick:function(){f({type:"webview",data:C?{portType:"local",port:y[0].configuration.localPort}:void 0},!0)}})})}),(0,c.tZ)(m.G,{css:er.verticalDivider})]}),(0,c.BX)(m.G,{css:er.portInfoPorts,children:[(0,c.tZ)(L.xv,{color:"dimmer",css:b.l0.mr(0),children:(0,c.tZ)(I.u,{tooltip:(0,c.tZ)(ea,{openedPorts:y}),children:(0,c.tZ)(D.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,c.tZ)(G.Z,{color:b.TV.accentPositiveStronger}),text:S,onClick:function(){f({type:"networking"},!0)}})})}),(0,c.tZ)(m.G,{css:er.verticalDivider})]})]}):null,(0,c.BX)(L.xv,{color:"dimmer",variant:"small",css:er.dateText,children:[u?(0,c.tZ)(I.u,{tooltip:"".concat(Math.round(u).toLocaleString(),"ms"),children:u<1e3?"".concat(Math.floor(u),"ms"):u<6e4?"".concat(Math.floor(u/1e3),"s"):"".concat(Math.floor(u/6e4),"m")}):null,u?"".concat("\xa0","on").concat("\xa0"):null,x]}),n?(0,c.tZ)(I.u,{tooltip:r,children:Z?(0,c.tZ)(U.Z,{}):(0,c.tZ)(q.Z,{})}):(0,c.tZ)(I.u,{tooltip:void 0===i?"Running...":i,children:(0,c.tZ)(W.Z,{color:l})})]})]})}function ec(e){var n,t,r=e.isCollapsed,o=e.setIsCollapsed,i=e.openPane,a=e.startTime,l=e.endTime,u=e.localStartTime,s=e.localEndTime,d=e.isDone,f=e.data,p=e.error,h=e.toolchain,g=e.ports,v=e.renderDebugWithAI,m=e.renderPortsIntegration,y=es(!d),b=en(h,f.onMessage).parsedError,x=ed(f.onMessage),k=(0,w.r4)(g,f.cgroup);a&&l?n=l-a:!d&&u?n=y-u:d&&s&&(n=s-u);var Z="Finished";return(void 0!==p||b)&&(Z=void 0!==p?et(p):"Finished with error"),(0,c.tZ)(el,{isDone:d,error:p,finishedTooltipText:Z,ghostwriterParsedError:b,executionPillText:null!==(t=f.executionMode)&&void 0!==t?t:"unknown",duration:n,time:null!=a?a:u,lastMeaningfullLine:x,openPane:i,isCollapsed:r,setIsCollapsed:o,renderDebugWithAI:v,openedPorts:k,renderPortsIntegration:m})}function eu(e){var n,t=e.isCollapsed,r=e.setIsCollapsed,o=e.openPane,i=e.localStartTime,a=e.localEndTime,l=e.isDone,u=e.type,s=e.error,d=e.data,f=e.toolchain,p=e.renderDebugWithAI,h=es(!l),g=en(f,d.onMessage),v=ed(d.onMessage),m=eo[u],y=s?(0,c.BX)(L.xv,{multiline:!0,children:[et(eo[u])," error",(0,c.tZ)("br",{}),s]}):"Finished",w=b.TV.accentPositiveDefault,k="Running...";if(u===x.kH.DEBUGGER){var Z=d.debugState;w="paused"===Z?b.TV.yellowDefault:b.TV.accentPositiveDefault,k="paused"===Z?"Paused":"Running..."}return a?n=a-i:!l&&i&&(n=h-i),(0,c.tZ)(el,{isCollapsed:t,setIsCollapsed:r,openPane:o,isDone:l,finishedTooltipText:y,executionPillText:m,duration:n,time:i,circleColor:w,runningTooltipText:k,ghostwriterParsedError:g.parsedError,lastMeaningfullLine:v,renderDebugWithAI:p,error:s})}function es(e){var n=(0,l._)((0,T.useState)(function(){return Date.now()}),2),t=n[0],r=n[1];return(0,T.useEffect)(function(){if(e){var n=setInterval(function(){r(Date.now())},100);return function(){clearInterval(n)}}},[e]),t}function ed(e){var n=(0,l._)((0,T.useState)(""),2),t=n[0],r=n[1];return(0,T.useEffect)(function(){return e(function(e){var n,t=null===(n=(0,z.Z)(e).split("\n").reverse().find(function(e){return e.trim().length>0}))||void 0===n?void 0:n.trim();t&&r(t)})}),t}function ef(e){var n=e.isCollapsed,t=e.setIsCollapsed,r=e.openPane,o=e.isDone,i=e.type,a=e.data,l=e.error,u=e.localStartTime,s=e.localEndTime,d=e.startTime,f=e.endTime,p=e.toolchain,h=e.renderDebugWithAI,g=e.ports,v=e.renderPortsIntegration;switch(i){case x.kH.EXECUTION:return(0,c.tZ)(ec,{isCollapsed:n,setIsCollapsed:t,openPane:r,isDone:o,type:i,startTime:d,endTime:f,localStartTime:u,localEndTime:s,data:a,error:l,toolchain:p,renderDebugWithAI:h,ports:g,renderPortsIntegration:v});case x.kH.DEBUGGER:case x.kH.PACKAGER:case x.kH.UNIT_TEST:case x.kH.FORMATTER:return(0,c.tZ)(eu,{isCollapsed:n,setIsCollapsed:t,openPane:r,isDone:o,type:i,localStartTime:u,localEndTime:s,data:a,error:l,toolchain:p,renderDebugWithAI:h,ports:g,renderPortsIntegration:v});default:(0,H.Z)(i)}}var ep=t(7444),eh=t(95571),eg=t(14675),ev=t(80502),em=t(31384),ey=t(19562),eb={noScroll:!0};function ew(e){for(var n=1,t=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var o=t[r];if(o){for(var i=!1,a=0;a<e.cols;a++)if(0!==o.hasContent(a)){i=!0;break}if(i){n=r+1;break}}}return n}var ex=(0,f.$)(["topOffset"]),ek=ex.cssVars,eZ=ex.styleTokens,eC=(0,y.X)({wrapper:{display:"grid"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:eZ.topOffset,"& .xterm":[b.l0.py(8),b.l0.pl(8),b.l0.height("100%"),b.l0.overflow("hidden")],"& .xterm-viewport":[b.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:eZ.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4}});function eS(e){var n=e.onMessage,t=e.onInput,r=e.openFile,o=e.openAIWithMessage,i=e.openSearchAndReplace,a=e.openWebview,u=e.listFiles,s=e.autoFocus,f=e.maxHeight,p=e.onResizeTerminal,h=e.scrollPosition,g=e.scrollParent,v=(0,l._)((0,ev.Z)({autoFit:!1,size:{rows:10},openFile:r,listFiles:u,openWebview:a}),2),y=v[0],b=v[1],w=(0,T.useMemo)(function(){return null==y?void 0:y._term},[y]),x=(0,T.useMemo)(function(){var e,n=null==w?void 0:w._core;return null!==(e=null==n?void 0:n._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[w]),k=(0,l._)((0,T.useState)(!1),2),Z=k[0],C=k[1],S=(0,l._)((0,T.useState)("normal"),2),E=S[0],R=S[1],D=(0,l._)((0,T.useState)(1),2),P=D[0],_=D[1],A=(0,l._)((0,T.useState)(1),2),L=A[0],I=A[1],q=(0,l._)((0,T.useState)(!1),2),M=q[0],B=q[1],G=(0,l._)((0,T.useState)(!1),2),W=G[0],F=G[1],U=(0,l._)((0,T.useState)(""),2),X=U[0],O=U[1],N=(0,ep.Z)(P),H=(0,ep.Z)(L),z=(0,ep.Z)(M),j=(0,ep.Z)(E),V=(0,T.useMemo)(function(){return Math.floor((f-16)/x.height)},[f,x.height]),K=(0,T.useRef)(null);(0,T.useEffect)(function(){return function(){N.current=1,H.current=1,z.current=!1,j.current="normal",null!==K.current&&clearTimeout(K.current)}},[N,H,z,j,K]);var Y=(0,d.Z)(function(e){var n=e.widthChanged;y&&w&&n&&y.fit()},{type:"debounce",wait:200});(0,T.useLayoutEffect)(function(){y&&y.fit()},[y]),(0,T.useLayoutEffect)(function(){s&&y&&y.focus()},[y,s]),(0,T.useEffect)(function(){if(y){var e=y.onData(function(e){t(e)}),n=y.onResize(function(){p(y.getSize())});return function(){e.dispose(),n.dispose()}}},[y,t,p]),(0,T.useEffect)(function(){if(w){var e=w.buffer.onBufferChange(function(e){R(e.type),"alternate"===e.type&&(_(V),I(V),B(!1))});return function(){e.dispose()}}},[w,V]),(0,T.useEffect)(function(){var e=function(){if(w&&"alternate"!==j.current){var e=w.buffer.active.cursorY,n=w.buffer.active.viewportY,t=ew(w);t!==H.current&&I(t),e>N.current&&_(e),n>0&&!1===z.current&&B(!0)}};if(w){var n=[w.onLineFeed(e),w.onCursorMove(e)];return function(){n.forEach(function(e){return e.dispose()})}}},[w,N,z,j,H,V]),(0,T.useEffect)(function(){if(w&&y){if(y.getSize().rows!==V&&w.resize(w.cols,V),"alternate"===j.current)_(V);else{var e=ew(w);e!==H.current&&I(e),V<e?_(V):e<V&&_(e)}}},[w,y,V,p,_,j,H]),(0,T.useEffect)(function(){if(y)return n(function(e){return y.write(e)})},[n,y]);var $=(0,T.useMemo)(function(){return(Math.min(P,L)+1)*x.height+16},[P,L,x]),J=(0,T.useMemo)(function(){return M?(L+1)*x.height+16:$},[x,M,$,L]);(0,T.useEffect)(function(){if(w){if(h<1||!M){w.scrollToLine(0);return}var e=J-$,n=L-P;if(e<1){w.scrollToLine(0);return}w.scrollToLine(Math.round(h/e*n))}},[h,x,w,M,J,$,P,L]);var Q=(0,T.useCallback)(function(){if(w){var e=w.getSelectionPosition();e&&g(e.start.y*x.height-f/2)}},[w,x.height,f,g]),ee=(0,em.av)().onContextMenu,en=(0,ey.j)({xterm:y,isOutputsTerminal:!0,openAIWithMessage:o,openShellSearch:function(e){F(!0),O(e)},openSearchAndReplace:i});return(0,c.tZ)(m.G,{innerRef:Y,children:(0,c.BX)(m.G,{css:eC.wrapper,style:{height:J,pointerEvents:Z?"none":"all"},onWheel:function(){C(!0),K.current&&clearTimeout(K.current),K.current=setTimeout(function(){C(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,eh.jh)(e)&&(F(!0),e.preventDefault())},children:[W?(0,c.tZ)(m.G,{css:eC.searchWidget,children:(0,c.tZ)(eg.R,{searchValue:X,setSearchValue:O,findPrevious:function(e){(null==y?void 0:y.findPrevious(e,eb))&&Q()},findNext:function(e){(null==y?void 0:y.findNext(e,eb))&&Q()},exit:function(){return F(!1)}})}):null,(0,c.tZ)(m.G,{style:{height:$,maxHeight:f},css:eC.terminal,onContextMenu:function(e){return ee(e,{command:en})},innerRef:b})]})})}var eT=t(27187),eE=(0,y.X)({emptyStateWrapper:[b.l0.p(8),b.l0.display.block,{lineHeight:"32px"}],simpleRunButtonWrapper:[b.l0.rowWithGap(6),b.l0.backgroundColor.accentPositiveDimmest,b.l0.color.accentPositiveStrongest,b.l0.align.center,b.l0.borderRadius(8),b.l0.py(2),b.l0.px(6),b.l0.mx(4),b.l0.cursor.pointer,{"&:hover":[b.l0.color.white,b.l0.backgroundColor.accentPositiveDefault]}]});function eR(e){var n=e.runner;return(0,c.tZ)(m.G,{tag:"span",style:{display:"inline-block"},children:(0,c.BX)(m.G,{tag:"button",onClick:function(){return n.run()},css:eE.simpleRunButtonWrapper,children:[(0,c.tZ)(eT.Z,{size:12}),(0,c.tZ)(L.xv,{children:"Run"})]})})}function eD(e){var n=e.runner,t=(0,l._)((0,T.useState)(function(){return n.getRunState()}),2),r=t[0],o=t[1];return((0,T.useEffect)(function(){var e=n.onStateChanged(function(e){o(e)});return function(){return e()}},[n]),r===x.Ah.OFFLINE)?(0,c.tZ)(m.G,{css:eE.emptyStateWrapper,children:"The Repl is booting..."}):r===x.Ah.RUNNING||r===x.Ah.BEFORE_RUN?(0,c.tZ)(m.G,{css:eE.emptyStateWrapper,children:"Running..."}):(0,c.BX)(m.G,{css:eE.emptyStateWrapper,children:["Results of your code will appear here when you"," ",(0,c.tZ)(eR,{runner:n})," the project."]})}var eP=(0,f.$)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),e_=eP.cssVars,eA=eP.styleTokens,eL=(0,y.X)({outputsListParent:[b.l0.height("100%"),b.l0.overflow("hidden"),b.l0.borderRadius(0,0,8,8)],outputsListWrapper:[b.l0.height("100%")],outputsList:[b.l0.height("100%"),b.l0.overflowY("scroll")],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[b.l0.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[b.l0.minHeight(eA.blockMinHeight)],outputBlockTerminalWrapper:[b.l0.minHeight(eA.blockMinHeight),{backgroundColor:eA.terminalBackgroundColor}],outputBlockClosingBorder:[b.l0.height(1),b.l0.zIndex(1),b.l0.border({direction:"bottom",width:1,style:"solid",color:b.TV.backgroundHigher}),{marginTop:-1}],terminalLoadingWrapper:[b.l0.p(8),b.l0.height(eA.previewHeight)],terminalLoadingLine:[b.l0.borderRadius(2),v.p.foregroundPulse(),b.l0.height(16),b.l0.mb(4)]});function eI(e){var n=e.targetHeight,t=Math.min(Math.floor((n-8)/20),4),r=(0,T.useMemo)(function(){return Array.from({length:t}).map(function(e,n){return(0,c.tZ)(m.G,{css:[eL.terminalLoadingLine],style:{width:100*Math.random()+"%"}},n)})},[t]);return(0,c.tZ)(m.G,{css:eL.terminalLoadingWrapper,style:(0,o._)({},e_.previewHeight,n+"px"),children:(0,c.tZ)(m.G,{style:{position:"sticky",top:36},children:r})})}function eq(e){var n,t,r,u,f,h,g,v,y,b,k,Z,S,R,D,P,_,A,L,I=e.onInput,q=e.openFile,M=e.openPane,B=e.openAIWithMessage,G=e.openSearchAndReplace,W=e.listFiles,F=e.autoFocus,U=e.rootRef,X=e.maxHeight,O=e.onResizeTerminal,N=e.isDone,H=e.data,z=e.error,j=e.localStartTime,V=e.localEndTime,K=e.startTime,Y=e.endTime,$=e.type,J=e.toolchain,Q=e.renderDebugWithAI,ee=e.visualState,en=e.onSetVisualState,et=e.ports,er=e.renderPortsIntegration,eo=e.onDontExposePort,ei=e.onDoExposePort,ea=(0,T.useRef)(null),el=(0,l._)((0,T.useState)(!0),2),ec=el[0],eu=el[1],es=(0,l._)((0,T.useState)(!1),2),ed=es[0],ep=es[1],eh=(0,l._)((0,T.useState)(0),2),eg=eh[0],ev=eh[1],em=(0,C.f)(),ey=(0,s.Z)(ec,ed?6e4:500),eb=(0,w.r4)(et,$===x.kH.EXECUTION?H.cgroup:void 0),ew=(0,l._)((0,T.useState)(0),2),ex=ew[0],eZ=ew[1],eC=(0,T.useCallback)(function(e,n){M({type:"webview",data:{portType:"local",path:e,port:n}},!0)},[M]),eT=(t=(n={maxHeight:X,visualState:ee,onSetVisualState:en}).visualState,r=n.onSetVisualState,u=n.maxHeight,h=(f=(0,l._)((0,T.useState)(0),2))[0],g=f[1],v=(0,T.useRef)(null),b=(y=(0,l._)((0,T.useState)(t===x.MZ.EXPANDED?"expanded":"collapsed"),2))[0],k=y[1],S=(Z=(0,l._)((0,T.useState)(void 0),2))[0],R=Z[1],D=(0,d.Z)(function(e){var n=e.height;"expanded"===b&&g(n)},{type:"debounce",wait:200}),(0,T.useEffect)(function(){if(v.current)switch(b){case"start-collapsing":k("is-collapsing");break;case"is-collapsing":R(0);break;case"start-expanding":k("is-expanding");break;case"is-expanding":R(h);break;case"expanded":R(void 0)}},[b,h]),P="expanded"!==b&&"is-expanding"!==b,_=(0,T.useCallback)(function(e){r(e?x.MZ.COLLAPSED:x.MZ.EXPANDED)},[r]),A=(0,T.useRef)(t),(0,T.useEffect)(function(){A.current===x.MZ.EXPANDED&&t===x.MZ.COLLAPSED&&v.current&&(k("start-collapsing"),R(Math.min(v.current.getBoundingClientRect().height,u)),k("start-collapsing")),A.current===x.MZ.COLLAPSED&&t===x.MZ.EXPANDED&&k("start-expanding"),A.current=t},[u,t]),{collapsedStep:b,isCollapsed:P,setIsCollapsed:_,blockWrapperRef:v,blockWrapperProps:{style:{height:S,transition:"height 120ms ease-out",overflow:"expanded"===b||"start-collapsing"===b?"visible":"hidden"},onTransitionEnd:function(){"is-collapsing"===b&&k("collapsed"),"is-expanding"===b&&k("expanded")}},blockResizeRef:D,measuredBlockHeight:h}),eE=eT.collapsedStep,eR=eT.isCollapsed,eD=eT.setIsCollapsed,eP=eT.blockWrapperRef,eA=eT.blockWrapperProps,eq=eT.blockResizeRef,eM=eT.measuredBlockHeight;(0,T.useEffect)(function(){if(U.current){var e,n=U.current,t=function(){var t,r;ev(Math.max(0,n.scrollTop-(null!==(r=null===(t=ea.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0))),ep(!0),e&&clearTimeout(e),e=setTimeout(function(){ep(!1)},500)};return n.addEventListener("scroll",t),function(){clearInterval(e),n.removeEventListener("scroll",t)}}},[U,ea]),(0,T.useEffect)(function(){if(ea.current&&U.current)return(0,p.j)(ea.current,function(){return eu(!0),function(){eu(!1)}},{root:U.current,threshold:0})},[U,ea]);var eB=(0,d.Z)(function(e){var n=e.height;"expanded"===eE&&eZ(n)},{type:"debounce",wait:200}),eG=!1;return"collapsed"===eE?eG=!1:(!N||ey)&&(eG=!0),(0,c.BX)(m.G,{innerRef:ea,children:[(0,c.tZ)(ef,{isCollapsed:eR,setIsCollapsed:eD,openPane:M,isDone:N,data:H,localStartTime:j,localEndTime:V,startTime:K,endTime:Y,type:$,error:z,toolchain:J,renderDebugWithAI:Q,ports:et,renderPortsIntegration:er}),er?(0,c.tZ)(m.G,{innerRef:eB,style:{position:"sticky",top:28},children:(0,c.tZ)(E.ms,{configurations:eb.map(function(e){return e.configuration}),openWebview:function(){eC("/",eb[0].configuration.localPort)},openNetworkingTool:function(){M({type:"networking"},!0)},onDontExposePort:function(){1===eb.length&&eo(eb[0].configuration.localPort)},onDoExposePort:function(){1===eb.length&&ei(eb[0].configuration.localPort)}})}):null,(0,c.tZ)("div",(0,a._)((0,i._)({ref:eP},eA),{children:(0,c.tZ)(m.G,{css:eL.outputBlockTerminalWrapper,style:(L={},(0,o._)(L,e_.blockMinHeight,eM+"px"),(0,o._)(L,e_.terminalBackgroundColor,null==em?void 0:em.background),(0,o._)(L,ek.topOffset,28+ex+"px"),L),children:eG?(0,c.tZ)(m.G,{innerRef:eq,children:(0,c.tZ)(eS,{onMessage:H.onMessage,onInput:I,openFile:q,openAIWithMessage:B,openSearchAndReplace:G,openWebview:eC,listFiles:W,maxHeight:X-28-ex,onResizeTerminal:O,scrollPosition:eg,scrollParent:function(e){var n,t,r,o=e+(null!==(r=null===(n=ea.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0);null===(t=U.current)||void 0===t||t.scrollTo({top:o})},autoFocus:F})}):(0,c.tZ)(eI,{targetHeight:eM})})})),(0,c.tZ)(m.G,{css:eL.outputBlockClosingBorder})]})}function eM(e){var n=e.performPaneOperation,t=e.isActive,r=e.runner,o=e.toolchain,i=e.ports,a=e.listFiles,s=e.renderEmptyStateMessage,f=e.renderDebugWithAI,p=void 0===f||f,v=e.renderSearchAndReplaceContextMenu,y=void 0===v||v,b=e.renderPortsIntegration,w=void 0===b||b,C=e.sendGhostwriterChatMessage,E=e.onDontExposePort,R=e.onDoExposePort,D=(0,l._)((0,T.useState)([]),2),P=D[0],_=D[1],A=(0,l._)((0,T.useState)(0),2),L=A[0],I=A[1],q=(0,l._)((0,T.useState)(!0),2),M=q[0],B=q[1],G=(0,T.useRef)(null),W=(0,k.Z)(g.y.Output),F=(0,l._)((0,T.useState)(!1),2),U=F[0],X=F[1],O=(0,T.useRef)(0),N=(0,h.T3)(),H=(0,d.Z)(function(e){I(e.height)},{type:"throttle",wait:200}),z=(0,T.useCallback)(function(e){n({operation:"open",secondary:!0,pane:{type:(0,Z.Dp)(e),data:e}})},[n]),j=(0,T.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n({operation:"open",secondary:t,pane:e})},[n]),V=(0,T.useCallback)(function(e){n({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[n]),K=(0,T.useCallback)(function(e){C({chatMessage:e}),n({operation:"open",secondary:!0,pane:{type:"ghostwriterChat"}})},[n,C]);return(0,T.useEffect)(function(){return r.onStateChanged(function(e){X(e===x.Ah.BEFORE_RUN)})},[r]),(0,T.useEffect)(function(){_(r.getOutputBlocks())},[r]),(0,T.useEffect)(function(){var e=r.onAllBlocksChanged(function(e){_(e)}),n=r.onBlockChanged(function(e){!P.find(function(n){return n.id===e.id})&&G.current&&(G.current.scrollTo(0,G.current.scrollHeight),B(!0)),_((0,S.Uy)(function(n){var t=n.findIndex(function(n){return n.id===e.id});t>=0?n[t]=e:n.push(e)}))});return function(){n(),e()}},[r,P,G]),(0,c.BX)(m.G,{css:eL.outputsListParent,innerRef:W,children:[U?(0,c.tZ)(u.Z,{}):null,(0,c.BX)(m.G,{css:eL.outputsListWrapper,innerRef:H,children:[0===P.length&&(void 0===s||s)?(0,c.tZ)(eD,{runner:r}):null,(0,c.BX)(m.G,{css:[eL.outputsList,M&&eL.outputsListSnapToBottom],innerRef:G,onScroll:function(){G.current&&(G.current.scrollTop<O.current?B(!1):B(G.current.scrollHeight-G.current.scrollTop-20<L),O.current=G.current.scrollTop)},children:[P.map(function(e,n){var l=n===P.length-1;return(0,c.tZ)(eq,{rootRef:G,maxHeight:L,onInput:r.sendInput,openFile:z,openAIWithMessage:p?K:void 0,openSearchAndReplace:y?V:void 0,openPane:j,listFiles:a,onResizeTerminal:function(n){e.isDone||e.type!==x.kH.EXECUTION||r.resizeTerminalForBlock(e.id,n)},autoFocus:t&&l&&!N,isDone:e.isDone,type:e.type,error:e.error,visualState:e.visualState,onSetVisualState:function(n){return r.setBlockVisualState(e.id,n)},localStartTime:e.localStartTime,localEndTime:e.localEndTime,startTime:e.startTime,endTime:e.endTime,data:e.data,toolchain:o,renderDebugWithAI:p,ports:i,renderPortsIntegration:w,onDontExposePort:E,onDoExposePort:R},e.id)}),M?(0,c.tZ)(m.G,{css:eL.scrollSnap}):null]})]})]})}},32911:function(e,n,t){t.d(n,{ms:function(){return P}});var r=t(66626),o=t(74985),i=t(73157),a=t(1498),l=t(15146),c=t(74833),u=t(56596),s=t(93918),d=t(58719),f=t(58003),p=t(29287),h=t(35375),g=t(50494),v=t(50959),m=t(40028),y=t(66985),b=t(98848),w=t(39390),x=(0,s.X)({wrapper:[p.l0.py(6),p.l0.flex.row,p.l0.align.center,p.l0.backgroundColor.accentPrimaryDimmest],wrapperWarning:[p.l0.py(6),p.l0.flex.row,p.l0.align.center,p.l0.backgroundColor.orangeDimmest],body:[p.l0.flex.growAndShrink(1)],firstLine:[p.l0.px(6),p.l0.rowWithGap(2),p.l0.align.center,p.l0.flex.wrap,p.l0.maxWidth("100%"),p.l0.overflow("hidden")],secondLine:[p.l0.px(6),p.l0.rowWithGap(2),p.l0.align.center,p.l0.flex.wrap,p.l0.maxWidth("100%"),p.l0.overflow("hidden"),p.l0.color.accentPrimaryStronger],secondLineWarning:[p.l0.px(6),p.l0.rowWithGap(2),p.l0.align.center,p.l0.flex.wrap,p.l0.maxWidth("100%"),p.l0.overflow("hidden"),p.l0.color.orangeStrongest],buttons:[p.l0.flex.row,p.l0.pr(6)],verticalDivider:[p.l0.ml(6),p.l0.mr(6),p.l0.height("1em"),p.l0.width(1),p.l0.backgroundColor.foregroundDefault]});function k(e){var n=e.openNetworkingTool,t=e.onClose,r=e.onDontExposePort,i=e.onDoExposePort,a=e.firstLine,c=e.secondLine,s=e.renderSecondLine,p=e.renderDontExposeButton,h=e.renderDoExposeButton,g=e.isWarning,v=void 0!==g&&g;return(0,o.BX)(u.G,{css:v?x.wrapperWarning:x.wrapper,children:[(0,o.BX)(u.G,{css:x.body,children:[(0,o.tZ)(u.G,{css:x.firstLine,children:a}),s?(0,o.tZ)(u.G,{css:v?x.secondLineWarning:x.secondLine,children:c}):null]}),(0,o.BX)(u.G,{css:x.buttons,children:[(0,o.tZ)(l.hU,{alt:"Networking tool",onClick:n,children:(0,o.tZ)(f.Z,{})}),void 0!==p&&p?(0,o.tZ)(l.hU,{alt:"Don't expose this port",onClick:r,children:(0,o.tZ)(b.Z,{})}):null,void 0!==h&&h?(0,o.tZ)(l.hU,{alt:"Expose this port",onClick:i,children:(0,o.tZ)(w.Z,{})}):null,(0,o.tZ)(l.hU,{alt:"Close",onClick:t,children:(0,o.tZ)(d.Z,{})})]})]})}function Z(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,i=e.onClose,l=e.onDontExposePort,u=e.renderSecondLine,s=(0,y.O2)(n.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(n.externalPort);return(0,o.tZ)(k,{openNetworkingTool:r,onClose:i,firstLine:(0,o.BX)(o.HY,{children:[(0,o.BX)(c.xv,{children:["Port :",n.localPort," opened on"]}),(0,o.tZ)(a.zx,{variant:"underlined",text:s,onClick:t})]}),secondLine:(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.xv,{children:"You can manage this config in the"}),(0,o.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:u,renderDontExposeButton:!0,onDontExposePort:l})}function C(e){var n=e.configuration,t=e.openNetworkingTool,r=e.onClose,i=e.renderSecondLine,l=e.onDoExposePort;return(0,o.tZ)(k,{openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but not exposed to the web."),secondLine:(0,o.tZ)(a.zx,{variant:"underlined",text:"Expose this port?",onClick:t}),renderSecondLine:i,renderDoExposeButton:!0,onDoExposePort:l})}function S(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,i=e.renderSecondLine;return(0,o.tZ)(k,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but all available external ports are reserved."),secondLine:(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.xv,{children:"Remove an external port in"}),(0,o.tZ)(a.zx,{variant:"underlined",text:"port configuration",onClick:n}),(0,o.tZ)(c.xv,{children:"to open a new port."})]}),renderSecondLine:i})}function T(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,i=e.renderSecondLine;return(0,o.tZ)(k,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but is not configured properly."),secondLine:(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.xv,{children:"You can fix this in the"}),(0,o.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:i})}function E(e){var n=e.openNetworkingTool,t=e.configuration,r=e.onClose,i=e.renderSecondLine;return(0,o.tZ)(k,{isWarning:!0,openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but has missing configuration."),secondLine:(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.xv,{children:"You can fix this in the"}),(0,o.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:n})]}),renderSecondLine:i})}function R(e){var n=e.configuration,t=e.openWebview,r=e.openNetworkingTool,i=e.onClose,a=e.onDontExposePort,l=e.onDoExposePort,c=e.renderSecondLine,u=n.type;switch(u){case h.DL.FORWARDED:return(0,o.tZ)(Z,{configuration:n,openWebview:t,openNetworkingTool:r,onClose:i,renderSecondLine:c,onDontExposePort:a});case h.DL.INTERNAL_ONLY:return(0,o.tZ)(C,{configuration:n,openNetworkingTool:r,onClose:i,renderSecondLine:c,onDoExposePort:l});case h.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,o.tZ)(S,{configuration:n,openNetworkingTool:r,onClose:i,renderSecondLine:c});case h.DL.MISCONFIGURED:return(0,o.tZ)(T,{configuration:n,openNetworkingTool:r,onClose:i,renderSecondLine:c});case h.DL.CONFIG_MISSING:return(0,o.tZ)(E,{configuration:n,openNetworkingTool:r,onClose:i,renderSecondLine:c});default:(0,m.Z)(u)}}function D(e){var n=e.configurations,t=e.openWebview,r=e.openNetworkingTool,l=e.onClose,s=e.renderSecondLine,d=n.filter(function(e){return e.type===h.DL.FORWARDED}),f=n.filter(function(e){return e.type!==h.DL.FORWARDED});return(0,o.tZ)(k,{isWarning:0===d.length&&f.length>0,openNetworkingTool:r,onClose:l,firstLine:(0,o.BX)(o.HY,{children:[d.length>0?(0,o.BX)(o.HY,{children:[(0,o.BX)(c.xv,{children:[d.length," ",(0,i.Z)("port",d.length)," ","opened on"]}),(0,o.tZ)(a.zx,{variant:"underlined",text:"{...}.replit.dev",onClick:t})]}):null,d.length>0&&f.length>0?(0,o.tZ)(u.G,{css:x.verticalDivider}):null,f.length>0?(0,o.BX)(c.xv,{children:[f.length," ",(0,i.Z)("port",f.length)," ","failed to open"]}):null]}),secondLine:(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.xv,{children:"You can manage this config in the"}),(0,o.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:s})}function P(e){var n=e.configurations,t=e.openWebview,i=e.openNetworkingTool,a=e.onClose,l=e.onDontExposePort,c=e.onDoExposePort,u=(0,g.e)("port-nudges"),s=(0,r._)((0,v.useState)(!1),2),d=s[0],f=s[1],p=!u.isDone,h=(0,r._)((0,v.useState)(!0),2),m=h[0],y=h[1];function b(){y(!1),null==a||a()}return((0,v.useEffect)(function(){0===n.length&&y(!0)},[n]),(0,v.useEffect)(function(){if(!u.isDone){if(n.length>0&&!d){f(!0);return}0===n.length&&d&&u.setAsDone()}},[n,u,d]),m&&0!==n.length)?1===n.length?(0,o.tZ)(R,{configuration:n[0],openNetworkingTool:i,openWebview:t,renderSecondLine:p,onClose:b,onDontExposePort:l,onDoExposePort:c}):(0,o.tZ)(D,{configurations:n,openNetworkingTool:i,openWebview:t,renderSecondLine:p,onClose:b}):null}},19562:function(e,n,t){t.d(n,{j:function(){return Z}});var r=t(27387),o=t(96583),i=t(74985),a=t(38931),l=t(25425),c=t(10041),u=t(48728),s=t(41859),d=t(73030),f=t(19408),p=t(25934),h=t(82723),g=t(41140),v=t(47030),m=t(29287),y=t(74652),b=t(27308),w=t(50959),x=t(80259),k=t(29620);function Z(e){var n,t,Z,C,S,T,E,R,D,P,_,A,L=e.xterm,I=e.openAIWithMessage,q=e.openShellSearch,M=e.openSearchAndReplace,B=e.openGeneratePrompt,G=e.isOutputsTerminal,W=(t=(n={xterm:L,openAIWithMessage:I,openGeneratePrompt:B}).xterm,Z=n.openAIWithMessage,C=n.openGeneratePrompt,S=(0,l.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),T=(0,l.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),E=(0,y.gf)(k.CH.id),(0,w.useMemo)(function(){if(!S){var e=[];if(T&&C&&e.push({match:x.pl,data:{type:"action",label:"Generate",icon:(0,i.tZ)(p.Z,{color:m.TV.blurpleStronger}),keyboardShortcut:E,run:function(){C()}}}),Z&&e.push({match:x.pl,data:{type:"action",label:"Explain",icon:(0,i.tZ)(f.Z,{color:m.TV.blurpleStronger}),run:function(){var e,n;Z({type:"chat",text:(n=null!==(e=null==t?void 0:t._term.getSelection())&&void 0!==e?e:"","\nCan you explain this shell output?\n\n```\n".concat(n,"\n```\n"))})}}}),0!==e.length)return{data:{type:"context",label:"AI",icon:(0,i.tZ)(d.Z,{})},commands:function(){return e}}}},[T,S,Z,E,C,null==t?void 0:t._term])),F=(D=(R={xterm:L,openShellSearch:q,openSearchAndReplace:M,isOutputsTerminal:void 0!==G&&G}).xterm,P=R.openShellSearch,_=R.openSearchAndReplace,A=R.isOutputsTerminal,(0,w.useMemo)(function(){var e=[];if(P){var n=A?(0,i.tZ)(v.Z,{}):(0,i.tZ)(g.Z,{});e.push({match:x.pl,data:{type:"action",label:A?"Find in Console":"Find in Shell",icon:n,run:function(){var e;P(null!==(e=null==D?void 0:D._term.getSelection())&&void 0!==e?e:"")}}})}if(_&&e.push({match:x.pl,data:{type:"action",label:"Find in Repl",icon:(0,i.tZ)(h.Z,{}),run:function(){var e;_(null!==(e=null==D?void 0:D._term.getSelection())&&void 0!==e?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,i.tZ)(h.Z,{})},commands:function(){return e}}},[D,P,_,A])),U=(0,w.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,i.tZ)(u.Z,{})},commands:function(){return[{match:x.pl,data:{type:"action",label:"Copy",icon:(0,i.tZ)(s.Z,{}),keyboardShortcut:(0,b.l2)({cmdOrCtrl:!0,key:"c"}),run:function(){var e,n=null!==(e=null==L?void 0:L._term.getSelection())&&void 0!==e?e:"";(0,c.Z)(n)}}},{match:x.pl,data:{type:"action",label:"Paste",icon:(0,i.tZ)(u.Z,{}),keyboardShortcut:(0,b.l2)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,r._)(function(){var e,n;return(0,o.Jh)(this,function(t){switch(t.label){case 0:e="",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=t.sent(),[3,4];case 3:return n=t.sent(),a.kg.error("Shell context menu paste failed",{message:n.message}),[2];case 4:return null==L||L._term.paste(e),[2]}})})()}}}]}}},[L]);return(0,w.useMemo)(function(){var e=[];return W&&e.push(W),F&&e.push(F),U&&e.push(U),{data:{type:"context",label:"Search actions",icon:(0,i.tZ)(h.Z,{})},commands:function(){return e}}},[W,F,U])}},14675:function(e,n,t){t.d(n,{R:function(){return u}});var r=t(74985),o=t(76999),i=t.n(o),a=t(29287),l=t(50831),c=t(50959);function u(e){var n=e.searchValue,t=e.setSearchValue,o=e.findNext,u=e.findPrevious,s=e.exit,d=(0,c.useRef)(null);(0,c.useEffect)(function(){d.current&&d.current.focus()},[]);var f=function(e){if("Escape"===e.key){s();return}"Enter"===e.key&&(e.shiftKey?u(n):o(n))};return(0,r.BX)("div",{className:"jsx-cae03adee2975d4 search",children:[(0,r.tZ)("input",{ref:d,placeholder:"Find",value:n,onChange:function(e){return t(e.target.value)},onKeyDown:function(e){return f(e)},css:[a.l0.focusRing],className:"jsx-cae03adee2975d4"}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){return o(n)},children:"Next"}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){return u(n)},children:"Previous"}),(0,r.tZ)(l.Z,{size:"small",onClick:s,children:"Exit"}),(0,r.tZ)(i(),{id:"cae03adee2975d4",children:".search.jsx-cae03adee2975d4{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:30px}input.jsx-cae03adee2975d4{padding:4px var(--space-8)var(--space-4);background-color:var(--background-default);color:var(--foreground-default);height:24px;width:85px;border:none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}input.jsx-cae03adee2975d4::-webkit-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-moz-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::-ms-input-placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4::placeholder{color:var(--foreground-default)}input.jsx-cae03adee2975d4:focus{outline:none;border:var(--accent-primary-default)}input.jsx-cae03adee2975d4,.search button{margin:0 var(--space-4)}"})]})}},29620:function(e,n,t){t.d(n,{S1:function(){return E},CH:function(){return R},St:function(){return _}});var r=t(42516),o=t(66626),i=t(74985),a=t(57407),l=t(1643),c=t(25425),u=t(2038),s=t(47611),d=t(50959),f=t(40028),p=t(77589),h=t(9669),g=t(74833),v=t(56596),m=t(93918),y=t(29287),b=t(72067),w=t(26851),x=t(74652),k=t(27308),Z=t(80502),C="\x1b[200~",S="\x1b[201~",T=t(44478),E="shell",R={id:"shell.generateWithAI",name:"Generate with AI in the shell",scope:E,default:(0,k.l2)({cmdOrCtrl:!0,key:"i"})},D=(0,m.X)({container:[y.l0.rowWithGap(2),y.l0.flex.row,y.l0.align.center,y.l0.textAlign.center,y.l0.cursor.pointer,y.l0.justify.end,{opacity:.6},y.l0.height("100%")],text:[y.l0.rowWithGap(4),y.l0.color.foregroundDimmest,y.l0.font.code],shortcut:[y.l0.ml(4),{"& > div > div":{fontSize:"0.8em",paddingLeft:(0,l.fP)(4),paddingRight:(0,l.fP)(4),paddingTop:(0,l.fP)(2),paddingBottom:(0,l.fP)(2)}}]}),P=function(e){var n=e.onClick,t=e.renderShortcut,r=e.shortcut;return(0,i.BX)(v.G,{css:D.container,onClick:function(e){e.stopPropagation(),n()},children:[(0,i.tZ)("div",{css:D.text,children:(0,i.tZ)(g.xv,{variant:"small",children:"Generate"})}),(0,i.tZ)("div",{css:D.shortcut,children:t&&r?(0,i.tZ)(x.bM,{keyCombo:r,small:!0}):null})]})};function _(e){var n,t,l,g,v,m,y=e.onShellKey,k=e.onOutput,E=e.onShellMetadata,D=e.container,_=e.initialPwd,A=e.openFile,L=e.listFiles,I=e.openWebview,q=e.onOpenGeneratePrompt,M=e.onUpdateCurrentPromptLineNumber,B=(0,d.useRef)(null),G=(0,d.useRef)(null),W=(0,u.T3)(),F=(0,x.gf)(R.id),U=(0,d.useRef)(null),X=(0,c.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),O=(0,d.useCallback)(function(e,n){if("B"===n&&X){var t,r,o=e.buffer.active,a=o.cursorX,l=o.cursorY;M(l),B.current&&B.current.dispose(),G.current&&G.current.dispose(),U.current&&(U.current.unmount(),U.current=null),B.current=e.registerMarker(0),G.current=null!==(r=e.registerDecoration({marker:B.current,x:e.cols-14,width:14,layer:"top"}))&&void 0!==r?r:null,null===(t=G.current)||void 0===t||t.onRender(function(n){for(var t=!1,r=e.buffer.active._buffer.lines._array[l],o=a;o<e.cols;o++)if((null==r?void 0:r.hasContent(o))!==0){t=!0;break}var c=!t;U.current||(U.current=(0,T.createRoot)(n)),U.current.render(c?(0,i.tZ)(P,{onClick:function(){return q()},renderShortcut:!W,shortcut:F}):null)})}},[X,q,M,W,F]),N=(0,o._)((0,Z.Z)({openFile:A,listFiles:L,openWebview:I,onInBandOSCMessages:(0,r._)({},133,O)}),2),H=N[0],z=N[1],j=(0,b.Z)({service:"shell",container:D}),V=(0,w.K)({channelId:null==j?void 0:null===(m=j.channel)||void 0===m?void 0:m.id}),K=(0,d.useRef)(!1),Y="",$="",J="",Q=(0,d.useCallback)(function(e){if(!j.channel||!H)return!1;var n=D.client();if(!j.channel||"open"!==j.channel.status||n.getConnectionState()!==a.em.CONNECTED)return!1;var t=e.startsWith(C)&&e.endsWith(S)?e.slice(C.length,e.length-S.length):e;return j.channel.send({input:t}),!0},[H,j,D]);return t=(n={sendInput:Q,paste:function(e){return!!H&&(H.paste(e),!0)}}).sendInput,l=n.paste,g=(0,s.useRouter)(),v=(0,u.Vg)(g),(0,d.useEffect)(function(){if(v){var e=function(e,n){t(n)?(0,p.gU)(e):(0,p.pl)(e)},n=function(e){"unknown"===e||(0,f.Z)(e)},r=function(t){(0,p.gN)(t,function(t){var r=t.type;switch(r){case h.cF.SHELL_INSERT_INPUT:e(t.id,t.input);break;case h.cF.SHELL_COMMAND:n(t.command);break;case h.cF.SHELL_PASTE_TEXT:l(t.text)?(0,p.gU)(t.id):(0,p.pl)(t.id);break;default:(0,f.Z)(r)}})};return window.addEventListener("message",r),function(){window.removeEventListener("message",r)}}},[v,t,l]),(0,d.useEffect)(function(){if(j.channel&&"open"===j.channel.status)return j.channel.onCommand(function(e){e.shellMetadata&&(null==E||E(e.shellMetadata))})},[j.channel,E]),(0,d.useEffect)(function(){if(j.channel&&"open"===j.channel.status&&H){var e=H.onKey(function(e){var n=e.key,t=e.domEvent;if("\r"===n){var r=$;$.endsWith(Y)&&Y.length>0&&(r=$.slice(0,-Y.length)),V("user:shell:output:clean",{output:r,command:J}),V("user:shell:exec",{command:Y}),V("user:shell:output",{output:$}),J=Y,Y="",$=""}else Y+=n;y&&y(t)}),n=D.client(),t=H.onData(function(e){Q(e)});j.channel.onCommand(function(e){e.hint?H.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&(H.write(e.output),null==k||k(e.output),$+=e.output)});var r=function(){j.channel&&"open"===j.channel.status&&n.getConnectionState()===a.em.CONNECTED&&j.channel.send({resizeTerm:H.getSize()})};if(_&&!K.current){var o=_.replace(/"/g,'\\"');j.channel.send({input:'cd "'.concat(o,'"\n')}),K.current=!0}var i=H.onResize(r);return r(),function(){e.dispose(),t.dispose(),i.dispose()}}},[j.channel,H,y,k,E,D,Q,_]),[H,z,Q]}},75834:function(e,n,t){t.d(n,{Z:function(){return X}});var r,o,i=t(27387),a=t(66626),l=t(96583),c=t(74985),u=t(76999),s=t.n(u),d=t(43182),f=t(68333),p=t(45726),h=t(25425),g=t(50782),v=t(26508),m=t(58130),y=t(59868),b=t(75246),w=t(1498),x=t(49344),k=t(37951),Z=t(56596),C=t(93918),S=t(88936),T=t(73722),E=t(29287),R=t(47001),D=t(86612),P=t(47611),_=t(50959),A=t(28268),L=t(31811),I=t(41733),q=t(21262),M=t(71440),B=t(58995);function G(){var e=(0,q._)(["\n  query WorkspaceVncOutput($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        owner {\n          ... on Team {\n            id\n            username\n          }\n          ... on User {\n            id\n            username\n          }\n        }\n      }\n    }\n  }\n"]);return G=function(){return e},e}var W={},F=(0,M.Ps)(G());(r=o||(o={})).Connecting="Connecting",r.Connected="Connected",r.Disconnected="Disconnected",r.Errored="Errored";var U="VNC_PASSWORD";function X(e){var n,r,o,u,f,b,w,k,Z,C,T,E=e.fs,q=e.container,M=(0,a._)((0,_.useState)(null),2),G=M[0],X=M[1],O=(0,a._)((0,_.useState)(void 0),2),H=O[0],z=O[1],j=(0,a._)((0,_.useState)(!1),2),V=j[0],K=j[1],Y=(0,a._)((0,_.useState)("Connecting"),2),$=Y[0],J=Y[1],Q=(0,a._)((0,_.useState)(null),2),ee=Q[0],en=Q[1],et=(0,a._)((0,_.useState)(!1),2),er=et[0],eo=et[1],ei=(0,a._)((0,_.useState)(!1),2),ea=ei[0],el=ei[1],ec=(0,a._)((0,_.useState)(null),2),eu=ec[0],es=ec[1],ed=(0,_.useRef)(0),ef=(0,_.useRef)(!1),ep=(0,h.P5)({controlName:"flag-vnc-error-status",logFlagToAnalytics:!1}),eh=(0,h.P5)({controlName:"flag-vnc-dash-url",logFlagToAnalytics:!1}),eg=(0,P.useRouter)().pathname,ev=(T=null==(C=(null==(Z=(r={skip:({skip:!(eh&&("/replEnvironmentDesktop"===eg||"/replEnvironmentMobile"===eg)&&!(0,L.Z)())}).skip,variables:{replId:(0,g.Z)()}},o=(0,I._)({},W,r),B.a(F,o)).data)?void 0:Z.repl.__typename)==="Repl"?Z.repl:null)?void 0:null===(n=C.owner)||void 0===n?void 0:n.username,C&&T&&!(C.slug.length+T.length+2>63)?(f=(u={username:T,replSlug:C.slug}).replSlug,b=u.username,w=(0,L.Z)()?m.js:m.ck,k=(0,m.mZ)(w),"".concat(k,"//").concat(f,"--").concat(b,".").concat(w)):null),em=(0,D.Z)(q);em&&(ev=em.replace("http","ws")),(0,y.j)(y.U3.VNC_OPENED),(0,_.useEffect)(function(){return ef.current=!0,function(){ef.current=!1}},[]),(0,_.useEffect)(function(){if(ev){if(q.getConnectionState()===R.em.CONNECTED){if(!ev)return;es(ev);return}return q.onConnectionStateChanged(function(e){e===R.em.CONNECTED&&ev&&es(ev)})}},[q,ev]),(0,_.useEffect)(function(){if(!ev){if(q.getConnectionState()===R.em.CONNECTED){q.getVncUrl().then(function(e){return es(e)});return}return q.onConnectionStateChanged(function(e){e===R.em.CONNECTED&&q.getVncUrl().then(function(e){return es(e)})})}},[q,ev]);var ey=(0,a._)((0,_.useState)(null),2),eb=ey[0],ew=ey[1],ex=(0,_.useRef)(function(){return null});(0,_.useEffect)(function(){ex.current()},[eb]);var ek=(0,v.Z)(function(e){return ew(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),eZ=(0,_.useRef)(function(e){});(0,_.useEffect)(function(){eZ.current(ea)},[ea]),(0,_.useEffect)(function(){if(!G){var e=!1;return t.e(994).then(t.bind(t,30994)).then(function(n){e||X(n)}),function(){e=!0}}},[G]),(0,_.useEffect)(function(){ep||"Disconnected"!==$||setTimeout(function(){J("Connecting")},Math.random()*(Math.pow(2,ed.current)-1)*1e3)},[$,ep]),(0,_.useEffect)(function(){if(ep&&"Disconnected"===$){var e=setTimeout(function(){J("Connecting")},Math.random()*(Math.pow(2,ed.current)-1)*1e3);return function(){clearTimeout(e)}}},[$,ep]);var eC=(0,g.Z)();(0,_.useEffect)(function(){if(eu&&ee&&G&&"Connecting"===$){ed.current++;var e=G.default,n=q.getConnectionMetadata(),t={credentials:{username:null==n?void 0:n.token,password:H||""}};(0,y.j)(y.U3.VNC_CONNECTED);var r=new e(ee,eu,t);r.scaleViewport=!0,r.resizeSession=!0;var o=function(){ed.current=0,J("Connected")},a=function(e){var n=e.detail.capabilities.audio;eo(void 0!==window.MediaSource&&!!n)},c=function(e){if(ex.current=function(){return null},eZ.current=function(e){},r.removeEventListener("securityfailure",u),r.removeEventListener("disconnect",c),r.removeEventListener("capabilities",a),r.removeEventListener("connect",o),ep&&!e.detail.clean){var n=q.getConnectionMetadata(),t=n?(0,m.he)(n.token):null;(0,y.j)(y.U3.VNC_ERRORED,{vncUrl:eu,replId:eC,cluster:null==t?void 0:t.cluster}),J("Errored");return}J("Disconnected")},u=function(){var e,n=function(){K(!0)};(e=(0,i._)(function(){var e,t,r;return(0,l.Jh)(this,function(o){switch(o.label){case 0:return[4,E.readFile(".env")];case 1:if((e=o.sent()).error||(t=e.content.toString("utf8"),!(U in(r=A.Z.parse(t)))))return n(),[2];return z(r[U]),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return d.Tb(e)})};return r.addEventListener("connect",o),r.addEventListener("capabilities",a),r.addEventListener("disconnect",c),r.addEventListener("securityfailure",u),ex.current=function(){return r._windowResize()},eo(!1),el(!1),eZ.current=function(n){n?((0,y.j)(y.U3.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){ef.current||(ex.current=function(){return null},eZ.current=function(e){},r.removeEventListener("securityfailure",u),r.removeEventListener("disconnect",c),r.removeEventListener("capabilities",a),r.removeEventListener("connect",o),r.disconnect())}}},[G,ee,q,eu,E,H,$,ep,eC]);var eS="vnc-output-".concat($.toLowerCase());return(0,c.BX)("div",{className:"jsx-612fb0831fb3a82c vnc",children:[er?(0,c.BX)("label",{className:"jsx-612fb0831fb3a82c vnc-audio",children:["\uD83C\uDFA7"," ",(0,c.tZ)("input",{type:"checkbox",checked:ea,onChange:function(e){return el(e.target.checked)},className:"jsx-612fb0831fb3a82c"})]}):null,(0,c.tZ)("div",{ref:function(e){ek(e),en(e)},"data-cy":eS,className:"jsx-612fb0831fb3a82c vnc-target"}),"Connecting"===$||"Disconnected"===$?(0,c.tZ)("div",{className:"jsx-612fb0831fb3a82c vnc-overlay",children:(0,c.tZ)(S.Z,{size:32})}):null,"Errored"===$?(0,c.tZ)(N,{vncUrl:eu,onRetry:function(){return J("Connecting")}}):null,(0,c.tZ)(x.u,{isOpen:V,onRequestClose:function(){return K(!1)},children:(0,c.tZ)(p.Z,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return K(!1)},onConfirm:function(e){z(e),K(!1)}})}),(0,c.tZ)(s(),{id:"612fb0831fb3a82c",children:".vnc.jsx-612fb0831fb3a82c{position:relative}.vnc.jsx-612fb0831fb3a82c,.vnc-target.jsx-612fb0831fb3a82c{height:100%;width:100%}.vnc-audio.jsx-612fb0831fb3a82c{position:absolute;bottom:0;right:0;padding:.2em}.vnc-overlay.jsx-612fb0831fb3a82c{top:0;position:absolute;height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(0,0,0,.85);color:var(--white)}"})]})}var O=(0,C.X)({root:[E.l0.coverContainer,E.l0.center,E.l0.p(16)],inner:[E.l0.colWithGap(8),E.l0.width(250)],diagnosisContent:[E.l0.py(8)]});function N(e){var n=e.vncUrl,t=e.onRetry,r=null;if(n){var o=new URL("wss://10622591-6a32-44be-aa89-1421705f33ea.id.repl.co").hostname;r=(0,c.tZ)(b.Q,{headerContent:"Diagnosis",children:(0,c.tZ)(Z.G,{css:[O.diagnosisContent],children:(0,c.tZ)(f.ZP,{children:"Open this link and check if you can visit this URL from your browser:\n[".concat(o,"](https://").concat(o,").\n\nIf you see a browser error, it's possible that your ISP have security settings blocking the URL. Please contact your ISP and ask them to unblock the URL above. Here are the support links for common ISPs:\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n")})})})}return(0,c.tZ)(Z.G,{css:O.root,children:(0,c.BX)(Z.G,{css:O.inner,children:[(0,c.tZ)(k.E,{colorway:"warning",text:"There was an error connecting to the server"}),r,(0,c.tZ)(w.zx,{iconLeft:(0,c.tZ)(T.Z,{}),text:"Try again",onClick:t})]})})}},66985:function(e,n,t){function r(e){return 80===e||443===e}function o(e,n){var t=new URL(e);return!n||r(n)?t.port&&(t.port=""):t.port=n.toString(),t}function i(e){var n=e.url,t=e.port,o=e.path,i=e.id,a=new URL(n);return r(t)?a.port="":a.port=t.toString(),a.searchParams.set("initialPath",o),a.searchParams.set("id",i),a}t.d(n,{Gz:function(){return i},O2:function(){return r},hw:function(){return o}})},25961:function(e,n,t){t.d(n,{Ih:function(){return y},bM:function(){return b},ir:function(){return k}});var r=t(42516),o=t(41733),i=t(30509),a=t(74985),l=t(91608),c=t(21557),u=t(74833),s=t(56596),d=t(93918),f=t(29287);t(50959);var p=t(27308),h=(0,l.$)(["fontSize","gap"]),g=h.cssVars,v=h.styleTokens,m=(0,d.X)({chord:[f.l0.display.inlineFlex,f.l0.rowWithGap(12)],shortcut:[f.l0.display.inlineFlex,f.l0.flex.row,{fontSize:v.fontSize,"& > div":{marginRight:v.gap},"& > div:last-child":{marginRight:0}}]});function y(e){return((0,p.bU)(e)?e:[e]).map(function(e){return(0,p.QR)(e).map(function(e){var n;return null!==(n=x[e])&&void 0!==n?n:e.toUpperCase()}).join("")}).join(" ")}function b(e){if((0,p.bU)(e.keyCombo))return(0,a.tZ)(s.G,{"data-testid":"Keybinding:".concat(e.keyCombo.join(" ")),css:m.chord,children:e.keyCombo.map(function(n,t){return(0,a.tZ)(b,(0,i._)((0,o._)({},e),{keyCombo:n}),t)})});var n=(0,p.QR)(e.keyCombo);return(0,a.tZ)(s.G,{"data-testid":"Keybinding:".concat(e.keyCombo),css:m.shortcut,style:(0,r._)({},g.gap,e.hideBorder?"2px":"4px"),title:e.keyCombo,children:n.map(function(n){var t;return(0,a.tZ)(k,{text:n,hideBorder:e.hideBorder,small:e.small,isActive:null==e?void 0:null===(t=e.match)||void 0===t?void 0:t.includes(n.toLowerCase())},n)})})}var w=(0,d.X)({root:[f.l0.color.foregroundDimmest,f.l0.position.relative,f.l0.px(4),f.l0.py(1),{fontSize:"inherit",minWidth:f.TV.space16,textAlign:"center",textTransform:"capitalize"},f.l0.font.default],border:[f.l0.coverContainer,f.l0.borderRadius(4),{opacity:.5,minWidth:f.TV.space16,border:"1px solid",borderColor:f.TV.outlineStrongest}]}),x={Ctrl:c.V5?"⌃":"Ctrl",Cmd:c.V5?"⌘":"Cmd",Alt:c.V5?"⌥":"Alt",Shift:c.V5?"⇧":"Shift",Enter:c.V5?"Return":"Enter",ArrowLeft:"←",ArrowRight:"→",ArrowUp:"↑",ArrowDown:"↓"," ":"Space"};function k(e){var n,t,o=e.text,i=e.small,l=void 0!==i&&i,c=e.isActive,d=void 0!==c&&c,p=e.hideBorder,h=(n={},(0,r._)(n,g.fontSize,l?f.TV.fontSizeSmall:f.TV.fontSizeDefault),(0,r._)(n,"height",l?20:24),n);d&&(h.fontWeight=f.TV.fontWeightMedium,h.color=f.TV.foregroundDefault);var v={borderColor:f.TV.foregroundDefault,opacity:1};return(0,a.BX)(s.G,{css:w.root,style:h,children:["string"==typeof o?(0,a.tZ)(u.xv,{variant:l?"small":"text",children:null!==(t=x[o])&&void 0!==t?t:o}):o,void 0!==p&&p?null:(0,a.tZ)(s.G,{css:w.border,style:d?v:void 0})]})}},74652:function(e,n,t){t.d(n,{GO:function(){return c},Ih:function(){return l.Ih},Il:function(){return i.Il},bM:function(){return l.bM},gf:function(){return i.gf}});var r=t(74985),o=t(50959),i=t(96003),a=t(27308),l=t(25961);function c(e){var n=(0,i.ns)(e);return(0,r.BX)(i.Ge.Provider,{value:n,children:[e.children,(0,r.tZ)(u,{})]})}function u(){var e=(0,i.Sy)(),n=(0,o.useRef)(null);return(0,o.useEffect)(function(){var t=function(t){var r=(0,a.IX)(t);if(r){var o=r;n.current&&(o=(0,a.cZ)(n.current,r));var l=e(o);switch(l.kind){case i.Xp.NoMatch:n.current=null;break;case i.Xp.WaitingForChord:n.current=l.key,t.preventDefault();break;case i.Xp.MatchFound:n.current=null;var c=!0,u=!1,s=void 0;try{for(var d,f=l.matches[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value,h=p.run,g=p.bubble,v=void 0===g||g;if(!1!==h()&&(t.preventDefault(),!v))break}}catch(e){u=!0,s=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}},[e]),null}},3947:function(e,n,t){t.d(n,{kz:function(){return k},F3:function(){return p},fK:function(){return b},ME:function(){return u},DQ:function(){return d},Dp:function(){return l},WQ:function(){return f},Ur:function(){return s},RX:function(){return c},b:function(){return g},Se:function(){return x}});var r=t(30084),o=t(43312),i=t(29287),a=t(19659);function l(e){var n=e.path;return n?(0,a.hj)(n)?"binary":(0,a.T3)(n)?"media":(0,a.sL)(n)?"draw":(0,a.IQ)(n)?"pedit":"codeEditor":"codeEditor"}function c(e){return"codeEditor"===e||"binary"===e||"media"===e||"pedit"===e||"draw"===e||"history"===e}function u(e){return e.filter(function(e){return e.type===r.Tv.File}).map(function(e){return{type:l({path:e.path}),data:{path:e.path}}})}function s(e){return c(e.type)}function d(e){return s(e)?e.data.path:null}function f(e){return"extension"===e.type}var p=(0,o.iv)([i.l0.width("100%"),i.l0.maxWidth(600),{marginLeft:"auto",marginRight:"auto"}]),h=["autograder","education","instructions","markdown","threadInbox","extensionStore","chat","docs","webview","vnc","runnerOutput","git","packager","envEditor","debugger","tutorial","database","neon","replAuth","autograder","unitTests","education","preferences","deployments","ghostwriterChat","extensionDevtools","problems","networking","objectStorage"];function g(e,n){return n&&h.indexOf("webview")>=0&&h.splice(h.indexOf("webview"),1),h.includes(e)}var v=t(74985),m=t(50959),y={type:"commands",data:{autoFocus:!1}};function b(e){var n=e.config;return{Icon:function(e){var t=e.pane,r=e.size,o=n[t.type]?t:y,i=n[o.type].Icon;return(0,v.tZ)(i,{pane:o,size:void 0===r?16:r})},Content:function(e){var t=e.pane,r=e.options,o=n[t.type]?t:y,i=n[o.type].Content;return(0,v.tZ)(i,{pane:o,options:r})},getTitle:function(e){var t=n[e.type]?e:y;return n[t.type].getTitle(t)},decode:function(e,t){var r,o=null;try{o=null===(r=n[e])||void 0===r?void 0:r.decode(t)}catch(e){}return o}}}var w=(0,m.createContext)(null);function x(){var e=(0,m.useContext)(w);if(!e)throw Error("Expected PaneUI in context");return e}var k=w.Provider},80502:function(e,n,t){t.d(n,{Z:function(){return q}});var r,o=t(27387),i=t(66626),a=t(96583),l=t(43182),c=t(25632),u=t(89106),s=t(56337),d=t(7444),f=t(10041),p=t(40473),h=t(63009),g=t(27308),v=t(96003),m=t(50959),y=t(26508),b=t(30826),w=t.n(b)()(function(){if("undefined"!=typeof AudioContext){var e=(r||(r=new AudioContext),r),n=e.createBufferSource();e.decodeAudioData(function(e){for(var n=window.atob(e),t=n.length,r=new Uint8Array(t),o=0;o<t;o++)r[o]=n.charCodeAt(o);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0}),x="replit-icons-font",k=t(2689),Z="BESbswy";function C(e){return S.apply(this,arguments)}function S(){return(S=(0,o._)(function(e){return(0,a.Jh)(this,function(n){switch(n.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,n){return E.apply(this,arguments)}(document.fonts,e)];case 1:case 3:return n.sent(),[2];case 2:return[4,Promise.all([R("serif",e),R("sans-serif",e),R("monospace",e)])]}})})).apply(this,arguments)}function T(e){var n=e.family,t=e.style,r=e.weight;return"".concat(void 0===t?"normal":t," ").concat(void 0===r?"normal":r," 100px ").concat(n)}function E(){return(E=(0,o._)(function(e,n){var t,r,o,i,l,c;return(0,a.Jh)(this,function(a){return t=n.fontInfo,o=void 0===(r=n.characters)?Z:r,l=void 0===(i=n.timeout)?3e3:i,c=T(t),[2,new Promise(function(n,r){var i=!1,a=k.kg.timeStart({family:t.family,style:t.style,weight:t.weight}),u=setTimeout(function(){i=!0,a("xterm font loading timed out"),n()},l);e.load(c,o).then(function(){i||(clearTimeout(u),n())}).catch(function(e){i||(clearTimeout(u),r(e))})})]})})).apply(this,arguments)}function R(e,n){return D.apply(this,arguments)}function D(){return(D=(0,o._)(function(e,n){var t,r,o,i,l,c,u,s,d;return(0,a.Jh)(this,function(a){return(t=n.fontInfo,o=void 0===(r=n.characters)?Z:r,l=void 0===(i=n.timeout)?3e3:i,c=T(t),(u=document.createElement("span")).innerText=o,u.style.font="normal normal 100px ".concat(e),u.style.position="absolute",u.style.left="-9999px",u.style.top="-9999px",document.body.appendChild(u),s=u.offsetWidth,u.style.font=c,(d=function(){return s!==u.offsetWidth})())?[2]:[2,new Promise(function(e,n){var r=setInterval(function(){d()&&(clearInterval(r),clearTimeout(o),document.body.removeChild(u),e())},50),o=setTimeout(function(){if(clearInterval(r),document.body.removeChild(u),d()){e();return}n(Error("Font loading timed out "+t.family))},l)})]})})).apply(this,arguments)}function P(e){l.Tb(e)}var _='"ReplitHack"',A=String.fromCharCode(61095);function L(){return(L=(0,o._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return!function(){if(!document.getElementById(x)){var e=document.createElement("style");e.id=x,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}(),[4,Promise.all([C({fontInfo:{family:"replit-icons"},characters:A}).catch(P),C({fontInfo:{family:_,weight:"400"}}).catch(P),C({fontInfo:{family:_,weight:"400",style:"italic"}}).catch(P),C({fontInfo:{family:_,weight:"700"}}).catch(P),C({fontInfo:{family:_,weight:"700",style:"italic"}}).catch(P)])];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var I=t(58200);function q(e){var n,r,b,x,k=(0,i._)((0,m.useState)(null),2),Z=k[0],C=k[1],S=(0,i._)((0,m.useState)(null),2),T=S[0],E=S[1],R=(0,I.f)(),D=(0,c.Gn)("fontSize","accessibleTerminal","shellBellAudio").preferences,P=D.fontSize,A=D.accessibleTerminal,q=D.shellBellAudio,M=(0,h.uV)(),B=(0,s.Z)(),G=null==e?void 0:e.openFile,W=(0,d.Z)(null==e?void 0:e.openWebview),F=null==e?void 0:e.listFiles,U=(0,m.useMemo)(function(){return G&&F?{openFile:G,listFiles:F}:null},[G,F]),X=(0,d.Z)(null==e?void 0:e.onInBandOSCMessages),O={screenReaderMode:A,fileLinking:U,terminalTheme:R,fontSize:P,scrollback:null==e?void 0:e.scrollback},N=(0,d.Z)(O),H=(0,y.Z)(function(){(null==e?void 0:e.autoFit)!==!1&&(null==T||T.fit())},{type:"debounce",wait:200}),z=(0,m.useRef)(null),j=(0,d.Z)(null==e?void 0:e.size),V=(0,v.Sy)();return(0,m.useLayoutEffect)(function(){if(Z){var e=[];return(function(){return n.apply(this,arguments)})().catch(function(e){if(e.message&&e.message.toLowerCase().includes("loading chunk")){l.$e(function(n){n.setExtra("message",e.message),n.setExtra("stack",e.stack),l.Tb(Error("Loading chunk failed"))});return}M({error:e,origin:"Xterm: init"})}),function(){e.forEach(function(e){return e()})}}function n(){return(n=(0,o._)(function(){var n,r,o,c,s,d,h,m,y,b,w,x,k,C,S,T,R,D,P,A,I;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.all([Promise.all([(0,p.Z)(function(){return t.e(6796).then(t.t.bind(t,17643,23))}),(0,p.Z)(function(){return t.e(2838).then(t.t.bind(t,82838,23))}),(0,p.Z)(function(){return t.e(8318).then(t.t.bind(t,68318,23))}),(0,p.Z)(function(){return t.e(1895).then(t.t.bind(t,81895,23))}),(0,p.Z)(function(){return t.e(343).then(t.t.bind(t,40343,23))}),(0,p.Z)(function(){return t.e(5374).then(t.bind(t,35374))}),(0,p.Z)(function(){return t.e(8350).then(t.t.bind(t,48350,23))}),(0,p.Z)(function(){return t.e(1906).then(t.t.bind(t,21906,23))})]),function(){return L.apply(this,arguments)}()])];case 1:var q;if(o=i._.apply(void 0,[a.sent(),1]),s=(c=(0,i._)(o[0],8))[0].Terminal,d=c[1].FitAddon,h=c[2].SearchAddon,m=c[3].WebLinksAddon,y=c[4].Unicode11Addon,b=c[5].FileLinkAddon,w=c[6].CanvasAddon,x=c[7].WebglAddon,!Z)return[2];return C={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(k=N.current.scrollback)&&void 0!==k?k:1e3,tabStopWidth:4,fontFamily:"".concat(_,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:N.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:N.current.terminalTheme,screenReaderMode:N.current.screenReaderMode},(null===(n=j.current)||void 0===n?void 0:n.cols)!==void 0&&(C.cols=j.current.cols),(null===(r=j.current)||void 0===r?void 0:r.rows)!==void 0&&(C.rows=j.current.rows),S=new s(C),N.current.fileLinking?(z.current=new b(N.current.fileLinking.openFile,N.current.fileLinking.listFiles),S.loadAddon(z.current)):z.current=null,T=new d,S.loadAddon(T),R=new m((q=function(e){B?u.X.openExternalUrl(e):window.open(e,"_blank")},function(e,n){var t;try{t=new URL(n)}catch(e){return}if(("0.0.0.0"===t.hostname||"localhost"===t.hostname)&&void 0!==W.current){W.current(t.pathname,parseInt(t.port,10));return}q(n)})),S.loadAddon(R),D=new h,S.loadAddon(D),P=new y,S.loadAddon(P),S.unicode.activeVersion="11",S.open(Z),e.push(function(){try{S.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent))return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&document.createElement("canvas").getContext("webgl2"))){var e=new w;S.loadAddon(e);return}var n=new x;S.loadAddon(n),n.onContextLoss(function(){n.dispose(),S.loadAddon(new w)})}catch(e){var t=new w;S.loadAddon(t)}}(),A=!1,I=null,S.attachCustomKeyEventHandler(function(e){var n=(0,g.IX)(e);if(n){var t=n;I&&(t=(0,g.cZ)(I,n));var r=V(t);switch(r.kind){case v.Xp.NoMatch:I=null;break;case v.Xp.WaitingForChord:return I=r.key,!1;case v.Xp.MatchFound:return I=null,!1}}return(!window.navigator.clipboard||"c"!==e.key.toLowerCase()||!e.ctrlKey||!e.shiftKey||("keyup"===e.type&&S.hasSelection()&&(0,f.Z)(S.getSelection()).catch(function(e){l.$e(function(n){n.setTag("xterm-clipboard",!0),n.setExtra("type","copy"),l.Tb(e)})}),e.preventDefault(),e.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!A)&&(A="escape"===e.key.toLowerCase(),!0))}),X.current&&Object.entries(X.current).forEach(function(e){var n=(0,i._)(e,2),t=n[0],r=n[1];S.parser.registerOscHandler(Number(t),function(e){return r(S,e),!0})}),E({onKey:S.onKey.bind(S),onData:S.onData.bind(S),onResize:S.onResize.bind(S),write:S.write.bind(S),fit:function(){var e=Z.getBoundingClientRect(),n=e.width,t=e.height;n>0&&t>0&&T.fit()},focus:function(){return S.focus()},clear:function(){return S.clear()},findPrevious:function(e,n){return D.findPrevious(e,n)},findNext:function(e,n){return D.findNext(e,n)},getSize:function(){return{cols:S.cols,rows:S.rows}},paste:function(e){return S.paste(e)},_term:S}),H(Z),[2]}})})).apply(this,arguments)}},[Z,H,N,M,j,V,B,W,X]),n=null==T?void 0:T._term,r=O.screenReaderMode,b=O.fileLinking,x=O.terminalTheme,(0,m.useEffect)(function(){n&&x&&(n.options.theme=x)},[n,x]),(0,m.useEffect)(function(){n&&(n.options.screenReaderMode=r)},[n,r]),(0,m.useEffect)(function(){if(n){if(!b){z.current&&z.current.deactivate();return}if(!z.current){var e=!1;return t.e(5374).then(t.bind(t,35374)).then(function(t){var r=t.FileLinkAddon;e||(z.current=new r(b.openFile,b.listFiles),n.loadAddon(z.current))}),function(){e=!0}}z.current.update(b.openFile,b.listFiles),z.current.reactivate()}},[n,b,z]),(0,m.useEffect)(function(){var e=null==T?void 0:T._term;e&&P&&e.options.fontSize!==P&&(e.options.fontSize=P,e.refresh(0,e.rows-1),T.fit())},[P,T]),(0,m.useEffect)(function(){if(q){var e=null==T?void 0:T._term;if(e)return e.onBell(w).dispose}},[q,T]),[T,C]}},58200:function(e,n,t){t.d(n,{f:function(){return a}});var r=t(70671),o=t(49932),i=t(50959);function a(){var e=(0,r.F)().values;return(0,i.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Sj.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)},[e])}},45434:function(e,n,t){t.d(n,{J1:function(){return s},ce:function(){return m},hf:function(){return h},uL:function(){return u},yL:function(){return p}});var r,o,i=t(63257),a=t(74044),l=t(99149),c=t(52297);function u(e){return l.B4.Check(a.Dy.Union([c.LD,c.t3]),e)}function s(e){return l.B4.Check(c.vD,e)}(r=o||(o={})).Response="response",r.Error="error",r.Debug="debug",r.Intent="intent",r.TokenUsage="tokenUsage";var d={defaultLimit:{messageCharacters:2e3,responseTokens:1e3,fileContextCharacters:8e3,maxTotalTokens:4050},gpt35:{messageCharacters:5e3,responseTokens:4e3,fileContextCharacters:3e4,maxTotalTokens:16e3},gpt4:{messageCharacters:2e3,responseTokens:1e3,fileContextCharacters:1e4,maxTotalTokens:8e3},gpt4_32k:{messageCharacters:12e3,responseTokens:4e3,fileContextCharacters:6e4,maxTotalTokens:32e3}},f={"gemini-pro":{messageCharacters:5e3,responseTokens:4e3,fileContextCharacters:3e4,maxTotalTokens:16e3},"gpt-3.5-turbo-instruct":d.defaultLimit,"gpt-3.5-turbo":d.defaultLimit,"gpt-3.5-turbo-0613":d.defaultLimit,"gpt-3.5-turbo-0301":d.defaultLimit,"gpt-3.5-turbo-16k-0613":d.gpt35,"gpt-3.5-turbo-1106":d.gpt35,"gpt-4":d.gpt4,"gpt-4-0613":d.gpt4,"gpt-4-32k":d.gpt4_32k,"gpt-4-32k-0613":d.gpt4_32k,"gpt-4-1106-preview":{messageCharacters:12e3,responseTokens:4e3,fileContextCharacters:6e4,maxTotalTokens:32e3}};function p(e){return f[e]}var h={model:"gpt-4-1106-preview",weeklyTokenLimit:621e3},g=c.LD.anyOf.map(function(e){return e.const}),v=c.t3.const,m=(0,i._)(g).concat([v])},13090:function(e,n,t){t.d(n,{BP:function(){return i},BY:function(){return o},U4:function(){return r.U4},Vh:function(){return a},fF:function(){return r.fF},tr:function(){return r.tr}});var r=t(16385);function o(e){var n;if(!e)throw Error("Expected baseUrl");try{n=new URL(e)}catch(e){throw Error("baseUrl failed to parse as URL")}if("https:"!==n.protocol)throw Error("baseUrl must use https");return n.href.replace(/\/$/,"")}function i(e){return a(e,"extension.json")}function a(e,n){var t=o(e);return new URL(n,t).href}},16385:function(e,n,t){t.d(n,{MU:function(){return T},U4:function(){return Z},fF:function(){return S},tr:function(){return C}});var r=t(66626),o=t(74044),i=t(99149),a=t(72963),l=t.n(a),c=t(94998),u=t(32508),s=t.n(u),d=t(14709),f=t.n(d),p=t(34471),h=o.Dy.String({minLength:1,maxLength:64}),g=o.Dy.Object({path:o.Dy.String({minLength:1}),label:o.Dy.String({minLength:1})}),v=o.Dy.Object({image:(0,p.K5)(o.Dy.String({minLength:1})),title:o.Dy.String({minLength:1,maxLength:60}),body:o.Dy.String({minLength:1,maxLength:512})}),m=o.Dy.Object({glob:o.Dy.String({minLength:1}),handler:o.Dy.String({minLength:1}),name:(0,p.K5)(o.Dy.String({minLength:1})),icon:(0,p.K5)(o.Dy.String({minLength:1}))}),y=o.Dy.Object({handler:o.Dy.String({minLength:1}),name:(0,p.K5)(o.Dy.String({minLength:1})),icon:(0,p.K5)(o.Dy.String({minLength:1}))}),b=o.Dy.Union(c.l.map(function(e){return o.Dy.Literal(e)})),w=o.Dy.Object({name:b,reason:o.Dy.String()}),x=o.Dy.Object({page:o.Dy.String()}),k=o.Dy.Object({name:o.Dy.String({minLength:1,maxLength:60}),description:o.Dy.String({minLength:1,maxLength:255}),scopes:(0,p.K5)(o.Dy.Array(w)),longDescription:(0,p.K5)(o.Dy.String({minLength:1})),icon:(0,p.K5)(o.Dy.String({minLength:1})),tags:(0,p.K5)(o.Dy.Array(h,{maxItems:16})),coverImages:(0,p.K5)(o.Dy.Array(g,{maxItems:16})),fileHandlers:(0,p.K5)(o.Dy.Array(m,{maxItems:4})),tools:(0,p.K5)(o.Dy.Array(y,{maxItems:4})),website:(0,p.K5)(o.Dy.String()),authorEmail:(0,p.K5)(o.Dy.String()),background:(0,p.K5)(x),features:(0,p.K5)(o.Dy.Array(v,{minItems:1,maxItems:10}))});function Z(e){var n=function(n,t,r){return{manifest:null,error:new p.Jg([{type:t,schema:k,path:n,value:e,message:r}])}};if(i.B4.Check(k,e)){if(e.website&&!s()(e.website))return n("website",i.B0.StringFormat,"website must be a valid url");if(e.authorEmail&&!f()(e.authorEmail))return n("authorEmail",i.B0.StringFormat,"authorEmail must be a valid email");var t=null!==(u=e.fileHandlers)&&void 0!==u?u:[],o=!0,a=!1,c=void 0;try{for(var u,d,h=t.entries()[Symbol.iterator]();!(o=(d=h.next()).done);o=!0){var g=(0,r._)(d.value,2),v=g[0],m=g[1];if(!l()(m.glob))return n("fileHandlers[".concat(v,"].glob"),i.B0.StringFormat,"glob must be a valid glob pattern")}}catch(e){a=!0,c=e}finally{try{o||null==h.return||h.return()}finally{if(a)throw c}}if(t&&t.length>1){var y=!0,b=!1,w=void 0;try{for(var x,Z=t.entries()[Symbol.iterator]();!(y=(x=Z.next()).done);y=!0){var C=(0,r._)(x.value,2),S=C[0],T=C[1];if(!(T.icon&&T.name))return n("fileHandlers[".concat(S,"]"),i.B0.ObjectRequiredProperty,"When at least two fileHandlers are provided, they must all specify a name and icon")}}catch(e){b=!0,w=e}finally{try{y||null==Z.return||Z.return()}finally{if(b)throw w}}}var E=null!==(_=e.tools)&&void 0!==_?_:[];if(E&&E.length>1){var R=!0,D=!1,P=void 0;try{for(var _,A,L=E.entries()[Symbol.iterator]();!(R=(A=L.next()).done);R=!0){var I=(0,r._)(A.value,2),q=I[0],M=I[1];if(!(M.icon&&M.name))return n("tool[".concat(q,"]"),i.B0.ObjectRequiredProperty,"When at least two tools are provided, they must all specify a name and icon")}}catch(e){D=!0,P=e}finally{try{R||null==L.return||L.return()}finally{if(D)throw P}}}return{manifest:e,error:null}}return{manifest:null,error:(0,p.ZA)(k,e)}}function C(e){var n=Z(e);if(n.manifest)return n.manifest;throw n.error}function S(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:null!==(e=t.name)&&void 0!==e?e:"Unnamed Extension",description:null!==(n=t.description)&&void 0!==n?n:"(no description)"}}function T(e,n){return!!e.scopes&&void 0!==e.scopes.find(function(e){return e.name===n})}},94998:function(e,n,t){t.d(n,{k:function(){return r},l:function(){return o}});var r=[{key:"read",friendlyName:"Read files",description:"Read any file in your Repl"},{key:"write-exec",friendlyName:"Write & Execute",description:"Write to any file in your Repl and execute any code"},{key:"repldb:read",friendlyName:"ReplDB Read",description:"Read any key, or list all keys under any prefix in the repldb belonging to your Repl"},{key:"repldb:write",friendlyName:"ReplDB Write",description:"Write or delete any key in the repldb belonging to your Repl"},{key:"experimental-api",friendlyName:"Experimental APIs",description:"Use experimental APIs that may be unstable, change in behavior, or be removed entirely"}],o=r.map(function(e){return e.key})},34471:function(e,n,t){t.d(n,{Jg:function(){return g},K5:function(){return h},ZA:function(){return v}});var r=t(12285),o=t(4955),i=t(63257),a=t(14105),l=t(9670),c=t(74044),u=t(99149),s=t(98278),d=t.n(s),f=t(92087),p=t.n(f);c.lv.Set("uuid",function(e){return d()(e)}),c.lv.Set("date-time",function(e){return p()(e)});var h=function(e){return c.Dy.Optional(c.Dy.Union([c.Dy.Null(),e]))},g=function(e){"use strict";(0,o._)(t,e);var n=(0,l._)(t);function t(e){var o;return(0,r._)(this,t),(o=n.call(this)).name="Schema validation error",o.message=e.map(function(e){return"".concat(e.path,": ").concat(e.message)}).join("\n"),o.issues=e,o}return t}((0,a._)(Error));function v(e,n){return new g((0,i._)(u.B4.Errors(e,n)))}}}]);
//# sourceMappingURL=6645-641cc27d97074f8a.js.map