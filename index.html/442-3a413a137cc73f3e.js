!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="26869f2d-c885-4859-b706-30b11816f9c5",e._sentryDebugIdIdentifier="sentry-dbid-26869f2d-c885-4859-b706-30b11816f9c5")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"6af6db66"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{53430:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(74985),i=n(45400),o=Array.prototype.concat,u=function(e){return{recursive:!!e.recursive,bail:e.bail&&e.bail>0?e.bail:1e3}},a=function(e){return o.apply([],e)},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(!e||n>=t.bail||!e.isDirectory||!e.createReader)return Promise.resolve([]);var o=null!=r?r:e.name;return new Promise(function(r){e.createReader().readEntries(function(e){return Promise.all(e.map(function(e){var r,u,a,c;return r=e,u=t,a=n,c=o,r.isDirectory?u.recursive?l(r,u,a+1,(0,i.join)(c,r.name)):Promise.resolve([]):new Promise(function(e,t){r.file?r.file(e,t):e(null)}).catch(function(){return null}).then(function(e){return e&&(e.dirPath=(0,i.join)(c,e.name)),e?[e]:[]})})).then(function(e){return r(a(e))})},function(){return r([])})})},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l("function"==typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null,u(t))},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=u(t),new Promise(function(n){var r,i;(null==e?void 0:null===(r=e.dataTransfer)||void 0===r?void 0:r.items)?Promise.all(a(e.dataTransfer.items).filter(function(e){return"file"===e.kind}).map(function(e){return c(e,t).then(function(t){if(!t.length){var n=e.getAsFile();t=n?[n]:t}return t})})).then(function(e){return n(a(e))}):(null==e?void 0:null===(i=e.dataTransfer)||void 0===i?void 0:i.files)?n(a(e.dataTransfer.files)):n([])})},f=n(18059),d=n(84059);n(50959);var p=n(30665),h=n(21769),v=n(6191),g=n(86498),m=null,y=null;function b(e){var t=function(e){var t=e.isTouchBackend;if(y&&t)return y;if(m&&!t)return m;var n={dragDropManager:(0,d.i)(function(e){var n=t?(0,g.zr)(e,void 0,{delayTouchStart:500}):(0,h.PD)(e),r=n.handleTopDropCapture;return n.handleTopDropCapture=function(e){var t,i=n.monitor.getItemType();i===v.HTML||i===v.TEXT?(n.dropTargetIds=[],null===(t=n.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer),n.enterLeaveCounter.reset()):r.call(n,e),n.currentNativeSource&&(n.currentNativeSource.item.dirContent=s(e,{recursive:!0}))},n})};return t?y=n:m=n,n}({isTouchBackend:(0,f.w8)()});return(0,r.tZ)(p.L.Provider,{value:t,children:e.children})}},69119:function(e,t,n){n.d(t,{x:function(){return c}});var r=n(74985),i=n(43312),o=n(56596),u=n(29287),a=(0,i.iv)([u.l0.flex.shrink(1),u.l0.truncate]),l={normal:{matched:u.TV.foregroundDefault,unmatched:u.TV.foregroundDimmer},dimmed:{matched:u.TV.foregroundDimmer,unmatched:u.TV.foregroundDimmest}};function c(e){var t,n,i,c,s=null===(c=e.highlight)||void 0===c?void 0:c.filter(function(e){return e.to>0}),f=e.dimmed?l.dimmed:l.normal;return(null==s?void 0:s.length)?(0,r.tZ)(o.G,{className:e.className,css:a,children:(t=e.text,n=0,i=[],s.forEach(function(e){var r=e.from,o=e.to,u=t.slice(n,r);u&&i.push({text:u,match:!1});var a=t.slice(r,o);a&&i.push({text:a,match:!0}),n=o}),n<t.length&&i.push({text:t.slice(n),match:!1}),i).map(function(e,t){return(0,r.tZ)("span",{style:{fontWeight:e.match?u.TV.fontWeightBold:u.TV.fontWeightRegular,color:e.match?f.matched:f.unmatched},children:e.text},e.text+t)})}):(0,r.tZ)(o.G,{className:e.className,style:{color:f.matched},css:a,children:e.text})}},73097:function(e,t,n){n.d(t,{K:function(){return o}});var r=n(50959),i=n(98314);function o(e){(0,r.useEffect)(function(){e((0,i.r)(),{captureDraggingState:!0})},[e])}},23394:function(e,t,n){n.d(t,{T:function(){return u},Z:function(){return o}});var r=n(22894),i=n(50959);function o(){var e=(0,i.useContext)(r.Z);if(!e)throw Error("Expected Repl info to be in context");return e.language}function u(){return o().startsWith("html")}},37491:function(e,t,n){n.d(t,{UV:function(){return o},fN:function(){return i}});var r=n(63257);function i(e,t){for(var n=0;n<t.length;n+=1e4)e.push.apply(e,(0,r._)(t.slice(n,n+1e4)))}function o(e){return(0,r._)(Array(e))}},27592:function(e,t,n){n.d(t,{j:function(){return r}});function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.root,i=n.rootMargin,o=n.threshold;if("undefined"==typeof IntersectionObserver)return function(){};var u=new WeakMap,a=new IntersectionObserver(function(e){e.forEach(function(e){var n=u.get(e.target);if(!!n!==e.isIntersecting){if(e.isIntersecting){var r=t(e);"function"==typeof r?u.set(e.target,r):a.unobserve(e.target)}else n&&(n(e),u.delete(e.target))}})},{root:r,rootMargin:i,threshold:void 0===o?1:o});return a.observe(e),function(){return a.disconnect()}}},31950:function(e,t,n){n.d(t,{j:function(){return u}});var r=n(50959),i=n(7444),o=n(44166);function u(e,t,n){var u=(0,i.Z)(n);(0,r.useLayoutEffect)(function(){var n=function(t){var n=u.current?u.current(t):t;null!==n&&(0,o.A)(e,n)};return n(t.current),(0,o.p)(e),t.subscribe(n)},[e,t,u])}},44166:function(e,t,n){n.d(t,{A:function(){return a},p:function(){return l}});var r=n(12285),i=n(66626),o=new(function(){"use strict";function e(){(0,r._)(this,e),this.map=new Map}var t=e.prototype;return t.getOrInit=function(e){var t=this.map.get(e);return t||(t=new Map,this.map.set(e,t)),t},t.add=function(e,t,n){this.getOrInit(e).set(t,n)},t.flush=function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.map[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var u=(0,i._)(r.value,2),a=u[0],l=u[1];if(a&&"current"in a&&(a=a.current),a){var c=!0,s=!1,f=void 0;try{for(var d,p=l[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var h=(0,i._)(d.value,2),v=h[0],g=h[1];a.style.setProperty(v,g)}}catch(e){s=!0,f=e}finally{try{c||null==p.return||p.return()}finally{if(s)throw f}}}}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.map.clear()},t.flushNode=function(e){if(e){var t=e,n=this.map.get(t);if(n&&(e&&"current"in e&&(e=e.current),e)){var r=!0,o=!1,u=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,i._)(a.value,2),s=c[0],f=c[1];e.style.setProperty(s,f)}}catch(e){o=!0,u=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw u}}this.map.delete(t)}}},e}()),u=!1;function a(e,t,n){if(null!==e){if("string"==typeof t){if(void 0===n)throw Error("value is undefined when prop is string");o.add(e,t,n)}else for(var r in t)o.add(e,r,t[r]);u||(u=!0,requestAnimationFrame(function(){o.flush(),u=!1}))}}function l(e){o.flushNode(e)}},23855:function(e,t,n){n.d(t,{sI:function(){return s},wP:function(){return d}});var r=n(41733),i=n(21262),o=n(71440),u=n(99165);function a(){var e=(0,i._)(["\n  fragment ReplViewerOutputOverlayRepl on Repl {\n    id\n    title\n    imageUrl\n    lastPublishedAt\n    currentUserPermissions {\n      changeImageUrl\n    }\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,i._)(["\n  mutation ReplViewerOutputOverlayUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        imageUrl\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(a()),f=(0,o.Ps)(l());function d(e){var t=(0,r._)({},c,e);return u.D(f,t)}},56684:function(e,t,n){n.d(t,{D:function(){return i},V:function(){return u}});var r,i,o=n(19659);function u(e){return(0,o.gK)(e)?"Markdown":(0,o.sL)(e)?"Draw":(0,o.IQ)(e)?"Pedit":(0,o.T3)(e)?"Media":(0,o.hj)(e)?"Binary":"Code"}(r=i||(i={})).Media="Media",r.Binary="Binary",r.Code="Code",r.Markdown="Markdown",r.Draw="Draw",r.Pedit="Pedit"},57468:function(e,t,n){n.d(t,{Z:function(){return eO}});var r=n(41733),i=n(30509),o=n(66626),u=n(74985),a=n(19659),l=n(43778),c=n(32068),s=n(93646),f=n(26018),d=n(37509),p=n(65419),h=n(74062),v=n(43040),g=n(23403),m=n(79987),y=n(36473),b=n(81949),w=n(4017),E=n(70925),S=n(78126),x=n(91632),D=n(96549),_=n(5e3),k=n(86352),Z=n(6616),R=n(69776),T=n(60412),P=n(80739),I=n(42429),C=n(78807),O=n(74928),N=n(52203),A=n(27716),F=n(74388),G=n(43109),L=n(86270),B=n(93558),U=n(2468),z=n(73401),M=n(3156),j=n(58547),H=n(21085),W=n(59294),V=n(59500),X=n(52738),J=n(86360),K=n(49722),q=n(35097),Q=n(9098),Y=n(1700),$=n(61114),ee=n(7123),et=n(93719),en=n(28325),er=n(50192),ei=n(8460),eo=n(63835),eu=n(42318),ea=n(59820),el=n(125),ec=n(29890),es=n(68322),ef=n(31278),ed=n(90958),ep=n(9867),eh=n(26095),ev=n(63922),eg=n(16980),em=n(5983),ey=n(47936),eb=n(97168),ew=n(31208),eE=n(66061),eS=n(15250),ex=n(60471),eD=n(96693),e_=n(31270),ek=n(28908),eZ=n(47030),eR=n(3844),eT=n(4473),eP=n(46005),eI=n(14379),eC=n(49932);function eO(e){var t=e.path,n=e.fill,eO=e.size,eN=e.fillDefaultFileIcon,eA={size:eO||20,fill:n};switch((0,a.UO)(t)){case"Dockerfile":case".dockerfile":return(0,u.tZ)(g.Z,(0,r._)({},eA));case"package.json":case"package-lock.json":return(0,u.tZ)(A.Z,(0,r._)({},eA));case"pnpm-lock.yaml":return(0,u.tZ)(F.Z,(0,r._)({},eA));case"yarn.lock":return(0,u.tZ)(eD.Z,(0,r._)({},eA));case"bun.lockb":return(0,u.tZ)(eI.Z,(0,r._)({},eA));case"webpack.config.js":return(0,u.tZ)(K.Z,(0,r._)({},eA));case".rhistory":case".rprofile":return(0,u.tZ)(z.Z,(0,r._)({},eA));case".replit":return(0,u.tZ)(ek.Z,(0,r._)({},eA));case"makefile":case"Makefile":return(0,u.tZ)(N.Z,(0,r._)({},eA));case".bowerrc":case".jshintrc":case".jshitrc":case".eslintrc":case".babelrc":return(0,u.tZ)(T.Z,(0,r._)({},eA));case"Gemfile":case"Gemfile.lock":case".gemspec":case"Rakefile":return(0,u.tZ)(d.Z,(0,r._)({},eA));case"poetry.lock":case"pyproject.toml":case"requirements.txt":return(0,u.tZ)(f.Z,(0,r._)({},eA));case"go.mod":case"go.sum":return(0,u.tZ)(k.Z,(0,r._)({},eA));case"pom.xml":return(0,u.tZ)(y.Z,(0,r._)({},eA))}if(l.uP.includes(t))return(0,u.tZ)(e_.Z,(0,i._)((0,r._)({},eA),{fill:"currentColor"}));var eF=t?(0,a.r6)(t):null;switch(eF){case"py":case"rpy":case"pyw":case"cpy":case"gyp":case"gypi":return(0,u.tZ)(f.Z,(0,r._)({},eA));case"rb":case"rbx":case"rjs":case"erb":return(0,u.tZ)(d.Z,(0,r._)({},eA));case"js":case"jsx":case"jsm":case"mjs":case"cjs":case"esm":case"es6":return(0,u.tZ)(b.Z,(0,r._)({},eA));case"ts":case"tsx":return(0,u.tZ)(w.Z,(0,r._)({},eA));case"graphql":case"gql":return(0,u.tZ)(Z.Z,(0,r._)({},eA));case"jav":case"java":return(0,u.tZ)(y.Z,(0,r._)({},eA));case"go":return(0,u.tZ)(k.Z,(0,r._)({},eA));case"html":case"htm":case"shtml":case"xhtml":case"mdoc":case"jsp":case"asp":case"aspx":case"jshtm":return(0,u.tZ)(m.Z,(0,r._)({},eA));case"sh":case"fish":case"zsh":case"bash":return(0,u.tZ)(eZ.Z,{});case"asm":return(0,u.tZ)($.Z,(0,r._)({},eA));case"bal":return(0,u.tZ)(ee.Z,(0,r._)({},eA));case"bas":return(0,u.tZ)(et.Z,(0,r._)({},eA));case"css":return(0,u.tZ)(v.Z,(0,r._)({},eA));case"clj":return(0,u.tZ)(en.Z,(0,r._)({},eA));case"coffee":return(0,u.tZ)(er.Z,(0,r._)({},eA));case"cpp":case"cxx":case"hpp":case"hxx":case"cc":case"hh":case"H":return(0,u.tZ)(h.Z,(0,r._)({},eA));case"c":case"h":return(0,u.tZ)(p.Z,(0,r._)({},eA));case"cr":return(0,u.tZ)(E.Z,(0,r._)({},eA));case"cs":case"csx":case"cake":case"csproj":return(0,u.tZ)(S.Z,(0,r._)({},eA));case"csv":return(0,u.tZ)(x.Z,(0,r._)({},eA));case"d":return(0,u.tZ)(ei.Z,(0,r._)({},eA));case"dart":return(0,u.tZ)(eo.Z,(0,r._)({},eA));case"draw":return(0,u.tZ)(eb.Z,(0,r._)({},eA));case"ex":case"exs":return(0,u.tZ)(D.Z,(0,r._)({},eA));case"elm":return(0,u.tZ)(_.Z,(0,r._)({},eA));case"fs":case"fsx":case"fsproj":return(0,u.tZ)(eu.Z,(0,r._)({},eA));case"fth":case"forth":return(0,u.tZ)(ea.Z,(0,r._)({},eA));case"hs":case"lhs":return(0,u.tZ)(R.Z,(0,r._)({},eA));case"json":return(0,u.tZ)(T.Z,(0,r._)({},eA));case"jl":return(0,u.tZ)(P.Z,(0,r._)({},eA));case"kt":case"kts":return(0,u.tZ)(I.Z,(0,r._)({},eA));case"lua":return(0,u.tZ)(C.Z,(0,r._)({},eA));case"lisp":return(0,u.tZ)(el.Z,(0,r._)({},eA));case"md":case"mdx":case"markdown":case"mkd":return(0,u.tZ)(O.Z,(0,r._)({},eA));case"ml":case"mli":return(0,u.tZ)(G.Z,(0,r._)({},eA));case"nim":return(0,u.tZ)(ec.Z,(0,r._)({},eA));case"nix":return(0,u.tZ)(ew.Z,(0,r._)({},eA));case"pde":return(0,u.tZ)(es.Z,(0,r._)({},eA));case"pdf":return(0,u.tZ)(L.Z,(0,r._)({},eA));case"php":case"php4":case"php5":case"phtml":case"ctp":return(0,u.tZ)(U.Z,(0,r._)({},eA));case"pmod":case"cgi":case"pl":case"pm":case"t":return(0,u.tZ)(B.Z,(0,r._)({},eA));case"r":case"R":case"rt":return(0,u.tZ)(z.Z,(0,r._)({},eA));case"raku":case"rakumod":case"rakutest":case"pmod6":case"pod6":case"pl6":case"pm6":case"t6":case"p6":return(0,u.tZ)(ef.Z,(0,r._)({},eA));case"re":case"rei":return(0,u.tZ)(M.Z,(0,r._)({},eA));case"rs":case"rlib":return(0,u.tZ)(j.Z,(0,r._)({},eA));case"scss":return(0,u.tZ)(H.Z,(0,r._)({},eA));case"scm":return(0,u.tZ)(ed.Z,(0,r._)({},eA));case"sbt":case"scala":return(0,u.tZ)(W.Z,(0,r._)({},eA));case"sol":return(0,u.tZ)(ep.Z,(0,r._)({},eA));case"sql":return(0,u.tZ)(eh.Z,(0,r._)({},eA));case"sqlite":return(0,u.tZ)(ev.Z,(0,r._)({},eA));case"svelte":return(0,u.tZ)(eg.Z,(0,r._)({},eA));case"svg":return(0,u.tZ)(V.Z,(0,r._)({},eA));case"swift":return(0,u.tZ)(X.Z,(0,r._)({},eA));case"tcl":return(0,u.tZ)(eT.Z,(0,r._)({},eA));case"toml":return(0,u.tZ)(em.Z,(0,r._)({},eA));case"txt":return(0,u.tZ)(eR.Z,(0,r._)({},eA));case"vue":return(0,u.tZ)(ey.Z,(0,r._)({},eA));case"wasm":return(0,u.tZ)(J.Z,(0,r._)({},eA));case"xml":return(0,u.tZ)(q.Z,(0,r._)({},eA));case"yml":case"yaml":return(0,u.tZ)(Q.Z,(0,r._)({},eA));case"zip":return(0,u.tZ)(Y.Z,(0,r._)({},eA))}var eG=eF?c.Z.get(eF):null;if(eG)switch((0,o._)(eG.split("/"),1)[0]){case"image":return(0,u.tZ)(eE.Z,{});case"audio":return(0,u.tZ)(ex.Z,{});case"video":return(0,u.tZ)(eS.Z,{})}return eN?(0,u.tZ)(eP.Z,{size:eO}):(0,u.tZ)(s.Z,{size:eO,color:eC.TV.foregroundDimmer})}},75296:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(42516),i=n(41733),o=n(30509),u=n(74985),a=n(79378),l=n(29287),c=n(30983),s=n(56596),f=n(93918),d=(0,n(91608).$)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),p=d.styleTokens,h=d.cssVars,v=(0,f.X)({avatarsRow:[l.l0.flex.row,{"& > *":{marginLeft:"calc(-0.4 * ".concat(p.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[l.l0.center,l.l0.overflow("hidden"),l.l0.backgroundColor.backgroundDefault,l.l0.color.foregroundDimmer,l.l0.px(2),{borderRadius:"50%",minWidth:p.size,height:p.size,fontSize:p.fontSize}],tooltop:[{gap:p.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipRow:[l.l0.rowWithGap(l.TV.space2),l.l0.align.center],tooltipText:[l.l0.flex.growAndShrink(1),l.l0.truncate,l.l0.color.foregroundDimmer,{paddingLeft:p.iconTextGap,fontSize:p.tooltipFontSize}],stackItem:[]}),g={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function m(e){var t,n,l,f,d,p,m,y,b,w=e.activeUsers,E=e.visibleNumOfUsers,S=void 0===E?3:E,x=e.size,D=void 0===x?24:x,_=w.length,k=(b={},(0,r._)(b,h.size,D+"px"),(0,r._)(b,h.fontSize,(null!==(d=null===(t=g[D])||void 0===t?void 0:t.fontSize)&&void 0!==d?d:D)+"px"),(0,r._)(b,h.listGap,(null!==(p=null===(n=g[D])||void 0===n?void 0:n.listGap)&&void 0!==p?p:8)+"px"),(0,r._)(b,h.iconTextGap,(null!==(m=null===(l=g[D])||void 0===l?void 0:l.iconTextGap)&&void 0!==m?m:8)+"px"),(0,r._)(b,h.tooltipFontSize,(null!==(y=null===(f=g[D])||void 0===f?void 0:f.tooltipFontSize)&&void 0!==y?y:14)+"px"),b),Z=_>S,R=w.slice(0,Z?S-1:S);return(0,u.tZ)(c.u,{tooltip:(0,u.tZ)(s.G,{css:v.tooltop,style:k,children:w.map(function(e){var t;return(0,u.BX)(s.G,{css:v.tooltipRow,children:[(0,u.tZ)(a.q,{size:(null===(t=g[D])||void 0===t?void 0:t.tooltipAvatarSize)||D,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,u.tZ)(s.G,{css:v.tooltipText,children:e.username})]},e.username)})}),children:function(e,t){return(0,u.BX)(s.G,(0,o._)((0,i._)({},e),{tag:"ul",innerRef:t,css:v.avatarsRow,style:k,children:[R.map(function(e,t){return(0,u.tZ)(s.G,{tag:"li",style:{zIndex:t+1},css:v.stackItem,children:(0,u.tZ)(a.q,{size:D,src:e.image||null,ringColor:e.color,username:e.username})},e.id)}),Z?(0,u.tZ)(s.G,{tag:"li",css:v.stackItem,style:{zIndex:R.length},children:(0,u.tZ)(s.G,{css:v.countCirlce,children:(0,u.BX)(s.G,{children:["+",_-S+1]})})}):null]}))}})}},56158:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(59173),i=n(27387),o=n(41733),u=n(30509),a=n(66626),l=n(63257),c=n(96583),s=n(42256),f=n(91039),d=n(83493),p=n(20298),h=n(91620).lW;function v(e){var t=e.container,n=e.beforeRun,v=(0,r.u)(null);return{mainClient:v,connect:function(){return new Promise(function(e){v.current||t.openChannel({service:"debugger"},function(t){return v.current=function(e){var t,n=e.channel,v=e.beforeRun,g=(0,r.u)("terminated"),m=(0,r.u)([]),y=(0,r.u)([]),b=(0,r.u)(new Map),w=(0,r.u)(null),E=(0,d.ZP)(),S=function(e,t){var n=new Map,r=new Map,u=new Map;function l(){return(l=(0,i._)(function(t){var i,l,s,f,d,p,h;return(0,c.Jh)(this,function(v){switch(v.label){case 0:i=!0,l=!1,s=void 0,v.label=1;case 1:v.trys.push([1,6,7,8]),f=function(){var n,i,l,s,f,d,h,v,g,m,y,b,w,E,S,x,D,_,k,Z,R,T,P,I,C,O,N,A,F,G,L,B,U,z,M;return(0,c.Jh)(this,function(j){switch(j.label){case 0:if(i=(n=(0,a._)(p.value,2))[0],l=n[1],void 0!==t&&t!==i)return[2,"continue"];return[4,e({command:"setBreakpoints",arguments:{source:{name:i,path:i},breakpoints:l.map(function(e){return{line:e.line,logMessage:e.logMessage||void 0}})}})];case 1:if(!(s=j.sent()).success)return[2,"continue"];f=!0,d=!1,h=void 0;try{for(v=r[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){y=(m=(0,a._)(g.value,2))[0],b=m[1],(null===(w=b.source)||void 0===w?void 0:w.name)===i&&r.delete(y),E=!0,S=!1,x=void 0;try{for(D=u[Symbol.iterator]();!(E=(_=D.next()).done);E=!0)Z=(k=(0,a._)(_.value,2))[0],k[1]===y&&u.delete(Z)}catch(e){S=!0,x=e}finally{try{E||null==D.return||D.return()}finally{if(S)throw x}}}}catch(e){d=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}R=s,T=!0,P=!1,I=void 0;try{for(C=R.body.breakpoints[Symbol.iterator]();!(T=(O=C.next()).done);T=!0)N=O.value,null!=N.id&&r.set(N.id,(0,o._)({source:{name:i,path:i}},N))}catch(e){P=!0,I=e}finally{try{T||null==C.return||C.return()}finally{if(P)throw I}}A=!0,F=!1,G=void 0;try{for(L=(function(e,t){var n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:if(e.length!==t.length)return[2];n=0,r.label=1;case 1:if(!(n<e.length))return[3,4];return[4,[e[n],t[n]]];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})})(l,R.body.breakpoints)[Symbol.iterator]();!(A=(B=L.next()).done);A=!0)z=(U=(0,a._)(B.value,2))[0],M=U[1],z.breakpointId&&null!=M.id&&u.set(z.breakpointId,M.id)}catch(e){F=!0,G=e}finally{try{A||null==L.return||L.return()}finally{if(F)throw G}}return[2]}})},d=n.entries()[Symbol.iterator](),v.label=2;case 2:if(i=(p=d.next()).done)return[3,5];return[5,(0,c.XA)(f())];case 3:v.sent(),v.label=4;case 4:return i=!0,[3,2];case 5:return[3,8];case 6:return h=v.sent(),l=!0,s=h,[3,8];case 7:try{i||null==d.return||d.return()}finally{if(l)throw s}return[7];case 8:return[2]}})})).apply(this,arguments)}function s(){var e=new Map,t=new Set,i=!0,o=!1,l=void 0;try{for(var c,s=n.entries()[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var d=(0,a._)(c.value,2),p=d[0],h=d[1];if(0!==h.length){var v=[],g=!0,m=!1,y=void 0;try{for(var b,w=h[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=b.value;if(E.breakpointId&&E.line){var S=u.get(E.breakpointId),x=void 0===S?void 0:r.get(S);x&&t.add(S),v.push({dapId:S,pid1Id:E.breakpointId,line:x&&x.line||E.line,verified:!!(null==x?void 0:x.verified),logMessage:E.logMessage||void 0})}}}catch(e){m=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}e.set(p,v)}}}catch(e){o=!0,l=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}var D=!0,_=!1,k=void 0;try{for(var Z,R=r.entries()[Symbol.iterator]();!(D=(Z=R.next()).done);D=!0){var T=(0,a._)(Z.value,2),P=T[0],I=T[1];if(!t.has(P)){var C=(0,f.IT)((null===(B=I.source)||void 0===B?void 0:B.path)||(null===(U=I.source)||void 0===U?void 0:U.name)||""),O=I.line;if(C&&O){var N=e.get(C);N||(N=[],e.set(C,N));var A=!1,F=!0,G=!1,L=void 0;try{for(var B,U,z,M=N[Symbol.iterator]();!(F=(z=M.next()).done);F=!0){var j=z.value;if(j.line===I.line){j.dapId=P,j.verified=I.verified,A=!0;break}}}catch(e){G=!0,L=e}finally{try{F||null==M.return||M.return()}finally{if(G)throw L}}A||N.push({dapId:P,line:O,verified:I.verified})}}}}catch(e){_=!0,k=e}finally{try{D||null==R.return||R.return()}finally{if(_)throw k}}return e}return{findPathByBreakpointId:function(e){var t=!0,r=!1,i=void 0;try{for(var o,u=n.entries()[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var l=(0,a._)(o.value,2),c=l[0];if(l[1].some(function(t){return t.breakpointId===e}))return c}}catch(e){r=!0,i=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}return null},getBreakpoints:s,flush:function(e){return l.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var n=e.body,i=n.reason,u=n.breakpoint,a=u.id;if(null!=a){switch(i){case"changed":case"new":r.set(a,(0,o._)({},r.get(a),u));break;case"removed":r.delete(a);break;default:return}t(s())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,f.IT)(e.absolutePath):null;r&&(n.set(r,e.breakpoints||[]),t(s()))},handleDebugSessionEnded:function(){r.clear(),u.clear();var e=!0,i=!1,o=void 0;try{for(var l,c=n.entries()[Symbol.iterator]();!(e=(l=c.next()).done);e=!0){var f=(0,a._)(l.value,2),d=f[0],p=f[1];0===p.length&&n.delete(d)}}catch(e){i=!0,o=e}finally{try{e||null==c.return||c.return()}finally{if(i)throw o}}t(s())}}}(P,function(e){b.current=e}),x=(0,r.u)(!1),D=[],_=new p.s(function(e){if(D.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":g.current="running";break;case"stopped":var t;g.current="paused",w.current=null!==(t=e.body.threadId)&&void 0!==t?t:null,E.emit("paused",e.body.reason),function(){N.apply(this,arguments)}();break;case"breakpoint":S.handleDAPBreakpointEvent(e)}else if("response"===e.type){var n=k.get(e.request_seq);n&&(k.delete(e.request_seq),n(e))}}),k=new Map,Z=100;function R(){g.current="terminated",m.current=[],y.current=[],w.current=null,S.handleDebugSessionEnded(),x.current=!1}var T=!1;function P(e){return I.apply(this,arguments)}function I(){return(I=(0,i._)(function(e){return(0,c.Jh)(this,function(t){return[2,new Promise(function(t){var r,i=Z++;k.set(i,t);var a=(0,u._)((0,o._)({},e),{type:"request",seq:i});D.push({time:Date.now(),direction:"out",data:a});var l={debugInput:{session:"main",adapterInput:(r=JSON.stringify(a),"Content-Length: ".concat(h.byteLength(r),"\r\n\r\n").concat(r))}};D.push({time:Date.now(),direction:"out",data:l}),n.send(l)})]})})).apply(this,arguments)}function C(e){return O.apply(this,arguments)}function O(){return(O=(0,i._)(function(e){var t;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return D.push({time:Date.now(),direction:"out",data:e}),[4,n.request(e)];case 1:if(t=r.sent(),D.push({time:Date.now(),direction:"in",data:t}),t.error)throw t.error;return[2,t]}})})).apply(this,arguments)}function N(){return(N=(0,i._)(function(){var e,t,n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return m.current=[],y.current=[],[4,P({command:"stackTrace",arguments:{threadId:w.current}})];case 1:if(!(e=r.sent()).success||(m.current=e.body.stackFrames,0===m.current.length))return[2];return[4,P({command:"scopes",arguments:{frameId:m.current[0].id}})];case 2:if(!(t=r.sent()).success)return[2];return[4,Promise.all(t.body.scopes.map(function(e){return P({command:"variables",arguments:{variablesReference:e.variablesReference}}).then(function(t){return{response:t,parentVariableReference:e.variablesReference}})}))];case 3:return n=r.sent(),y.current=n.filter(function(e){return e.response.success}).reduce(function(e,t){var n=t.response,r=t.parentVariableReference;return e.concat(n.body.variables.map(function(e){return(0,u._)((0,o._)({},e),{parentVariableReference:r})}))},[]),[2]}})})).apply(this,arguments)}function A(e){return F.apply(this,arguments)}function F(){return(F=(0,i._)(function(e){var t,r,i,o,u,a,l;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if("terminated"!==g.current)throw Error("Cant start while debugger is already running");return g.current="preinitializing",m.current=[],[4,v()];case 1:if(c.sent(),"stopping"===g.current)return g.current="terminated",[2];return T=!0,g.current="initializing",i={session:"main",readOnly:!1},e&&(i.debuggerId=e.debuggerOption.id,e.filePath&&(i.filePath=e.filePath)),o={debugMain:i},D.push({time:Date.now(),direction:"out",data:o}),[4,n.request(o)];case 2:if(u=c.sent(),D.push({time:Date.now(),direction:"in",data:u}),u.error)return E.emit("output",u.error),g.current="terminated",[2];return[4,P({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:if(!(a=c.sent()).success)return g.current="terminated",[2];return x.current=!!(null===(t=a.body)||void 0===t?void 0:t.supportsStepBack),l=!(null===(r=a.body)||void 0===r?void 0:r.supportsConfigurationDoneRequest),[4,S.flush()];case 4:if(c.sent(),l)return[3,6];return[4,P({command:"configurationDone"})];case 5:c.sent(),c.label=6;case 6:return"initializing"===g.current&&(g.current="running"),E.emit("started",l),[2]}})})).apply(this,arguments)}function G(e,t){return L.apply(this,arguments)}function L(){return(L=(0,i._)(function(e,t){var n,r,i,o;return(0,c.Jh)(this,function(u){switch(u.label){case 0:return n=t.line,r=t.otIndex,i=t.otVersion,o=t.logMessage,[4,C({debugAddBreakpointRequest:{path:(0,f.om)(e)||e,line:n,otIndex:r,otVersion:i,logMessage:o}})];case 1:if(u.sent(),!("terminated"!==g.current))return[3,3];return[4,S.flush(e)];case 2:u.sent(),u.label=3;case 3:return E.emit("breakpoint","added"),[2]}})})).apply(this,arguments)}function B(e){return U.apply(this,arguments)}function U(){return(U=(0,i._)(function(e){var t;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return t=S.findPathByBreakpointId(e),[4,C({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:if(n.sent(),!("terminated"!==g.current&&t))return[3,3];return[4,S.flush(t)];case 2:n.sent(),n.label=3;case 3:return E.emit("breakpoint","removed"),[2]}})})).apply(this,arguments)}function z(){return(z=(0,i._)(function(e,t){var n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:if(!(n=S.findPathByBreakpointId(e)))return[2];return[4,C({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:t.logMessage}})];case 1:if(r.sent(),!("terminated"!==g.current))return[3,3];return[4,S.flush(n)];case 2:r.sent(),r.label=3;case 3:return E.emit("breakpoint","updated"),[2]}})})).apply(this,arguments)}function M(){return(M=(0,i._)(function(e,t){var n,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if(!(i=null===(r=b.current.get(e))||void 0===r?void 0:null===(n=r.find(function(e){return e.line===t.line&&void 0!==e.pid1Id}))||void 0===n?void 0:n.pid1Id))return[3,2];return[4,B(i)];case 1:return o.sent(),[3,4];case 2:return[4,G(e,t)];case 3:o.sent(),o.label=4;case 4:return[2]}})})).apply(this,arguments)}function j(e){return E.on("started",e),function(){E.removeListener("started",e)}}return n.onCommand(function(e){D.push({time:Date.now(),direction:"in",data:e});var t,n,r=e.debugOutput,i=e.debugState,o=e.debugBreakpointEvent,u=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&_.read(r.adapterOutput),r.output&&E.emit("output",r.output)}if(o&&S.handlePID1BreakpointEvent(o),i&&i.state===s.api.State.Stopped&&R(),((null==u?void 0:null===(t=u.sessions)||void 0===t?void 0:t.main)===s.api.State.Running||(null==i?void 0:i.state)===s.api.State.Running)&&"terminated"===g.current&&A(),(null==u?void 0:null===(n=u.sessions)||void 0===n?void 0:n.main)===s.api.State.Stopped||(null==i?void 0:i.state)===s.api.State.Stopped){if(T){T=!1;return}R()}}),{state:g,stackFrames:m,variables:y,breakpoints:b,supportsStepBack:x,onOutput:function(e){return E.on("output",e),function(){E.removeListener("output",e)}},onStarted:j,onPaused:function(e){return E.on("paused",e),function(){E.removeListener("paused",e)}},onBreakpoint:function(e){return E.on("breakpoint",e),function(){E.removeListener("breakpoint",e)}},sendInput:function(e){return(0,i._)(function(){var t,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:return t={debugInput:{session:"main",input:e}},D.push({time:Date.now(),direction:"out",data:t}),[4,n.request(t)];case 1:if(r=i.sent(),D.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}})})()},fetchVariables:function(e){return(0,i._)(function(){var t;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,P({command:"variables",arguments:{variablesReference:e}})];case 1:if((t=n.sent()).success)return[2,t.body.variables.map(function(t){return(0,u._)((0,o._)({},t),{parentVariableReference:e})})];throw Error(t.message)}})})()},evaluate:function(e){var n=e.frameId,r=void 0===n?null===(t=m.current[0])||void 0===t?void 0:t.id:n,o=e.expression,u=e.context;return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return[4,P({command:"evaluate",arguments:{frameId:r,expression:o,context:u}})];case 1:return[2,e.sent()]}})})()},addBreakpoint:G,removeBreakpoint:B,updateBreakpoint:function(e,t){return z.apply(this,arguments)},toggleBreakpoint:function(e,t){return M.apply(this,arguments)},start:A,continue:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return m.current=[],g.current="running",[4,P({command:"continue",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},reverseContinue:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return m.current=[],g.current="running",[4,P({command:"reverseContinue",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},back:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"stepBack",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},next:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"stepIn",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},skip:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"next",arguments:{threadId:w.current,granularity:"line"}})];case 1:return e.sent(),[2]}})})()},stepOut:function(){return(0,i._)(function(){return(0,c.Jh)(this,function(e){switch(e.label){case 0:return g.current="running",[4,P({command:"stepOut",arguments:{threadId:w.current}})];case 1:return e.sent(),[2]}})})()},stop:function(){return(0,i._)(function(){var e,t,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if("terminated"===g.current)throw Error("Debugger already terminated");if(e=g.current,g.current="stopping","preinitializing"===e)return[2];if("initializing"!==e)return[3,2];return t=[],[4,Promise.race([new Promise(function(e){t.push(g.subscribe(function(){return e()}))}),new Promise(function(e){t.push(j(function(){return e()}))})])];case 1:if(o.sent(),t.forEach(function(e){return e()}),"terminated"===g.current)return[2];o.label=2;case 2:return r={debugStop:{session:"main"}},D.push({time:Date.now(),direction:"out",data:r}),[4,n.request(r)];case 3:if(i=o.sent(),D.push({time:Date.now(),direction:"in",data:i}),i.error)throw Error("Failed to stop debugger "+i.error);return[2]}})})()},getSource:function(e){return(0,i._)(function(){var t;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,P({command:"source",arguments:{source:{path:e}}})];case 1:if(!(t=n.sent()).success)throw Error(t.message);return[2,t.body.content]}})})()},getDebugLogs:function(){return Object.entries({state:g,stackFrames:m,variables:y,breakpoints:b,threadId:w}).map(function(e){var t=(0,a._)(e,2),n=t[0],r=t[1];return"".concat(n," = ").concat(JSON.stringify(r.current instanceof Map?(0,l._)(r.current):r.current,void 0,2))}).join("\n")+"\n\n"+D.map(function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")}).join("\n")}}}({channel:t.channel,beforeRun:n}),e(null),function(){v.current=null}})})}}}},43891:function(e,t,n){n.d(t,{P:function(){return g},n:function(){return v}});var r=n(66626),i=n(74044),o=n(99149),u=n(50782),a=n(50199),l=n(11516),c=n(1574),s=n(50959),f=n(59808),d=i.Dy.Array(i.Dy.String()),p=function(e){return"repl:hiddenFiles:"+e},h={get:function(e){var t=l.Z.get(p(e));return o.B4.Check(d,t)?t:null},set:function(e,t){l.Z.set(p(e),t)}},v=function(e){var t=(0,u.Z)(),n=(0,r._)((0,s.useState)(function(){return h.get(t)}),2),i=n[0],o=n[1];return(0,s.useEffect)(function(){return e.watch(function(e){var n=function(e){h.set(t,e),o(e)};if(e.error){e.error===f.Yt.NotFound&&n([]);return}if(!e.config.hidden){n([]);return}n(e.config.hidden)})},[e,t]),i},g=function(e){var t=v(e);return(0,a.Z)(function(){return null===t?null:t.map(function(e){return(0,c.Z)(e)||e})},[t])}},50431:function(e,t,n){n.d(t,{C:function(){return a},Gw:function(){return u},Tg:function(){return l},so:function(){return i},ss:function(){return c},tc:function(){return o}});var r=n(78950);function i(e,t){for(var n=[],r=e.split(t),i=0;i<r.length;i++){var o=r[i].trim();""!==o&&n.push(o)}return n}function o(e){return e.replace(/^<|>$/g,"")}function u(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function a(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function l(e){if(-1===e.indexOf("/")||e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var t=(0,r._)(e.split("/"));return[t[2],t.slice(3).join("/")]}var n=(0,r._)(e.split("/"));return[n[0],n.slice(1).join("/")]}function c(e){return e.replace(/^refs\/remotes\//,"")}},55103:function(e,t,n){n.d(t,{Z:function(){return w},h:function(){return u}});var r,i,o,u,a=n(27387),l=n(66626),c=n(96583),s=n(50431),f="# branch.oid ",d="# branch.head ",p="# branch.upstream ",h="# branch.ab ",v="# stash ",g=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,m=/^([RC])([0-9]+) (.+?)\t(.+)$/,y=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,b=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g;function w(e){return E.apply(this,arguments)}function E(){return(E=(0,a._)(function(e){var t,n,r,i,o,u,a,w,E,x,D,_,k,Z,R,T,P,I,C,O,N,A;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return t=null,n=null,r=null,i=0,o=[],u=["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"],[4,e("git status ".concat(u.join(" ")),{serviceMethod:"git-status"})];case 1:if((a=c.sent()).error)return[2,a];w=a.output.replaceAll(b,"$1	$2"),E=(0,s.so)(w,"\x00"),x=!0,D=!1,_=void 0;try{for(k=E[Symbol.iterator]();!(x=(Z=k.next()).done);x=!0)(R=Z.value).startsWith("#")?R.startsWith(f)?(T=R.substring(f.length),"(initial)"!==T&&(t=T)):R.startsWith(d)?(P=R.substring(d.length),"(detached)"!==P&&(n=P)):R.startsWith(p)?(I=R.substring(p.length),"(not queried)"!==I&&(r={branch:I,ahead:0,behind:0})):R.startsWith(h)?r&&(O=(C=(0,l._)(R.substring(h.length).split(" ").map(function(e){return Math.abs(parseInt(e,10))}),2))[0],N=C[1],r.ahead=O,r.behind=N):R.startsWith(v)&&(i=parseInt(R.substring(v.length),10)):(A=function(e){var t=e[0];switch(e=e.substring(2),t){case"!":default:return null;case"?":return{type:{index:"UNTRACKED",worktree:"UNTRACKED"},path:e,staged:!1,unmerged:!1};case"u":var n=e.match(y);if(!n)return null;var r=(0,l._)(n,12),i=r[1],o=r[2],u=r[11],a=S(i),c=S(o);return{type:{index:a,worktree:c},path:u,staged:"UNMODIFIED"!==a,unmerged:!0};case"1":case"2":var s=e.match(g);if(!s)return null;var f=(0,l._)(s,10),d=f[1],p=f[2],h=f[9],v=S(d),b=S(p),w="UNMODIFIED"!==v;if("1"===t)return{type:{index:v,worktree:b},path:h,staged:w,unmerged:!1};if("2"===t){var E=h.match(m);if(!E)return null;var x=(0,l._)(E,5),D=x[1],_=x[2],k=x[3],Z=x[4];return{type:{index:v,worktree:b},path:k,staged:w,unmerged:!1,source:{type:function(e){switch(e){case"R":default:return"RENAMED";case"C":return"COPIED"}}(D),score:parseInt(_,10),path:Z}}}return null}}(R),null!==A&&o.push(A))}catch(e){D=!0,_=e}finally{try{x||null==k.return||k.return()}finally{if(D)throw _}}return[2,{commit:t,branch:n,upstream:r,stashes:i,changes:o,error:null}]}})})).apply(this,arguments)}function S(e){switch(e){case".":default:return"UNMODIFIED";case"M":return"MODIFIED";case"T":return"TYPE_CHANGED";case"A":return"ADDED";case"D":return"DELETED";case"R":return"RENAMED";case"C":return"COPIED";case"U":return"UNMERGED"}}(r=o||(o={})).ORDINARY="1",r.RENAMED_OR_COPIED="2",r.UNMERGED="u",r.UNTRACKED="?",r.IGNORED="!",(i=u||(u={})).UNTRACKED="UNTRACKED",i.UNMODIFIED="UNMODIFIED",i.MODIFIED="MODIFIED",i.TYPE_CHANGED="TYPE_CHANGED",i.ADDED="ADDED",i.DELETED="DELETED",i.RENAMED="RENAMED",i.COPIED="COPIED",i.UNMERGED="UNMERGED"},20298:function(e,t,n){n.d(t,{s:function(){return f}});var r,i=n(12285),o=n(43182),u=n(2689),a=n(91620).lW,l=new TextEncoder,c=new TextDecoder,s=(r=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source,RegExp("(".concat(r,"\\r\\n)*(").concat(r,")$"),"i")),f=function(){"use strict";function e(t){(0,i._)(this,e),this.onMessage=t,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var t=e.prototype;return t.consumeHeaders=function(){var e=function(e){var t=e.findIndex(function(t,n){return 13===t&&10===e[n+1]&&13===e[n+2]&&10===e[n+3]});if(-1!==t){var n=c.decode(e.slice(0,t)),r=n.match(s);if(!r)throw u.kg.error("Failed to parse LSP header, no matches",{fragment:n}),Error("Unable to match header, text: ".concat(n));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,f=void 0;try{for(var d,p=o[Symbol.iterator]();!(a=(d=p.next()).done);a=!0){var h=d.value,v=h.indexOf(":");if(-1===v)throw u.kg.error("Failed to parse LSP header, missing colon",{fragment:n}),Error('Message header must separate key and value using ":"');var g=h.substr(0,v),m=h.substr(v+1).trim();if("Content-Length"===g){var y=parseInt(m,10);if(isNaN(y))throw u.kg.error("Failed to parse LSP header, NaN content length",{fragment:n}),Error("Content-Length value must be a number.");i[g]=parseInt(m,10)}else i[g]=m}}catch(e){l=!0,f=e}finally{try{a||null==p.return||p.return()}finally{if(l)throw f}}if(null==i["Content-Length"])throw u.kg.error("Failed to parse LSP header, no Content-Length",{fragment:n}),Error("Header must provide a Content-Length property.");return{headerLength:t,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},t.read=function(e){for(this.buffer=(t=this.buffer,n=l.encode(e),(r=new Uint8Array(t.length+n.length)).set(t),r.set(n,t.length),r);null!==(i=this.headers)&&void 0!==i?i:this.headers=this.consumeHeaders();){var t,n,r,i,s=this.headers.value["Content-Length"];if(this.buffer.length<s)return;var f=function(e,t,n){var r=c.decode(e.slice(0,t));try{return{json:JSON.parse(r),buffer:e.slice(t)}}catch(f){var i=a.from(e).toString();if(f instanceof SyntaxError&&"Unexpected end of JSON input"===f.message){u.kg.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:t,rpcContent:r,attempt:"original-length",headers:JSON.stringify(n)});var o=function(e,t){for(var n=0,r=0,i=!1,o=t;o<e.length+1;o++){if(o!==t&&!n&&!r&&!i)return o;var u=e[o];switch(u){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(u){case 123:n++;break;case 125:n--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var l=e.slice(0,o),s=c.decode(l);try{return{json:JSON.parse(s),buffer:e.slice(o)}}catch(e){u.kg.error("Failed to parse LSP message",{givenError:e,buffer:i,length:t,rpcContent:r,attempt:"recomputed-length"})}}}else u.kg.error("Failed to parse LSP message",{givenError:f,buffer:i,length:t,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(t)}}}(this.buffer,s,this.headers),d=f.json,p=f.buffer;if(this.headers=void 0,this.buffer=p,void 0!==d)try{this.onMessage(d)}catch(e){o.Tb(e)}}},e}()},35375:function(e,t,n){n.d(t,{DL:function(){return i},OD:function(){return y},TE:function(){return x},UK:function(){return g},VZ:function(){return b}});var r,i,o=n(27387),u=n(41733),a=n(30509),l=n(63257),c=n(96583),s=n(43182),f=n(64461),d=n(86763),p=n.n(d),h=n(40028),v=n(59173),g=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function m(e,t){return new Set(Array.from(e).filter(function(e){return!t.has(e)}))}function y(e){var t=e.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,h.Z)(t)}}function b(e){var t;return null!==(t=e.isLocalhost)&&void 0!==t&&t}function w(e,t){return t?m(e,new Set(t.map(function(e){return y(e.configuration)}))):e}function E(e){var t=e.localPort,n=w(e.forwardableExternalPorts,e.portsState.current);if(0!==n.size){var r=n.has(80),i=n.has(t);return r?80:i?t:Array.from(n).sort()[0]}}function S(){return(S=(0,o._)(function(e){var t,n,r,i,o,u,a,l;return(0,c.Jh)(this,function(c){if(t=e.forwardableExternalPorts,n=e.portsState,r=e.writeDotReplitPortsConfig,i=e.portInfo,null===n.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");return(u="127.0.0.1"===(o={pid:i.pid,cgroup:i.cgroup,address:i.address,cmdline:i.cmdline}).address,void 0!==(a=n.current.find(function(e){return e.configuration.localPort===i.port&&b(e.configuration)===u})))?[2,{isOpen:!0,processInfo:o,configuration:a.configuration}]:void 0===(l=E({localPort:i.port,forwardableExternalPorts:t,portsState:n}))?[2,{isOpen:!0,processInfo:o,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:i.port,isLocalhost:u}}]:(r(),[2,{isOpen:!0,processInfo:o,configuration:{type:"FORWARDED",localPort:i.port,externalPort:l,isLocalhost:u}}])})})).apply(this,arguments)}function x(e){var t=e.container,n=e.dotReplit,r=e.enableBetterPortHandling,i=void 0!==r&&r,o=(0,v.u)([]),c=(0,v.u)(null),d=(0,v.u)(!1),x=p()(function(){if(c.current){var e=c.current.map(function(e){var t=e.configuration.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return(0,u._)({localPort:e.configuration.localPort,externalPort:e.configuration.externalPort},b(e.configuration)?{exposeLocalhost:!0}:void 0);case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,h.Z)(t)}}).filter(Boolean).sort(function(e,t){return e.localPort-t.localPort});n.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])}},1e3,{leading:!1,trailing:!0});function D(){d.set(!0),x()}return i?function(e){var t=e.container,n=e.dotReplit,r=e.portsState,i=e.writeDotReplitPortsConfig,o=e.isThisServiceUpdatingDotReplit,c=e.forwardableExternalPorts;function f(e){return e.sort(function(e,t){var n,r;return(null!==(n=e.configuration.localPort)&&void 0!==n?n:0)-(null!==(r=t.configuration.localPort)&&void 0!==r?r:0)})}var d=[];function p(e){try{(function(e){return S.apply(this,arguments)})({forwardableExternalPorts:c,portsState:r,writeDotReplitPortsConfig:i,portInfo:e}).then(function(t){r.update(function(n){if(!n)throw Error("processOpenedPort can only execute if we red .replit first");var r=n.findIndex(function(t){return t.configuration.localPort===e.port});-1===r&&(r=n.length);var i=n.slice();return i[r]=t,f(i)})})}catch(e){throw s.$e(function(t){t.setTag("service","ports"),s.Tb(e)}),e}}function h(e){try{r.update(function(t){if(!t)throw Error("onPortClosed can only execute if we red .replit first");var n=t.findIndex(function(t){return t.configuration.localPort===e.port});if(-1===n)return t;var r=t[n],i=t.slice();return i[n]={isOpen:!1,configuration:r.configuration},i})}catch(e){throw s.$e(function(t){t.setTag("service","ports"),s.Tb(e)}),e}}t.onPortOpened(function(e){null===r.current?d.push({type:"portOpen",portInfo:e}):p(e)}),t.onPortClosed(function(e){null===r.current?d.push({type:"portClose",portInfo:e}):h(e)}),n.watch(function(e){var t,n=e.config,i=null!==(t=null==n?void 0:n.ports)&&void 0!==t?t:[];if(!0===o.current){var s=r.current;if(!s||i.length!==s.length)return;i.every(function(e,t){var n,r=s[t];return e.localPort===r.configuration.localPort&&e.externalPort===(null!==(n=y(r.configuration))&&void 0!==n?n:0)})&&o.set(!1);return}r.update(function(e){e||(e=[]);var t=new Set(i.map(function(e){return e.localPort}).filter(function(e){return null!=e})),n=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),o=m(t,n),s=(g=new Set((0,l._)(Array.from(t)).concat((0,l._)(Array.from(r)))),new Set(Array.from(n).filter(function(e){return g.has(e)}))),d=[],p=!0,h=!1,v=void 0;try{for(var g,y,E=s[Symbol.iterator]();!(p=(y=E.next()).done);p=!0)!function(){var t=y.value,n=e.find(function(e){return e.configuration.localPort===t}),r=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));if(!r)return d.push((0,a._)((0,u._)({},n),{configuration:{type:"CONFIG_MISSING",localPort:n.configuration.localPort,isLocalhost:b(n.configuration)}}));var o=n.configuration;o=null!=r.externalPort&&0!==r.externalPort?{type:w(c,d).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:n.configuration.localPort,externalPort:r.externalPort,isLocalhost:b(n.configuration)}:{type:"INTERNAL_ONLY",localPort:n.configuration.localPort,isLocalhost:b(n.configuration)},d.push((0,a._)((0,u._)({},n),{configuration:o}))}()}catch(e){h=!0,v=e}finally{try{p||null==E.return||E.return()}finally{if(h)throw v}}var S=!0,x=!1,D=void 0;try{for(var _,k=o[Symbol.iterator]();!(S=(_=k.next()).done);S=!0)!function(){var e,t=_.value,n=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));var r=null!=n.externalPort&&0!==n.externalPort?n.externalPort:void 0;if(void 0!==r){var o,u=w(c,d).has(r);d.push({isOpen:!1,configuration:{type:u?"FORWARDED":"MISCONFIGURED",localPort:t,externalPort:r,isLocalhost:null!==(o=n.exposeLocalhost)&&void 0!==o&&o}})}else d.push({isOpen:!1,configuration:{type:"INTERNAL_ONLY",localPort:t,isLocalhost:null!==(e=n.exposeLocalhost)&&void 0!==e&&e}})}()}catch(e){x=!0,D=e}finally{try{S||null==k.return||k.return()}finally{if(x)throw D}}return f(d)}),d.length>0&&(d.forEach(function(e){var t=e.type,n=e.portInfo;"portOpen"===t?p(n):"portClose"===t&&h(n)}),d=[])})}({container:t,dotReplit:n,portsState:c,writeDotReplitPortsConfig:D,isThisServiceUpdatingDotReplit:d,forwardableExternalPorts:g}):function(e){var t=e.container,n=e.openedPorts;function r(e){return e.sort(function(e,t){return e.localPort-t.localPort})}t.onPortOpened(function(e){e.isForwarded&&n.update(function(t){var n=t.findIndex(function(t){return t.localPort===e.port});-1===n&&(n=t.length);var i=t.slice();return i[n]={localPort:e.port,externalPort:e.externalPort},r(i)})}),t.onPortClosed(function(e){n.update(function(t){return r(t.filter(function(t){return t.localPort!==e.port}))})})}({container:t,openedPorts:o}),{openedPorts:o,tryExposingPortAutomatically:function(e){if(!i)throw Error("auto-assigning ports is only available when we auto-udpate .replit");var t=E({localPort:e,forwardableExternalPorts:g,portsState:c});void 0!==t&&(c.update(function(n){if(!n)return null;var r=n.findIndex(function(t){return t.configuration.localPort===e});if(-1===r)return n;var i=n[r],o=n.slice();return i.isOpen?o[r]={isOpen:!0,processInfo:i.processInfo,configuration:{type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:i.configuration.isLocalhost}}:o[r]={isOpen:!1,configuration:{type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:i.configuration.isLocalhost}},o}),D())},updateDotReplitPortsMapping:function(e,t,n){if(!i)throw Error("updating .replit ports mapping is only available when we auto-udpate .replit");c.update((0,f.Uy)(function(r){var i=null==r?void 0:r.find(function(t){return t.configuration.localPort===e}),o=void 0!==t?{type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:null!=n&&n}:{type:"INTERNAL_ONLY",localPort:e,isLocalhost:null!=n&&n};i?i.configuration=o:(r||(r=[]),r.push({isOpen:!1,configuration:o}))})),D()},removeDotReplitPortsMapping:function(e,t){if(!i)throw Error("updating .replit ports mapping is only available when we auto-udpate .replit");c.update((0,f.Uy)(function(n){var r;void 0!==(r=void 0!==t?null==n?void 0:n.findIndex(function(n){return n.configuration.localPort===e&&("FORWARDED"===n.configuration.type||"MISCONFIGURED"===n.configuration.type)&&n.configuration.externalPort===t}):null==n?void 0:n.findIndex(function(t){return t.configuration.localPort===e}))&&(null==n||n.splice(r,1))})),D()},portsState:c}}(r=i||(i={})).FORWARDED="FORWARDED",r.INTERNAL_ONLY="INTERNAL_ONLY",r.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",r.MISCONFIGURED="MISCONFIGURED",r.CONFIG_MISSING="CONFIG_MISSING"},80388:function(e,t,n){n.d(t,{N5:function(){return u},f0:function(){return o},gs:function(){return a},i7:function(){return i}});var r=Object.values(n(72720).Z.multiplayer);function i(e){var t={};return r.forEach(function(e){t[e]=0}),e.forEach(function(e){t[e.color]++}),Object.keys(t).sort(function(e,n){return t[e]-t[n]})[0]}function o(e){var t=e.sessions.sort(function(e,t){return e.timestamp-t.timestamp}),n=!0,r=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value;if(a.activeFile)return a.activeFile}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return null}function u(e,t){var n=t.find(function(t){return t.sessions.some(function(t){return t.id===e})});if(!n)throw Error("Expected user with session ID ".concat(e));return n}function a(e){var t=e.seconds,n=e.nanos;return Number(t||0)+(n||0)/1e9}},85492:function(e,t,n){n.d(t,{Z:function(){return _}});var r,i,o,u=n(27387),a=n(96583),l=n(2689),c=n(47001),s=n(83493),f=n(18107),d=n(41733),p=n(42256),h=n(59868),v=n(12130),g=n(64461),m=n(30671),y=n(92674),b=n.n(y),w=n(12285);(i||(i={})).MESSAGE="MESSAGE";var E=function(){"use strict";function e(t){(0,w._)(this,e),this.buffer=Array(t).fill(null),this.start=0,this.end=0,this.isFull=!1}var t=e.prototype;return t.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},t.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function S(e){var t=new E(e.maxHistorySize),n=(0,s.ZP)();return{emitMessage:function(e){t.write(e),n.emit("MESSAGE",e)},onMessage:function(e){return n.on("MESSAGE",e),Promise.resolve().then(function(){return e(t.readAll())}),function(){return n.removeListener("MESSAGE",e)}}}}function x(e){return 1e3*e.seconds+e.nanos/1e6}var D="\x1b[?25l";function _(e){var t;if("outputs"===e.mode?t=function(e){var t,n,r,i,o,c,y,w,E,_,k,Z,R,T,P,I,C,O=e.container,N=e.toolchain,A=e.beforeRun,F=e.packager,G=e.debuggest,L=(0,s.ZP)(),B=null,U={runId:b()(),runState:f.Ah.OFFLINE,runningStage:"NONE",outputBlocks:[]};function z(e){U=(0,g.Uy)(U,e)}function M(e){var t=U.outputBlocks.find(function(t){return t.id===e});if(!t)throw Error("can't find block for id: ".concat(e));L.emit(f.zW.BLOCK_CHANGED,t)}function j(){L.emit(f.zW.ALL_BLOCKS_CHANGED,U.outputBlocks)}function H(e){U.runState!==e&&(z(function(t){t.runState=e}),L.emit(f.zW.STATE_CHANGE,e))}function W(){if(!B){H(f.Ah.OFFLINE);return}if("BEFORE_RUN"===U.runningStage){H(f.Ah.BEFORE_RUN);return}if("STOPPING"===U.runningStage){H(f.Ah.STOPPING);return}if("NONE"!==U.runningStage){H(f.Ah.RUNNING);return}H(f.Ah.IDLE)}function V(e,t){var n=(null!=t?t:U).outputBlocks.filter(function(t){return t.type===e}),r=n[n.length-1];if(r)return r}function X(e,t){var n;z(function(r){var i=V(e,r);i&&(n=i.id,t(i))}),n&&M(n)}function J(){return(J=(0,u._)(function(e){return(0,a.Jh)(this,function(t){var n;return[2,(0,m.GK)("outputs.run",(n=(0,u._)(function(t){var n,r,i,o,c,s,p,g,y,w;return(0,a.Jh)(this,function(E){switch(E.label){case 0:if(U.runState!==f.Ah.IDLE&&U.runState!==f.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+U.runState);return i=U.outputBlocks.length>1&&U.outputBlocks[U.outputBlocks.length-1],(0,h.j)(h.U3.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(n=O.getContext())||void 0===n?void 0:n.repl.id,runId:U.runId,lastBlock:i?(0,d._)({type:i.type,isDone:i.isDone,endTime:i.endTime,startTime:i.startTime},i.type===f.kH.EXECUTION?{executionMode:i.data.executionMode,exitCode:i.data.exitCode,stderr:i.data.stderr}:{},i.type===f.kH.DEBUGGER?{debugState:i.data.debugState}:{}):void 0,previousBlockNumber:U.outputBlocks.length,previousBlocksAvgTimeMs:U.outputBlocks.length>1?Math.floor(U.outputBlocks.reduce(function(e,t){return t.endTime&&t.startTime?e+(t.endTime-t.startTime):e},0)):void 0}),o=b()(),z(function(e){e.runId=o,e.runningStage="BEFORE_RUN"}),L.emit(f.zW.LOCAL_RUN),W(),!e&&(s=(0,v.Z)(N.configs.current,[],null,(null===(c=N.configs.current)||void 0===c?void 0:c.entrypoint)||null)).length>0&&(e=s[0]),[4,A(p=l.kg.timeStart({runnerId:null==e?void 0:e.runner.id,filePath:null==e?void 0:e.filePath,isInterpreter:null==e?void 0:e.runner.interpreter,replLanguage:null===(r=O.getContext())||void 0===r?void 0:r.repl.language}),{runId:o,channelId:null==B?void 0:B.id,type:"outputs",runConfig:e,ctx:t})];case 1:if(E.sent(),U.runId!==o||"NONE"===U.runningStage||"SERVER"===U.runningStage)return[2];if(!B)throw Error("State is RUNNING but outputs is null?");if("open"!==B.status)return[2];return(g=K()).isStopped||g.stop(),y={},e&&(y.runnerId=e.runner.id,y.filePath=e.filePath),w=B,[4,(0,m.nO)(t,"timeToRunning",(0,u._)(function(){var e,t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return e=performance.now(),w.send({runMain:y}),[4,new Promise(function(e){var t=w.onCommand(function(n){"state"===n.body&&(t(),e())})})];case 1:return n.sent(),t=performance.now()-e,p("run finished",{timeToRunningMs:t}),[2]}})}))];case 2:return E.sent(),[2]}})}),function(e){return n.apply(this,arguments)}))]})})).apply(this,arguments)}function K(){var e=G.mainClient.current,t=null==e?void 0:e.state.current;return{client:e,state:t,sendInput:function(t){return null==e?void 0:e.sendInput(t)},stop:function(){return null==e?void 0:e.stop()},isRunning:"running"===t,isStopped:null==t||"terminated"===t}}function q(){return(q=(0,u._)(function(e){var t,n;return(0,a.Jh)(this,function(r){if(U.runState===f.Ah.OFFLINE)return[2];if(t=K(),n=U.outputBlocks[U.outputBlocks.length-1].type===f.kH.DEBUGGER,t.isRunning&&n&&t.sendInput(e),U.runState!==f.Ah.IDLE&&U.runState!==f.Ah.RUNNING)throw Error("Can only send input when running or idle");if(!B)throw Error("State is not OFFLINE but outputs is null?");return"open"!==B.status||B.send({input:e}),[2]})})).apply(this,arguments)}return n=(t={packager:F,updateState:z,getRunningBlockOfType:V,updateRunningBlockOfType:X,emitBlockUpdate:M}).packager,r=t.updateState,i=t.getRunningBlockOfType,o=t.updateRunningBlockOfType,c=t.emitBlockUpdate,(y=[]).push(n.onOutput(function(e){var t=i(f.kH.PACKAGER);null==t||t.data.emitMessage(e.replace(/\n/g,"\n\r"))})),y.push(n.onError(function(e){o(f.kH.PACKAGER,function(t){t.error?t.error+="\n"+e:t.error=e})})),y.push(n.onStateChanged(function(e){if(e){var t=b()();r(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:f.MZ.EXPANDED,type:f.kH.PACKAGER,data:(0,d._)({},S({maxHistorySize:4e3}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),c(t)}else o(f.kH.PACKAGER,function(e){e.data.emitMessage(D),e.localEndTime=Date.now(),e.isDone=!0})})),k=(w={debuggest:G,updateState:z,updateRunningBlockOfType:X,getRunningBlockOfType:V,emitRunState:H,emitBlockUpdate:M,stopCurrentRun:function(){z(function(e){e.runningStage="BEFORE_RUN"}),null==B||B.send({clear:{}})}}).debuggest,Z=w.updateState,R=w.updateRunningBlockOfType,T=w.getRunningBlockOfType,P=w.emitBlockUpdate,I=w.emitRunState,C=w.stopCurrentRun,k.mainClient.subscribe(function(e){e&&(null==_||_(),null==E||E(),_=e.state.subscribe(function(e){if("initializing"===e){C();var t=b()();Z(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,type:f.kH.DEBUGGER,visualState:f.MZ.EXPANDED,data:(0,d._)({debugState:"paused"},S({maxHistorySize:4e3}))})}),P(t),I(f.Ah.RUNNING)}"paused"===e&&R(f.kH.DEBUGGER,function(e){e.data.debugState="paused"}),"running"===e&&R(f.kH.DEBUGGER,function(e){e.data.debugState="running"}),"stopping"===e&&I(f.Ah.STOPPING),"terminated"===e&&(R(f.kH.DEBUGGER,function(e){e.localEndTime=Date.now(),e.data.emitMessage(D),e.isDone=!0}),I(f.Ah.IDLE))}),E=e.onOutput(function(e){var t=T(f.kH.DEBUGGER);null==t||t.data.emitMessage(e)}))}),O.openChannel({name:"output",service:"output"},function(e){var t=e.channel;return B=t,W(),t.onCommand(function(e){if(null!=e.state){var t=e.state===p.api.State.Stopped;"STOPPING"===U.runningStage&&t&&z(function(e){e.runningStage="NONE"}),t?"SERVER"===U.runningStage&&z(function(e){e.runningStage="NONE"}):z(function(e){e.runningStage="SERVER"}),W();return}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==U.outputBlocks.find(function(e){return e.type===f.kH.EXECUTION&&!e.isDone}))return;var n=e.outputBlockStartEvent,r=n.cgroup,i=n.executionMode,o=x(n.measureStartTime),u=b()();z(function(e){e.outputBlocks.push({id:u,localStartTime:Date.now(),startTime:o,isDone:!1,type:f.kH.EXECUTION,visualState:f.MZ.EXPANDED,data:(0,d._)({cgroup:r,executionMode:i===p.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret"},S({maxHistorySize:4e3}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),M(u)}if(null!=e.output){var a=V(f.kH.EXECUTION);null==a||a.data.emitMessage(e.output)}if(null!=e.hint){var l=V(f.kH.EXECUTION);null==l||l.data.emitMessage("\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))}if(null!=e.stderr&&X(f.kH.EXECUTION,function(t){t.data.stderr=(t.data.stderr||"")+e.stderr}),null!=e.error){var c=e.error;X(f.kH.EXECUTION,function(e){e.error?e.error+="\n"+c:e.error=c})}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var s,v=e.outputBlockEndEvent.exitCode;(0,h.j)(h.U3.WS_CONSOLE_OUTPUT_RAN,{exitCode:v,replId:null===(s=O.getContext())||void 0===s?void 0:s.repl.id,runId:U.runId});var g=x(e.outputBlockEndEvent.measureEndTime);X(f.kH.EXECUTION,function(e){e.data.emitMessage(D),e.data.exitCode=v,e.localEndTime=Date.now(),e.endTime=g,e.isDone=!0})}}),function(){B=null,z(function(e){e.runId=b()(),e.runState=f.Ah.OFFLINE,e.runningStage="NONE",e.outputBlocks.forEach(function(e){if(!e.isDone){e.data.emitMessage(D),e.localEndTime=Date.now(),e.isDone=!0;var t="Connection was lost";e.error?e.error+="\n"+t:e.error=t}})}),W(),j()}}),{mode:"outputs",run:function(e){return J.apply(this,arguments)},stopRun:function(){if(U.runState===f.Ah.RUNNING){var e=K();if(!e.isStopped){e.stop(),z(function(e){e.runningStage="STOPPING"}),W();return}if("BEFORE_RUN"===U.runningStage){z(function(e){e.runningStage="NONE"}),W();return}z(function(e){e.runningStage="STOPPING"}),W(),null==B||B.send({clear:{}})}},sendInput:function(e){return q.apply(this,arguments)},onLocalRun:function(e){return L.on(f.zW.LOCAL_RUN,e),function(){L.removeListener(f.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return L.on(f.zW.STATE_CHANGE,e),function(){return L.removeListener(f.zW.STATE_CHANGE,e)}},getRunState:function(){return U.runState},getOutputBlocks:function(){return U.outputBlocks},clearBlockHistory:function(){z(function(e){e.outputBlocks=e.outputBlocks.filter(function(e){return!e.isDone})}),j()},onBlockChanged:function(e){return L.on(f.zW.BLOCK_CHANGED,e),function(){return L.removeListener(f.zW.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return L.on(f.zW.ALL_BLOCKS_CHANGED,e),function(){return L.removeListener(f.zW.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,t){if(B&&"open"===B.status){var n=U.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("tried to resize terminal of non-existing block");n.isDone||B.send({resizeTerm:t})}},startBlock:function(e){var t=b()();return z(function(n){n.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:f.MZ.EXPANDED,type:e,data:(0,d._)({},S({maxHistorySize:4e3}))})}),M(t),{id:t}},endBlock:function(e){z(function(t){var n=t.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("couldn't find a block");n.data.emitMessage(D),n.localEndTime=Date.now(),n.isDone=!0}),M(e)},writeOutputToBlock:function(e,t){var n=U.outputBlocks.find(function(t){return t.id===e});n&&n.data.emitMessage(t)},writeErrorToBlock:function(e,t){z(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.error?r.error+="\n"+t:r.error=t}),M(e)},setBlockVisualState:function(e,t){z(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.visualState=t}),M(e)}}}({container:e.container,toolchain:e.toolchain,beforeRun:e.beforeRun,packager:e.packager,debuggest:e.debuggest}):"html"===e.mode&&(t=function(e){var t=e.beforeRun,n=e.container,r=(0,s.ZP)(),i=f.Ah.OFFLINE,o="none",d=Math.random();function p(){var e=function(e){i!==e&&(i=e,r.emit(f.zW.STATE_CHANGE,i))};if("none"!==o){e(f.Ah.RUNNING);return}e(f.Ah.IDLE)}function h(){return(h=(0,u._)(function(){var e;return(0,a.Jh)(this,function(n){switch(n.label){case 0:if(i!==f.Ah.IDLE&&i!==f.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+i);return d=e=Math.random(),r.emit(f.zW.LOCAL_RUN),o="before-run",p(),[4,t(l.kg.timeStart({replLanguage:"html"}),{runId:e.toString(),type:"html"})];case 1:if(n.sent(),d!==e||"none"===o)return[2];return o="running",p(),o="none",p(),[2]}})})).apply(this,arguments)}return n.onConnectionStateChanged(function(e){e===c.em.CONNECTED&&(o="none",p())}),{mode:"html",run:function(){return h.apply(this,arguments)},stopRun:function(){if(i!==f.Ah.RUNNING)throw Error("stopRun must be called when running but got ".concat(i));o="none",p()},onStateChanged:function(e){return r.on(f.zW.STATE_CHANGE,e),function(){r.removeListener(f.zW.STATE_CHANGE,e)}},onLocalRun:function(e){return r.on(f.zW.LOCAL_RUN,e),function(){r.removeListener(f.zW.LOCAL_RUN,e)}},getRunState:function(){return i}}}({beforeRun:e.beforeRun,container:e.container})),!t)throw Error("mode not supported: "+e.mode);return t}(r=o||(o={})).BEFORE_RUN="BEFORE_RUN",r.SERVER="SERVER",r.NONE="NONE",r.STOPPING="STOPPING"},17789:function(e,t,n){n.d(t,{Z:function(){return p},w:function(){return d}});var r=n(27387),i=n(42516),o=n(41733),u=n(30509),a=n(66626),l=n(96583),c=n(28268),s=n(39756),f=n(30084),d=".env";function p(e){var t=e.fs,n={id:0,ops:[],requests:[]};function p(){return(p=(0,r._)(function(e){var t;return(0,l.Jh)(this,function(n){switch(n.label){case 0:return[4,g()];case 1:return[2,(t=n.sent()[e])?{key:e,value:t}:void 0]}})})).apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:return e=Object.entries,[4,g()];case 1:return[2,e.apply(Object,[t.sent()]).map(function(e){var t=(0,a._)(e,2);return{key:t[0],value:t[1]}})]}})})).apply(this,arguments)}function g(){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(){var e;return(0,l.Jh)(this,function(n){switch(n.label){case 0:return[4,t.readFile(d)];case 1:if((e=n.sent()).error===f.Df.NotFound)return[2,{}];if(e.error)throw e.error;return[2,c.Z.parse(e.content.toString())]}})})).apply(this,arguments)}function y(){return(y=(0,r._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,b([e])];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function b(e,t){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e,t){return(0,l.Jh)(this,function(r){switch(r.label){case 0:return Array.isArray(e)||(e=Object.entries(e).map(function(e){var t=(0,a._)(e,2);return{key:t[0],value:t[1]}})),(null==t?void 0:t.removeMissing)&&n.ops.push({op:"clear"}),e.forEach(function(e){return n.ops.push({op:"upsert",secret:e})}),[4,D()];case 1:return r.sent(),[2]}})})).apply(this,arguments)}function E(){return(E=(0,r._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,S([e])];case 1:return[2,t.sent()]}})})).apply(this,arguments)}function S(e){return x.apply(this,arguments)}function x(){return(x=(0,r._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return e.forEach(function(e){return n.ops.push({op:"remove",key:e})}),[4,D()];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function D(){return _.apply(this,arguments)}function _(){return(_=(0,r._)(function(){var e,a,s,f,p,v,g,m,y,b,w,E,S,x,D;return(0,l.Jh)(this,function(_){switch(_.label){case 0:return e=n.id+=1,[4,h()];case 1:var k;if(a=_.sent(),e!==n.id)return[2,new Promise(function(e){n.requests.push(e)})];s=a.reduce(function(e,t){return(0,u._)((0,o._)({},e),(0,i._)({},t.key,t.value))},{}),f=!0,p=!1,v=void 0;try{for(g=n.ops[Symbol.iterator]();!(f=(m=g.next()).done);f=!0)switch((y=m.value).op){case"upsert":s[y.secret.key]=y.secret.value;break;case"remove":delete s[y.key];break;case"clear":b=!0,w=!1,E=void 0;try{for(S=Object.keys(s)[Symbol.iterator]();!(b=(x=S.next()).done);b=!0)D=x.value,delete s[D]}catch(e){w=!0,E=e}finally{try{b||null==S.return||S.return()}finally{if(w)throw E}}}}catch(e){p=!0,v=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw v}}return n.ops=[],[4,new Promise((k=(0,r._)(function(e){return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,t.writeFile(d,c.Z.serialize(s)).finally(function(){n.requests.forEach(function(e){return e()}),n.requests=[]})];case 1:return r.sent(),e(),[2]}})}),function(e){return k.apply(this,arguments)}))];case 2:return[2,_.sent()]}})})).apply(this,arguments)}return{readSecret:function(e){return p.apply(this,arguments)},readSecrets:h,writeSecret:function(e){return y.apply(this,arguments)},writeSecrets:b,removeSecret:function(e){return E.apply(this,arguments)},removeSecrets:S,watchSecrets:function(e){var n,r=t.watchDir(s.Ql,{onChange:function(r){var i=r.find(function(e){return e.filename===d});i&&!n&&(n=t.watchFile(d,{onChange:function(t){e.onChange(Object.entries(c.Z.parse(t.toString())).map(function(e){var t=(0,a._)(e,2);return{key:t[0],value:t[1]}}))},onError:function(t){var r;n=void 0,null===(r=e.onError)||void 0===r||r.call(e,t)}})),!i&&n&&(n(),n=void 0)},onError:function(){n&&(n(),n=void 0)}});return function(){n&&(n(),n=void 0),r()}}}}},12130:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(73164),i=n(40728);function o(e,t,n,o){if(!(null==e?void 0:e.runs))return[];var a=[];if(t=t.slice(),n){var l=t.indexOf(n);-1!==l&&(t.splice(l,1),t.splice(0,0,n))}if(o){var c=t.indexOf(o);-1!==c&&t.splice(c,1),t.splice(0,0,o)}var s=!0,f=!1,d=void 0;try{for(var p,h=t[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=p.value;if(v.match(/(\.[a-z0-9]+)$/)){var g=!0,m=!1,y=void 0;try{for(var b,w=e.runs[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=b.value;if(E.fileParam||E.optionalFileParam){var S=(0,r.rF)(E.fileTypeAttrs);null===S&&E.language&&(S=r.$R.from(E.language)),S&&(0,i.JW)(v,S)&&a.push({runner:E,filePath:v})}}}catch(e){m=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}}}}catch(e){f=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(f)throw d}}var x=!0,D=!1,_=void 0;try{for(var k,Z=e.runs[Symbol.iterator]();!(x=(k=Z.next()).done);x=!0){var R=k.value;R.fileParam||a.push({runner:R})}}catch(e){D=!0,_=e}finally{try{x||null==Z.return||Z.return()}finally{if(D)throw _}}return function(e){e.sort(function(e,t){var n=u(e),r=u(t);return n!==r?n-r:e.runner.interpreter===t.runner.interpreter?0:e.runner.interpreter?-1:1})}(a),a}function u(e){var t,n,r;return(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith(".replit/"))?0:(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}},72720:function(e,t){t.Z={brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"},brands:{github:"#181717",twitter:"#00A8FF",discord:"#7289DA",facebook:"#3B5998",linkedin:"#0077B5"}}},44161:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(47611),i=n.n(r),o=n(66005),u=n(49500);function a(e){var t=e.throwBsod,n=e.tags,r=e.extras,a=e.origin,l=e.onNonBsodUnrecoverableError,c=void 0===l?function(){}:l;return function(e){var l=(0,o.ZP)(e);if(l===o.Gs.NotFound){i().push("/home","~/");return}if(l===o.Gs.LanguageTokenDenied){window.location.reload();return}if(l){c(l);return}u.error(e),t({error:e,tags:n,extras:r,origin:a})}}},63009:function(e,t,n){n.d(t,{I7:function(){return m},Id:function(){return g},ic:function(){return w},jT:function(){return v},qg:function(){return b},uV:function(){return y}});var r=n(41733),i=n(30509),o=n(1323),u=n(64461),a=n(90234),l=n(71999),c=n(28999),s=n(50959),f=(0,a.cn)(null),d=(0,a.cn)(null,function(e,t,n){var u=n.error,a=n.tags,l=n.extras,c=n.origin,s=(0,i._)((0,r._)({},a),{origin:c});"statusCode"in u?s.statusCode=u.statusCode:"status"in u&&(s.statusCode=u.status),e(f)||t(f,{eventId:(0,o.I)(u,{tags:s,extras:l}),error:u,sentry:{tags:s,extras:l},origin:c})}),p=(0,a.cn)(null,function(e,t){t(f,null)}),h=(0,a.cn)(new Map);function v(){return(0,c.lV)((0,s.useCallback)(function(e,t,n){var r=n.filePath;return e(h).get(r)},[]))}function g(){return(0,c.lV)((0,s.useCallback)(function(e,t,n){var r=n.filePath,i=n.version;t(h,function(e){return(0,u.Uy)(e,function(e){e.set(r,i)})})},[]))}function m(){return(0,c.lV)((0,s.useCallback)(function(e,t,n){var r=n.filePath;t(h,function(e){return(0,u.Uy)(e,function(e){e.delete(r)})})},[]))}function y(){return(0,l.b9)(d)}function b(){return[(0,l.Dv)(f),y()]}function w(){return(0,l.b9)(p)}},72676:function(e,t,n){n.d(t,{s:function(){return ru},p:function(){return ro}});var r,i,o,u,a,l,c,s,f,d=n(42516),p=n(63257),h=n(74985),v=n(7444),g=n(93049),m=n(31950),y=n(56596),b=n(93918),w=n(29287),E=n(50959),S=n(30084),x=n(41733),D=n(30509),_=n(66626),k=n(57468),Z=n(75296),R=n(50451),T=n(39028),P=n(88936),I=n(19659),C=n(93496),O=n(74833),N=n(13900),A=n(20573),F=n(22487),G=n(27592),L={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;t.styles.popper.width="".concat(t.rects.reference.width,"px")},effect:function(e){var t=e.state;t.elements.reference instanceof HTMLElement&&(t.elements.popper.style.width="".concat(t.elements.reference.offsetWidth,"px"))}},B=n(8279),U=n(1415),z=n(38080),M=n(34335),j=n(69119),H=n(64461),W=n(15859),V=n(27387),X=n(96583),J=n(90234),K=n(39756),q=n(43778),Q=n(37491),Y=n(97778),$="No files",ee="Loading...";function et(e,t){var n=t.fromIndex;if("next"===t.dir){for(var r=n+1;r<e.length;r++){var i=e[r];if(i&&("dir"===i.type||"file"===i.type))return i}return null}for(var o=n-1;o>=0;o--){var u=e[o];if(u&&("dir"===u.type||"file"===u.type))return u}return null}function en(e,t){return q.nh.includes(t.filename)&&!q.nh.includes(e.filename)?-1:!q.nh.includes(t.filename)&&q.nh.includes(e.filename)?1:q.uP.includes(t.filename)&&!q.uP.includes(e.filename)?-1:!q.uP.includes(t.filename)&&q.uP.includes(e.filename)?1:t.type===S.Tv.Directory&&e.type!==S.Tv.Directory?1:e.type===S.Tv.Directory&&t.type!==S.Tv.Directory?-1:(0,I.IV)(e.filename,t.filename)}function er(e){var t=e.row,n=e.baseDepth;return"dir"===t.type||"file"===t.type||"uploadFile"===t.type?t.path===K.Ql?0:(0,I.U$)(t.path)-1-n:t.dir===K.Ql?0:(0,I.U$)(t.dir)-n}var ei=function(e,t){return e===K.Ql?t:e+"/"+t},eo=function(e,t){return e===K.Ql&&1===(0,I.U$)(t)||(0,Y.pC)(e,t)},eu=(0,J.cn)(new Map),ea=(0,J.cn)({width:0,height:0}),el=(0,J.cn)(0),ec=(0,J.cn)(null),es=(0,J.cn)(new Map),ef=(0,J.cn)(function(e){var t;return null!==(t=e(ew).root)&&void 0!==t?t:K.Ql}),ed=(0,J.cn)(null),ep=(0,J.cn)(null),eh=(0,J.cn)(void 0),ev=(0,J.cn)(null,function(e,t,n){e(eS)||t(ep,n)}),eg=(0,J.cn)(function(e){var t=e(ew).root,n=void 0===t?K.Ql:t;return n===K.Ql?0:(0,I.U$)(n)}),em=(0,J.cn)(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0,i=!0,o=!1,u=void 0;try{for(var a,l=(0,p._)(e.values()).sort(function(e,t){return e.index-t.index})[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value,s={height:c.height,y:c.y,cols:[]};if(n.push(s),0!==c.depth){var f=c.depth+t;f>r&&(r=f);for(var d="divider"===c.row.type||"error"===c.row.type||"create"===c.row.type||"emptyDir"===c.row.type?c.row.dir:(0,I.Il)(c.row.path),h=d.split("/"),v=0;v<(0,I.U$)(d);v++){var g=h.slice(0,Number(v+1)).join("/");s.cols.push(g)}}}}catch(e){o=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}for(var m=new Map,y=t;y<r;y++){var b=[];m.set(y,b);var w=!0,E=!1,S=void 0;try{for(var x,D=n[Symbol.iterator]();!(w=(x=D.next()).done);w=!0){var k=x.value,Z=k.cols[y],R=k.y;if(Z){var T=b[b.length-1];T&&T.y+T.height===R?T.height+=k.height:b.push({y:R,height:k.height,dir:Z,depth:y-t})}}}catch(e){E=!0,S=e}finally{try{w||null==D.return||D.return()}finally{if(E)throw S}}}var P=[],C=!0,O=!1,N=void 0;try{for(var A,F=m[Symbol.iterator]();!(C=(A=F.next()).done);C=!0){var G=(0,_._)(A.value,2),L=(G[0],G[1]);P.push.apply(P,(0,p._)(L))}}catch(e){O=!0,N=e}finally{try{C||null==F.return||F.return()}finally{if(O)throw N}}return P}(e(es),e(eg))}),ey=(0,J.cn)(!1),eb=(0,J.cn)(null,function(e,t,n){var r=new Map,i=e(ez),o=e(eg),u=!0,a=!1,l=void 0;try{for(var c,s=n.rows[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){var f=c.value,d=f.key.toString(),p=i[f.index];if(p){var h=Math.max(0,er({row:p,baseDepth:o}));r.set(f.index,{y:f.start+8,height:f.size,index:f.index,key:d,depth:h,row:p})}}}catch(e){a=!0,l=e}finally{try{u||null==s.return||s.return()}finally{if(a)throw l}}t(es,r),t(el,n.scrollHeight)}),ew=(0,J.cn)({}),eE=(0,W.kv)(ew,function(e){var t;return null!==(t=e.onContextMenu)&&void 0!==t?t:null}),eS=(0,J.cn)(function(e){return!!e(ew).readOnly||!e(ey)}),ex=(0,J.cn)(function(e){var t;return null!==(t=e(ew).fontSize)&&void 0!==t?t:14}),eD=function(e,t){if("divider"===t)switch(e){case 10:return 28;case 12:case 13:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:case 13:return 24;case 14:return 32;case 18:return 38;default:return 40}},e_=(0,J.cn)(function(e){return eD(e(ex),"file")}),ek=function(e){switch(e){case 10:case 12:return 12;case 13:case 14:return 16;case 18:return 20;default:return 24}},eZ=(0,J.cn)(function(e){return ek(e(ex))}),eR=(0,J.cn)(function(e){return 14>e(ex)?4:8}),eT=(0,J.cn)(function(e){return 14>=e(ex)?4:8}),eP=(0,J.cn)(function(e){return 13===e(ex)?6:16>e(ex)?4:8}),eI=function(e){switch(e){case 10:return 10;case 12:case 13:case 14:return 12;case 18:return 14;default:return 18}},eC=function(e){switch(e){case 10:return 12;case 12:case 13:return 16;case 14:return 24;case 18:return 32;default:return 40}},eO=(0,J.cn)(function(e){return eC(e(ex))}),eN=(0,J.cn)(function(e){return eI(e(ex))}),eA=function(e){switch(e){case 10:case 12:case 13:return 10;case 14:case 18:return 16;default:return 20}},eF=(0,J.cn)(function(e){return eA(e(ex))}),eG=(0,J.cn)(new Map);function eL(e){var t=e.filename;return q.nh.includes(t)?"Config files":q.uP.includes(t)?"Packager files":null}var eB=(0,J.cn)([]),eU=(0,J.cn)([]),ez=(0,J.cn)(function(e){var t,n,r=e(ew),i=r.filter,o=r.alwaysShowCreateRow,u=r.root,a=void 0===u?K.Ql:u,l=r.sort,c=r.readOnly;return function(e){var t=e.root,n=void 0===t?K.Ql:t,r=e.dirInfo,i=e.filter,o=e.sort,u=e.getSection,a=e.readOnly,l=e.pendingUploads,c=e.pendingMoves,s=e.pathBeingRenamed,f=e.alwaysShowCreateRow,d=[],h=(null==l?void 0:l.length)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value,l=(0,I.Il)(a.targetPath)||K.Ql,c=t.get(l),s={filename:(0,I.UO)(a.targetPath),progress:a.progress};c?c.push(s):t.set(l,[s])}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}return t}(l):null,v=new Map,g=new Map;if(null==c?void 0:c.length){var m=!0,y=!1,b=void 0;try{for(var w,E=c[Symbol.iterator]();!(m=(w=E.next()).done);m=!0){var x=w.value,D=x.from,k=x.to;v.set(D.path,D.type),g.set(k,D.type)}}catch(e){y=!0,b=e}finally{try{m||null==E.return||E.return()}finally{if(y)throw b}}}return!function e(t){var l=r.get(t);if(!(!l||v.has(t))&&l.expanded){if(t===n&&l.loading&&!l.children){d.push({type:"dir",path:t});return}if(l.error){d.push({type:"error",message:l.error.message,dir:t});return}var c=l.children?(0,p._)(l.children):void 0;c&&v.size>0&&(c=c.filter(function(e){return!v.has(ei(t,e.filename))}));var m=!0,y=!1,b=void 0;try{for(var w,E=g[Symbol.iterator]();!(m=(w=E.next()).done);m=!0)!function(){var e=(0,_._)(w.value,2),n=e[0],r=e[1];if(eo(t,n)){var i=(0,I.UO)(n);(null==c||!c.some(function(e){return e.filename===i}))&&(c||(c=[]),c.push({filename:i,type:r}))}}()}catch(e){y=!0,b=e}finally{try{m||null==E.return||E.return()}finally{if(y)throw b}}var x=null==h?void 0:h.get(t);if(x){c||(c=[]);var D=!0,k=!1,Z=void 0;try{for(var R,T=x[Symbol.iterator]();!(D=(R=T.next()).done);D=!0){var P=R.value,C=P.filename,O=P.progress;c.push({filename:C,type:S.Tv.File,progress:O})}}catch(e){k=!0,Z=e}finally{try{D||null==T.return||T.return()}finally{if(k)throw Z}}}if(c){if(!l.create&&!x&&c&&0===c.length){d.push({type:a?"emptyDir":"create",dir:t});return}var N=function(e,t){var n=t.getSection,r=[],i=new Map,o=!0,u=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=n(s),d=s.progress?{type:"upload",progress:s.progress,filename:s.filename}:{type:s.type===S.Tv.File?"file":"dir",filename:s.filename};if(!f){r.push(d);continue}var p=i.get(f);if(p){p.push(d);continue}i.set(f,[d])}}catch(e){u=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}var h=!0,v=!1,g=void 0;try{for(var m,y=i[Symbol.iterator]();!(h=(m=y.next()).done);h=!0){var b=(0,_._)(m.value,2),w=b[0],E=b[1];r.push({type:"divider",label:w}),(0,Q.fN)(r,E)}}catch(e){v=!0,g=e}finally{try{h||null==y.return||y.return()}finally{if(v)throw g}}return r}(c.filter(i).sort(o),{getSection:t===K.Ql?u:function(){return null}}),A=-1,F=!0,G=!1,L=void 0;try{for(var B,U=N[Symbol.iterator]();!(F=(B=U.next()).done);F=!0)!function(){var n=B.value;if("error"===n.type||"emptyDir"===n.type)throw Error("Expected dir, file, or divider row");if("divider"===n.type)return -1===A&&(A=d.length),d.push({type:"divider",dir:t,label:n.label});var i=ei(t,n.filename);if("dir"===n.type){var o={type:"dir",path:i};s===i&&(o.rename=!0),g.has(i)&&(o.pending=!0);var u=null==h?void 0:h.get(i);if(u&&(o.uploadProgress=u.map(function(e){return e.progress})),d.push(o),!r.get(i))return;e(i)}else if("upload"===n.type)d.push({type:"uploadFile",path:i,progress:n.progress});else if(!x||!x.some(function(e){return e.filename===n.filename})){var a={type:"file",path:i};s===i&&(a.rename=!0),g.has(i)&&(a.pending=!0),d.push(a)}}()}catch(e){G=!0,L=e}finally{try{F||null==U.return||U.return()}finally{if(G)throw L}}if(l.create||f){var z={type:"create",dir:t,fileType:l.create?l.create:void 0};-1===A?d.push(z):d.splice(A,0,z)}}}}(n),d}({root:a,dirInfo:e(eG),filter:i,sort:void 0===l?en:l,readOnly:void 0!==c&&c,getSection:eL,pendingUploads:e(eB),pathBeingRenamed:null!==(t=e(ep))&&void 0!==t?t:void 0,pendingMoves:null!==(n=e(eU))&&void 0!==n?n:void 0,alwaysShowCreateRow:o})}),eM=(0,J.cn)(function(e){var t=e(ec);if(!t)return null;var n=e(ez).findIndex(function(e){return("file"===e.type||"dir"===e.type)&&e.path===t});return -1!==n?n:null}),ej=(0,J.cn)(null,function(e,t,n){var r,i=e(eM),o=e(ec);if((null===(r=document.activeElement)||void 0===r?void 0:r.tagName)!=="INPUT"&&null!==i&&null!==o){var u=e(ez);switch(n.key){case"ArrowDown":n.preventDefault();var a=et(u,{dir:"next",fromIndex:i});((null==a?void 0:a.type)==="dir"||(null==a?void 0:a.type)==="file")&&t(ec,a.path);return;case"ArrowUp":n.preventDefault();var l=et(u,{dir:"previous",fromIndex:i});((null==l?void 0:l.type)==="dir"||(null==l?void 0:l.type)==="file")&&t(ec,l.path);return;case"ArrowLeft":case"ArrowRight":n.preventDefault();var c=e(eG).get(o);if(!c)return;"ArrowLeft"===n.key&&c.expanded?t(eV,o):"ArrowRight"!==n.key||c.expanded||t(eJ,o);return;case"Enter":case" ":if("Enter"===n.key&&!e(eS))return;if(e(eG).has(o)){t(eK,o);return}e(ew).onFileSelect({event:n,path:o,type:"keydown"});return}}}),eH=(0,J.cn)(null,function(e,t,n){var r;n.path===(null!==(r=e(ew).root)&&void 0!==r?r:K.Ql)&&t(ey,!0),t(eG,function(e){return(0,H.Uy)(e,function(e){var t=n.path===K.Ql?null:n.path+"/",r=!0,i=!1,o=void 0;try{for(var u,a=n.children[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l,c=u.value,s=t?t+c.filename:c.filename,f=e.get(s);if(c.type!==S.Tv.Directory){f&&(null===(l=f.disposeWatcher)||void 0===l||l.call(f),e.delete(s));continue}f||e.set(s,{expanded:!1})}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}var d=e.get(n.path);d&&(d.children=n.children,d.loading=!1,d.error=void 0)})})}),eW=(0,J.cn)(null,function(e,t,n){var r;n.path===(null!==(r=e(ew).root)&&void 0!==r?r:K.Ql)&&t(ey,!0),t(eG,function(e){return(0,H.Uy)(e,function(e){var t,r=e.get(n.path);r&&(r.loading=!1,r.error=n.error,null===(t=r.disposeWatcher)||void 0===t||t.call(r),r.disposeWatcher=null)})})}),eV=(0,J.cn)(null,function(e,t,n){var r=Array.isArray(n)?n:[n];t(eG,function(e){return(0,H.Uy)(e,function(e){var t=!0,n=!1,i=void 0;try{for(var o,u=r[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var a=o.value,l=e.get(a);l&&(l.expanded=!1,l.loading=!1,l.disposeWatcher&&(l.disposeWatcher(),l.disposeWatcher=null))}}catch(e){n=!0,i=e}finally{try{t||null==u.return||u.return()}finally{if(n)throw i}}})})}),eX=(0,J.cn)(null,function(e,t,n){t(eG,function(e){return(0,H.Uy)(e,function(e){var t,r=e.get(n);r&&(null===(t=r.disposeWatcher)||void 0===t||t.call(r),e.delete(n))})})}),eJ=(0,J.cn)(null,function(e,t,n){var r=Array.isArray(n)?n:[n],i=e(ew).fs;t(eG,function(e){return(0,H.Uy)(e,function(e){var n=!0,o=!1,u=void 0;try{for(var a,l=r[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)!function(){var n,r=a.value,o=null!==(n=e.get(r))&&void 0!==n?n:{expanded:!0};e.has(r)?o.expanded=!0:e.set(r,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(r,{onError:function(e){return t(eW,{path:r,error:e})},onChange:function(e){return t(eH,{path:r,children:e})},onMoveOrDelete:function(){return t(eX,r)}})}()}catch(e){o=!0,u=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw u}}})})}),eK=(0,J.cn)(null,function(e,t,n){var r=e(eG).get(n);if(!r){t(eG,function(e){return(0,H.Uy)(e,function(e){e.set(n,{expanded:!1})})}),t(eJ,n);return}t(r.expanded?eV:eJ,n)}),eq=(0,J.cn)(function(e){return e(ew).manageWidth?e(ey)?function(e){var t=e.rows,n=e.baseDepth,r=[],i=new Map,o=!0,u=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=function(e){var t=e.row,n=er({row:t,baseDepth:e.baseDepth});switch(t.type){case"file":case"dir":case"uploadFile":return{text:(0,I.UO)(t.path),depth:n};case"error":return{text:t.message,depth:n};case"divider":return{text:t.label,depth:n};case"create":case"emptyDir":return{text:$,depth:n}}}({row:s,baseDepth:n}),d=f.depth,p=f.text,h=i.get(d);if(!h){i.set(d,new Map([[s.type,p]]));continue}var v=h.get(s.type);v&&(null==v?void 0:v.length)>p.length||h.set(s.type,p)}}catch(e){u=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(u)throw a}}var g=!0,m=!1,y=void 0;try{for(var b,w=i[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var E=(0,_._)(b.value,2),S=E[0],x=E[1],D=!0,k=!1,Z=void 0;try{for(var R,T=x[Symbol.iterator]();!(D=(R=T.next()).done);D=!0){var P=(0,_._)(R.value,2),C=P[0],O=P[1];r.push({depth:S,type:C,text:O})}}catch(e){k=!0,Z=e}finally{try{D||null==T.return||T.return()}finally{if(k)throw Z}}}}catch(e){m=!0,y=e}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}return r}({rows:e(ez),baseDepth:e(eg)}):[{type:"dir",text:ee,depth:1}]:null}),eQ=(0,J.cn)(null,function(e,t,n){var r=e(ew).onCreateStart;if(r){r({parentPath:n.parentPath,fileType:n.fileType});return}t(eJ,n.parentPath),t(eG,function(e){return(0,H.Uy)(e,function(e){var t=e.get(n.parentPath);t&&(t.create=n.fileType)})}),t(ec,null)}),eY=(0,J.cn)(null,function(e,t,n){t(eG,function(e){return(0,H.Uy)(e,function(e){var t=e.get(n);t&&(t.create=void 0)})})}),e$=(0,J.cn)(null,function(e,t,n){var r={path:n.path,type:n.fileType};t(ec,r.path),t(e4,{node:r}),t(eG,function(e){return(0,H.Uy)(e,function(e){var t=e.get(n.parentPath);t&&(t.create=void 0)})}),r.type===S.Tv.Directory&&t(eJ,r.path)}),e0=(0,J.cn)(new Map),e1=(0,J.cn)(null),e2=(0,J.cn)(!0),e4=(0,J.cn)(null,function(e,t,n){var r=n.node,i=n.mode,o=e(ez),u=e(e1);t(e2,!i),t(e0,function(e){return(0,H.Uy)(e,function(e){!function(e,t){var n=t.node,r=t.rows,i=t.mode,o=t.anchor;if(!i){e.clear(),e.set(n.path,n.type);return}if("multi"===i&&e.has(n.path)){e.delete(n.path);return}if("multi"===i){e.set(n.path,n.type);return}var u=n.type===S.Tv.Directory?"dir":"file",a=r.findIndex(function(e){return e.type===u&&e.path===n.path});if(-1!==a){var l=(null==o?void 0:o.type)===S.Tv.Directory?"dir":"file",c=o?r.findIndex(function(e){return e.type===l&&e.path===o.path}):-1;if(-1!==c){var s=c<a?r.slice(c,a+1):r.slice(a,c+1),f=!0,d=!1,p=void 0;try{for(var h,v=r[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var g=h.value;("file"===g.type||"dir"===g.type)&&(s.includes(g)?e.set(g.path,"file"===g.type?S.Tv.File:S.Tv.Directory):e.delete(g.path))}}catch(e){d=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw p}}}}}(e,{node:r,rows:o,mode:i,anchor:u})})});var a=e(e0);if(!(a.size>1)){var l=!0,c=!1,s=void 0;try{for(var f,d=a[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var p=(0,_._)(f.value,2),h=p[0],v=p[1];t(e1,{path:h,type:v})}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}),e3=(0,J.cn)(null,function(e,t){t(e0,new Map),t(e2,!0),t(e1,null)}),e5=(0,J.cn)(null,(r=(0,V._)(function(e,t,n){var r,i,o;return(0,X.Jh)(this,function(u){switch(u.label){case 0:var a;return r=e(ew).fs,[4,Promise.all(n.map((a=(0,V._)(function(e){var t;return(0,X.Jh)(this,function(n){switch(n.label){case 0:return[4,r.readDir(e)];case 1:return[2,(t=n.sent()).error?t:{path:e,children:t.children,error:null}]}})}),function(e){return a.apply(this,arguments)})))];case 1:if((o=(i=u.sent()).filter(function(e){return null!==e.error})).length)return[2,{errors:o}];return t(eG,function(e){return(0,H.Uy)(e,function(e){var t=!0,n=!1,r=void 0;try{for(var o,u=i[Symbol.iterator]();!(t=(o=u.next()).done);t=!0){var a=o.value;if(a.error)throw Error("Unexpected error");var l=e.get(a.path);if(!l){e.set(a.path,{loading:!1,expanded:!0,children:a.children,error:void 0});continue}l.loading=!1,l.expanded=!0,l.children=a.children,l.error=void 0}}catch(e){n=!0,r=e}finally{try{t||null==u.return||u.return()}finally{if(n)throw r}}})}),[2,{errors:null}]}})}),function(e,t,n){return r.apply(this,arguments)})),e6=(0,J.cn)(null,(i=(0,V._)(function(e,t,n){var r,i,o,u,a,l,c,s,f;return(0,X.Jh)(this,function(d){switch(d.label){case 0:r=e(eG),i=[],o=!0,u=!1,a=void 0;try{var h;for(l=((h=n.path.split("/")).pop(),[K.Ql].concat((0,p._)(h.map(function(e,t){return h.slice(0,t+1).join("/")}))))[Symbol.iterator]();!(o=(c=l.next()).done);o=!0)s=c.value,null!=(f=r.get(s))&&f.expanded||i.push(s)}catch(e){u=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(u)throw a}}if(!i.length)return[3,2];return[4,t(e5,i)];case 1:d.sent(),d.label=2;case 2:return t(e4,{node:n}),[2]}})}),function(e,t,n){return i.apply(this,arguments)})),e9=(0,J.cn)(null),e8=(0,J.cn)(null,function(e,t,n){var r=e(e9);if(r)for(var i=e(ez),o=0;o<i.length;o++){var u=i[o];if(("file"===u.type||"dir"===u.type)&&u.path===n&&r.getVirtualItems()[o]){r.scrollToIndex(o);break}}}),e7=n(66368),te=n(71999),tt=n(28999),tn=(0,E.createContext)(null);function tr(e){return(0,h.tZ)(tn.Provider,{value:e.store,children:e.children})}function ti(){var e=(0,E.useContext)(tn);if(!e)throw Error("Expected store in context");return e}function to(e){return(0,te.Dv)(e,{store:ti()})}function tu(e){return(0,e7.b)(e,ti())}var ta=function(e){return(0,te.b9)(e,{store:ti()})};function tl(e){return(0,tt.lV)((0,E.useCallback)(function(t){return t(e)},[e]),{store:ti()})}var tc=(0,n(91608).$)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay"]),ts=tc.cssVars,tf=tc.styleTokens,td={paddingLeft:tf.horizontalPadding,paddingRight:tf.horizontalPadding},tp={"&& svg":{minWidth:tf.iconSize,minHeight:tf.iconSize,width:tf.iconSize,height:tf.iconSize}},th=[w.l0.truncate,{fontSize:tf.fontSize}],tv=(0,W.kv)(ew,function(e){return e.autocomplete}),tg=(0,b.X)({icon:[tp,{marginRight:tf.iconTextGap}],item:[td,w.l0.flex.row,w.l0.align.center,C.gU.listItem,{height:tf.rowHeight}],text:[th,w.l0.flex.growAndShrink(1)]});function tm(e){var t=e.id,n=e.items,r=e.activeIndex,i=e.onSuggestion,o=e.fileType,u=e.innerRef;return(0,h.tZ)(y.G,{tag:"ul",id:t,"aria-label":"Suggestions",innerRef:u,children:n.map(function(e,t){var n=t===r;return(0,h.BX)(y.G,{id:e.value,tag:"li",role:"option","aria-selected":n,style:{backgroundColor:n?C.vb.interactiveBackground:void 0,color:n?w.TV.foregroundDefault:w.TV.foregroundDimmer},onClick:function(){return i(e.value)},css:tg.item,children:[(0,h.tZ)(y.G,{css:tg.icon,children:o===S.Tv.Directory?(0,h.tZ)(R.Z,{}):(0,h.tZ)(k.Z,{path:e.value})}),(0,h.tZ)(j.x,{css:tg.text,text:e.value,highlight:e.highlight,dimmed:!n})]},e.value)})})}var ty=n(47357),tb=n(58474),tw=n(50199),tE=n(95571),tS=n(86533),tx=n(59510),tD=n.n(tx),t_=n(41500);function tk(e){var t=e.fileName,n=e.parentPath,r=n===K.Ql?"":n+"/",i=r+t,o=i.split("/");return{pathPrefix:r,newFilePath:i,segments:o}}function tZ(e){return tR.apply(this,arguments)}function tR(){return(tR=(0,V._)(function(e){var t,n,r,i,o,u,a,l,c,s,f,d,p,h,v,g,m,y,b;return(0,X.Jh)(this,function(w){switch(w.label){case 0:if(t=e.fileName,n=e.parentPath,r=e.fs,t.startsWith("/"))return[2,"File names cannot include forward slashes"];o=(i=tk({fileName:t,parentPath:n})).pathPrefix,u=i.newFilePath,a=i.segments,l=!0,c=!1,s=void 0,w.label=1;case 1:w.trys.push([1,7,8,9]),f=Object.entries(a)[Symbol.iterator](),w.label=2;case 2:if(l=(d=f.next()).done)return[3,6];if(h=(p=(0,_._)(d.value,2))[0],v=p[1],g=Number(h),m=[],g!==a.length-1)return[3,4];return[4,r.stat(u)];case 3:w.sent().exists&&m.push((0,I.UO)(u)),w.label=4;case 4:if(!(y=(0,tS.z)({fileName:v,siblingNames:m,parentPath:o+a.slice(0,g).join("/")})))return[3,5];return[2,y];case 5:return l=!0,[3,2];case 6:return[3,9];case 7:return b=w.sent(),c=!0,s=b,[3,9];case 8:try{l||null==f.return||f.return()}finally{if(c)throw s}return[7];case 9:return[2,null]}})})).apply(this,arguments)}function tT(e){var t=tk({fileName:e.fileName,parentPath:e.parentPath}),n=t.pathPrefix,r=t.segments,i=!0,o=!1,u=void 0;try{for(var a,l=Object.entries(r)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,_._)(a.value,2),s=c[0],f=c[1],d=Number(s),p=(0,tS.z)({fileName:f,siblingNames:[],parentPath:n+r.slice(0,d).join("/")});if(p)return p}}catch(e){o=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}return null}function tP(e,t){return e.shiftKey?"bulk":"altKey"===t&&e.altKey||"cmdOrCtrlKey"===t&&(0,tE.jh)(e)?"multi":void 0}var tI=(0,J.cn)(null,function(e,t,n){var r=n.event,i=n.path;t(ec,i);var o=e(ew).multiselectModifierKey;t(e4,{node:{path:i,type:S.Tv.Directory},mode:o?tP(r,o):void 0}),t(ec,i),r.shiftKey||r.altKey||(0,tE.jh)(r)||t(eK,i)});function tC(){return{fontSize:tu(ex),fontSizeSmall:tu(eN),iconSize:tu(eZ),scrollHeight:tu(el),horizontalPadding:tu(eR),borderRadius:tu(eT),gutterWidth:tu(eF),minHeight:tu(e_),iconTextGap:tu(eP)}}function tO(e){return to((0,tw.Z)(function(){return(0,W.kv)(ec,function(t){return t===e?0:-1})},[e]))}function tN(e){return to((0,tw.Z)(function(){return(0,W.kv)(es,function(t){var n,r=t.get(e);return r?{style:(n={},(0,d._)(n,ts.rowHeight,r.height+"px"),(0,d._)(n,ts.rowY,r.y+"px"),(0,d._)(n,ts.rowLeftIndent,"calc(".concat(r.depth," * ").concat(tf.gutterWidth,")")),n),depth:r.depth}:void 0},tD())},[e]))}function tA(e){var t=e.index,n=e.path,r=(0,E.useRef)(null),i=tu(ec);return(0,E.useEffect)(function(){var e=function(e){var t;null===(t=r.current)||void 0===t||t.setAttribute("tabIndex",e.toString())},o=function(r){if(!r){e(0===t?0:-1);return}e(r===n?0:-1)};return o(i.current),i.subscribe(o)},[i,n,t]),(0,E.useEffect)(function(){var e=function(e){null!==t&&clearTimeout(t),e===n&&document.activeElement!==r.current&&(t=setTimeout(function(){var e;null===(e=r.current)||void 0===e||e.focus()},50))},t=null;e(i.current);var o=i.subscribe(e);return function(){null!==t&&clearTimeout(t),o()}},[i,n]),[r,ta(ec)]}var tF=[tf.horizontalPadding,tf.iconSize,tf.iconTextGap].join(" + "),tG=[C.gU.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(tF,")"),paddingRight:tf.horizontalPadding,fontSize:tf.fontSize}],tL=(0,b.X)({root:[w.l0.flex.row,td,{padding:tf.horizontalPadding}],icon:[tp,w.l0.color.accentNegativeDefault,{marginRight:tf.iconTextGap}],text:[{fontSize:tf.fontSize},w.l0.color.foregroundDimmer,w.l0.flex.growAndShrink(1)]});function tB(e){return(0,h.BX)(y.G,{css:tL.root,children:[(0,h.tZ)(y.G,{css:tL.icon,children:(0,h.tZ)(A.Z,{})}),(0,h.tZ)(y.G,{css:tL.text,children:e.message})]})}var tU=(0,b.X)({root:[w.l0.position.relative,w.l0.flex.growAndShrink(1),{height:"100%"}],icon:[tp,w.l0.position.absolute,w.l0.left(tf.horizontalPadding),w.l0.top("50%"),{transform:"translateY(-50%)"}],input:tG,inputLoading:[tG,B.p.backgroundPulse()],menu:[w.l0.overflow("hidden"),{borderRadius:tf.borderRadius,border:"1px solid",borderColor:w.TV.outlineDefault}],label:[w.l0.visuallyHidden]});function tz(e){var t,n,r,i,o,u,a,l,c,s,f,p=(0,E.useId)(),b=(0,E.useId)(),w=(t=(0,E.useRef)(null),n=tC(),(0,m.j)(t,n.fontSize,function(e){return(0,d._)({},ts.fontSize,e+"px")}),(0,m.j)(t,n.iconTextGap,function(e){return(0,d._)({},ts.iconTextGap,e+"px")}),(0,m.j)(t,n.borderRadius,function(e){return(0,d._)({},ts.borderRadius,e+"px")}),(0,m.j)(t,n.horizontalPadding,function(e){return(0,d._)({},ts.horizontalPadding,e+"px")}),(0,m.j)(t,n.iconSize,function(e){return(0,d._)({},ts.iconSize,e+"px")}),(0,m.j)(t,n.fontSize,function(e){return(0,d._)({},ts.rowHeight,eD(e,"file")+"px")}),(0,m.j)(t,n.iconTextGap,function(e){return(0,d._)({},ts.iconTextGap,e+"px")}),i=(r=(0,_._)((0,E.useState)(null),2))[0],o=r[1],a=(u=(0,_._)((0,E.useState)(null),2))[0],l=u[1],s=(c=(0,M.D)(i,a,{modifiers:[{name:"offset",options:{offset:[0,4]}},L],placement:"bottom-start"})).styles,f=c.attributes,{menuRef:(0,g.l)(t,l),menuAnchorRef:o,styles:s.popper,attributes:f.popper}),Z=function(e){var t=e.onSuggestion,n=e.siblings,r=e.value,i=to(tv),o=(0,_._)((0,E.useState)({items:[],activeIndex:null}),2),u=o[0],a=o[1],l=(0,v.Z)(n),c=(0,v.Z)(r),s=(0,_._)((0,E.useTransition)(),2)[1],f=i?function(e){s(function(){var t=i(e);a(function(e){return(0,H.Uy)(e,function(e){e.items=t.filter(function(e){return e.value!==c.current&&!l.current.some(function(t){return t.filename===e.value})})})})})}:null;function d(){a({items:[],activeIndex:null})}return{items:u.items.length?u.items:null,activeIndex:u.activeIndex,query:f,onKeyDown:function(e){if("Enter"===e.key){var n=null!==u.activeIndex?u.items[u.activeIndex]:null;if(!n)return;return e.preventDefault(),t(n.value),d(),!0}return"ArrowDown"===e.key?(e.preventDefault(),a(function(e){return(0,H.Uy)(e,function(e){if(null===e.activeIndex||e.activeIndex>e.items.length-1){e.activeIndex=0;return}e.activeIndex++})}),!0):"ArrowUp"===e.key?(e.preventDefault(),a(function(e){return(0,H.Uy)(e,function(e){if(null===e.activeIndex){e.activeIndex=e.items.length-1;return}if(0===e.activeIndex){e.activeIndex=null;return}e.activeIndex--})}),!0):void 0},clear:d}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),T=tl(e9),P=(0,_._)((0,E.useState)(!0),2),I=P[0],C=P[1],O=(0,E.useRef)(null);(0,E.useEffect)(function(){if(O.current){var e,t=null===(e=T())||void 0===e?void 0:e.scrollElement;if(t)return(0,G.j)(O.current,function(){return C(!0),function(){return C(!1)}},{root:t})}},[T]);var N=I&&!!(e.error||Z.items),A=Z.items&&Z.activeIndex?Z.items[Z.activeIndex]:void 0,B=!e.error&&Z.items?Z.items:null,j=(0,E.useRef)(null),W=Z.clear,V=(0,F.Z)(function(e){var t;null!==(t=j.current)&&void 0!==t&&t.contains(e.target)||W()},[W]),X=(0,F.Z)(function(t){var n,r,i=e.inputRef.current;!i||(null===(n=j.current)||void 0===n?void 0:n.contains(t.target))||(null===(r=V.current)||void 0===r?void 0:r.contains(t.target))||e.onClickOutside({inputValue:i.value})},[]);return(0,h.BX)(h.HY,{children:[(0,h.tZ)("label",{css:tU.label,htmlFor:p,children:"file name"}),(0,h.BX)(y.G,{css:tU.root,innerRef:(0,g.l)(j,w.menuAnchorRef),children:[(0,h.tZ)(y.G,{css:tU.icon,children:e.fileType===S.Tv.Directory?(0,h.tZ)(R.Z,{}):(0,h.tZ)(k.Z,{path:e.value})}),(0,h.tZ)("input",{spellCheck:!1,"aria-controls":Z.query?b:void 0,"aria-expanded":Z.items?"true":"false","aria-activedescendant":null==A?void 0:A.value,role:Z.query?"combobox":void 0,id:p,ref:(0,g.l)(e.inputRef,O,X),css:e.loading?tU.inputLoading:tU.input,value:e.value,onChange:e.loading?void 0:function(t){var n;e.onChange(t),null===(n=Z.query)||void 0===n||n.call(Z,{input:t.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(t){Z.onKeyDown(t)||e.onKeyDown(t)}})]}),(0,h.tZ)(U.h,{children:(0,h.BX)(z.Tg,(0,D._)((0,x._)({css:tU.menu,elevated:!0,innerRef:w.menuRef,style:(0,D._)((0,x._)({},w.styles),{display:N?"block":"none"})},w.attributes),{children:[e.error?(0,h.tZ)(tB,{message:e.error}):null,B?(0,h.tZ)(tm,{id:b,innerRef:V,items:B,activeIndex:Z.activeIndex,onSuggestion:function(t){e.onSuggestion(t),W()},fileType:e.fileType}):null]}))})]})}var tM=(0,b.X)({createFilePicker:[w.l0.align.center,w.l0.rowWithGap(4),{fontSize:tf.fontSize,paddingRight:tf.horizontalPadding,paddingLeft:tf.horizontalPadding}],button:[w.l0.reset.button,w.l0.p(2),C.gU.filled,w.l0.color.foregroundDimmer,{fontSize:"inherit"}],text:[th,w.l0.color.foregroundDimmest],label:[w.l0.visuallyHidden]});function tj(e){var t,n,r,i,o,u,a,l,c,s,f,d,p,v,g,m,y,b,w,x,D,k=(t=e.dir,r=ta(eQ),i=ta(eY),o=ta(e$),a=(u=(0,_._)((0,E.useState)(""),2))[0],l=u[1],c=tl(ew),f=(s=(0,_._)((0,E.useState)(!1),2))[0],d=s[1],v=(p=(0,_._)((0,E.useState)(null),2))[0],g=p[1],m=(0,tw.Z)(function(){return(0,W.kv)(eG,function(e){return e.get(t)})},[t]),y=(0,tw.Z)(function(){return(0,W.kv)(m,function(e){var t;return null!==(t=null==e?void 0:e.create)&&void 0!==t?t:null})},[m]),b=to((0,tw.Z)(function(){return(0,W.kv)(m,function(e){var t;return null!==(t=null==e?void 0:e.children)&&void 0!==t?t:null})},[m])),w=to(y),x=(0,V._)(function(e){var n,r,i,u,a,s,f,p;return(0,X.Jh)(this,function(h){switch(h.label){case 0:if(!w)return[2];if(i=c().fs,u=null,0!==e.length)return[3,1];return u="File names cannot be empty",[3,4];case 1:if(!e.includes("/"))return[3,3];return[4,tZ({fileName:e,parentPath:t,fs:i})];case 2:return u=h.sent(),[3,4];case 3:u=(0,tS.z)({fileName:e,siblingNames:null!==(a=null==b?void 0:b.map(function(e){return e.filename}))&&void 0!==a?a:[],parentPath:t}),h.label=4;case 4:if(u)return g(u),[2];if((f=(s=t===K.Ql?null:t+"/")?s+e:e).includes("//")&&(f=f.split("/").filter(function(e){return e.length>0}).join("/")),d(!0),w!==S.Tv.Directory)return[3,6];return[4,i.createDir(f)];case 5:return p=h.sent(),[3,8];case 6:return[4,i.writeFile(f,new t_.Z(""))];case 7:p=h.sent(),h.label=8;case 8:if(p.error)return g("Something went wrong"),[2];return d(!1),l(""),o({parentPath:t,path:f,fileType:w}),null===(n=(r=c()).onCreate)||void 0===n||n.call(r,{path:f,type:w}),[2]}})}),!(D=v)&&a.includes("/")?D=tT({fileName:a,parentPath:t}):D||(D=(0,tS.z)({fileName:a,siblingNames:null!==(n=null==b?void 0:b.map(function(e){return e.filename}))&&void 0!==n?n:[],parentPath:t})),{value:a,setValue:l,fileType:w,create:function(e){return x.apply(this,arguments)},creating:f,error:D,clearError:function(){return g(null)},cancel:(0,tw.Z)(function(){return function(){return i(t)}},[t,i]),start:(0,tw.Z)(function(){return function(e){return r({parentPath:t,fileType:e})}},[t,r]),siblings:b}),Z=(0,E.useRef)(null);return((0,E.useEffect)(function(){var e;k.fileType&&(null===(e=Z.current)||void 0===e||e.focus())},[k.fileType]),k.fileType)?(0,h.tZ)(tz,{siblings:k.siblings||[],type:"create",inputRef:Z,loading:k.creating,error:k.error,value:k.value,fileType:k.fileType,onClickOutside:function(e){var t=e.inputValue;if(""===t){k.cancel();return}k.create(t)},onChange:function(e){k.error&&k.clearError(),k.setValue(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){k.cancel();return}"Enter"===e.key&&k.create(e.currentTarget.value)},onSuggestion:function(e){k.setValue(e),k.create(e)}}):(0,h.tZ)(tH,{create:k.start})}function tH(e){return(0,h.BX)(y.G,{css:tM.createFilePicker,children:[(0,h.tZ)(y.G,{css:tM.text,children:"Add a"}),(0,h.tZ)(y.G,{tag:"button",css:tM.button,onClick:function(){return e.create(S.Tv.File)},children:"file"}),(0,h.tZ)(y.G,{css:tM.text,children:"or "}),(0,h.tZ)(y.G,{tag:"button",css:tM.button,onClick:function(){return e.create(S.Tv.Directory)},children:"folder"})]})}var tW=(0,b.X)({root:[{marginLeft:"auto",paddingLeft:tf.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-circle":{strokeDashoffset:tf.strokeDashoffset}}]});function tV(e){var t=to(ex)/2,n=t/2,r=2*n*Math.PI,i=(0,E.useRef)(null);return(0,m.j)(i,e.progress,function(e){return(0,d._)({},ts.strokeDashoffset,(r-e*r).toString())}),(0,h.tZ)(y.G,{innerRef:i,css:tW.root,children:(0,h.BX)("svg",{css:tW.svg,height:2*t,width:2*t,children:[(0,h.tZ)("circle",{fill:w.TV.backgroundHigher,r:t,cx:t,cy:t}),(0,h.tZ)("circle",{className:"inner-circle",stroke:w.TV.foregroundDimmest,fill:"transparent",strokeWidth:t,strokeDasharray:r+" "+r,r:n,cx:t,cy:t})]})})}var tX=function(e){return e.reduce(function(e,t){return e+t.current},0)/e.length};function tJ(e){var t,n,r,i,o=to(ex)/2,u=o/2,a=2*u*Math.PI,l=(t=e.uploadProgress,r=(n=(0,_._)((0,E.useState)(tX(t)),2))[0],i=n[1],(0,E.useEffect)(function(){var e=[],n=!0,r=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var l=u.value;e.push(l.subscribe(function(){i(tX(t))}))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return function(){e.map(function(e){return e()})}},[t]),r),c=(0,E.useRef)(null);return(0,h.tZ)(y.G,{innerRef:c,css:tW.root,children:(0,h.BX)("svg",{css:tW.svg,height:2*o,width:2*o,children:[(0,h.tZ)("circle",{fill:w.TV.backgroundHigher,r:o,cx:o,cy:o}),(0,h.tZ)("circle",{className:"inner-circle",style:(0,d._)({},ts.strokeDashoffset,(a-l*a).toString()),stroke:w.TV.foregroundDimmest,fill:"transparent",strokeWidth:o,strokeDasharray:a+" "+a,r:u,cx:o,cy:o})]})})}function tK(e){var t,n,r,i,o,u,a,l,c,s,f,d,p,v,g,m,y,b,w,x,D,k=(0,_._)((t={path:e.path,type:e.fileType},r=tl(ew),o=(i=(0,_._)((0,E.useState)(null),2))[0],u=i[1],a=(0,I.Il)(t.path)||K.Ql,l=(0,I.UO)(t.path),c=ta(ep),s=ta(ec),d=(f=(0,_._)((0,E.useState)(l),2))[0],p=f[1],g=(v=(0,_._)((0,E.useState)(!1),2))[0],m=v[1],y=(0,tw.Z)(function(){return(0,W.kv)(eG,function(e){var t;return null===(t=e.get(a))||void 0===t?void 0:t.children})},[a]),b=d!==l,w=to(y),x=null,b&&d.includes("/")?x=tT({fileName:d,parentPath:a}):b&&(x=(0,tS.z)({fileName:d,siblingNames:null!==(n=null==w?void 0:w.map(function(e){return e.filename}))&&void 0!==n?n:[],parentPath:a})),D=(0,V._)(function(e){var n,i,o,f,d,p,h;return(0,X.Jh)(this,function(v){switch(v.label){case 0:if(x||!e||e===l)return[2];if(n=r().fs,i=null,!e.includes("/"))return[3,2];return[4,tZ({fileName:e,parentPath:a,fs:n})];case 1:return i=v.sent(),[3,3];case 2:i=(0,tS.z)({fileName:e,siblingNames:null!==(o=null==w?void 0:w.map(function(e){return e.filename}))&&void 0!==o?o:[],parentPath:a}),v.label=3;case 3:if(i)return u(i),[2];if(m(!0),d=(f=a===K.Ql?null:a+"/")?f+e:e,!((p=(0,I.Il)(d)||K.Ql)!==K.Ql))return[3,6];return[4,n.stat(p)];case 4:if(v.sent().exists)return[3,6];return[4,n.createDir(p)];case 5:v.sent(),v.label=6;case 6:if(t.type!==S.Tv.Directory)return[3,8];return[4,n.moveDir(t.path,d)];case 7:return h=v.sent(),[3,10];case 8:return[4,n.moveFile(t.path,d)];case 9:h=v.sent(),v.label=10;case 10:if(h.error)return u("Something went wrong"),m(!1),[2];return c(null),s(d),[2]}})}),[{canRename:!!d&&b&&!x,value:d,renaming:g,error:o||x,siblings:w},{setValue:p,rename:function(e){return D.apply(this,arguments)},cancel:function(){c(null),s(t.path)}}]),2),Z=k[0],R=k[1],T=R.setValue,P=R.rename,C=R.cancel,O=(0,E.useRef)(null),N=(0,E.useRef)(Z.value);return(0,E.useEffect)(function(){if(O.current){var e=N.current;if(e){var t=e.lastIndexOf(".");-1===t&&(t=e.length),O.current.focus(),O.current.setSelectionRange(0,t)}}},[]),(0,h.tZ)(tz,{siblings:Z.siblings?Z.siblings.filter(function(t){return t.filename!==(0,I.UO)(e.path)}):[],type:"rename",inputRef:O,loading:Z.renaming,error:Z.error,value:Z.value,fileType:e.fileType,onClickOutside:function(e){var t=e.inputValue;Z.canRename?P(t):Z.error||C()},onChange:function(e){T(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){C();return}"Enter"!==e.key||(Z.canRename?P(e.currentTarget.value):Z.error||C())},onSuggestion:function(e){T(e),P(e)}})}var tq=n(55103),tQ=(l={},(0,d._)(l,tq.h.ADDED,"A"),(0,d._)(l,tq.h.UNTRACKED,"A"),(0,d._)(l,tq.h.MODIFIED,"M"),(0,d._)(l,tq.h.DELETED,"D"),(0,d._)(l,tq.h.RENAMED,"R"),(0,d._)(l,tq.h.COPIED,"C"),l),tY=(c={},(0,d._)(c,tq.h.ADDED,w.TV.greenDimmest),(0,d._)(c,tq.h.UNTRACKED,w.TV.greenDimmest),(0,d._)(c,tq.h.MODIFIED,w.TV.yellowDimmest),(0,d._)(c,tq.h.DELETED,w.TV.redDimmest),(0,d._)(c,tq.h.RENAMED,w.TV.tealDimmest),(0,d._)(c,tq.h.COPIED,w.TV.limeDimmest),c),t$=(s={},(0,d._)(s,tq.h.ADDED,w.TV.greenStrongest),(0,d._)(s,tq.h.UNTRACKED,w.TV.greenStrongest),(0,d._)(s,tq.h.MODIFIED,w.TV.yellowStrongest),(0,d._)(s,tq.h.DELETED,w.TV.redStrongest),(0,d._)(s,tq.h.RENAMED,w.TV.tealStrongest),(0,d._)(s,tq.h.COPIED,w.TV.limeStrongest),s);function t0(e){return e===tq.h.ADDED||e===tq.h.UNTRACKED||e===tq.h.MODIFIED||e===tq.h.DELETED||e===tq.h.RENAMED||e===tq.h.COPIED}var t1={color:tf.statusColor,fontSize:tf.fontSizeSmall,minWidth:tf.dirStatusIconSize,height:tf.dirStatusIconSize},t2=(0,b.X)({fileIcon:[w.l0.fontWeight.bold,w.l0.px(2),w.l0.center,t1],directoryCountIcon:[w.l0.fontWeight.medium,w.l0.borderRadius(4),w.l0.px(2),w.l0.center,t1,{backgroundColor:tf.statusBackgroundColor}]});function t4(e){return(0,h.tZ)(y.G,{css:t2.fileIcon,children:(0,h.tZ)(y.G,{children:e.text})})}function t3(e){return(0,h.tZ)(y.G,{css:t2.directoryCountIcon,children:(0,h.tZ)(y.G,{children:e.count})})}var t5=n(74044),t6=n(99149),t9=n(73097),t8=n(55534),t7=n(48796),ne=n(33024),nt=n.n(ne),nn=n(30826),nr=n.n(nn);function ni(e,t,n){return Math.floor(Math.min(t,Math.max(e,n)))}var no=n(89446),nu=n(59173);function na(){return(na=(0,V._)(function(e){var t,n,r,i,o,u,a,l,c,s,f;return(0,X.Jh)(this,function(d){switch(d.label){case 0:var h;if(t=e.parentPath,n=e.overwrite,r=e.fs,i=e.files,o=e.onStart,u=e.onUpload,a=e.onError,l=e.onDone,i.length>1e6)throw Error("Trying to upload too many files at once.");if(i.reduce(function(e,t){return t.size+e},0)>104857600)throw Error("Total file upload size exceeds maximum limit.");return h=(0,V._)(function(e){var t,i,o,l,c,s,f;return(0,X.Jh)(this,function(d){switch(d.label){case 0:if(t=e.targetPath,i=e.file,o=e.progress,n)return[3,2];return[4,r.stat(t)];case 1:if(d.sent().exists)return a(l={file:i,path:t,error:"ALREADY_EXIST"}),[2,l];d.label=2;case 2:c=null,d.label=3;case 3:return d.trys.push([3,5,,6]),[4,(0,no.pV)(i)];case 4:return c=d.sent(),[3,6];case 5:return d.sent(),a(s={file:i,path:t,error:"FILE_READ"}),[2,s];case 6:return f=t_.Z.from(c),[4,r.transferFile(t,f,function(e,t){o.current=t/e})];case 7:return d.sent(),u({file:i,path:t}),[2,{path:t,file:i}]}})}),c=function(e){return h.apply(this,arguments)},o(s=i.map(function(e){var n=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:t?t+"/"+n:n,progress:(0,nu.u)(0),file:e}})),[4,Promise.all(s.map(c))];case 1:return f=d.sent(),l({parentPath:t,uploads:f.filter(function(e){return!("error"in e)}),errors:f.reduce(function(e,t){return"error"in t?(0,p._)(e).concat([t]):e},[])}),[2]}})})).apply(this,arguments)}(o=f||(f={})).AlreadyExists="ALREADY_EXIST",o.FileRead="FILE_READ",o.Network="NETWORK";var nl=n(32148),nc=n(84900),ns=n(91535),nf=n(6191),nd=n(10422);function np(e,t){if(t===e.path)return!1;var n=t+"/"+(0,I.UO)(e.path);return!(n===e.path||(0,Y.yr)(e.path,t)||(0,Y.yr)(n,e.path))}var nh=(0,J.cn)(null,(u=(0,V._)(function(e,t,n){var r,i,o,u,a,l,c,s;return(0,X.Jh)(this,function(f){var d,p,h,v,g,m,y,b;switch(f.label){case 0:if(i=null==(r=e(eG).get(n.to))?void 0:r.children)return[3,2];return[4,e(ew).fs.readDir(n.to)];case 1:if((o=f.sent()).error)return[2];i=o.children,f.label=2;case 2:if(!i)throw Error("Expected children");if(d=n.nodes,p=n.to,h=i,u=d.reduce(function(e,t){var n=(0,I.UO)(t.path),r=(0,I.Il)(t.path),i=null==h?void 0:h.find(function(e){return e.filename===n});return i&&(""===r?K.Ql:r)!==p&&e.push({type:i.type,path:p===K.Ql?i.filename:p+"/"+i.filename}),e},[]),v=n.nodes,g=n.to,!(a=(m=(0,I.RQ)(v)).every(function(e){return np(e,g)})?m.map(function(e){var t=(0,I.UO)(e.path);return{from:e,to:g===K.Ql?t:g+"/"+t}}):null))return[2];if(l=e(ew).fs,!u.length)return[3,4];if(u.some(function(e){return a.some(function(t){var n=t.from;return(0,Y.yr)(e.path,n.path)})}))return[2];if(!n.overwrite)return null==(c=e(ew).onConflicts)||c({type:"move",nodes:n.nodes,to:n.to,conflicts:u}),[2];return[4,Promise.all(u.map((y=(0,V._)(function(e){var t;return(0,X.Jh)(this,function(n){switch(n.label){case 0:return[4,e.type===S.Tv.Directory?l.deleteDir(e.path):l.deleteFile(e.path)];case 1:return[2,(t=n.sent()).error?{error:t.error,node:e}:null]}})}),function(e){return y.apply(this,arguments)})))];case 3:if(f.sent().filter(Boolean).length)return[2];f.label=4;case 4:return t(eU,a),[4,Promise.all(a.map((b=(0,V._)(function(e){var t,n,r;return(0,X.Jh)(this,function(i){switch(i.label){case 0:return t=e.from,n=e.to,[4,t.type===S.Tv.Directory?l.moveDir(t.path,n):l.moveFile(t.path,n)];case 1:return[2,(r=i.sent()).error?{error:r.error,from:t,to:n}:null]}})}),function(e){return b.apply(this,arguments)})))];case 5:if(s=f.sent(),t(eU,[]),s.filter(Boolean).length)return[2];return t(e0,new Map(a.map(function(e){return[e.to,e.from.type]}))),[2]}})}),function(e,t,n){return u.apply(this,arguments)})),nv=n(2689),ng=(0,J.cn)(null,(a=(0,V._)(function(e,t,n){var r,i,o,u,a,l,c,s,f;return(0,X.Jh)(this,function(d){switch(d.label){case 0:if(r=e(ew).fs,i=n.parentPath||K.Ql,u=null==(o=e(eG).get(i))?void 0:o.children,n.files.length>1e6)return n.onError("Trying to upload too many files at once. Please try again with fewer files."),[2];if(u)return[3,2];return[4,r.readDir(i)];case 1:if((a=d.sent()).error)return[2];u=a.children,d.label=2;case 2:var h;if(!u)throw Error("Expected children");if(l=(0,p._)(new Set(n.files.map(function(e){return e.dirPath?e.dirPath.split("/")[0]:e.name}))),(s=(c=u.filter(function(e){return l.some(function(t){return t===e.filename})})).length?c.map(function(e){return{path:i===K.Ql?e.filename:i+"/"+e.filename,type:e.type}}):null)&&!n.overwrite)return null==(f=e(ew).onConflicts)||f({type:"upload",files:n.files,to:i,conflicts:c.map(function(e){return{path:i===K.Ql?e.filename:i+"/"+e.filename,type:e.type}})}),[2];if(!s)return[3,4];return[4,Promise.all(s.map((h=(0,V._)(function(e){var t;return(0,X.Jh)(this,function(n){switch(n.label){case 0:return[4,e.type===S.Tv.Directory?r.deleteDir(e.path):r.deleteFile(e.path)];case 1:return[2,(t=n.sent()).error?{error:t.error,node:e}:null]}})}),function(e){return h.apply(this,arguments)})))];case 3:if(d.sent().filter(Boolean).length)return[2];d.label=4;case 4:return function(e){na.apply(this,arguments)}({parentPath:n.parentPath,files:n.files,fs:r,onStart:function(e){t(eB,function(t){return(0,H.Uy)(t,function(t){var n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value;t.push(a)}}catch(e){r=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw i}}})})},onUpload:function(e){t(eB,function(t){return(0,H.Uy)(t,function(t){var n=t.findIndex(function(t){return t.targetPath===e.path});-1!==n&&t.splice(n,1)})})},onError:function(e){t(eB,function(t){return(0,H.Uy)(t,function(t){var n=t.findIndex(function(t){return t.targetPath===e.path});-1!==n&&t.splice(n,1)})})},onDone:function(e){var t=e.errors,n=e.parentPath;if(!t.length){nv.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:n});return}}}),[2]}})}),function(e,t,n){return a.apply(this,arguments)})),nm=(0,J.cn)(0),ny=(0,J.cn)(null),nb=(0,J.cn)(function(e){var t=e(ny);if(null===t)return null;var n=e(es),r=-1!==t?n.get(t):null;return r&&r.depth>0||(null==r?void 0:r.row.type)==="dir"?function(e,t){var n=e.get(t);if(!n)return null;var r=0,i=n.height,o="dir"===n.row.type?n.depth+1:n.depth;if("dir"===n.row.type)o=n.depth+1,r=n.y;else{o=n.depth;for(var u=t-1;u>=0;u--){var a=e.get(u);if(!a)break;if("dir"===a.row.type&&("file"===n.row.type||"uploadFile"===n.row.type?eo(a.row.path,n.row.path):a.row.path===n.row.dir)){i+=a.height,r=a.y;break}a.depth>=n.depth&&(i+=a.height)}}for(var l=t+1;l<e.size;l++){var c=e.get(l);if(!c||c.depth<=("dir"===n.row.type?n.depth:n.depth-1))break;i+=c.height}return{y:r,height:i,depth:o}}(n,t):{y:e(nm),depth:1,height:e(ea).height-8}}),nw="(".concat(tf.dropPreviewDepth," - 1) * ").concat(tf.gutterWidth),nE=(0,b.X)({root:[w.l0.position.absolute,w.l0.top(0),w.l0.left(0),w.l0.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(nw,"), ").concat(tf.dropPreviewY,")"),width:"calc(100% - ".concat(nw,")"),height:tf.dropPreviewHeight,opacity:tf.dropPreviewOpacity,outline:"1px dashed ".concat(tf.statusColor),outlineOffset:-1}]}),nS=(0,E.memo)(function(){var e=tu(nb),t=tu(nI),n=tu(nP),r=(0,E.useRef)(null);(0,m.j)(r,e,function(e){var t,n,r,i;return i={},(0,d._)(i,ts.dropPreviewY,(null!==(t=null==e?void 0:e.y)&&void 0!==t?t:0)+"px"),(0,d._)(i,ts.dropPreviewHeight,(null!==(n=null==e?void 0:e.height)&&void 0!==n?n:0)+"px"),(0,d._)(i,ts.dropPreviewDepth,null!==(r=null==e?void 0:e.depth.toString())&&void 0!==r?r:"0"),i}),(0,m.j)(r,n,function(e){return(0,d._)({},ts.dropPreviewOpacity,e?"1":"0")}),(0,m.j)(r,t,function(e){return(0,d._)({},ts.statusColor,e?w.TV.accentPrimaryDefault:w.TV.accentNegativeDefault)});var i=(0,t7.T)();return(0,h.tZ)(y.G,{style:{transition:i?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:r,css:nE.root})}),nx=(0,J.cn)(null,function(e,t,n){if(null!==n){var r=!0,i=!1,o=void 0;try{for(var u,a=e(es)[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,_._)(u.value,2),c=l[0],s=l[1];if(!(n.y<s.y)&&!(n.y>s.y+s.height))return t(ny,c),s}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}t(ny,-1)}}),nD=t5.Dy.Object({type:t5.Dy.Literal("nodes"),width:t5.Dy.Number(),height:t5.Dy.Number(),nodes:t5.Dy.Array(t5.Dy.Object({path:t5.Dy.String(),type:t5.Dy.Enum(S.Tv)}))}),n_=(0,J.cn)(null,function(e,t,n){t(e0,function(e){return(0,H.Uy)(e,function(e){e.set(n.path,n.type)})});var r=[n];if(e(e2))return r;var i=!0,o=!1,u=void 0;try{for(var a,l=e(e0)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,_._)(a.value,2),s=c[0],f=c[1];s!==n.path&&r.push({path:s,type:f})}}catch(e){o=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}return r});function nk(e){var t=ta(ny),n=ta(n_),r=to(eS),i=(0,E.useRef)(null),o=(0,_._)((0,nc.c)({type:e.type,item:function(){var t,r,o=n(e),u=null!==(r=null===(t=i.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==r?r:{width:160,height:32};return{nodes:o,type:"nodes",width:u.width,height:u.height}},collect:function(t){var n=t.getItem();return{isDragging:!!((null==n?void 0:n.type)==="nodes"&&n.nodes.some(function(t){return t.path===e.path}))}},end:function(){t(null)}}),3),u=o[0],a=o[1],l=o[2],c=u.isDragging;return(0,t9.K)(l),{isDragging:c,dragRef:r?void 0:a,sizeRef:i}}var nZ=(0,b.X)({root:[w.l0.position.absolute,{left:0,top:0,transform:"translate(".concat(tf.dragPreviewX,", ").concat(tf.dragPreviewY,")"),pointerEvents:"none"}],item:[w.l0.backgroundColor.backgroundHighest,w.l0.flex.row,w.l0.align.center,w.l0.shadow(3),td,{height:tf.rowHeight,borderRadius:tf.borderRadius}],icon:[tp,{marginRight:tf.iconTextGap}],text:[th,w.l0.flex.growAndShrink(1),{color:tf.statusColor}],count:[th,w.l0.backgroundColor.accentPrimaryDimmest,w.l0.color.accentPrimaryStrongest,w.l0.fontWeight.medium,w.l0.position.absolute,w.l0.left("calc(50% - 4px)"),w.l0.top("calc(100% - 4px)"),w.l0.borderRadius("full"),w.l0.px(4),w.l0.center,{fontSize:tf.fontSizeSmall}]}),nR=(0,E.memo)(function(e){var t=(0,E.useRef)(null),n=tC(),r=tu(nT);return(0,m.j)(t,r,function(e){var t;return t={},(0,d._)(t,ts.dragPreviewX,(e?e.x:0)+"px"),(0,d._)(t,ts.dragPreviewY,(e?e.y:0)+"px"),t}),(0,m.j)(t,n.horizontalPadding,function(e){return(0,d._)({},ts.horizontalPadding,e+"px")}),(0,m.j)(t,n.fontSize,function(e){return(0,d._)({},ts.fontSize,e+"px")}),(0,m.j)(t,n.fontSizeSmall,function(e){return(0,d._)({},ts.fontSizeSmall,e+"px")}),(0,m.j)(t,n.iconSize,function(e){return(0,d._)({},ts.iconSize,e+"px")}),(0,m.j)(t,n.iconTextGap,function(e){return(0,d._)({},ts.iconTextGap,e+"px")}),(0,m.j)(t,n.borderRadius,function(e){return(0,d._)({},ts.borderRadius,e+"px")}),(0,m.j)(t,n.gutterWidth,function(e){return(0,d._)({},ts.gutterWidth,e+"px")}),(0,h.tZ)(y.G,{innerRef:t,css:nZ.root,children:(0,h.BX)(y.G,{css:nZ.item,style:{width:e.width,height:e.height},children:[(0,h.tZ)(y.G,{css:nZ.icon,children:e.type===S.Tv.File?(0,h.tZ)(k.Z,{path:e.path}):(0,h.tZ)(R.Z,{})}),(0,h.tZ)(y.G,{css:nZ.text,children:(0,I.UO)(e.path)}),e.count>1?(0,h.tZ)(y.G,{css:nZ.count,children:e.count}):null]})})}),nT=(0,J.cn)(null);(0,J.cn)(function(e){return null!==e(nT)});var nP=(0,J.cn)(!1),nI=(0,J.cn)(!1);function nC(){var e=(0,ns.f)(function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}}),t=e.isDragging,n=e.item,r=e.currentOffset,i=ta(nT);if((0,E.useEffect)(function(){i(r?{x:r.x,y:r.y}:null)},[i,r]),!t||!t6.B4.Check(nD,n))return null;var o=n.nodes,u=n.width,a=n.height,l=(0,_._)(o,1)[0];return l?(0,nd.createPortal)((0,h.tZ)(nR,{type:l.type,path:l.path,count:o.length,width:u,height:a}),document.body):null}var nO=[w.l0.position.absolute,w.l0.top(0),w.l0.left(0),{width:"calc(100% - ".concat(tf.rowLeftIndent,")"),height:tf.rowHeight,transform:"translateY(".concat(tf.rowY,")"),marginLeft:tf.rowLeftIndent}],nN=(0,b.X)({divider:(0,p._)(nO).concat([td,w.l0.flex.growAndShrink(1),w.l0.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:w.TV.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[w.l0.truncate,w.l0.color.foregroundDimmer,{fontSize:tf.fontSizeSmall}],error:(0,p._)(nO).concat([w.l0.rowWithGap(4),w.l0.align.center,td]),emptyDir:(0,p._)(nO).concat([td,w.l0.color.foregroundDimmest,w.l0.justify.center,{paddingLeft:tf.iconSize,paddingRight:tf.horizontalPadding}]),row:(0,p._)(nO).concat([w.l0.flex.growAndShrink(1),w.l0.flex.row,w.l0.align.center,C.gU.nofill,{backgroundColor:tf.nodeBackgroundColor,borderRadius:tf.borderRadius,cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px "+w.TV.accentPrimaryDefault,zIndex:1},"@media (hover: hover)":(0,d._)({},ts.contextMenuButtonDisplay,"none"),"&:hover, &:active, &:focus":(0,d._)({},ts.contextMenuButtonDisplay,"flex"),transitionDuration:"0ms"}]),rowContent:[w.l0.flex.row,w.l0.align.center,w.l0.flex.growAndShrink(1),td],uploadRow:(0,p._)(nO).concat([w.l0.flex.growAndShrink(1),w.l0.align.center,w.l0.flex.row,w.l0.align.center,td,w.l0.border({color:"transparent"}),(0,d._)({backgroundColor:tf.nodeBackgroundColor,borderRadius:tf.borderRadius},ts.statusColor,w.TV.foregroundDimmer)]),createRow:(0,p._)(nO).concat([w.l0.justify.center]),icon:[tp,{marginRight:tf.iconTextGap}],fileInput:[w.l0.flex.row,w.l0.align.center],text:[th,w.l0.flex.growAndShrink(1),{color:tf.statusColor}],emptyDirText:[th,w.l0.display.flex,w.l0.justify.center,w.l0.flex.growAndShrink(1),{color:tf.statusColor}],contextMenuButton:[w.l0.reset.button,w.l0.height("100%"),w.l0.center,w.l0.cursor.pointer,C.gU.filled,tp,{display:tf.contextMenuButtonDisplay,borderRadius:"0 ".concat(tf.borderRadius," ").concat(tf.borderRadius," 0"),transitionDuration:"0ms",backgroundColor:"transparent"}]});function nA(e){var t,n=(t=e.path,to((0,tw.Z)(function(){return(0,J.cn)(function(e){var n;return null!==(n=e(eu).get(t))&&void 0!==n?n:null})},[t]))),r=to(eO);return(null==n?void 0:n.length)?(0,h.tZ)(Z.Z,{size:r,activeUsers:n}):null}function nF(e){var t,n=(t=e.path,to((0,tw.Z)(function(){return(0,J.cn)(function(e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e(eu)[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,_._)(u.value,2),c=l[0],s=l[1];if(!(0,Y.yr)(t,c))return;n.push.apply(n,(0,p._)(s))}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n.length?n:null})},[t])));return(null==n?void 0:n.length)?(0,h.tZ)(Z.Z,{activeUsers:n}):null}function nG(e){return(0,h.tZ)(y.G,{title:"menu",tag:"button",css:nN.contextMenuButton,onClick:e.onClick,children:(0,h.tZ)(N.Z,{})})}function nL(e,t){var n=tu((0,tw.Z)(function(){return(0,W.kv)(e0,function(e){return e.has(t)})},[t]));(0,m.j)(e,n,function(e){return(0,d._)({},ts.nodeBackgroundColor,e?w.TV.backgroundHigher:"transparent")}),(0,E.useEffect)(function(){var t=function(t){e.current&&e.current.setAttribute("aria-selected",t?"true":"false")};return t(n.current),n.subscribe(t)},[e,n,t])}var nB=(0,E.memo)(function(e){var t,n,r,i,o,u,a,l,c,s,f,p=(0,E.useRef)(null),v=tN(e.index),m=to((t=e.path,(0,tw.Z)(function(){return(0,W.kv)(eG,function(e){var n;return!!(null===(n=e.get(t))||void 0===n?void 0:n.expanded)})},[t]))),b=to((n=e.path,(0,tw.Z)(function(){return(0,W.kv)(eG,function(e){var t;return!!(null===(t=e.get(n))||void 0===t?void 0:t.loading)})},[n]))),k=(i=(r=(0,_._)((0,E.useState)(b),2))[0],o=r[1],(0,E.useEffect)(function(){if(!b){o(!1);return}var e=setTimeout(function(){return o(!0)},500);return function(){clearTimeout(e)}},[b]),i),Z=ta(ev),C=to(ef),O=tO(e.path),N=(u=e.path,a=ta(tI),(0,tw.Z)(function(){return function(e){a({event:e,path:u})}},[a,u])),A=(0,_._)(tA({path:e.path,index:e.index}),2),F=A[0],G=A[1],L=e.path===C&&b,B=L?ee:(0,I.UO)(e.path),U=nk({path:e.path,type:S.Tv.Directory}),z=U.dragRef,M=U.sizeRef,j=U.isDragging;nL(p,e.path);var H=(l=e.path,to((0,tw.Z)(function(){return(0,W.kv)(ed,function(e){return e?function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,_._)(u.value,2),c=l[0],s=l[1],f=s.index,d=s.worktree;(0,Y.yr)(t,c)&&n.push({path:c,index:f,worktree:d})}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===n.length)return null;var p=n.every(function(e){return e.index===tq.h.ADDED||e.worktree===tq.h.UNTRACKED})?tq.h.ADDED:tq.h.MODIFIED;if(!t0(p))return null;var h=n.length;return{color:t$[p],backgroundColor:tY[p],count:h}}(e,l):null},tD())},[l]))),V=to(eE);return(0,h.BX)(y.G,{style:(0,D._)((0,x._)({},null==v?void 0:v.style),(f={},(0,d._)(f,ts.statusColor,null!==(c=null==H?void 0:H.color)&&void 0!==c?c:w.TV.foregroundDimmer),(0,d._)(f,ts.statusBackgroundColor,null==H?void 0:H.backgroundColor),(0,d._)(f,"opacity",j?.1:void 0),f)),tabIndex:O,role:"treeitem","aria-label":B,"aria-expanded":m,"aria-level":(null!==(s=null==v?void 0:v.depth)&&void 0!==s?s:0)+1,css:nN.row,onFocus:function(){return G(e.path)},innerRef:(0,g.l)(p,F,M,e.pending?void 0:z),onContextMenu:V?function(t){V(t,{path:e.path,type:S.Tv.Directory})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&Z(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&N(e)},children:[(0,h.BX)(y.G,{title:e.path,css:nN.rowContent,onClick:e.pending?void 0:N,children:[(0,h.tZ)(y.G,{css:nN.icon,children:L||k&&!m?(0,h.tZ)(P.Z,{}):(0,h.tZ)(h.HY,{children:m?(0,h.tZ)(T.Z,{color:w.TV.foregroundDimmer}):(0,h.tZ)(R.Z,{color:w.TV.foregroundDimmer})})}),(0,h.tZ)(y.G,{css:nN.text,children:B}),e.uploadProgress?(0,h.tZ)(tJ,{uploadProgress:e.uploadProgress}):null,H?(0,h.tZ)(t3,{count:H.count}):null,m?null:(0,h.tZ)(nF,{path:e.path})]}),V?(0,h.tZ)(nG,{onClick:function(t){V(t,{path:e.path,type:S.Tv.Directory})}}):null]})}),nU=(0,E.memo)(function(e){var t,n,r,i,o,u,a,l,c=(0,E.useRef)(null),s=tN(e.index),f=(t=e.path,n=tl(ew),r=ta(e4),i=ta(ec),(0,tw.Z)(function(){return{onClick:function(e){var o=n(),u=o.onFileSelect,a=o.multiselectModifierKey,l=a?tP(e,a):void 0;r({node:{path:t,type:S.Tv.File},mode:l}),i(t),l||u({path:t,event:e,type:"click"})},onDoubleClick:function(e){var r=n().onFileDoubleClick;null==r||r(e,t)}}},[t,n,i,r])),p=f.onClick,v=f.onDoubleClick,m=tO(e.path),b=ta(ev),Z=(0,_._)(tA({path:e.path,index:e.index}),2),R=Z[0],T=Z[1],P=(0,I.UO)(e.path),C=nk({path:e.path,type:S.Tv.File}),O=C.dragRef,N=C.sizeRef,A=C.isDragging;nL(c,e.path);var F=(o=e.path,to((0,tw.Z)(function(){return(0,W.kv)(ed,function(e){return e?function(e,t){var n=null==e?void 0:e.get(t);if(!n)return null;var r=null;return n.worktree!==tq.h.UNMODIFIED?r=n.worktree:n.index!==tq.h.UNMODIFIED&&(r=n.index),r&&t0(r)?{color:t$[r],text:tQ[r]}:null}(e,o):null},tD())},[o]))),G=to(eE);return(0,h.BX)(y.G,{style:(0,D._)((0,x._)({},null==s?void 0:s.style),(l={},(0,d._)(l,ts.statusColor,null!==(u=null==F?void 0:F.color)&&void 0!==u?u:w.TV.foregroundDimmer),(0,d._)(l,"opacity",A?.1:void 0),l)),tabIndex:m,dataCy:"filetree-file",css:nN.row,onFocus:function(){return T(e.path)},innerRef:(0,g.l)(c,R,N,e.pending?void 0:O),role:"treeitem","aria-label":P,"aria-level":(null!==(a=null==s?void 0:s.depth)&&void 0!==a?a:0)+1,onDoubleClick:e.pending?void 0:v,onContextMenu:G?function(t){G(t,{path:e.path,type:S.Tv.File})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&b(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&p(e)},children:[(0,h.BX)(y.G,{title:e.path,css:nN.rowContent,onClick:e.pending?void 0:p,children:[(0,h.tZ)(y.G,{css:nN.icon,children:(0,h.tZ)(k.Z,{path:e.path})}),(0,h.tZ)(y.G,{css:nN.text,children:P}),F?(0,h.tZ)(t4,{text:F.text}):null,(0,h.tZ)(nA,{path:e.path})]}),G?(0,h.tZ)(nG,{onClick:function(t){G(t,{path:e.path,type:S.Tv.File})}}):null]})}),nz=(0,E.memo)(function(e){var t=tN(e.index);return(0,h.tZ)(y.G,{css:nN.divider,style:null==t?void 0:t.style,role:"treeitem",children:(0,h.tZ)(y.G,{css:nN.dividerInner,children:(0,h.tZ)(y.G,{css:nN.dividerText,children:e.label})})})}),nM=(0,E.memo)(function(e){var t=tN(e.index);return(0,h.BX)(y.G,{css:nN.error,style:null==t?void 0:t.style,role:"treeitem",children:[(0,h.tZ)(A.Z,{}),(0,h.tZ)(O.xv,{multiline:!1,children:e.message})]})}),nj=(0,E.memo)(function(e){var t=tN(e.index);return(0,h.tZ)(y.G,{css:nN.emptyDir,style:null==t?void 0:t.style,role:"treeitem",children:(0,h.tZ)(y.G,{css:nN.emptyDirText,children:$})})}),nH=(0,E.memo)(function(e){var t=tN(e.index);return(0,h.tZ)(y.G,{css:nN.createRow,style:null==t?void 0:t.style,role:"treeitem",children:(0,h.tZ)(tj,{dir:e.dir})})}),nW=(0,E.memo)(function(e){var t=tN(e.index),n=(0,I.UO)(e.path);return(0,h.tZ)(y.G,{style:null==t?void 0:t.style,css:nN.createRow,role:"treeitem","aria-label":n,children:(0,h.tZ)(tK,{path:e.path,fileType:e.fileType})})}),nV=(0,E.memo)(function(e){var t=tN(e.index),n=(0,I.UO)(e.path);return(0,h.BX)(y.G,{style:null==t?void 0:t.style,css:nN.uploadRow,role:"treeitem","aria-label":n,children:[(0,h.tZ)(y.G,{css:nN.icon,children:(0,h.tZ)(k.Z,{path:e.path})}),(0,h.tZ)(y.G,{css:nN.text,children:n}),(0,h.tZ)(tV,{progress:e.progress})]})}),nX=(0,E.memo)(function(e){var t,n=to((t=e.index,(0,tw.Z)(function(){return(0,J.cn)(function(e){var n,r;return null!==(r=null===(n=e(es).get(t))||void 0===n?void 0:n.row)&&void 0!==r?r:null})},[t])));return n?"error"===n.type?(0,h.tZ)(nM,{index:e.index,message:n.message}):"divider"===n.type?(0,h.tZ)(nz,{index:e.index,label:n.label}):"emptyDir"===n.type?(0,h.tZ)(nj,{index:e.index}):"create"===n.type?(0,h.tZ)(nH,{index:e.index,dir:n.dir}):"uploadFile"===n.type?(0,h.tZ)(nV,{index:e.index,path:n.path,progress:n.progress}):n.rename?(0,h.tZ)(nW,{index:e.index,path:n.path,fileType:"file"===n.type?S.Tv.File:S.Tv.Directory}):"file"===n.type?(0,h.tZ)(nU,{index:e.index,path:n.path,pending:!!n.pending}):(0,h.tZ)(nB,{index:e.index,path:n.path,pending:!!n.pending,uploadProgress:n.uploadProgress}):null}),nJ=[tf.horizontalPadding,tf.rowLeftIndent,tf.iconSize,tf.iconTextGap].join(" + "),nK=(0,b.X)({root:[w.l0.overflow("hidden"),w.l0.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(nJ,")"),paddingRight:tf.horizontalPadding}]}),nq=(0,E.memo)(function(){var e=to(eq);return e?(0,h.tZ)(y.G,{css:nK.root,children:e.map(function(e){var t=e.type,n=e.text,r=e.depth,i=(0,d._)({},ts.rowLeftIndent,"calc(".concat(r," * ").concat(tf.gutterWidth,")")),o=t+r;return"divider"===t?(0,h.tZ)(y.G,{style:i,css:nN.dividerInner,children:(0,h.tZ)(O.xv,{css:nN.dividerInner,multiline:!1,children:n.toUpperCase()})},o):(0,h.tZ)(y.G,{css:nK.file,style:i,children:"create"===t?(0,h.tZ)(tH,{create:function(){}}):(0,h.tZ)(y.G,{css:nN.text,children:n.toUpperCase()})},o)})}):null}),nQ=(0,J.cn)(null),nY=(0,J.cn)(null,function(e,t,n){var r=[n];if(!e(e2)){var i=!0,o=!1,u=void 0;try{for(var a,l=e(e0)[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=(0,_._)(a.value,2),s=c[0],f=c[1];n.path!==s&&r.push({path:s,type:f})}}catch(e){o=!0,u=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}}t(nQ,(0,I.RQ)(r))});function n$(){return(n$=(0,V._)(function(e,t){return(0,X.Jh)(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(t){return t.type===S.Tv.Directory?e.deleteDir(t.path):e.deleteFile(t.path)}))];case 1:return[2,{error:n.sent().filter(function(e){return e.error}).length?"Something went wrong deleting files":null}]}})})).apply(this,arguments)}var n0=n(11516),n1=n(86763),n2=n.n(n1),n4=t5.Dy.Enum(S.Tv),n3=t5.Dy.Object({filename:t5.Dy.String({minLength:1}),type:n4}),n5=t5.Dy.Object({scrollOffset:t5.Dy.Number({minimum:0}),dirInfo:t5.Dy.Record(t5.Dy.String(),t5.Dy.Object({expanded:t5.Dy.Boolean(),children:t5.Dy.Array(n3)}))});function n6(e){return"repl:workspace:filetree:"+e}var n9=t5.Dy.Array(t5.Dy.String()),n8="repl:workspace:filetree:savedKeys",n7=(0,W.kv)(ew,function(e){return e.localCacheKey?n6(e.localCacheKey):null}),re=(0,J.cn)(null,function(e){var t=e(ew),n=t.localCacheKey,r=t.filter;if(n){var i=null!==(f=null===(s=e(e9))||void 0===s?void 0:s.scrollOffset)&&void 0!==f?f:0,o=e(eG),u=!1,a=!0,l=!1,c=void 0;try{for(var s,f,d,p=o[Symbol.iterator]();!(a=(d=p.next()).done);a=!0){var h=(0,_._)(d.value,2)[1].children;if(u=!!(null==h?void 0:h.length))break}}catch(e){l=!0,c=e}finally{try{a||null==p.return||p.return()}finally{if(l)throw c}}if(u){var v=function(e,t){var n={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},r=!0,i=!1,o=void 0;try{for(var u,a=e.dirInfo[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,_._)(u.value,2),c=l[0],s=l[1],f=s.expanded,d=s.children;if(d){var p=d.filter(t);p.length&&(n.dirInfo[c]={expanded:f,children:p})}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}({dirInfo:o,scrollOffset:i},r),g=n6(n),m=(x=n0.Z.get(n8),t6.B4.Check(n9,x)?x:null);if(m){var y=m.filter(function(e){return e!==g});y.unshift(g);var b=y.splice(20),w=!0,E=!1,S=void 0;try{for(var x,D,k=b[Symbol.iterator]();!(w=(D=k.next()).done);w=!0){var Z=D.value;n0.Z.remove(Z)}}catch(e){E=!0,S=e}finally{try{w||null==k.return||k.return()}finally{if(E)throw S}}n0.Z.set(n8,y)}else n0.Z.set(n8,[g]);return n0.Z.set(n6(n),v)}}}),rt=(0,b.X)({content:[w.l0.px(2),w.l0.position.relative,{overflowY:"auto",height:"100%",minHeight:tf.minHeight}],scroll:[{position:"relative",height:tf.scrollHeight}],root:[w.l0.rowWithGap(0),w.l0.align.center],gutter:[w.l0.position.absolute,w.l0.top(0),w.l0.left(0),w.l0.reset.button,w.l0.align.end,w.l0.cursor.pointer,{width:tf.gutterWidth,"& > div":[w.l0.height("100%"),w.l0.width(1),{marginRight:"25%",opacity:.2,backgroundColor:w.TV.foregroundDimmest}],"&:hover > div":{backgroundColor:w.TV.accentPrimaryDefault,opacity:1}}]}),rn=(0,E.memo)(function(e){var t,n,r,i,o,u,a,l,c,s,f,b,w,x,D,k,Z,R,T,P,C,O,N,A,F,G,L=to(es),B=tC();(0,m.j)(e.scrollRef,B.fontSize,function(e){var t;return t={},(0,d._)(t,ts.fontSize,e+"px"),(0,d._)(t,ts.dirStatusIconSize,e+"px"),t}),(0,m.j)(e.scrollRef,B.fontSizeSmall,function(e){return(0,d._)({},ts.fontSizeSmall,e+"px")}),(0,m.j)(e.scrollRef,B.iconSize,function(e){return(0,d._)({},ts.iconSize,e+"px")}),(0,m.j)(e.scrollRef,B.iconTextGap,function(e){return(0,d._)({},ts.iconTextGap,e+"px")}),(0,m.j)(e.scrollRef,B.horizontalPadding,function(e){return(0,d._)({},ts.horizontalPadding,e+"px")}),(0,m.j)(e.scrollRef,B.borderRadius,function(e){return(0,d._)({},ts.borderRadius,e+"px")}),(0,m.j)(e.scrollRef,B.scrollHeight,function(e){return(0,d._)({},ts.scrollHeight,e+"px")}),(0,m.j)(e.scrollRef,B.gutterWidth,function(e){return(0,d._)({},ts.gutterWidth,e+"px")}),(0,m.j)(e.scrollRef,B.minHeight,function(e){return(0,d._)({},ts.minHeight,e+"px")});var U=ta(ej),z=(t=ta(nx),n=ta(ny),r=(0,E.useRef)(null),i=(0,E.useRef)(null),o=(0,E.useRef)(null),u=(0,t8.Z)().showError,a=tl(nm),l=ta(ng),c=ta(nh),s=ta(nI),f=(0,E.useRef)(null),b=tl(eG),w=tl(ef),x=ta(ea),D=ta(eJ),k=to(eS),R=(Z=(0,_._)((0,nl.L)(function(){return{accept:[S.Tv.File,S.Tv.Directory,nf.FILE],canDrop:function(){return!0},hover:function(e,n){var u=o.current;if(u){i.current&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},r=n.scrollZoneSize,i=n.scrollVelocity,o=n.scrollUpdateThrottle,u=nr()(function(){var n=t.getClientOffset();if(!n)return[0,0];var o=n.x,u=n.y,a=e.getBoundingClientRect(),l=a.x,c=a.y,s=a.width,f=a.height,d=Math.min(s/2,r.w),p=Math.min(f/2,r.h),h=function(e,t){var n=(0,_._)(t,2),r=n[0],i=n[1];return nt()(e,r[0],r[1])?(e-r[1])/(r[1]-r[0]):nt()(e,i[0],i[1])?(e-i[0])/(i[1]-i[0]):0};return[h(o,[[l,l+d],[l+s-d,l+s]])*i.x,h(u,[[c,c+p],[c+f-p,c+f]])*i.y]},o,{trailing:!1})();if(u){var a=(0,_._)(u,2),l=a[0],c=a[1];if(0!==l||0!==c){var s=e.scrollLeft,f=e.scrollTop,d=e.scrollWidth,p=e.scrollHeight,h=e.clientWidth,v=e.clientHeight;requestAnimationFrame(function(){e.scrollTop=ni(0,d-h,s+l),e.scrollTop=ni(0,p-v,f+c)})}}}(i.current,n);var l=n.getClientOffset();if(l){var c=t({x:l.x-u.x,y:l.y-u.y+a()});c?"file"===c.row.type||"uploadFile"===c.row.type?r.current=(0,I.Il)(c.row.path)||K.Ql:"dir"===c.row.type?r.current=c.row.path:r.current=c.row.dir:r.current=w();var d="nodes"!==e.type||(0,I.RQ)(e.nodes).every(function(e){var t;return np(e,null!==(t=r.current)&&void 0!==t?t:w())});if(s(d),(null==c?void 0:c.row.type)!=="dir"){f.current&&(clearTimeout(f.current.timer),f.current=null);return}var p=c.row.path;if(f.current){if(f.current.dir===p)return;clearTimeout(f.current.timer),f.current=null}if(d){var h=setTimeout(function(){var e;null!==(e=b().get(p))&&void 0!==e&&e.expanded||D(p)},200);f.current={dir:p,timer:h}}}}},drop:function(e,t){var n,i=null!==(n=r.current)&&void 0!==n?n:w();if("nodes"===e.type){c({to:i,nodes:e.nodes}),r.current=null;return}e.dirContent.then(function(e){if(e.reduce(function(e,t){return t.size+e},0)>104857600){u("Total file upload size exceeds maximum limit. Please try again with smaller files.");return}l({parentPath:i===K.Ql?void 0:i,files:e.filter(Boolean),onError:u})}),r.current=null},collect:function(e){return{isOver:e.isOver()}}}},[]),2))[0].isOver,T=Z[1],P=ta(nP),(0,E.useEffect)(function(){if(P(R),R){var e,t=null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect();o.current=t?{x:t.x,y:t.y}:null,t&&x({width:t.width,height:t.height});return}f.current&&(clearTimeout(f.current.timer),f.current=null),r.current=null,n(null)},[P,R,n,x]),C=ta(nm),(0,E.useEffect)(function(){var e=i.current;if(e){var t=nr()(function(){C(e.scrollTop)},200);return e.addEventListener("scroll",t),function(){t.cancel(),e.removeEventListener("scroll",t)}}},[C]),{dropRef:k?void 0:T,containerRef:i}),M=z.dropRef,j=z.containerRef,H=ta(e3),W=to(eE),V=to(ef);return N=to(es),A=ta(e8),F=null===(O=to(e1))||void 0===O?void 0:O.path,G=(0,v.Z)(F),(0,E.useEffect)(function(){G.current=F},[F,G]),(0,E.useEffect)(function(){G.current&&(A(G.current),G.current=void 0)},[N,A,G]),(0,h.BX)(y.G,{css:rt.content,innerRef:(0,g.l)(e.scrollRef,M,j),onKeyDown:U,onContextMenu:W?function(e){e.target===e.currentTarget&&W(e,{type:S.Tv.Directory,path:V})}:void 0,onClick:function(e){e.target===e.currentTarget&&H()},children:[(0,h.tZ)(nq,{}),(0,h.BX)(y.G,{css:rt.scroll,role:"tree",children:[(0,p._)(L.values()).map(function(e){var t=e.key,n=e.index;return(0,h.tZ)(nX,{index:n},t)}),(0,h.tZ)(ri,{}),(0,h.tZ)(nS,{}),(0,h.tZ)(nC,{})]})]})}),rr=(0,E.memo)(function(){var e,t,n,r,i,o,u,a,l,c,s,f,d,v,g,m,y,b,w,S,x=(t=(0,E.useRef)(null),n=to(ez),r=tl(ez),i=tl(ex),o=(0,tw.Z)(function(){return function(e){var t=r()[e];return t?eD(i(),t.type):0}},[r,i]),u=tl(ew),a=tu(eM),l=(0,E.useRef)(to(eh)),c=(0,ty.MG)({count:n.length,overscan:null!==(e=u().overscan)&&void 0!==e?e:100,getScrollElement:function(){return t.current},getItemKey:function(e){var t=n[e];return t?"error"===t.type?"error:"+t.dir+t.message:"divider"===t.type?"divider:"+t.dir+t.label:"emptyDir"===t.type?"emptyDir:"+t.dir:"create"===t.type?"create:"+t.dir:t.type+":"+t.path:""},estimateSize:o,rangeExtractor:function(e){var t=(0,tb.MK)(e);return null===a.current||t.includes(a.current)||void 0===n[a.current]?t:(0,p._)(t).concat([a.current])}}),(0,E.useEffect)(function(){l.current&&c.scrollToOffset(l.current)},[c,l]),s=ta(eb),f=c.getVirtualItems(),d=c.getTotalSize(),(0,E.useEffect)(function(){s({rows:f,scrollHeight:d})},[s,f,d]),v=to(ey),(0,E.useEffect)(function(){if(v){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout(function(){return e(a.current)}),a.subscribe(e)}},[c,a,v]),g=ta(e9),(0,E.useEffect)(function(){g(c)},[g,c]),{scrollRef:t,virtualizer:c}).scrollRef;return m=tu(nQ),y=tl(ew),(0,E.useEffect)(function(){return m.subscribe(function(e){if(e){var t=y().onDeleteNodes;t&&t({nodes:e,confirm:function(){return function(e,t){return n$.apply(this,arguments)}(y().fs,e)}})}})},[y,m]),b=to(n7),w=tu(eG),S=ta(re),(0,E.useEffect)(function(){if(b){var e,t,n=null,r=null!==(e=window.requestIdleCallback)&&void 0!==e?e:window.requestAnimationFrame,i=null!==(t=window.cancelIdleCallback)&&void 0!==t?t:window.cancelAnimationFrame,o=n2()(function(){n&&i(n),n=r(S)},1e3),u=w.subscribe(o);return document.addEventListener("visibilitychange",S),document.addEventListener("beforeunload",S),function(){o.cancel(),n&&i(n),document.removeEventListener("visibilitychange",S),document.removeEventListener("beforeunload",S),u(),S()}}},[b,w,S]),(0,h.tZ)(rn,{scrollRef:x})}),ri=(0,E.memo)(function(){var e=to(em),t=ta(eV);return(0,h.tZ)(h.HY,{children:e.map(function(e){return(0,h.tZ)(y.G,{tag:"button",onClick:function(){return t(e.dir)},css:rt.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(tf.gutterWidth,"), ").concat(e.y,"px)")},children:(0,h.tZ)(y.G,{})},"gutter"+e.dir+e.depth+e.y)})})});function ro(e){var t,n,r;return t=(0,t8.Z)().showError,n=(0,_._)((0,E.useState)(function(){var n,r,i,o,u=(0,J.MT)();u.set(ew,e);var a=null!==(n=e.root)&&void 0!==n?n:K.Ql,l=e.localCacheKey?(i=e.localCacheKey,o=n0.Z.get(n6(i)),t6.B4.Check(n5,o)?{dirInfo:new Map(Object.entries(o.dirInfo)),scrollOffset:o.scrollOffset}:null):null;l&&u.set(eh,l.scrollOffset);var c=null!==(r=null==l?void 0:l.dirInfo)&&void 0!==r?r:new Map;return c.has(a)||c.set(a,{expanded:!0}),u.set(eG,c),e.focusedPath&&u.set(ec,e.focusedPath),{store:u,create:function(e,t){if(t){u.set(eQ,{parentPath:t,fileType:e});return}var n=a,r=u.get(e1);(null==r?void 0:r.type)===S.Tv.File?n=(0,I.Il)(r.path)||K.Ql:(null==r?void 0:r.type)===S.Tv.Directory&&(n=r.path),u.set(eQ,{parentPath:n,fileType:e})},setPresenceState:function(e){u.set(eu,e)},setFileStatus:function(e){u.set(ed,e)},rename:function(e){u.set(ev,e)},move:function(e){u.set(nh,e)},upload:function(e){u.set(ng,(0,D._)((0,x._)({},e),{onError:t}))},onLoad:function(t){var n=e.fs.watchDir(a,{onChange:function(){t({error:null}),n()},onError:function(e){t({error:e}),n()}});return n},select:function(e){return null===e?u.set(e3):u.set(e6,e)},scrollToPath:function(e){return u.set(e8,e)},hasLocalCache:!!l,getChildren:function(e){var t,n;return null!==(n=null===(t=u.get(eG).get(e))||void 0===t?void 0:t.children)&&void 0!==n?n:null},getSelectedNode:function(){return u.get(e1)},getSelectedNodes:function(){return u.get(e0)},deleteNodes:function(e){u.set(nY,e)},collapse:function(e){return u.set(eV,e)},getExpandedDirs:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K.Ql,n=new Set,r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var l=(0,_._)(u.value,2),c=l[0],s=l[1];c!==t&&s.expanded&&(t===K.Ql||(0,Y.yr)(t,c))&&n.add(c)}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===n.size?null:n}(u.get(eG),e)}}}),1)[0],(0,E.useEffect)(function(){n.store.set(ew,e)},[n.store,e]),(0,E.useEffect)(function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n.store.get(eG)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=(0,_._)(i.value,2),a=u[0];u[1].expanded&&n.store.set(eJ,a)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n.store.get(eG)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u,a=(0,_._)(i.value,2),l=(a[0],a[1]);null===(u=l.disposeWatcher)||void 0===u||u.call(l)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},[n.store]),r=(0,v.Z)(e.onLoad),(0,E.useEffect)(function(){return n.onLoad(function(e){var t;return null===(t=r.current)||void 0===t?void 0:t.call(r,e)})},[n,r]),n}function ru(e){return(0,h.tZ)(tr,{store:e.store,children:(0,h.tZ)(rr,{})})}},98372:function(e,t,n){n.d(t,{S:function(){return a},W:function(){return u}});var r=n(74985),i=n(90234),o=n(50959),u=(0,o.createContext)(void 0);function a(e){var t=e.children,n=(0,o.useRef)();return n.current||(n.current=(0,i.MT)()),(0,r.tZ)(u.Provider,{value:n.current,children:t})}},36102:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(41733),i=n(74985),o=n(68333),u=n(6187),a=n(50199),l=n(33195),c=n(82004),s=n(50959).memo(o.ZP);function f(e){var t=e.source,n=e.sourcePos,o=e.fs,f=e.path,d=e.onCodeInsert,p=(0,l.l)(o,f),h=(0,u.Z)(t,100),v=(0,a.Z)(function(){return{img:p,a:function(e){return(0,i.tZ)(c.Z,(0,r._)({filePath:f},e))}}},[p,f]);return(0,i.tZ)(s,{onCodeInsert:d,components:v,sourcePos:n,children:h})}},61601:function(e,t,n){n.d(t,{A:function(){return p},Z:function(){return d}});var r=n(66626),i=n(74985),o=n(15146),u=n(74833),a=n(42463),l=n(88936),c=n(29287),s=n(50959),f=n(19659);function d(e){var t=e.fs,n=e.filePath,d=(0,r._)((0,s.useState)(null),2),h=d[0],v=d[1],g=(0,r._)((0,s.useState)(!0),2),m=g[0],y=g[1];return((0,s.useEffect)(function(){var e=t.watchFile(n,{onChange:function(e){v(e.toString("base64")),y(!1)},onError:function(){v(null),y(!1)},onMoveOrDelete:function(){v(null),y(!1)}});return function(){e(),y(!0),v(null)}},[t,n]),m)?(0,i.tZ)(l.Z,{}):h?(0,i.BX)(i.HY,{children:[(0,i.tZ)(p,{content:h,mime:(0,f.yC)(n)}),(0,i.tZ)(o.hU,{alt:"Download",css:[c.l0.position.absolute,c.l0.bottom(8),c.l0.right(8),c.l0.p(16)],children:(0,i.tZ)("a",{href:"data:text/plain;base64,".concat(h),download:(0,f.UO)(n),css:[c.l0.color.foregroundDimmer],children:(0,i.tZ)(a.Z,{})})})]}):(0,i.tZ)(u.xv,{multiline:!1,children:"Failed to load media file"})}var p=function(e){var t=e.content,n=e.mime,r=void 0===n?"":n;if(r.startsWith("video/"))return(0,i.tZ)("video",{src:"data:".concat(r,";base64,").concat(t),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0});if(r.startsWith("image/"))return(0,i.tZ)("img",{alt:"Preview",src:"data:".concat(r,";base64,").concat(t),css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}});if(r.startsWith("audio/")){var o=r;return"audio/wave"===o&&(o="audio/wav"),(0,i.tZ)("audio",{src:"data:".concat(o,";base64,").concat(t),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}return"application/pdf"===r?(0,i.tZ)("object",{data:"data:".concat(r,";base64,").concat(t),type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,i.tZ)("embed",{src:"data:".concat(r,";base64,").concat(t),type:"application/pdf",css:{width:"100%",height:"100%"}})}):(0,i.tZ)(u.xv,{multiline:!1,children:"File type not supported."})}},45123:function(e,t,n){n.d(t,{W:function(){return f}});var r=n(27387),i=n(66626),o=n(96583),u=n(72190),a=n(3720),l=n(19659),c=n(39756),s=n(30084);function f(e){return d.apply(this,arguments)}function d(){return(d=(0,r._)(function(e){var t,n,f,d,p,h,v,g,m;function y(){return(y=(0,r._)(function(){var e,t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(!(e=null==p?void 0:p.entrypoint))return[2,null];if(!(0,l.Il)(e))return[2,g.includes(e)?e:null];return[4,n.stat(e)];case 1:return[2,(t=r.sent()).exists&&t.type===s.Tv.File?e:null]}})})).apply(this,arguments)}return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(t=e.dotReplit,n=e.fs,!a.l)throw Error("Expected apollo client");return[4,Promise.all([n.readDir(c.Ql),t.getConfig()])];case 1:if(d=(f=i._.apply(void 0,[r.sent(),2]))[0],p=f[1].config,!d||d.error)throw Error("Could not read files");return v=(h=d.children).find(function(e){return e.type===s.Tv.File&&e.filename.toLowerCase().endsWith("readme.md")}),g=h.filter(function(e){return e.type===s.Tv.File}).map(function(e){return e.filename}),[4,function(){return y.apply(this,arguments)}()];case 2:var o,b;if(m=r.sent())return[2,{entrypoint:m,readmeFile:null==v?void 0:v.filename}];return[2,{entrypoint:(b=(o=g).find(function(e){return e.toLowerCase().endsWith("readme.md")}))?b:o.includes("Makefile")?"Makefile":o.find(l.gK)||o.find(function(e){return![".replit","replit.nix"].includes(e)&&!(0,u.Ci)(e)}),readmeFile:null==v?void 0:v.filename}]}})})).apply(this,arguments)}},11774:function(e,t,n){function r(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(t.width=e.width,t.height=e.height,!n)throw Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map(function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return n.putImageData(i,0,0),t.toDataURL()})}}function i(e){return new Promise(function(t,n){var r=new window.Image;r.src=e,r.onload=function(){t(r)},r.onerror=n})}function o(e){return new Promise(function(t,n){Promise.all(e.frames.map(i)).then(function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(!o){n(Error("failed to get canvas ctx"));return}t({frames:r.map(function(t){return o.drawImage(t,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}),preview:e.frames[0],width:e.width,height:e.height})}).catch(n)})}n.d(t,{C:function(){return r},u:function(){return o}})},86533:function(e,t,n){n.d(t,{z:function(){return u}});var r=n(72190),i=n(39756),o=n(17789);function u(e){var t=e.siblingNames,n=e.fileName,u=e.initialValue,a=e.parentPath;if(n.includes("/"))return"File names cannot include forward slashes";if("."===n||".."===n)return'File names cannot be "'.concat(n,'"');if(n.match(/^\s/)||n.match(/\s$/))return"File names cannot start or end with whitespace";if(u!==n&&t.includes(n))return"A file or folder with that name already exists";if(n.length>100)return"File names cannot be longer than 100 characters";var l=a===i.Ql?n:a+"/"+n;return l===o.w?"You can create environment variables with the Secrets tool! (.env files are deprecated)":(0,r.Ci)(l)?'"'.concat(l,'" is reserved'):null}},67696:function(e,t,n){n.d(t,{NH:function(){return l},Qt:function(){return s},R3:function(){return c},_s:function(){return o},p5:function(){return f}});var r=n(90234),i=n(68956),o=(0,r.cn)(null),u=(0,r.cn)(function(e){var t=e(o);return(null==t?void 0:t.isVisible)?t.path:null}),a=(0,r.cn)(null,function(e,t,n,r){switch(r.type){case"focus":t(o,{hasFocus:!0,isVisible:!0,position:r.position,path:n});return;case"update":t(o,{hasFocus:r.hasFocus,isVisible:!0,position:r.position,path:n});return;case"blur":t(o,function(e){var t;return{hasFocus:!1,isVisible:!!(null==e?void 0:e.isVisible),position:null!==(t=null==e?void 0:e.position)&&void 0!==t?t:{line:1,column:1,offset:0},path:n}});return;case"unmount":t(o,null);return;case"hidden":t(o,function(e){var t;return{hasFocus:!1,isVisible:!1,position:null!==(t=null==e?void 0:e.position)&&void 0!==t?t:{line:1,column:1,offset:0},path:n}});return;case"unhidden":t(o,function(e){var t;return{hasFocus:!!(null==e?void 0:e.hasFocus),isVisible:!0,position:null!==(t=null==e?void 0:e.position)&&void 0!==t?t:{line:1,column:1,offset:0},path:n}});return}});function l(){return(0,i.$X)(a)}function c(){return(0,i.Hg)(u)}function s(){return(0,i.XD)(o)}function f(){return(0,i.yL)(o)}},58091:function(e,t,n){n.d(t,{eA:function(){return A},_s:function(){return k._s},ex:function(){return v},aG:function(){return N.aG},zo:function(){return w},t9:function(){return C},R3:function(){return k.R3},pV:function(){return m},Qt:function(){return k.Qt},AA:function(){return E},Y_:function(){return x},b2:function(){return P},ev:function(){return D},Bx:function(){return y},_3:function(){return b},VX:function(){return g},OM:function(){return O},Cp:function(){return T},_o:function(){return _},Gg:function(){return h},QH:function(){return S}});var r=n(74985),i=n(68956),o=n(63257),u=n(50199),a=n(64461),l=n(90234),c=(0,l.cn)(null),s=(0,l.cn)([]),f=(0,l.cn)(null,function(e,t,n){var r=e(s);t(s,[n].concat((0,o._)(r.filter(function(e){return e!==n}))).slice(0,20))}),d=(0,l.cn)(null,function(e,t,n){var r=e(s),i=r.indexOf(n.path);-1!==i&&t(s,(0,a.Uy)(r,function(e){"delete"===n.type?e.splice(i,1):e.splice(i,1,n.to)}))}),p=(0,l.cn)(null);function h(){return(0,i.$X)(d)}function v(){return(0,i.Hg)(c)}function g(){return(0,i.$X)(c)}function m(){return(0,i.XD)(c)}function y(){return(0,i.Hg)(s)}function b(){return(0,i.yL)(s)}function w(){return(0,i.$X)(f)}function E(){return(0,i.XD)(s)}function S(){var e=(0,i.yL)(c);return(0,u.Z)(function(){return function(t){return e.subscribe(t)}},[e])}function x(){return(0,i.yL)(c)}function D(){return(0,i.Hg)(p)}function _(){return(0,i.$X)(p)}var k=n(67696),Z=(0,l.cn)(new Map),R=(0,l.cn)(null,function(e,t,n){t(Z,function(e){return(0,a.Uy)(e,function(e){n.indicatorType?e.set(n.paneType,n.indicatorType):e.delete(n.paneType)})})});function T(){return(0,i.$X)(R)}function P(e){var t=e.paneType;return(0,i.Hg)((0,u.Z)(function(){return(0,l.cn)(function(e){return t?e(Z).get(t):void 0})},[t]))}var I=(0,n(15859).O4)("areHiddenFilesVisible",!1);function C(){return(0,i.Hg)(I)}function O(){return(0,i.$X)(I)}var N=n(61405);function A(e){var t=(0,i.ns)();return(0,r.tZ)(i.B3.Provider,{value:t,children:e.children})}},61405:function(e,t,n){n.d(t,{aG:function(){return C},f:function(){return k},HQ:function(){return P},e_:function(){return G}});var r,i=n(27387),o=n(66626),u=n(63257),a=n(96583),l=n(15542),c=n(50199),s=n(3720),f=n(80388),d=n(59510),p=n.n(d),h=n(64461),v=n(90234),g=n(15859),m=n(86763),y=n.n(m),b=n(50959),w=n(21262);function E(){var e=(0,w._)(["\n  query WorkspaceSessionPresence($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return E=function(){return e},e}var S=(0,n(71440).Ps)(E()),x=n(68956),D=(0,v.cn)(new Map),_=(0,v.cn)(null,function(e,t,n){return t(D,function(e){return(0,h.Uy)(e,function(e){e.set(n.userId,n.color)})})});function k(){var e=(0,x.XD)(R),t=(0,x.$X)(_);return(0,b.useCallback)(function(n){var r,i=e(),o=null===(r=i.get(n.userId))||void 0===r?void 0:r.color;return o||t({color:o=(0,f.i7)(Object.values(i)),userId:n.userId}),o},[e,t])}function Z(e,t,n,r){var i=r||{timestamp:Math.floor(Date.now()/1e3),activeFile:null},o=e.get(t.id);if(o){o.sessions.set(t.session,i);return}e.set(t.id,{id:t.id,username:t.name,color:null!=n?n:(0,f.i7)((0,u._)(e.values())),roles:t.roles,sessions:new Map([[t.session,i]])})}var R=(0,v.cn)(new Map),T=(0,g.kv)(R,function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var l=(0,o._)(u.value,2)[1],c=null,s=!0,f=!1,d=void 0;try{for(var p,h=l.sessions[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=(0,o._)(p.value,2)[1];!v.activeFile||c&&c.timestamp>v.timestamp||(c=v)}}catch(e){f=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(f)throw d}}if(null==c?void 0:c.activeFile){var g=t.get(c.activeFile),m={id:l.id,username:l.username,image:l.image,color:l.color,roles:l.roles};g?g.push(m):t.set(c.activeFile,[m])}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},p());function P(){return(0,x.yL)(T)}var I=(0,g.kv)(R,function(e){return(0,u._)(e.values()).map(function(e){return{id:e.id,username:e.username,color:e.color,image:e.image,roles:e.roles}})},p());function C(){return(0,x.Hg)(I)}function O(e){var t=e.id,n=e.name,r=e.session,i=e.roles;return t&&n&&r&&i?{id:t,name:n,session:r,roles:i}:null}function N(e){var t=e.seconds,n=e.nanos;return"number"!=typeof t||"number"!=typeof n?null:(0,f.gs)({seconds:t,nanos:n})}var A=(0,v.cn)(null,function(e,t,n,r){t(R,function(t){return(0,h.Uy)(t,function(t){var i;if(null===(i=n.roster)||void 0===i?void 0:i.user){var u=!0,a=!1,l=void 0;try{for(var c,s=n.roster.user[Symbol.iterator]();!(u=(c=s.next()).done);u=!0){var f=c.value,d=O(f);if(null!==d&&(null==d?void 0:d.id)!==r){var p=function(e,t){if(!e.files)return null;var n=e.files.find(function(e){return e.userId===t.id&&e.session===t.session});if(!n)return null;var r=n.timestamp?N(n.timestamp):null;return r?{activeFile:n.file||null,timestamp:r}:null}(n.roster,d),h=e(D).get(d.id);Z(t,d,h,p)}}}catch(e){a=!0,l=e}finally{try{u||null==s.return||s.return()}finally{if(a)throw l}}return}if(n.join){var v=O(n.join);if(!v||v.id===r)return;var g=e(D).get(v.id);Z(t,v,g);return}if(n.part){var m,y,b=n.part,w=b.id,E=b.session;if(!w||!E)return;m={id:w,session:E},(y=t.get(m.id))&&(1===y.sessions.size?t.delete(m.id):y.sessions.delete(m.session));return}if(n.fileOpened){var S=n.fileOpened,x=S.session,_=S.userId,k=S.file,R=n.fileOpened.timestamp?N(n.fileOpened.timestamp):null;if(!R||!x||!_||!k)return;!function(e,t){var n=e.get(t.userId);if(n){var r=n.sessions.get(t.session);r?(r.timestamp=t.timestamp,r.activeFile=t.file):n.sessions.set(t.session,{timestamp:t.timestamp,activeFile:t.file})}}(t,{timestamp:R,session:x,userId:_,file:k});return}if(n.sessionTimestampUpdated){var T=n.sessionTimestampUpdated.session,P=n.sessionTimestampUpdated.timestamp?N(n.sessionTimestampUpdated.timestamp):null;if(!P||!T)return;!function(e,t){var n=t.session,r=t.timestamp,i=!0,u=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=(0,o._)(l.value,2)[1].sessions.get(n);if(s){s.timestamp=r;break}}}catch(e){u=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(u)throw a}}}(t,{timestamp:P,session:T});return}})})}),F=(0,v.cn)(null,(r=(0,i._)(function(e,t){var n,r,i,u,l,c,f,d,p,v,g;return(0,a.Jh)(this,function(a){switch(a.label){case 0:n=[],r=e(R),i=!0,u=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(i=(f=c.next()).done);i=!0)p=(d=(0,o._)(f.value,2))[0],d[1].image||n.push(p)}catch(e){u=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(u)throw l}}if(!n.length)return[2];return[4,null===s.l||void 0===s.l?void 0:s.l.query({query:S,variables:{userIds:n}})];case 1:if(!(g=null==(v=a.sent())?void 0:v.data.usersByIds))return[2];return t(R,function(e){return(0,h.Uy)(e,function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=g[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=i.value,a=e.get(u.id);a&&(a.image=u.image)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}})}),[2]}})}),function(e,t){return r.apply(this,arguments)}));function G(){var e=(0,l.d)(),t=(0,x.$X)(F),n=(0,x.$X)(A),r=(0,x.yL)(R);return(0,b.useEffect)(function(){t();var e=y()(t,2e3);return r.subscribe(function(){return e()})},[t,r]),(0,c.Z)(function(){return function(t){e&&n(t,e)}},[n,e])}},68956:function(e,t,n){n.d(t,{$X:function(){return v},B3:function(){return s},Hg:function(){return d},XD:function(){return g},ns:function(){return c},rF:function(){return h},yL:function(){return p}});var r=n(66626),i=n(66368),o=n(71999),u=n(28999),a=n(90234),l=n(50959);function c(){return(0,r._)((0,l.useState)(function(){return(0,a.MT)()}),1)[0]}var s=(0,l.createContext)(null);function f(){var e=(0,l.useContext)(s);if(!e)throw Error("Expected store in context");return e}function d(e){return(0,o.Dv)(e,{store:f()})}function p(e){return(0,i.b)(e,f())}function h(){var e=f();return(0,l.useCallback)(function(t){return(0,i.c)(e,t)},[e])}var v=function(e){return(0,o.b9)(e,{store:f()})};function g(e){return(0,u.lV)((0,l.useCallback)(function(t){return t(e)},[e]),{store:f()})}},37685:function(e,t,n){n.d(t,{MF:function(){return l},TI:function(){return a},lv:function(){return f},uC:function(){return c},yb:function(){return s}});var r=n(39426),i=n(39756),o=n(43778),u=n(93711);function a(e){var t=(0,u.nV)(e)[1];return!!t&&(t===i.oh||t===i.AS)}function l(e){return".env"===e.toString()||".breakpoints"===e.toString()||".cache"===e.toString()||(0,u.X2)((0,u.S1)(".cache"),e)}function c(e){return o.nh.includes(e.toString())}function s(e,t){return!!(t&&r.ZP.isLangFileBinary(t,e.toString()))}function f(e,t){if(!t)return!1;var n=(0,u.nV)(e).slice(1),r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,s=!0,f=!1,d=void 0;try{for(var p,h=n[Symbol.iterator]();!(s=(p=h.next()).done);s=!0)if(p.value.toString().match(c))return!0}catch(e){f=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(f)throw d}}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return!1}},53941:function(e,t,n){n.d(t,{Y:function(){return o}});var r=n(27387),i=n(96583);function o(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){return t=e.container,n=e.service,[2,new Promise(function(e){var r=t.openChannel({service:n},function(t){return e([t.channel,r]),r})})]})})).apply(this,arguments)}},90487:function(e,t,n){n.d(t,{Z:function(){return v}});var r,i,o=n(27387),u=n(66626),a=n(96583),l=n(42256),c=n(43182),s=n(83493),f=n(78037),d=n(53941);(r=i||(i={})).OUTPUT="OUTPUT",r.ERROR="ERROR",r.STATE_CHANGED="STATE_CHANGED",r.CHANNEL_OPENED="CHANNEL_OPENED";var p=n(30671),h=n(67795);function v(e){var t=e.container,n=e.forceTrace,r=e.track,v=(0,s.ZP)(),g=new Map;function m(e){var t=g.get(e);return t||(t={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},g.set(e,t)),t}function y(e){return b.apply(this,arguments)}function b(){return(b=(0,o._)(function(e){var n,r,i,o,l=arguments;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:0,[4,(0,d.Y)({container:t,service:"packager3"})];case 1:if(i=(r=u._.apply(void 0,[a.sent(),2]))[0],o=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:a.sent(),a.label=3;case 3:if("open"!==i.status){if(n>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,y(e,n+1)]}return[2,[i,o]]}})})).apply(this,arguments)}function w(e){return E.apply(this,arguments)}function E(){return(E=(0,o._)(function(e){var n;return(0,a.Jh)(this,function(r){return((n=m(e)).didCallOpenChannel||function(e){var n=m(e);if(n.didCallOpenChannel)throw Error("Already called open channel");n.didCallOpenChannel=!0,n.closeChannel=t.openChannel({service:"packager3",name:e||"packager",action:l.api.OpenChannel.Action.ATTACH_OR_CREATE},function(t){var r=t.channel;return r.onCommand(function(t){if(null!=t.state){var n=t.state===l.api.State.Running;v.emit(i.STATE_CHANGED,n,e)}else null!=t.output?v.emit(i.OUTPUT,t.output,e):null!=t.error&&v.emit(i.ERROR,t.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){n.packagerChannel=r,v.emit(i.CHANNEL_OPENED,r,e)}):(n.packagerChannel=r,v.emit(i.CHANNEL_OPENED,r,e)),function(){n.packagerChannel=null}})}(e),n.packagerChannel&&"open"===n.packagerChannel.status)?[2,n.packagerChannel]:[2,new Promise(function(t){v.once(i.CHANNEL_OPENED,function(n,r){r===e&&t(n)})})]})})).apply(this,arguments)}return{addPackages:function(e,t){return(0,o._)(function(){var n,i,o,u;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,w(t)];case 1:if("open"!==(i=a.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,i.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((u=a.sent()).channelClosed||u.error)return[2,!1];return(null===(n=u.packageAddResponse)||void 0===n?void 0:n.installedSystemDependencies)&&r&&r(h.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,!0]}})})()},removePackages:function(e,t){return(0,o._)(function(){var n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:return[4,w(t)];case 1:if("open"!==(n=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,n.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,t){return(0,o._)(function(){var n,r,i,o;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,y(t)];case 1:return r=(n=u._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageSearch:{query:e}})];case 2:if((o=a.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===o.body&&o.packageSearchResp)return[2,o.packageSearchResp.results||[]];return c.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageSearchResp. Received error: ".concat(o.error))),[2,[]]}})})()},fetchPackageInfo:function(e,t){return(0,o._)(function(){var n,r,i,o;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,y(t)];case 1:return r=(n=u._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((o=a.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===o.body&&o.packageInfoResp)return[2,o.packageInfoResp.pkg||void 0];return c.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageInfoResp. Received error: ".concat(o.error))),[2,void 0]}})})()},installPackages:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,o._)(function(){return(0,a.Jh)(this,function(u){var l;return[2,(0,p.nO)(e,"packager.installPackages",(l=(0,o._)(function(e){var o,u,l;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,w(t)];case 1:if("open"!==(o=a.sent()).status)return[2,(0,f.UG)("ChannelClosed")];return[4,o.request({packageInstall:{useNewResponse:!0,disableGuess:i},traceInfo:(0,p.Rg)(e),forceTrace:n})];case 2:if((u=a.sent()).error)return[2,(0,f.UG)(u.error)];if(u.channelClosed)return[2,(0,f.UG)("ChannelClosed")];if(!(l=u.packageInstallResponse))return[2,(0,f.UG)("No package install response found")];return l.installedSystemDependencies&&r&&r(h.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,(0,f.Ok)(l)]}})}),function(e){return l.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,o._)(function(){var t,n,r,i,o,l,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,y(e)];case 1:return n=(t=u._.apply(void 0,[a.sent(),2]))[0],r=t[1],[4,n.request({packageListSpecfile:{}})];case 2:if((i=a.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(r(),i.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(i.error)}];case"packageListSpecfileResp":if(!(l=null===(o=i.packageListSpecfileResp)||void 0===o?void 0:o.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:l,error:null}];default:return s="Unknown packager3 listSpecFile command ".concat(i.body,". ")+"Expected error or packageListSpecfileResp",c.Tb(Error(s)),[2,{packages:null,error:s}]}return[2]}})})()},getPackagerIds:function(){return Array.from(g.keys())},clearPackager:function(e){var t=g.get(e);(null==t?void 0:t.closeChannel)&&t.closeChannel(),g.delete(e)},onOutput:function(e){return v.on(i.OUTPUT,e),function(){v.removeListener(i.OUTPUT,e)}},onError:function(e){return v.on(i.ERROR,e),function(){v.removeListener(i.ERROR,e)}},onStateChanged:function(e){return v.on(i.STATE_CHANGED,e),function(){v.removeListener(i.STATE_CHANGED,e)}}}}}}]);
//# sourceMappingURL=442-3a413a137cc73f3e.js.map