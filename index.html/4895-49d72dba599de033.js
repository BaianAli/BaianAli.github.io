!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2bc5b171-f9c0-403c-b1c0-0ce5fbbed88b",e._sentryDebugIdIdentifier="sentry-dbid-2bc5b171-f9c0-403c-b1c0-0ce5fbbed88b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"6af6db66"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4895],{54085:function(e,t,n){n.d(t,{Z:function(){return l},c:function(){return r}});var r="https://twitter.com/intent/tweet";function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=e.url,l=e.hashtags,i=e.via,o=new URLSearchParams;t&&o.append("text",t),n&&o.append("url",n),l&&o.append("hashtags",l.join(",")),i&&o.append("via",i);var a=o.toString();return a.length>0?"".concat(r,"?").concat(a):r}},76673:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t){var n=t.existing,r=t.getKey,l=new Map,i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;l.set(r(c),c)}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}var d=new Set,p=[],h=!0,f=!1,g=void 0;try{for(var v,m=n[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var b=v.value,w=r(b),Z=l.get(w);Z&&(p.push(Z),d.add(w))}}catch(e){f=!0,g=e}finally{try{h||null==m.return||m.return()}finally{if(f)throw g}}var y=!0,_=!1,R=void 0;try{for(var x,C=e[Symbol.iterator]();!(y=(x=C.next()).done);y=!0){var G=x.value;d.has(r(G))||p.push(G)}}catch(e){_=!0,R=e}finally{try{y||null==C.return||C.return()}finally{if(_)throw R}}return p}},4895:function(e,t,n){n.d(t,{Z:function(){return t$}});var r,l,i=n(42516),o=n(74985),a=n(74833),s=n(56596),u=n(29479),c=n(88936),d=n(29287),p=n(56353),h=n(27387),f=n(41733),g=n(30509),v=n(66626),m=n(96583),b=n(7444),w=n(59868),Z=n(12285),y=n(4955),_=n(14105),R=n(9670),x=n(72310),C=n(71565),G=n(3341),S=n.n(G),T=n(75582),V=n(50959),I=n(66555),k=n(69273),B=n(21262),U=n(71440),P=n(58995);function E(){var e=(0,B._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return E=function(){return e},e}var F={},D=(0,U.Ps)(E(),p.FW),W=n(99165);function X(){var e=(0,B._)(["\n  mutation UseSetReplTagsSetTags($input: SetReplTagsInput!) {\n    setReplTags(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}var L={},z=(0,U.Ps)(X(),p.FW);function H(e){var t,n,r,l,i,o,a;return e.error?e.error.message||"Something went wrong saving your Repl Tags":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplTags)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(l=e.data)||void 0===l?void 0:null===(r=l.setReplTags)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(o=e.data)||void 0===o?void 0:null===(i=o.setReplTags)||void 0===i?void 0:i.__typename)==="UserError"?e.data.setReplTags.message:(null===(a=e.data)||void 0===a?void 0:a.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}function M(){var e=(0,B._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return M=function(){return e},e}var N={},A=(0,U.Ps)(M(),p.FW);function O(e){var t,n,r,l,i,o,a;return e.error?e.error.message||"Something went wrong saving your Cover page":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplViewSettings)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(l=e.data)||void 0===l?void 0:null===(r=l.setReplViewSettings)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(o=e.data)||void 0===o?void 0:null===(i=o.setReplViewSettings)||void 0===i?void 0:i.__typename)==="UserError"?e.data.setReplViewSettings.message:(null===(a=e.data)||void 0===a?void 0:a.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function j(){var e=(0,B._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return j=function(){return e},e}var K={},$=(0,U.Ps)(j(),p.FW);function J(e){return e.message||"Something went wrong saving updates to your Repl"}function Y(e){return"repl_file"===e||"repl_image"===e}(r=l||(l={})).ReplFile="repl_file",r.ReplImage="repl_image";var q=function(e){"use strict";(0,y._)(n,e);var t=(0,R._)(n);function n(){return(0,Z._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error)),Q=function(e){"use strict";(0,y._)(n,e);var t=(0,R._)(n);function n(){return(0,Z._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error)),ee=function(e){"use strict";(0,y._)(n,e);var t=(0,R._)(n);function n(){return(0,Z._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error));function et(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function en(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this Repl do?"}}var er=(0,V.createContext)(null),el=function(e){var t=(0,V.useContext)(er);if(!t)throw Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},ei=function(){var e=(0,V.useContext)(er);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},eo=n(1498),ea=n(37951),es=n(38080),eu=n(30983),ec=n(40102),ed=n(12874),ep=n(81799),eh=n(20573),ef=n(49996),eg=n(36032),ev=n(30084),em=n(93496),eb=n(32377),ew=s.K.button,eZ=function(){return(0,o.tZ)(s.G,{css:[d.l0.flex.row,d.l0.flex.grow(1),{borderTop:"1px solid ".concat(d.TV.outlineDimmest)}]})},ey=function(e){var t=e.isActive,n=e.isComplete,r=e.children,l=e.onClick,i=e.disabled;return(0,o.BX)(ew,{type:"button",css:[d.l0.reset.button,d.l0.position.relative,em.gU.nofill,t&&d.l0.backgroundColor.backgroundHigher,d.l0.p(4),d.l0.borderRadius(4)],onClick:l,disabled:i,children:[(0,o.tZ)(a.xv,{variant:"small",multiline:!1,children:r}),n?(0,o.tZ)(eb.Z,{size:6,strokeWidth:6,color:d.TV.foregroundDimmer,css:[d.l0.position.absolute,{top:2,right:-2}]}):null]})},e_=n(76819),eR=n(48459);function ex(e){var t=e.error,n=e.dataCy;return t?(0,o.BX)(s.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:[(0,o.tZ)(eh.Z,{css:[d.l0.color.accentNegativeStronger]}),(0,o.tZ)(a.xv,{css:[d.l0.flex.growAndShrink(1),d.l0.color.accentNegativeStronger],dataCy:n,children:t.message})]}):null}var eC=n(13729),eG=n(31366),eS=n(42308),eT=n(6187),eV=n(76673),eI=n(57526),ek=n(2161),eB=n(18836),eU=n(82723);function eP(){var e=(0,B._)(["\n  fragment PublishableReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n  }\n"]);return eP=function(){return e},e}function eE(){var e=(0,B._)(["\n  query PublishableReplSelector($search: String!) {\n    currentUser {\n      id\n      publishableReplSearch(search: $search) {\n        id\n        ...PublishableReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return eE=function(){return e},e}var eF={},eD=(0,U.Ps)(eP()),eW=(0,U.Ps)(eE(),eD),eX=s.K.div,eL=s.K.li,ez={searchValue:"",loading:!1,repls:[]};function eH(e,t){switch(t.type){case"data":var n,r=(null===(n=t.data.currentUser)||void 0===n?void 0:n.publishableReplSearch)||[];return(0,g._)((0,f._)({},e),{loading:!1,repls:(0,eV.Z)(r,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return(0,g._)((0,f._)({},e),{loading:!0});case"searchValue":return(0,g._)((0,f._)({},e),{searchValue:t.searchValue})}}function eM(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function eN(e){var t,n=(0,V.useRef)(null);(0,eC.rf)(function(){var t;e.selectedRepl&&(null===(t=n.current)||void 0===t||t.blur())},[e.selectedRepl]);var r=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&eM(e.selectedRepl)===e.inputValue?(0,o.tZ)(s.G,{css:[d.l0.px(8),d.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,o.tZ)(ek.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,o.BX)(s.G,{css:[{position:"relative"}],children:[(0,o.BX)(eX,(0,g._)((0,f._)({},e.getComboboxProps()),{css:{position:"relative"},children:[r,(0,o.tZ)(eB.II,(0,f._)({css:[d.l0.pr(32),r&&d.l0.pl(32)]},e.getInputProps({placeholder:"Search for a Repl",onFocus:e.onFocus,ref:n}))),(0,o.tZ)(s.G,{css:[d.l0.center,d.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,o.tZ)(c.Z,{}):(0,o.tZ)(eU.Z,{})})]})),(0,o.tZ)(eX,(0,g._)((0,f._)({},e.getMenuProps()),{css:{position:"relative"},children:e.isOpen?(0,o.BX)(eG.Z,{children:[e.loading&&0===e.repls.length?(0,o.tZ)(eL,{css:[d.l0.center,d.l0.py(32)],children:(0,o.tZ)(c.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,o.tZ)(eL,{css:[d.l0.center,d.l0.py(32)],children:(0,o.tZ)(a.xv,{color:"dimmer",variant:"small",multiline:!1,children:"No Repls found"})}),e.repls.map(function(t,n){return(0,o.tZ)(eL,(0,g._)((0,f._)({},e.getItemProps({item:t,index:n})),{children:(0,o.tZ)(eS.Z,{taller:!0,filter:"",title:eM(t),subtitle:(0,eI.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===n,icon:t.iconUrl?(0,o.tZ)(ek.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)})]}):null}))]})}var eA=n(10981),eO=n(21371),ej=s.K.label,eK=(0,V.forwardRef)(function(e,t){return(0,o.tZ)(ej,(0,g._)((0,f._)({},e),{ref:t,css:d.l0.color.foregroundDimmer}))}),e$=function(){var e,t,n,r,l,i,a,u=(0,eA.U)()("repl"),c=el("replId"),p=el("iconUrl"),h=(t=(e=(0,v._)((0,V.useReducer)(eH,ez),2))[0],n=e[1],i=(r={variables:{search:(0,eT.Z)(t.searchValue,200)},notifyOnNetworkStatusChange:!0,onCompleted:function(e){n({type:"data",data:e})}},l=(0,f._)({},eF,r),P.a(eW,l)).loading,(0,V.useEffect)(function(){i&&n({type:"loading"})},[i]),a=(0,V.useCallback)(function(e){return n({type:"searchValue",searchValue:e||""})},[]),{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:a}),m=(0,eO.Kb)({id:u,items:h.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;h.setSearchValue(t)},onSelectedItemChange:function(e){(null==e?void 0:e.selectedItem)&&(c.setValue(e.selectedItem.id),m.closeMenu())},itemToString:eM});return(0,o.BX)(s.G,{css:[d.l0.colWithGap(4)],children:[(0,o.tZ)(eK,{css:d.l0.color.foregroundDimmer,htmlFor:u,children:"Repl"}),(0,o.tZ)(eN,{getComboboxProps:m.getComboboxProps,getInputProps:m.getInputProps,getItemProps:m.getItemProps,getMenuProps:m.getMenuProps,isOpen:m.isOpen,highlightedIndex:m.highlightedIndex,inputValue:m.inputValue,selectedRepl:m.selectedItem?(0,g._)((0,f._)({},m.selectedItem),{iconUrl:p.value||m.selectedItem.iconUrl}):void 0,repls:h.repls,loading:h.loading,onFocus:function(e){m.selectedItem&&(e.preventDefault(),e.currentTarget.select(),h.setSearchValue("")),m.openMenu()}})]})},eJ=function(){var e=(0,eA.U)(),t=e("replName"),n=e("replDescription"),r=ei(),l=r.replIdField,i=r.replTitleField,u=r.replDescriptionField,c=r.isSaving;return(0,o.BX)(s.G,{css:[d.l0.colWithGap(16),d.l0.flex.growAndShrink(1)],children:[!l.value||l.touched?(0,o.tZ)(e$,{}):null,(0,o.BX)(s.G,{css:[d.l0.colWithGap(4)],children:[(0,o.tZ)(s.G,{css:[d.l0.flex.row,d.l0.align.baseline,d.l0.justify.spaceBetween],children:(0,o.tZ)(eK,{css:[d.l0.color.foregroundDimmer,{lineHeight:d.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"})}),i.value]}),(0,o.BX)(s.G,{css:[d.l0.colWithGap(4)],children:[(0,o.BX)(s.G,{css:[d.l0.flex.row,d.l0.align.baseline,d.l0.justify.spaceBetween],children:[(0,o.tZ)(eK,{css:[d.l0.color.foregroundDimmer,{lineHeight:d.TV.lineHeightSmall}],htmlFor:n,children:"Repl description"}),(0,o.BX)(a.xv,{multiline:!1,css:{color:u.value.length>1e3?d.TV.accentNegativeStronger:d.TV.foregroundDimmest},children:[u.value.length,"/",1e3]})]}),(0,o.tZ)(eB.B,{id:n,value:u.value,disabled:!l.value||c,onChange:function(e){u.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[d.l0.minHeight(128),d.l0.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),u.touched?(0,o.tZ)(ex,{error:u.error,dataCy:"publish-form-repl-description-error"}):null]})]})},eY=n(75245),eq=function(e){var t=e.showPlayButton,n=e.children,r=e.active;return(0,o.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,o.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?d.TV.accentPrimaryDimmest:void 0},children:n}),(0,o.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,o.tZ)("rect",{width:"268",height:"17",fill:d.TV.backgroundDefault}),(0,o.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:d.TV.accentPositiveDimmer}),(0,o.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:d.TV.backgroundHighest}),(0,o.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:d.TV.backgroundHighest}),(0,o.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?d.TV.accentPrimaryDefault:d.TV.outlineDimmer}),t?(0,o.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:d.TV.white}):null,(0,o.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?d.TV.accentPrimaryDefault:d.TV.outlineDimmer,strokeWidth:"1"})]})]})},eQ=n(43312),e0=n(54843),e1=n(19659),e2=s.K.ol,e4=s.K.li,e3=(0,eQ.iv)([d.l0.py(4),d.l0.borderRadius(8),{border:"1px solid ".concat(d.TV.outlineDimmest),borderRadius:d.TV.borderRadius8,backgroundColor:em.vb.interactiveBackground,zIndex:d.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:d.TV.space8,listStyle:"none"}]),e8={backgroundColor:em.vb.interactiveBackgroundActive},e6={backgroundColor:d.TV.accentPrimaryDimmer},e5=(0,eQ.iv)([d.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,f._)({},e8),":active":(0,f._)({},e6)}}]);function e9(e){var t,n,r,l,i,u,c,p,w,Z,y,_,R,x,C,G,S=e.fs,T=e.initiallySelectedFile,I=e.onFileSelect,k=e.onClear,B=(0,V.useRef)(null),U=(n=(t=(0,v._)((0,V.useState)({isLoading:!0,error:null,files:[]}),2))[0],r=t[1],(0,V.useEffect)(function(){function e(){return(e=(0,h._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,S.listFiles()];case 1:if((e=n.sent()).error)throw Error(e.error);return r({isLoading:!1,error:null,files:(null!==(t=e.files)&&void 0!==t?t:[]).slice().sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{file:e,pathDepth:(0,e1.U$)(e)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return n.sent(),r({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[S]),(0,f._)({},n)),P=U.isLoading,E=U.files,F=U.error,D=(i=(l={files:E,inputRef:B,initiallySelectedFile:T}).files,u=l.inputRef,c=l.initiallySelectedFile,w=(p=(0,v._)((0,V.useState)(!1),2))[0],Z=p[1],_=(y=(0,v._)((0,V.useState)(i),2))[0],R=y[1],x=(0,V.useCallback)(function(e){return i.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())})},[i]),C=(0,eO.Kb)({items:_,isOpen:w,initialInputValue:c,initialSelectedItem:_.find(function(e){return e===c}),onIsOpenChange:function(e){Z(!!e.isOpen)},onInputValueChange:function(e){var t;R(x(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),G=(0,V.useCallback)(function(){var e;Z(!1),null===(e=u.current)||void 0===e||e.blur()},[u]),(0,V.useEffect)(function(){var e;R(x(null!==(e=C.inputValue)&&void 0!==e?e:""))},[i,x,C.inputValue]),(0,V.useEffect)(function(){C.selectedItem&&G()},[C.selectedItem,G]),(0,g._)((0,f._)({},C),{closeMenu:G,items:_})),W=(0,b.Z)(I);return(0,V.useEffect)(function(){D.selectedItem&&W.current(D.selectedItem)},[D.selectedItem,W]),(0,o.BX)(s.G,{children:[(0,o.tZ)(s.G,(0,g._)((0,f._)({},D.getComboboxProps({refKey:"innerRef"})),{css:[d.l0.position.relative],children:(0,o.tZ)(e0.E,(0,g._)((0,f._)({},D.getInputProps({onFocus:D.openMenu,ref:B,refKey:"inputRef",disabled:P,placeholder:"Search your files"})),{onClear:function(){var e;D.reset(),null===(e=B.current)||void 0===e||e.focus(),k()},loading:P}))})),(0,o.BX)(s.G,(0,g._)((0,f._)({},D.getMenuProps({refKey:"innerRef"})),{css:[d.l0.position.relative],children:[F?(0,o.tZ)(s.G,{css:[d.l0.p(8)],children:(0,o.tZ)(a.xv,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!F&&D.isOpen?(0,o.tZ)(e2,{css:[e3],children:D.items.length>0?D.items.map(function(e,t){return(0,o.tZ)(e4,(0,g._)((0,f._)({css:[e5,D.highlightedIndex===t&&e8,e===D.selectedItem&&e6]},D.getItemProps({item:e,index:t,onClick:function(){D.closeMenu()}})),{children:(0,o.tZ)(a.xv,{multiline:!1,children:e})}),e)}):(0,o.tZ)(e4,{css:[d.l0.p(8)],children:(0,o.BX)(a.xv,{multiline:!1,children:['No files found for "',D.inputValue,'"']})})}):null]}))]})}var e7=n(43973),te=function(e){var t=(0,V.useRef)(null);return{inputProps:{onChange:function(t){var n=t.target,r=n.validity,l=n.files;if(r.valid){var i=l?l[0]:null;i&&e(i)}},"aria-hidden":"true",ref:t,accept:e7.W9.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.click()}},inputRef:t}},tt=function(e){var t=te(e.onFile),n=t.inputProps,r=t.buttonProps;return(0,o.BX)(o.HY,{children:[(0,o.tZ)("input",(0,g._)((0,f._)({},n),{css:{display:"none"}})),e.children(r)]})},tn=n(28099),tr=n(85195),tl=n(66061),ti=n(88205),to=[{value:l.ReplImage,text:"Photo"},{value:l.ReplFile,text:"File"}],ta=function(e){var t,n=e.fs,r=(0,eA.U)(),i=r("coverPage"),u=ei(),p=u.selectedRepl,b=u.coverFileField,w=u.coverUrlField,Z=u.coverDefaultViewField,y=(0,v._)((0,eY.Z)((t=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!(null==e?void 0:e.length)||!(t=e[0]).type.startsWith("image/"))return[2];return[4,x.uploadImage(t,ti.N.ReplCoverImage)];case 1:return n.sent(),[2]}})}),function(e){return t.apply(this,arguments)})),2),_=y[0],R=y[1],x=(0,C.W)(w.setValue);return(0,o.BX)(s.G,(0,g._)((0,f._)({css:[d.l0.colWithGap(16)]},R),{children:[(0,o.BX)(s.G,{css:d.l0.colWithGap(12),children:[(0,o.tZ)(s.G,{css:[d.l0.rowWithGap(8)],children:(0,o.tZ)(tr.E,{tag:"fieldset",css:[d.l0.rowWithGap(24)],name:i,value:Z.value,onChange:function(e){Y(e.target.value)&&Z.setValue(e.target.value)},children:to.map(function(e){return(0,o.BX)(s.G,{css:[d.l0.rowWithGap(8)],children:[(0,o.tZ)(tr.Y,{id:r(e.value),value:e.value}),(0,o.tZ)("label",{htmlFor:r(e.value),children:e.text})]},e.value)})})}),Z.value===l.ReplImage&&(0,o.BX)(s.G,{css:[d.l0.colWithGap(4),d.l0.align.center],children:[(0,o.tZ)(tt,{onFile:function(e){return x.uploadImage(e,ti.N.ReplCoverImage)},children:function(e){var t=e.onClick;return(0,o.tZ)(eo.zx,{onClick:t,colorway:_?"primary":void 0,text:"Upload a cover photo",iconLeft:x.isLoading?(0,o.tZ)(c.Z,{}):(0,o.tZ)(tl.Z,{}),stretch:!0})}}),x.error?(0,o.tZ)(ea.E,{colorway:"negative",icon:(0,o.tZ)(eh.Z,{}),text:x.error}):null,(0,o.tZ)(a.xv,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),Z.value===l.ReplFile&&(0,o.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,o.tZ)(e9,{fs:n,initiallySelectedFile:b.value,onFileSelect:b.setValue,onClear:function(){return b.setValue("")}},null==p?void 0:p.id),(0,o.tZ)(ex,{error:b.error})]})]}),Z.value===l.ReplImage&&(0,o.BX)(eq,{active:_,showPlayButton:Z.value===l.ReplImage&&!!w.value&&!x.isLoading,children:[Z.value===l.ReplImage&&w.value?(0,o.tZ)(tn.y,{src:w.value,alt:"cover"}):null,x.isLoading?(0,o.tZ)(s.G,{css:[{position:"absolute",inset:0},d.l0.align.center,d.l0.justify.center],children:(0,o.tZ)(c.Z,{color:d.TV.white,size:24})}):null]})]}))},ts=(n(58719),function(){el("iconUrl");var e=ei(),t=e.replIconInput,n=e.replIconUrl;return(0,o.BX)(s.G,{css:[d.l0.colWithGap(16),d.l0.align.center],children:[(0,o.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,o.BX)(s.G,{css:[d.l0.rowWithGap(8)],children:[(0,o.tZ)(tt,{onFile:function(e){return t.uploadImage(e,ti.N.ReplIcon)},css:d.l0.backgroundColor.accentNegativeDefault,children:function(e){var t=e.onClick;return(0,o.tZ)(eo.zx,{onClick:t,text:"Upload image",iconLeft:(0,o.tZ)(tl.Z,{}),css:[d.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),t.error?(0,o.tZ)(s.G,{children:(0,o.tZ)(ea.E,{icon:(0,o.tZ)(eh.Z,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,o.tZ)(ek.LN,{alt:"icon",size:84,iconUrl:n,isLoading:!!t.previewUrl,css:[d.l0.backgroundColor.backgroundHigher]})]})}),tu=n(70002),tc=n(60769),td=n(44620),tp=function(){var e=el("isTemplate"),t=(0,eA.U)()("templateCheckbox");return(0,o.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,o.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,o.BX)(s.G,{css:[d.l0.rowWithGap(8)],children:[(0,o.tZ)(tc.X,{id:t,checked:e.value,onChange:function(t){return e.setValue(t.target.checked)}}),(0,o.tZ)("label",{htmlFor:t,children:"Submit as Template for Review"})]}),(0,o.tZ)(ex,{error:e.error})]}),(0,o.tZ)(a.xv,{variant:"small",color:"dimmer",children:"This is a good option for Repls meant as starting points for future work."}),(0,o.tZ)(a.xv,{variant:"small",color:"dimmer",children:"The Replit team will review your Template before it is live on the Templates page."}),(0,o.tZ)(s.G,{css:[d.l0.align.start],children:(0,o.tZ)(tu.Z,{href:"https://docs.replit.com/programming-ide/how-to-make-a-replit-template",target:"_blank",text:"What makes a good Template?",iconRight:(0,o.tZ)(td.Z,{}),variant:"outlined",size:"small"})}),(0,o.tZ)(s.G,{css:[d.l0.pt(16)],children:(0,o.BX)(a.xv,{children:["Please make sure your Repl abides by the"," ",(0,o.tZ)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})]})},th=n(63257),tf=n(64157),tg=n(39082),tv=s.K.ul,tm=s.K.li;function tb(e){var t=e.children;return(0,o.tZ)(s.G,{css:[d.l0.px(8),d.l0.pt(8)],children:(0,o.tZ)(a.xv,{multiline:!1,css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function tw(e){var t=e.highlighted,n=e.tag;return(0,o.tZ)(s.G,{css:[d.l0.rowWithGap(8),d.l0.p(8),t&&{backgroundColor:em.gU.listItem["@media (hover: hover)"][":not([disabled])"][":not(textarea):active"].backgroundColor},{cursor:"pointer"}],children:(0,o.BX)(s.G,{css:[d.l0.flex.growAndShrink(1),d.l0.rowWithGap(4),d.l0.align.center],children:[(0,o.tZ)(a.xv,{multiline:!1,children:n.id}),n.isOfficial?(0,o.tZ)(tg.Z,{}):null]})})}var tZ=V.memo(function(e){var t=e.getItemProps,n=e.highlightedIndex,r=e.data;return(0,o.tZ)(eG.Z,{css:[d.l0.minWidth(200)],children:r.sections.reduce(function(e,r){return e.sections.push((0,o.BX)(tm,{children:[(0,o.tZ)(tb,{children:r.title}),(0,o.tZ)(tv,{css:[d.l0.pt(4),d.l0.pb(8)],children:r.tags.map(function(r){var l=e.itemIndex++;return(0,o.tZ)(tm,(0,g._)((0,f._)({},t({item:r,index:l})),{children:(0,o.tZ)(tw,{tag:r,highlighted:n===l})}),r.id)})})]},r.title)),e},{sections:[],itemIndex:0}).sections})});tZ.displayName="TagsMenu";var ty=n(35273);function t_(){var e=(0,B._)(["\n  fragment TagsComboboxTag on Tag {\n    id\n    isOfficial\n  }\n"]);return t_=function(){return e},e}function tR(){var e=(0,B._)(["\n  query TagsCombobox($limit: Int, $search: String) {\n    tagGroups {\n      official(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n      community(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n    }\n  }\n  ","\n"]);return tR=function(){return e},e}var tx={},tC=(0,U.Ps)(t_()),tG=(0,U.Ps)(tR(),tC),tS=/^[0-9a-zA-Z]+$/,tT=function(e){return e.id},tV=n(99656),tI=s.K.div,tk=s.K.input,tB=(0,eQ.iv)([d.l0.fontSize(12),d.l0.pl(24),d.l0.pr(8),d.l0.py(4)]);function tU(){return(0,o.tZ)(a.xv,{multiline:!1,css:[d.l0.px(4),d.l0.flex.row,d.l0.align.center,d.l0.position.absolute,d.l0.height("100%"),d.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,o.tZ)(tV.Z,{size:12})})}function tP(e){var t=e.text,n=e.children;return(0,o.BX)(es.Tg,{elevated:!0,css:[d.l0.position.relative,d.l0.minWidth(30),d.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:d.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,o.tZ)(tU,{}),(0,o.tZ)(a.xv,{css:[{visibility:"hidden"},tB],multiline:!1,children:t}),n]})}function tE(e){var t,n,r,l,i,a,u,c,p,h,m,w,Z,y,_,R,x,C,G,S,T=(t=e.onRemove,n=e.onSelect,r=e.filter,l=e.inputValue,i=e.setInputValue,a=(0,eT.Z)(l,100),u=(0,b.Z)(n),C=(p=(c={search:a,filter:void 0===r?function(){return!0}:r}).search,h=c.filter,w=(m=(0,f._)({},tx,{variables:{limit:p?10:3,search:p}}),P.a(tG,m)).data,y=(Z=(0,v._)((0,V.useState)({official:[],community:[],newTag:[]}),2))[0],_=Z[1],R=(0,V.useMemo)(function(){if(w){var e=[],t=[],n=new Set,r=!0,l=!1,i=void 0;try{for(var o,a=w.tagGroups.official[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;n.add(s.id.toLowerCase()),h(s)&&e.push(s)}}catch(e){l=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(l)throw i}}var u=!0,c=!1,d=void 0;try{for(var f,g=w.tagGroups.community[Symbol.iterator]();!(u=(f=g.next()).done);u=!0){var v=f.value;n.add(v.id.toLowerCase()),h(v)&&t.push(v)}}catch(e){c=!0,d=e}finally{try{u||null==g.return||g.return()}finally{if(c)throw d}}var m=t.find(function(e){return e.id===p}),b=!p||m||n.has(p.toLowerCase())?void 0:{id:p,isOfficial:!1};return{official:e,community:t,newTag:b&&h(b)?[b]:[]}}},[w,h,p]),(0,V.useEffect)(function(){if(R){var e=R.official,t=R.community,n=R.newTag;_(function(r){return{official:(0,eV.Z)(e,{existing:r.official,getKey:tT}),community:(0,eV.Z)(t,{existing:r.community,getKey:tT}),newTag:n}})}},[R]),x={tagGroups:y,reset:function(){_({official:[],community:[],newTag:[]})}}).tagGroups,G=x.reset,S=(0,eO.Kb)({inputValue:l,items:(0,th._)(C.official).concat((0,th._)(C.community),(0,th._)(C.newTag)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(G(),i(""),S.reset(),S.openMenu())}}),(0,ty.Z)(function(){S.selectedItem&&u.current(S.selectedItem)},[S.selectedItem]),{tagGroups:C,combobox:S,onChange:function(e){var t=e.currentTarget.value;(!t||tS.test(t))&&!(t.length>30)&&i(t)},onKeyDown:function(e){""===l&&"Backspace"===e.key&&(e.preventDefault(),t())}}),I=T.combobox,k=T.tagGroups,B=T.onChange,U=T.onKeyDown,E=(0,V.useMemo)(function(){var e;return e=[],(k.official.length&&e.push({title:"Official Tags",tags:k.official}),k.community.length&&e.push({title:"Community Tags",tags:k.community}),k.newTag.length&&e.push({title:"Create new tag",tags:k.newTag}),0===e.length)?null:{type:"sections",sections:e}},[k]),F="Add tag";return(0,o.BX)(s.G,{children:[(0,o.tZ)(tI,(0,g._)((0,f._)({},I.getComboboxProps()),{css:[d.l0.flex.row],children:(0,o.tZ)(tP,{text:I.inputValue||F,children:(0,o.tZ)(tk,(0,f._)({css:[d.l0.coverContainer,tB,d.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":d.l0.color.foregroundDefault,"&:focus::placeholder":d.l0.color.foregroundDimmest}]},I.getInputProps({placeholder:F,onChange:B,onKeyDown:U,onFocus:function(){I.openMenu()}})))})})),(0,o.tZ)(tI,(0,g._)((0,f._)({},I.getMenuProps()),{css:[d.l0.position.relative],children:E&&I.isOpen?(0,o.tZ)(tZ,{getItemProps:I.getItemProps,highlightedIndex:I.highlightedIndex,data:E}):null}))]})}function tF(e){var t=e.tags,n=e.max,r=e.onAdd,l=e.onRemove,i=t.map(function(e){return e.id}),a=(0,v._)((0,V.useState)(""),2),u=a[0],c=a[1];return(0,o.BX)(s.G,{css:[d.l0.flex.row,d.l0.flex.wrap,{margin:"calc(-1 * ".concat(d.TV.space4,")")}],children:[t.map(function(e,t){return(0,o.tZ)(s.G,{css:[d.l0.m(4)],children:(0,o.tZ)(tf.g,{small:!0,tag:e,onClick:function(){return l(t)}})},e.id)}),t.length<(void 0===n?5:n)?(0,o.tZ)(s.G,{css:[d.l0.m(4)],children:(0,o.tZ)(tE,{onSelect:r,filter:function(e){return!i.includes(e.id.toLowerCase())},inputValue:u,setInputValue:c,onRemove:function(){var e=t.length-1;e>=0&&(c(t[e].id),l(e))}})}):null]})}var tD=function(){var e=el("tags");return(0,o.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,o.tZ)(s.G,{css:[d.l0.colWithGap(4)],children:(0,o.tZ)(tF,{max:5,tags:e.value,onAdd:function(t){return e.setValue((0,th._)(e.value).concat([t]))},onRemove:function(t){return e.setValue((0,th._)(e.value.slice(0,t)).concat((0,th._)(e.value.slice(t+1))))}})}),(0,o.BX)(s.G,{css:d.l0.rowWithGap(4),children:[(0,o.tZ)(a.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Adding tags helps others find your Repl."}),(0,o.BX)(a.xv,{color:"dimmest",variant:"small",multiline:!1,children:[e.value.length,"/",5]})]})]})},tW=n(47001),tX=n(84800),tL=n(30173),tz=n(33829),tH=n(44161),tM=n(63009),tN=n(24418),tA=s.K.form,tO=function(e){var t=e.user,n=ei(),r=n.selectedRepl,l=n.replTitleField,u=n.replDescriptionField,p=n.replIconUrl,h=n.tagsField,v=n.isTemplateField;return(0,o.BX)(es.Tg,{background:"root",css:[(0,i._)({},(0,ef.et)("tabletMin"),{display:"flex"}),d.l0.flex.growAndShrink(1),d.l0.p(16),d.l0.colWithGap(12),d.l0.align.center,d.l0.display.none],children:[(0,o.tZ)(a.xv,{multiline:!1,variant:"small",color:"dimmer",css:[d.l0.width("100%"),{fontWeight:d.TV.fontWeightMedium}],children:"Preview"}),(0,o.BX)(s.G,{css:[d.l0.width("100%"),d.l0.maxWidth(432),d.l0.position.relative],children:[(0,o.tZ)(s.G,{css:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+d.TV.backgroundRoot+", inset 0 -48px 24px -24px "+d.TV.backgroundRoot}}),(0,o.BX)(s.G,{css:[d.l0.height(416),d.l0.colWithGap(24),d.l0.justify.center,d.l0.overflow("hidden"),d.l0.backgroundColor.backgroundRoot],children:[(0,o.tZ)(e_.O,{}),r&&p?(0,o.tZ)(e_.Z,{post:{user:t,repl:(0,g._)((0,f._)({},r),{title:l.value,iconUrl:p,tags:h.value,description:u.value,isTemplate:v.value})}}):(0,o.tZ)(s.G,{css:[d.l0.flex.grow(1),d.l0.align.center,d.l0.justify.center],children:(0,o.tZ)(c.Z,{})}),(0,o.tZ)(e_.O,{})]})]})]})},tj=["Basics","Tags","Icon","Cover page","Publishing"];function tK(e){var t,n,r,u,p,g,Z,y,_,R,G,B,U,E,X,M,j,el,ei,em,eb,ew,e_,ex=e.replId,eC=e.currentUser,eG=e.source,eS=function(e){var t,n,r,l,i,o,a,s,u=(0,x.Y)(e.replId||null,function(e){return e?null:{message:"Select a Repl to share"}}),c=(t={variables:{id:u.value||""},skip:!u.value},n=(0,f._)({},F,t),P.a(D,n)),d=(null===(r=c.data)||void 0===r?void 0:r.repl.__typename)==="Repl"?c.data.repl:null,p=!!(null==d?void 0:d.publishedAs),g=(0,x.Y)("",et),Z=(0,x.Y)("",en),y=(0,x.Y)(null,function(){return null}),_=(0,x.Y)("repl_image",function(){return null}),R=(0,x.Y)(null,function(){return null}),G=(0,x.Y)("",e.fileValidator),B=(0,x.Y)([],function(){return null}),U=(0,b.Z)(d),E=(0,x.Y)(!1,function(e){var t=U.current;return e&&(null==t?void 0:t.lastPublishedAt)?{message:"This Repl has already been published. Please unpublish before publishing as a Template."}:e||(null==t?void 0:t.publishedAs)!==T.O2.Template?void 0:{message:"This Repl has already been published as a Template. Please unpublish before publishing as a Repl."}}),X=function(){var e,t=(0,v._)((e=(0,f._)({},N,void 0),W.D(A,e)),2),n=t[0],r=t[1];function l(){return(l=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(l){switch(l.label){case 0:if(r.loading)return[2,{data:null,error:null}];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=l.sent()).data,error:O(t)}];case 3:return l.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:O(r),setReplViewSettings:function(e){return l.apply(this,arguments)}}}(),M=function(){var e,t=(0,v._)((e=(0,f._)({},L,void 0),W.D(z,e)),2),n=t[0],r=t[1];function l(){return(l=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(l){switch(l.label){case 0:if(r.loading)return[2,{data:null,error:null}];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=l.sent()).data,error:H(t)}];case 3:return l.sent(),[2,{data:null,error:"Something went wrong saving your Repl Tags"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:H(r),setReplTags:function(e){return l.apply(this,arguments)}}}(),j=function(){var e,t=(0,v._)((e=(0,f._)({},K,void 0),W.D($,e)),2),n=t[0],r=t[1];function l(){return(l=(0,h._)(function(e){return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(r.loading)return[2,{data:null,error:null}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:t.sent().data,error:null}];case 3:return[2,{data:null,error:J(t.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:r.error&&J(r.error),updateRepl:function(e){return l.apply(this,arguments)}}}(),er=(0,k.O)(),el=(0,I.r)(),ei=(null==d?void 0:null===(l=d.replViewSettings)||void 0===l?void 0:l.defaultView)&&Y(d.replViewSettings.defaultView)?d.replViewSettings.defaultView:"repl_image",eo=(0,b.Z)(g.setValue),ea=(0,b.Z)(Z.setValue),es=(0,b.Z)(B.setValue),eu=(0,b.Z)(y.setValue),ec=(0,b.Z)(R.setValue),ed=(0,b.Z)(_.setValue),ep=(0,b.Z)(G.setValue),eh=(0,b.Z)(E.setValue);(0,V.useEffect)(function(){var e,t,n,r;d&&(eh.current("Template"===d.publishedAs),ed.current(ei),ep.current(null!==(t=null===(e=d.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),eo.current(d.isRenamed?d.title:"",{preventTouch:!0}),ea.current(null!==(n=d.description)&&void 0!==n?n:"",{preventTouch:!0}),es.current(d.tags),eu.current(d.iconUrl.endsWith(".svg")?null:d.iconUrl),ec.current(null!==(r=d.imageUrl)&&void 0!==r?r:null))},[d,ec,eu,es,eo,ea,ei,ed,ep,eh]);var ef=(0,C.W)(y.setValue),eg=ef.previewUrl||y.value||(null==d?void 0:d.iconUrl)||(null==d?void 0:d.templateInfo.iconUrl),ev=null!==(s=null===(a=[u,g,Z,y,_,R,B,G,E].filter(function(e){return(e!==G||"repl_file"===_.value)&&e.error}))||void 0===a?void 0:null===(o=a[0])||void 0===o?void 0:null===(i=o.error)||void 0===i?void 0:i.message)&&void 0!==s?s:null;function em(){return(em=(0,h._)(function(){var e,t,n,r,l,i,o,a,s,u,c;return(0,m.Jh)(this,function(p){switch(p.label){case 0:if(!d)throw new q("Missing repl");if(t=d.title!==g.value,n=d.description!==Z.value,r=d.iconUrl!==y.value,l="repl_image"===_.value&&d.imageUrl!==R.value,i=G.value&&"repl_file"===_.value&&(null===(e=d.replViewSettings)||void 0===e?void 0:e.replFile)!==G.value,o=_.value&&ei!==_.value,a=!S()(d.tags,B.value),!(t||n||r))return[3,2];if(g.error||Z.error||y.error)throw new q;return[4,j.updateRepl({id:d.id,title:t?g.value:void 0,description:n?Z.value:void 0,iconUrl:r?y.value:void 0})];case 1:if((s=p.sent()).error)throw new Q(s.error);p.label=2;case 2:if(!(o||l||i))return[3,4];if("repl_image"===_.value&&R.error||"repl_file"===_.value&&G.error)throw new q;return[4,X.setReplViewSettings({replId:d.id,defaultView:"repl_image"===_.value?T.bV.ReplImage:T.bV.ReplFile,replImage:l?R.value:void 0,replFile:i?G.value:void 0})];case 3:if((u=p.sent()).error)throw new Q(u.error);p.label=4;case 4:if(!a)return[3,6];if(B.error)throw new q;return[4,M.setReplTags({replId:d.id,tags:B.value.map(function(e){return e.id})})];case 5:if((c=p.sent()).error)throw new Q(c.error);p.label=6;case 6:return[2]}})})).apply(this,arguments)}function eb(){return(eb=(0,h._)(function(){var t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:if(!d)throw new q("Missing repl");if(ev)throw new q(null!=ev?ev:"Something went wrong");if(!E.value)return[3,2];return[4,el.createDeployment({input:{replId:d.id,description:Z.value,iconUrl:eg||d.iconUrl}})];case 1:if((t=r.sent()).error)throw new ee(t.error);return(0,w.j)(w.U3.POST_MADE,{source:e.source,replType:"template_repl",title:g.value,description:Z.value,tags:B.value.map(function(e){return e.id}),defaultView:_.value}),[2];case 2:return[4,er.publish({input:{replId:d.id}})];case 3:if((n=r.sent()).error)throw new ee(n.error);return(0,w.j)(w.U3.POST_MADE,{source:e.source,replType:"regular_repl",title:g.value,description:Z.value,tags:B.value.map(function(e){return e.id}),defaultView:_.value}),[2]}})})).apply(this,arguments)}var ew=j.loading||X.loading||M.loading,eZ=j.error||X.error||M.error,ey=er.loading||el.loading,e_=er.error||el.error;return{selectedRepl:d,isReplLoading:c.loading,replLoadingError:c.error,replIdField:u,replTitleField:g,replDescriptionField:Z,iconUrlField:y,coverDefaultViewField:_,coverUrlField:R,coverFileField:G,tagsField:B,isTemplateField:E,replIconInput:ef,replIconUrl:eg,inputError:ev,save:function(){return em.apply(this,arguments)},isSaving:ew,savingError:eZ,publish:function(){return eb.apply(this,arguments)},isPublishing:ey,publishingError:e_,isPublished:p}}({replId:ex,fileValidator:(t=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!eK)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eK.stat(e)];case 2:if(!(t=n.sent()).exists||t.type!==ev.Tv.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return n.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),source:eG}),eT=eS.selectedRepl,eV=eS.isReplLoading,eI=eS.replLoadingError,ek=eS.replIdField,eB=eS.replTitleField,eU=eS.replDescriptionField,eP=eS.iconUrlField,eE=eS.tagsField,eF=eS.coverDefaultViewField,eD=eS.coverUrlField,eW=eS.coverFileField,eX=eS.isTemplateField,eL=eS.save,ez=eS.isSaving,eH=eS.savingError,eM=eS.publish,eN=eS.isPublishing,eA=eS.publishingError,eO=eS.isPublished,ej=(r=(n={repl:eT,currentUser:eC}).repl,u=n.currentUser,g=(p=(0,v._)((0,tM.qg)(),2))[0],Z=p[1],y=(0,tM.ic)(),R=(_=(0,v._)((0,V.useState)(function(){var e,t,n;return e=(0,tW.ZP)({onUnrecoverableError:(0,tH.Z)({throwBsod:Z,origin:"Publish: services/onUnrecoverableError"})}),t=(0,tz.Z)({container:e}),n=(0,tN.Z)({container:e,fs:t}),{container:e,fs:t,dotReplit:n}}),1)[0]).container,G=_.fs,B=_.dotReplit,E=(U=(0,v._)((0,V.useState)(function(){return R.getConnectionState()===tW.em.CONNECTED}),2))[0],X=U[1],M=(0,tX.b)(r?{repl:r,currentUser:u}:null),j=(0,tL.S)(),(0,V.useEffect)(function(){if(r&&M&&R.getConnectionState()===tW.em.DISCONNECTED)return R.connect({context:M,getMinimumRetryDelayMs:j}),function(){return R.close()}},[r,R,M]),(0,V.useEffect)(function(){return R.onConnectionStateChanged(function(e){X(e===tW.em.CONNECTED)})},[R]),{isConnected:E,container:R,fs:G,dotReplit:B,bsodId:null==g?void 0:g.eventId,devClearBsod:function(){return y()}}),eK=ej.fs,e$=ej.dotReplit,eY=ej.bsodId,eq=(0,v._)((0,V.useState)(0),2),eQ=eq[0],e0=eq[1],e1=tj[eQ],e2=eQ===tj.length-1,e4=(0,v._)((0,V.useState)({show:!1,isUpdate:!1}),2),e3=e4[0],e8=e4[1],e6=(0,v._)((0,V.useState)(function(){return Array(tj.length).fill(!1)}),2),e5=e6[0],e9=e6[1],e7=(0,V.useCallback)(function(e,t){e5[e]=t,e9(e5)},[e5]);(0,V.useEffect)(function(){eS.replTitleField.value&&eS.replDescriptionField.value?e7(0,!0):e7(0,!1),eS.tagsField.value.length>0?e7(1,!0):e7(1,!1),eS.iconUrlField.value?e7(2,!0):e7(2,!1),eS.coverDefaultViewField.value===l.ReplImage&&eS.coverUrlField.value||eS.coverDefaultViewField.value===l.ReplFile&&eS.coverFileField.value?e7(3,!0):e7(3,!1)},[e5,eS,e7]);var te=(ei=(el=(0,v._)((0,V.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],em=el[1],(0,V.useEffect)(function(){function e(){return(e=(0,h._)(function(){var e,t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e$.getConfig()];case 1:if((t=r.sent()).error)throw Error(t.errorMessage);return em({isLoading:!1,error:null,entryPoint:null!==(n=null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.entrypoint)&&void 0!==n?n:null}),[3,3];case 2:return r.sent(),em({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[e$]),(0,f._)({},ei));(0,V.useEffect)(function(){te.isLoading||!te.entryPoint||eW.value||eW.setValue(te.entryPoint)},[te.isLoading,te.entryPoint,eW]);var tt=(0,v._)((0,V.useState)(!1),2),tn=tt[0],tr=tt[1];(0,V.useEffect)(function(){tn||ex&&(eV||eO)||(tr(!0),(0,w.j)(w.U3.PUBLISH_SELECTED,{source:eG}))},[tn,eG,ex,eV,eO]);var tl=(0,b.Z)(!!((null==eT?void 0:eT.publishedAs)||(null==eT?void 0:eT.lastPublishedAt))),ti=(0,b.Z)(e1);if((0,V.useEffect)(function(){return function(){tl.current||(0,w.j)(w.U3.PUBLISH_FLOW_EXITED,{source:eG,lastSectionVisited:ti.current})}},[eG,tl,ti]),eY)return(0,o.tZ)(eg.Z,{});if(e3.show&&eT)return(0,o.tZ)(eR.q,{repl:eT,isUpdate:e3.isUpdate});var to={Basics:{hasError:!!(ek.error||eB.error||eU.error),isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([ek.validate(),eB.validate(),eU.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Tags:{hasError:!!eE.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eE.validate()];case 1:return[2,!e.sent()]}})})},Icon:{hasError:!!eP.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eP.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(eF.value===l.ReplImage?eD.error:eW.error),isValid:(0,h._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(eF.value!==l.ReplImage)return[3,2];return[4,eD.validate()];case 1:return e=!t.sent(),[3,4];case 2:return[4,eW.validate()];case 3:e=!t.sent(),t.label=4;case 4:return[2,e]}})})},Publishing:{hasError:!!eX.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eX.validate()];case 1:return[2,!e.sent()]}})})}},tu=to[e1].hasError,tc=to[e1].isValid,td=null!==(e_=tj.find(function(e){return to[e].hasError}))&&void 0!==e_?e_:null,th=null;eT?eI||eH||eA?th="Something went wrong - please try again":tu&&(th="Please fill out the the form"):th="Please select a Repl";var tf=!!(!eT||tu||eI||eV||ez||eN),tg=!!eX.value,tv=(eb=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(t=tf)return[3,2];return[4,tc()];case 1:t=!n.sent(),n.label=2;case 2:if(t)return[2];n.label=3;case 3:return n.trys.push([3,5,,6]),e0(e),[4,eL()];case 4:return n.sent(),[3,6];case 5:return n.sent(),[2];case 6:return[2]}})}),function(e){return eb.apply(this,arguments)}),tm=eQ>0;return(0,o.tZ)(er.Provider,{value:eS,children:(0,o.BX)(es.Tg,{css:[d.l0.borderRadius(8),d.l0.flex.row,d.l0.overflow("hidden"),(0,i._)({},(0,ef.et)("tabletMax"),{minWidth:850})],background:"default",dataCy:"publish-form-container",children:[(0,o.BX)(s.G,{css:[d.l0.colWithGap(12),d.l0.p(16),d.l0.minWidth(320),d.l0.flex.growAndShrink(1),(0,i._)({},(0,ef.et)("tabletMin"),{maxWidth:320})],children:[(0,o.tZ)(a.xv,{variant:"subheadBig",multiline:!1,children:eO?"Edit Publish Settings":"Publish ".concat(ex?"this":"a"," Repl")}),(0,o.BX)(tA,{onSubmit:(ew=(0,h._)(function(e){var t,n,r,l,i,o;return(0,m.Jh)(this,function(a){switch(a.label){case 0:if(e.preventDefault(),!e2)return[3,13];t=!0,n=!1,r=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),l=tj[Symbol.iterator](),a.label=2;case 2:if(t=(i=l.next()).done)return[3,5];return[4,to[i.value].isValid()];case 3:if(!a.sent())return[2];a.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return o=a.sent(),n=!0,r=o,[3,8];case 7:try{t||null==l.return||l.return()}finally{if(n)throw r}return[7];case 8:if(eO)return[3,10];return[4,eM()];case 9:return a.sent(),e8({show:!0,isUpdate:!1}),[3,12];case 10:return[4,eL()];case 11:a.sent(),e8({show:!0,isUpdate:!0}),a.label=12;case 12:return[3,14];case 13:tv(eQ+1),a.label=14;case 14:return[2]}})}),function(e){return ew.apply(this,arguments)}),css:[d.l0.colWithGap(16),d.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(s.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:tj.map(function(e,t){return(0,o.BX)(V.Fragment,{children:[0!==t&&(0,o.tZ)(eZ,{}),(0,o.tZ)(ey,{isActive:eQ===t,isComplete:e5[t],onClick:function(){return tv(t)},disabled:tf,children:e})]},e)})}),(0,o.BX)(s.G,{css:d.l0.flex.growAndShrink(1),children:["Basics"===e1&&(0,o.tZ)(eJ,{}),"Tags"===e1&&(0,o.tZ)(tD,{}),"Icon"===e1&&(0,o.tZ)(ts,{}),"Cover page"===e1&&(0,o.tZ)(ta,{fs:eK}),"Publishing"===e1&&(0,o.tZ)(tp,{})]}),(0,o.BX)(s.G,{children:[e2&&td&&td!==e1?(0,o.tZ)(ea.E,{colorway:"negative",icon:(0,o.tZ)(eh.Z,{}),text:"Please fix error in ".concat(td," section")}):null,eH?(0,o.tZ)(ea.E,{colorway:"negative",icon:(0,o.tZ)(eh.Z,{}),text:eH}):null,eA?(0,o.tZ)(ea.E,{colorway:"negative",icon:(0,o.tZ)(eh.Z,{}),text:eA}):null]}),(0,o.BX)(s.G,{css:[d.l0.rowWithGap(8),d.l0.align.center,tm?d.l0.justify.spaceBetween:d.l0.justify.end],children:[tm?(0,o.tZ)(eo.zx,{type:"button",iconLeft:(0,o.tZ)(ec.Z,{}),disabled:tf,onClick:function(){return tv(eQ-1)},text:"Back"}):null,ez?(0,o.tZ)(s.G,{css:[d.l0.rowWithGap(4),d.l0.color.foregroundDimmer],children:(0,o.tZ)(c.Z,{})}):null,(0,o.BX)(eu.u,{tooltip:th,placement:"bottom",isDisabled:!th,children:[!e2&&(0,o.tZ)(eo.zx,{type:"submit",colorway:"primary",iconLeft:(0,o.tZ)(ed.Z,{}),disabled:tf,text:"Next",dataCy:"publish-form-next-button"}),e2&&!eO?(0,o.tZ)(eo.zx,{type:"submit",colorway:"primary",css:[{boxShadow:"0px 0px 16px 0px ".concat(d.TV.accentPrimaryDimmer," !important")}],iconLeft:(0,o.tZ)(ep.Z,{}),disabled:!!(tf||td),text:eN?tg?"Submitting...":"Publishing...":tg?"Submit Template":"Publish to Community",dataCy:"publish-form-publish-button"}):null,e2&&eO?(0,o.tZ)(eo.zx,{type:"submit",colorway:"primary",iconLeft:(0,o.tZ)(ep.Z,{}),disabled:!!(tf||td),text:ez?"Saving...":"Save"}):null]})]})]})]}),(0,o.tZ)(tO,{user:eC})]})})}function t$(e){var t,n,r=e.replId,l=e.source,h=(0,p.NH)(),f=(null===(n=h.data)||void 0===n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?h.data.currentUser:null;return h.loading?(0,o.tZ)(s.G,{css:[d.l0.center,d.l0.p(32),d.l0.width(512),(0,i._)({},"@media (max-width: ".concat(u.j.tabletMin,"px)"),[{width:"100%"}])],children:(0,o.tZ)(c.Z,{})}):h.error||!f?(0,o.tZ)(s.G,{css:[d.l0.center,d.l0.p(32)],children:(0,o.tZ)(a.xv,{multiline:!1,children:"Something went wrong, please try again."})}):(0,o.tZ)(tK,{source:l,replId:r,currentUser:f})}},76819:function(e,t,n){n.d(t,{O:function(){return x},Z:function(){return _}});var r=n(41733),l=n(30509),i=n(63257),o=n(74985),a=n(43312),s=n(25770),u=n(4618),c=n(96345),d=n(2161),p=n(79378),h=n(38080),f=n(74833),g=n(56596),v=n(77187),m=n(29287),b=n(33988),w=n.n(b),Z=g.K.a,y=(0,a.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function _(e){var t=e.post,n=t.repl,i=t.user,a=n.isTemplate?"Template":"Repl";return(0,o.BX)(g.G,{css:m.l0.colWithGap(8),children:[(0,o.BX)(g.G,{css:[m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween],children:[(0,o.tZ)(g.G,{css:[m.l0.flex.row,m.l0.align.center],children:(0,o.BX)(g.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,o.tZ)(p.q,{size:24,username:i.username,src:i.image}),(0,o.BX)(g.G,{css:m.l0.rowWithGap(4),children:[(0,o.tZ)(f.xv,{multiline:!1,children:i.username}),(0,o.BX)(f.xv,{color:"dimmest",multiline:!1,children:[" ","published a ",a]})]})]})}),(0,o.tZ)(v.Z,{size:12})]}),(0,o.BX)(h.Tg,{css:[m.l0.borderRadius(8),m.l0.colWithGap(8),m.l0.p(8),m.l0.position.relative,{border:"1px solid "+m.TV.outlineDimmest}],children:[(0,o.tZ)(g.G,{css:[m.l0.colWithGap(16)],children:(0,o.tZ)(g.G,{css:[m.l0.rowWithGap(16),m.l0.justify.spaceBetween],children:(0,o.BX)(g.G,{css:[m.l0.rowWithGap(8),m.l0.align.start,m.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(d.ZP,{iconUrl:n.iconUrl,alt:n.title,size:84,css:[m.l0.backgroundColor.backgroundHigher]}),(0,o.BX)(g.G,{css:[m.l0.flex.growAndShrink(1),m.l0.colWithGap(4)],children:[(0,o.BX)(g.G,{css:[m.l0.flex.row],children:[(0,o.tZ)(w(),(0,l._)((0,r._)({legacyBehavior:!0,passHref:!0},(0,s.j3)(n)),{children:(0,o.tZ)(Z,{css:[{color:"inherit"},y,m.l0.flex.growAndShrink(1),m.l0.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,o.tZ)(f.xv,{variant:"subheadBig",multiline:!1,children:n.title})})})),n.isTemplate?(0,o.tZ)(R,{}):null]}),n.description?(0,o.tZ)(f.xv,{color:"dimmer",maxLines:2,multiline:!1,children:n.description}):null]})]})})}),(0,o.BX)(g.G,{css:[m.l0.rowWithGap(8),m.l0.justify.spaceBetween,m.l0.minHeight(24)],children:[(0,o.tZ)(c.Z,{repl:{id:n.id,publicForkCount:0,likeCount:0,commentCount:0}}),(0,o.tZ)(g.G,{css:[m.l0.position.relative,{zIndex:1},m.l0.flex.shrink(1)],children:(0,o.tZ)(u.Vs,{tags:n.tags,onTagClick:function(e){return e.preventDefault()}})})]})]})]})}var R=function(){return(0,o.tZ)("span",{css:[m.l0.display.inlineFlex,m.l0.align.center,m.l0.height(24),m.l0.px(8),m.l0.borderRadius(16),m.l0.backgroundColor.yellowDimmest,m.l0.color.yellowStrongest,m.l0.justify.center,m.l0.ml(8),{fontSize:m.TV.fontSizeSmall,lineHeight:m.TV.fontSizeSmall}],children:"Template"})},x=function(){return(0,o.BX)(g.G,{css:[m.l0.colWithGap(8),{opacity:.5}],children:[(0,o.BX)(g.G,{css:[m.l0.flex.row,m.l0.align.center,m.l0.flex.grow(1),m.l0.justify.spaceBetween],children:[(0,o.BX)(g.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,o.tZ)("span",{css:[m.l0.backgroundColor.backgroundHigher,m.l0.width(24),m.l0.height(24),m.l0.borderRadius(16)]}),(0,o.tZ)("span",{css:[m.l0.backgroundColor.backgroundHigher,m.l0.width(126),m.l0.height(12),m.l0.borderRadius(4)]})]}),(0,o.tZ)("span",{css:[m.l0.backgroundColor.backgroundHigher,m.l0.width(12),m.l0.height(12),m.l0.borderRadius(8)]})]}),(0,o.BX)(g.G,{css:[m.l0.backgroundColor.backgroundDefault,m.l0.width("100%"),m.l0.height(132),m.l0.borderRadius(8),m.l0.colWithGap(8),m.l0.p(8)],children:[(0,o.BX)(g.G,{css:m.l0.rowWithGap(8),children:[(0,o.tZ)("span",{css:[m.l0.backgroundColor.backgroundHigher,m.l0.height(84),m.l0.width(84),m.l0.borderRadius(4)]}),(0,o.BX)(g.G,{css:[m.l0.colWithGap(12),m.l0.pt(4),m.l0.flex.grow(1)],children:[(0,o.tZ)("span",{css:[m.l0.backgroundColor.backgroundHigher,m.l0.width(80),m.l0.height(16),m.l0.borderRadius(4)]}),(0,o.BX)(g.G,{css:m.l0.colWithGap(8),children:[(0,o.tZ)("span",{css:[m.l0.backgroundColor.backgroundHigher,m.l0.width("100%"),m.l0.height(12),m.l0.borderRadius(4)]}),(0,o.tZ)("span",{css:[m.l0.backgroundColor.backgroundHigher,m.l0.width("80%"),m.l0.height(12),m.l0.borderRadius(4)]})]})]})]}),(0,o.BX)(g.G,{css:[m.l0.flex.row,m.l0.flex.grow(1),m.l0.align.center,m.l0.justify.spaceBetween],children:[(0,o.tZ)(g.G,{css:m.l0.rowWithGap(16),children:(0,i._)([,,,]).map(function(e,t){return(0,o.BX)(g.G,{css:[m.l0.rowWithGap(4),m.l0.align.center],children:[(0,o.tZ)("span",{css:[m.l0.backgroundColor.backgroundHigher,m.l0.width(12),m.l0.height(12),m.l0.borderRadius(8)]}),(0,o.tZ)("span",{css:[m.l0.backgroundColor.backgroundHigher,m.l0.width(16),m.l0.height(8),m.l0.borderRadius(2)]})]},t)})}),(0,o.tZ)(g.G,{css:m.l0.rowWithGap(4),children:(0,i._)([,,]).map(function(e,t){return(0,o.tZ)("span",{css:[m.l0.backgroundColor.backgroundHigher,m.l0.width(48),m.l0.height(24),m.l0.borderRadius(16)]},t)})})]})]})]})}},48459:function(e,t,n){n.d(t,{q:function(){return S}});var r=n(42516),l=n(41733),i=n(30509),o=n(66626),a=n(74985),s=n(25770),u=n(10041),c=n(54085),d=n(70002),p=n(15146),h=n(38080),f=n(74833),g=n(30983),v=n(56596),m=n(29479),b=n(12874),w=n(41859),Z=n(90409),y=n(29287),_=n(75582),R=n(33988),x=n.n(R),C=n(50959),G=function(e){var t=e.url,n=e.successMessageDurationMs,r=void 0===n?1500:n,l=(0,o._)((0,C.useState)(!1),2),i=l[0],s=l[1],c=(0,C.useRef)(null),d=function(){s(!0),c.current=setTimeout(function(){s(!1)},r)};return(0,C.useEffect)(function(){return function(){c.current&&clearTimeout(c.current)}},[]),(0,a.tZ)(g.u,{isOpen:i,placement:"bottom",tooltip:i?"Copied!":"Copy link",delay:"none",children:(0,a.tZ)(p.hU,{alt:"Copy link",tooltipHidden:!1,onClick:function(){t&&((0,u.Z)(t),d())},children:(0,a.tZ)(w.Z,{})})})},S=function(e){var t=e.repl,n=e.isUpdate,o=(0,s.j3)(t),u=t.url?(0,s.QB)(t):"",p=t.publishedAs===_.O2.Template,g=(0,c.Z)({text:"Check out what I just published on Replit: ".concat(t.title),url:u});return(0,a.BX)(h.Tg,{background:"default",css:[y.l0.borderRadius(8),y.l0.overflow("hidden"),y.l0.colWithGap(16),y.l0.width(510),y.l0.p(16),y.l0.flex.growAndShrink(1),(0,r._)({},"@media (max-width: ".concat(m.j.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,a.BX)(v.G,{css:[y.l0.colWithGap(16)],children:[(0,a.BX)(f.xv,{variant:"subheadBig",multiline:!1,children:[p?"Template":"Repl"," ",n?"updated":"published","!"]})," ",(0,a.BX)(v.G,{css:[y.l0.colWithGap(4)],children:[(0,a.tZ)(f.xv,{variant:"small",css:[y.l0.color.foregroundDimmer],multiline:!1,children:"Cover page link"}),(0,a.BX)(v.G,{css:[y.l0.rowWithGap(4),y.l0.align.center],children:[(0,a.tZ)(x(),(0,i._)((0,l._)({legacyBehavior:!0},o),{css:[y.l0.flex.growAndShrink(1)],children:(0,a.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:u})})),(0,a.tZ)(G,{url:u})]})]})]}),(0,a.BX)(v.G,{css:[y.l0.rowWithGap(12),y.l0.justify.end,(0,r._)({alignItems:"flex-end"},y.BC.max("mobileMax"),[y.l0.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],children:[(0,a.tZ)(d.Z,{prefetch:!1,href:g,iconLeft:(0,a.tZ)(Z.Z,{}),text:"Share to Twitter",target:"_blank",css:[(0,r._)({},y.BC.max("mobileMax"),[y.l0.mr(0)])]}),(0,a.tZ)(d.Z,{iconRight:(0,a.tZ)(b.Z,{}),text:p?"Go to Templates":"Go to Community",href:p?{pathname:"/templates/templates"}:{pathname:"/postsFeed",query:{order:"new"}},as:p?"/templates":"/community/all"})]})]})}},66555:function(e,t,n){n.d(t,{r:function(){return b}});var r=n(27387),l=n(66626),i=n(96583),o=n(41733),a=n(21262),s=n(71440),u=n(56353),c=n(99165);function d(){var e=(0,a._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,a._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var h={},f=(0,s.Ps)(d(),u.FW),g=(0,s.Ps)(p(),u.FW),v="Something went wrong publishing your Template";function m(e){if(e.error)return e.error.message||v;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return v}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return v}}}function b(){var e,t,n,a,s=(0,l._)((e=(0,o._)({},h,void 0),c.D(f,e)),2),u=s[0],d=s[1],p=(0,l._)((t=(0,o._)({},h,void 0),c.D(g,t)),2),b=p[0],w=p[1];return{createRelease:(n=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,d.loading||w.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,b({refetchQueries:["ReplEnvironmentHeader"],variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:m(n)}];case 3:return r.sent(),[2,{data:null,error:v}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),createDeployment:(a=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,d.loading||w.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u({variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:m(n)}];case 3:return r.sent(),[2,{data:null,error:v}];case 4:return[2]}})}),function(e){return a.apply(this,arguments)}),data:d.data||w.data,loading:d.loading||w.loading,error:m(d||w)}}},71565:function(e,t,n){n.d(t,{W:function(){return m},Z:function(){return b}});var r=n(41733),l=n(30509),i=n(66626),o=n(74985),a=n(85805),s=n(43973),u=n(2161),c=n(38080),d=n(56596),p=n(52924),h=n(88936),f=n(6620),g=n(29287),v=n(50959);function m(e){var t=(0,i._)((0,v.useState)(null),2),n=t[0],o=t[1],s=(0,i._)((0,v.useState)(null),2),u=s[0],c=s[1],d=(0,a.Z)({onUpload:function(t){var n=t.url;o(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;c(null),o(t)},onError:function(e){o(null),c(e.message)}}),p=(0,v.useCallback)(function(){return c(null)},[]);return(0,l._)((0,r._)({},d),{error:u,clearError:p,previewUrl:n})}function b(e){var t=(0,v.useRef)(null),n=e.size||48;return(0,o.BX)(d.G,{css:[g.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,o.BX)(o.HY,{children:[(0,o.tZ)(u.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,o.tZ)(c.Tg,{className:"surface",elevated:!0,css:[g.l0.borderRadius(8),g.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,o.tZ)(d.G,{className:"icon",css:[g.l0.coverContainer,g.l0.center,g.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,o.tZ)(h.Z,{}):(0,o.tZ)(p.Z,{})})]}):(0,o.tZ)(d.G,{css:[g.l0.center,g.l0.width(n),g.l0.height(n),g.l0.borderRadius(8),g.l0.color.foregroundDimmer,{border:"1px dashed "+g.TV.outlineDefault,"&:hover":{color:g.TV.accentPrimaryDefault,borderColor:g.TV.accentPrimaryDefault}}],children:(0,o.tZ)(f.Z,{})}),(0,o.tZ)("input",{css:[[g.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:t,accept:s.W9.join(","),type:"file",onChange:function(t){var n=t.target,r=n.validity,l=n.files;if(r.valid){var i=l?l[0]:null;i&&e.onUpload(i)}}})]})}}}]);
//# sourceMappingURL=4895-49d72dba599de033.js.map