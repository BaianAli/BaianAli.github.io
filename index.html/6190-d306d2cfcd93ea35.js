!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="44331744-eca8-418c-96c7-c6f280d5cf58",n._sentryDebugIdIdentifier="sentry-dbid-44331744-eca8-418c-96c7-c6f280d5cf58")}catch(n){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"6af6db66"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6190],{58378:function(n,e,r){r.d(e,{Fh:function(){return m},IN:function(){return D},s7:function(){return _}});var t=r(41733),i=r(21262),o=r(71440),u=r(19762),a=r(58995),c=r(99165);function s(){var n=(0,i._)(["\n  fragment HostingTierReplPowerUps on Repl {\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        hostingTier {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return s=function(){return n},n}function l(){var n=(0,i._)(["\n  fragment HostingTierPowerUpCostDetails on PowerUpCostsType {\n    hostingTierE2Micro {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Small {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Medium {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierN1Custom1_4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard2 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n    hostingTierE2Standard4 {\n      cyclesCostNow\n      cyclesCostRecurring\n      methodOfPayment\n      explanation\n    }\n  }\n"]);return l=function(){return n},n}function d(){var n=(0,i._)(["\n  fragment HostingTierPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      __typename\n      ... on PowerUpCostsType {\n        ...HostingTierPowerUpCostDetails\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return n},n}function p(){var n=(0,i._)(["\n  query HostingTierPowerUp($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          __typename\n        }\n        ...HostingTierReplPowerUps\n        ...HostingTierPowerUpCosts\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return n},n}function f(){var n=(0,i._)(["\n  mutation SetHostingTier($input: SetHostingTierInput!) {\n    setHostingTier(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on SetHostingTierResult {\n        repl {\n          ... on Repl {\n            ...HostingTierReplPowerUps\n            ...HostingTierPowerUpCosts\n          }\n        }\n        currentUser {\n          ...PowerUpMutationReturnFields\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return f=function(){return n},n}var g={},m=(0,o.Ps)(s()),y=(0,o.Ps)(l()),v=(0,o.Ps)(d(),y),h=(0,o.Ps)(p(),m,v);function _(n){var e=(0,t._)({},g,n);return a.a(h,e)}var C=(0,o.Ps)(f(),m,v,u.E_);function D(n){var e=(0,t._)({},g,n);return c.D(C,e)}},63388:function(n,e,r){r.d(e,{BX:function(){return R},VR:function(){return S},hD:function(){return T}});var t,i=r(42516),o=r(41733),u=r(30509),a=r(74985),c=r(60427),s=r(37996),l=r(15146),d=r(74833),p=r(30983),f=r(56596),g=r(93918),m=r(18514),y=r(88936),v=r(56335),h=r(67337),_=r(20573),C=r(29287),D=r(16572),b=r(91757),w=r(75582),S=(t={},(0,i._)(t,w.Fe.Suspended,{title:"Paused",color:C.TV.greyDefault,colorway:"grey",icon:(0,a.tZ)(v.Z,{})}),(0,i._)(t,w.Fe.UpdatingTier,{title:"Updating tier",color:C.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(h.Z,{})}),(0,i._)(t,w.Fe.Suspending,{title:"Pausing",color:C.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(h.Z,{})}),(0,i._)(t,w.Fe.Resuming,{title:"Resuming",color:C.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(h.Z,{})}),(0,i._)(t,w.Fe.Pending,{title:"Provisioning",color:C.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(h.Z,{})}),(0,i._)(t,w.Fe.Building,{title:"Building",color:C.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(h.Z,{})}),(0,i._)(t,w.Fe.Running,{title:"Bundling",color:C.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(h.Z,{})}),(0,i._)(t,w.Fe.Promoting,{title:"Promoting",color:C.TV.orangeStronger,colorway:"orange",icon:(0,a.tZ)(h.Z,{})}),(0,i._)(t,w.Fe.Failed,{title:"Failed",color:C.TV.accentNegativeDefault,colorway:"negative",icon:(0,a.tZ)(_.Z,{})}),(0,i._)(t,w.Fe.Success,{title:"Deployed",color:C.TV.accentPositiveDefault,colorway:"positive"}),t);function R(n){switch(n){case w.Fe.Building:case w.Fe.Promoting:case w.Fe.Running:case w.Fe.Pending:return"is deploying";case w.Fe.Resuming:return"is resuming";case w.Fe.Suspending:return"is pausing";case w.Fe.Failed:return"failed to deploy";case w.Fe.Success:return"deployed";case w.Fe.Suspended:return"paused";case w.Fe.UpdatingTier:return"is updating tier"}}var P=(0,g.X)({root:[C.l0.rowWithGap(0),C.l0.flex.shrink(1)],dot:[C.l0.width("8px"),C.l0.height("8px"),C.l0.borderRadius("full"),C.l0.flex.shrink(0),C.l0.pr(4)],name:[C.l0.color.foregroundDefault,C.l0.fontWeight.medium],item:[C.l0.rowWithGap(8),C.l0.pr(4),C.l0.align.center,C.l0.flex.growAndShrink(1)],itemMainText:[C.l0.flex.growAndShrink(1),C.l0.align.center],itemRight:[C.l0.textAlign.right],itemContent:[C.l0.rowWithGap(8),C.l0.flex.growAndShrink(1),C.l0.align.center]}),T=function(n){var e=n.onClick,r=(0,c.kW)(),t=(0,c.$y)();if(r===s.z.Loading||!t)return(0,a.tZ)(y.Z,{size:12});var i=t.status,g=(i in S?S[i]:{color:C.TV.greyDefault}).color;return(0,a.tZ)(f.G,{css:P.root,children:(0,a.BX)(f.G,{css:P.item,children:[(0,a.tZ)(f.G,{tag:"span",css:P.dot,style:{backgroundColor:g,boxShadow:"0 0 12px ".concat(g)}}),(0,a.tZ)(f.G,{css:P.itemMainText,children:(0,a.BX)(d.xv,{multiline:!1,children:[(0,a.tZ)("span",{css:P.name,children:t.user.displayName+" "}),R(i)+" ",!function(n){switch(n){case w.Fe.Building:case w.Fe.Promoting:case w.Fe.Running:case w.Fe.Pending:case w.Fe.Failed:case w.Fe.Success:return!0;case w.Fe.Resuming:case w.Fe.Suspending:case w.Fe.Suspended:case w.Fe.UpdatingTier:return!1}}(i)?null:(0,a.tZ)(p.u,{tooltip:(0,b.Z)(new Date(t.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(n,e){return(0,a.tZ)("span",(0,u._)((0,o._)({},n),{ref:e,children:(0,D.Z)(new Date(t.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,a.tZ)(f.G,{css:P.itemRight,children:(0,a.tZ)(l.hU,{alt:"View deploy logs",onClick:e,children:(0,a.tZ)(m.Z,{})})})]})})}},20708:function(n,e,r){r.d(e,{u:function(){return o}});var t=r(21262);function i(){var n=(0,t._)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return i=function(){return n},n}var o=(0,r(71440).Ps)(i())},92741:function(n,e,r){r.d(e,{Bz:function(){return f},Iy:function(){return p},P3:function(){return s},Q5:function(){return c},QO:function(){return d},SF:function(){return l},ZG:function(){return a}});var t=r(12285),i=r(4955),o=r(14105),u=r(9670),a=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="RunCommandNotFoundError",n.message="Could not find run command",n}return r}((0,o._)(Error)),c=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="SubdomainNotFoundError",n.message="Could not find subdomain",n}return r}((0,o._)(Error)),s=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="AppTypeFoundError",n.message="Could not find app type",n}return r}((0,o._)(Error)),l=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="PublicDirNotFoundError",n.message="Could not find public directory",n}return r}((0,o._)(Error)),d=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="ReplOfflineError",n.message="Repl is offline",n}return r}((0,o._)(Error)),p=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="InvalidTimezoneError",n}return r}((0,o._)(Error)),f=function(n){"use strict";(0,i._)(r,n);var e=(0,u._)(r);function r(){var n;return(0,t._)(this,r),n=e.apply(this,arguments),n.name="CrontabNotFoundError",n}return r}((0,o._)(Error))},60427:function(n,e,r){r.d(e,{jd:function(){return nU},CK:function(){return K},My:function(){return nn},bA:function(){return Y},l:function(){return ne},_U:function(){return nT},rm:function(){return nV},XA:function(){return nx},$y:function(){return nv},ev:function(){return nD},Sl:function(){return nf},hn:function(){return nc},pn:function(){return n_},kW:function(){return nu},am:function(){return np},H7:function(){return nl},v5:function(){return nt},XZ:function(){return nr},gg:function(){return nA},l9:function(){return ng},U:function(){return nE},t7:function(){return ni},m8:function(){return nH},FN:function(){return nm},mF:function(){return nO}});var t,i,o,u=r(27387),a=r(41733),c=r(30509),s=r(66626),l=r(96583),d=r(7444),p=r(50782),f=r(82419),g=r(75582),m=r(64461),y=r(90234),v=r(50959),h=r(23211),_=r(8668),C=r(14207),D=r(92741),b=r(3720),w=r(21262),S=r(71440),R=r(58378),P=r(4927),T=r(58995),E=r(78711),F=r(293),N=r(99165);function U(){var n=(0,w._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return U=function(){return n},n}function H(){var n=(0,w._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    lang {\n      id\n      displayName\n    }\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n    ...HostingTierReplPowerUps\n  }\n  ","\n  ","\n"]);return H=function(){return n},n}function I(){var n=(0,w._)(["\n  query DeploymentSession($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n    }\n  }\n  ","\n"]);return I=function(){return n},n}function Z(){var n=(0,w._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n      }\n    }\n  }\n"]);return Z=function(){return n},n}function x(){var n=(0,w._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return x=function(){return n},n}function B(){var n=(0,w._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          ...HostingTierReplPowerUps\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return B=function(){return n},n}function O(){var n=(0,w._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return O=function(){return n},n}var z={},V=(0,S.Ps)(U(),P.uC,P.MX),A=(0,S.Ps)(H(),V,R.Fh),k=(0,S.Ps)(I(),A),$=(0,S.Ps)(Z()),M=(0,S.Ps)(x(),P.MX,P.uC),L=(0,S.Ps)(B(),R.Fh,V),J=(0,S.Ps)(O(),P.MX);function X(){return(X=(0,u._)(function(n){var e,r,t,i,o,u,a,c,s,d,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(e=n.command,r=n.replId,t=n.buildId,i=n.machineConfigurationId,o=n.maxMachineInstances,!b.l)throw Error("expected apolloClient to be initialized");return[4,b.l.mutate({mutation:L,variables:{input:{command:e,replId:r,buildId:t,machineConfigurationId:i,maxMachineInstances:o}}})];case 1:if(null===(u=(s=l.sent()).errors)||void 0===u?void 0:u.length)throw Error(s.errors.map(function(n){return n.message}).join(", "));if((null===(c=s.data)||void 0===c?void 0:null===(a=c.sendDeploymentLifecycleCommand)||void 0===a?void 0:a.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null===(p=s.data)||void 0===p?void 0:null===(d=p.sendDeploymentLifecycleCommand)||void 0===d?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function G(){return(G=(0,u._)(function(n){var e,r,t,i,o,u,a,c;return(0,l.Jh)(this,function(s){switch(s.label){case 0:if(e=n.buildId,r=n.targetDeploymentId,!b.l)throw Error("expected apolloClient to be initialized");return[4,b.l.mutate({mutation:J,variables:{input:{buildId:e,targetDeploymentId:r}}})];case 1:if(null===(t=(u=s.sent()).errors)||void 0===t?void 0:t.length)throw Error(u.errors.map(function(n){return n.message}).join(", "));if((null===(o=u.data)||void 0===o?void 0:null===(i=o.failHostingBuild)||void 0===i?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null===(c=u.data)||void 0===c?void 0:null===(a=c.failHostingBuild)||void 0===a?void 0:a.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})})).apply(this,arguments)}var W=r(64420),Q=r(37996),j=r(52932),q=r(40028),K=(0,y.cn)({}),Y=(0,y.cn)({}),nn=(0,y.cn)({}),ne=(0,y.cn)({});function nr(){return(0,W.Hg)(Y)}function nt(){return(0,W.Hg)(nn)}function ni(){return(0,W.Hg)(ne)}var no=(0,y.cn)(Q.z.Loading);function nu(){return(0,W.Hg)(no)}var na=(0,y.cn)(void 0);function nc(){return(0,W.Hg)(na)}var ns=(0,y.cn)(void 0);function nl(){return(0,W.Hg)(ns)}var nd=(0,y.cn)(void 0);function np(){return(0,W.Hg)(nd)}function nf(n){var e,r,t,i=(e=(0,a._)({},z,{variables:{replId:n}}),T.a(k,e)),o=i.data,u=i.refetch,c=(null==o?void 0:o.repl.__typename)==="Repl"?o.repl:null,s=(null==c?void 0:c.powerUps.__typename)==="ReplPowerUpTypes"?c.powerUps:null,l=(null==c?void 0:null===(r=c.owner)||void 0===r?void 0:r.__typename)==="Team";return{hostingTier:null!==(t=null==s?void 0:s.hostingTier)&&void 0!==t?t:null,isTeamRepl:l,refetch:u}}function ng(n){return!!nf(n).isTeamRepl}function nm(n){return!!nf(n).hostingTier}var ny=(0,y.cn)(void 0);function nv(){return(0,W.Hg)(ny)}var nh=(0,y.cn)(void 0);function n_(){return(0,W.Hg)(nh)}var nC=(0,y.cn)(void 0);function nD(){return(0,W.Hg)(nC)}var nb=(0,y.cn)(null,function(n,e){e(na,void 0),e(ns,void 0),e(ny,void 0),e(nh,void 0),e(no,Q.z.Ready)}),nw=(0,y.cn)(null,function(n,e,r){var t,i,o="Repl"===r.repl.__typename?r.repl:null;if(o){e(nd,{id:o.lang.id,displayName:o.lang.displayName,isVnc:!!o.config.isVnc});var u=o.hostingDeployment;if(u){if("HostingDeployment"!==u.__typename)return e(nC,"Unexpected hosting deployment typename: ".concat(u.__typename));if(e(na,u.id),e(ny,u.currentBuild),e(ns,u.replitAppSubdomain||(0,_.Jw)({replSlug:o.slug,username:null===(i=o.owner)||void 0===i?void 0:i.username})),u.inProgressBuild){e(nh,u.inProgressBuild),e(no,Q.z.Deploying);return}return void e(no,(0,j.Zx)(u.currentBuild.status))}e(ns,(0,_.Jw)({replSlug:o.slug,username:null===(t=o.owner)||void 0===t?void 0:t.username})),e(no,Q.z.Ready)}});function nS(){var n,e=(0,W.$X)(nw),r=(0,W.$X)(nI);return(0,s._)((n=(0,a._)({},z,{fetchPolicy:"no-cache",onCompleted:e,onError:function(n){r(n.message)}}),E.t(k,n)),1)[0]}var nR=(0,y.cn)(null,function(n,e,r){if("HostingBuildDeployStatusAction"===r.__typename){var t=n(no),i=n(nh),o=n(ny),u=r.status;if(t===Q.z.Deploying){if(!i){e(nI,"No deployment in progress found");return}e(nh,(0,m.Uy)(i,function(n){n.status=u})),u!==g.Fe.Success&&u!==g.Fe.Failed||(e(nh,void 0),u!==g.Fe.Success&&o||e(ny,(0,m.Uy)(i,function(n){n.status=u,n.hasImageTag=i.provider!==g.r4.Static&&u===g.Fe.Success})))}else if(t===Q.z.ProcessingLifecycleCommand){if(!o){e(nI,"No current build found");return}e(ny,(0,m.Uy)(o,function(n){n.status=u}))}e(no,(0,j.Zx)(u)),r.message&&u===g.Fe.Failed&&e(nI,r.message)}}),nP=(0,y.cn)(null);function nT(){return(0,W.Hg)(nP)}function nE(n){var e=(0,W.yL)(nP),r=(0,d.Z)(n);(0,v.useEffect)(function(){return e.subscribe(function(n){n&&r.current(n)})},[e,r])}var nF=(0,y.cn)(function(n){var e,r;switch(n(no)){case Q.z.Deploying:return null===(e=n(nh))||void 0===e?void 0:e.id;case Q.z.ProcessingLifecycleCommand:return null===(r=n(ny))||void 0===r?void 0:r.id;default:return}}),nN=(0,y.cn)(null,(t=(0,u._)(function(n,e,r){var t;return(0,l.Jh)(this,function(n){return(t=r.data.data)&&(e(nR,t.hostingBuildDeployActionUpdates),e(nP,t.hostingBuildDeployActionUpdates)),[2]})}),function(n,e,r){return t.apply(this,arguments)}));function nU(n){var e,r,t,i,o,u,c;return e=n.replId,r=nS(),t=(0,W.$X)(nN),i=(0,W.$X)(nI),(0,v.useEffect)(function(){r({variables:{replId:e}})},[r,e]),u={variables:{input:{buildId:null!=(o=(0,W.Hg)(nF))?o:""}},skip:!o,onData:t,onError:function(n){i(n.message)}},c=(0,a._)({},z,u),F.m($,c),null}function nH(){var n=(0,p.Z)(),e=nS(),r=(0,W.$X)(no);return(0,v.useCallback)(function(){return r(Q.z.Loading),e({variables:{replId:n}})},[e,r,n])}var nI=(0,y.cn)(null,function(n,e,r){e(nC,r)}),nZ=(0,y.cn)(null,function(n,e,r){var t,i=r.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename){e(nI,i.message);return}e(nh,i.build),e(na,i.targetDeployment.id),e(ns,null!==(t=i.targetDeployment.replitAppSubdomain)&&void 0!==t?t:void 0),e(no,Q.z.Deploying)}});function nx(){var n,e,r=(0,p.Z)(),t=nc(),i=nt(),o=(0,W.Hg)(K),c=nr(),d=(0,s._)((n=(0,a._)({},z,void 0),N.D(M,n)),1)[0],m=(0,W.$X)(nZ),y=(0,W.$X)(nI),b=(0,W.$X)(no),w=(0,W.XD)(nh),S=nv();return(0,v.useCallback)((e=(0,u._)(function(n){var e,u,a,s,p,v,R,P,T,E,F,N,U,H,I;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(e=n.envVars,u=n.subdomain,a=n.machineConfigurationId,s=n.maxMachineInstances,p=n.config,v=n.machineJob,w())return y("Deployment already in progress"),[2];l.label=1;case 1:return l.trys.push([1,5,,6]),b(Q.z.Preparing),[4,(0,C.$f)(i)];case 2:if(R=l.sent(),T=(P=p||R).buildCommand,E=P.runCommand,F=P.publicDir,N=P.ignorePorts,!(U=S?function(n){var e=n.provider,r=n.ignorePorts;switch(e){case g.r4.Static:return g.Vp.Static;case g.r4.CloudRun:return g.Vp.CloudRun;case g.r4.Cron:return g.Vp.Cron;default:return r?g.Vp.Worker:g.Vp.Server}}({provider:null==S?void 0:S.provider,ignorePorts:!!N}):P.appType))throw new D.P3;if(!u)throw new D.Q5;switch(U){case g.Vp.Static:if(!(0,_.Ar)(F))throw new D.SF;break;case g.Vp.Worker:case g.Vp.Server:case g.Vp.CloudRun:case g.Vp.Cron:if(!(0,_.Ar)(E))throw new D.ZG;if(U===g.Vp.Cron){if(!(null==v?void 0:v.crontab)||""===v.crontab)throw new D.Bz("Schedule cannot be empty.");if(!(0,f.isValidCron)(v.crontab))throw new D.Bz("Invalid schedule. Must be a valid cron expression.");if(!(null==v?void 0:v.timezone)||""===v.timezone)throw new D.Iy("Timezone cannot be empty.");if(!(0,h.lb)(v.timezone))throw new D.Iy("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,q.Z)(U)}return[4,(0,C.OD)({buildCommand:T,runCommand:E,appType:U,publicDir:F,ignorePorts:N},R,{dotReplit:i,fs:c,container:o})];case 3:return l.sent(),H=(0,j.oU)(U),[4,d({variables:{input:{replId:r,targetDeploymentId:t,targetMachineConfigurationId:a,maxMachineInstances:s,commands:{build:T,run:E||""},envVars:e,subdomain:u,provider:H,appType:U,context:"workspace",machineJob:v}},onCompleted:m})];case 4:return l.sent(),[3,6];case 5:throw I=l.sent(),b(Q.z.Ready),I;case 6:return[2]}})}),function(n){return e.apply(this,arguments)}),[d,m,y,b,w,t,r,o,c,i])}var nB=(0,y.cn)(null,(i=(0,u._)(function(n,e,r){var t,i,o,u,s,d,p,f;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(t=r.args,i=r.replId,o=void 0,(u=t.command)===g.Qc.UpdateMachineConfiguration){if(!(s=n(ny)))return e(nI,"No current build found"),[2];if(!t.machineConfigurationId)return e(nI,"No machine configuration found"),[2];(d=(0,j.Ti)(u))&&(e(ny,(0,m.Uy)(s,function(n){n.status=d})),e(no,(0,j.Zx)(d)))}if(u===g.Qc.Resume||u===g.Qc.Suspend){if(!(p=n(ny)))return e(nI,"No current build found"),[2];o=p.id,(f=(0,j.Ti)(u))&&(e(ny,(0,m.Uy)(p,function(n){n.status=f})),e(no,(0,j.Zx)(f)))}l.label=1;case 1:return l.trys.push([1,3,,4]),[4,function(n){return X.apply(this,arguments)}((0,c._)((0,a._)({},t),{buildId:o,replId:i}))];case 2:return l.sent(),u===g.Qc.Destroy&&e(nb),[3,4];case 3:return e(nI,l.sent().message),[3,4];case 4:return[2]}})}),function(n,e,r){return i.apply(this,arguments)}));function nO(){var n,e=(0,p.Z)(),r=(0,W.$X)(nB);return(0,v.useCallback)((n=(0,u._)(function(n){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return[4,r({replId:e,args:n})];case 1:return t.sent(),[2]}})}),function(e){return n.apply(this,arguments)}),[r,e])}var nz=(0,y.cn)(null,(o=(0,u._)(function(n,e){var r,t,i;return(0,l.Jh)(this,function(o){switch(o.label){case 0:if(!(r=n(na)))return e(nI,"No deployment found"),[2];if(!(t=n(nh)))return e(nI,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(n){return G.apply(this,arguments)}({buildId:t.id,targetDeploymentId:r})];case 2:return o.sent(),[3,4];case 3:return e(nI,o.sent().message),[2];case 4:if(e(nh,void 0),e(no,Q.z.Ready),(i=n(ny))&&(i.status===g.Fe.Success||i.status===g.Fe.Failed))return[2];return e(ny,(0,m.Uy)(t,function(n){n.status=g.Fe.Failed})),[2]}})}),function(n,e){return o.apply(this,arguments)}));function nV(){return(0,W.$X)(nz)}function nA(){var n=np();return n?"nix"!==n.id&&"html"!==n.id?{isDeployableRepl:!1,reason:"You will need to upgrade your ".concat(n.displayName," Repl to a Nix template in order to deploy.")}:{isDeployableRepl:!0}:{isDeployableRepl:!1,reason:"Could not find repl language."}}},64420:function(n,e,r){r.d(e,{$X:function(){return d},Hg:function(){return s},XD:function(){return p},aT:function(){return a},yL:function(){return l}});var t=r(66368),i=r(71999),o=r(28999),u=r(50959),a=(0,u.createContext)(null);function c(){var n=(0,u.useContext)(a);if(!n)throw Error("Expected store in context");return n}function s(n){return(0,i.Dv)(n,{store:c()})}function l(n){return(0,t.b)(n,c())}var d=function(n){return(0,i.b9)(n,{store:c()})};function p(n){return(0,o.lV)((0,u.useCallback)(function(e){return e(n)},[n]),{store:c()})}},37996:function(n,e,r){var t,i;r.d(e,{z:function(){return t}}),(i=t||(t={})).Loading="Loading",i.Ready="Ready",i.Preparing="Preparing",i.Deploying="Deploying",i.ProcessingLifecycleCommand="ProcessingLifecycleCommand",i.Suspended="Paused"},52932:function(n,e,r){r.d(e,{Ti:function(){return a},Zx:function(){return u},oU:function(){return c}});var t=r(37996),i=r(75582),o=r(40028);function u(n){switch(n){case i.Fe.Failed:case i.Fe.Success:return t.z.Ready;case i.Fe.Suspended:return t.z.Suspended;case i.Fe.Suspending:case i.Fe.Resuming:case i.Fe.UpdatingTier:return t.z.ProcessingLifecycleCommand;case i.Fe.Pending:case i.Fe.Building:case i.Fe.Running:case i.Fe.Promoting:return t.z.Deploying;default:(0,o.Z)(n)}}function a(n){switch(n){case i.Qc.Destroy:return null;case i.Qc.UpdateMachineConfiguration:return i.Fe.UpdatingTier;case i.Qc.Suspend:return i.Fe.Suspending;case i.Qc.Resume:return i.Fe.Resuming;default:(0,o.Z)(n)}}function c(n){switch(n){case i.Vp.Cron:return i.r4.Cron;case i.Vp.CloudRun:return i.r4.CloudRun;case i.Vp.Worker:case i.Vp.Server:return i.r4.Gce;case i.Vp.Static:return i.r4.Static;default:(0,o.Z)(n)}}},14207:function(n,e,r){r.d(e,{$f:function(){return _},OD:function(){return b},xk:function(){return y}});var t=r(27387),i=r(66626),o=r(96583),u=r(57407),a=r(42256),c=r(92741),s=r(75582),l=r(28268),d=r(8668),p=r(55552),f=r(37229),g=r(59808),m=r(30084);function y(n){return v.apply(this,arguments)}function v(){return(v=(0,t._)(function(n){var e;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,n.readFile(".env")];case 1:if((e=r.sent()).error===m.Df.NotFound)return[2,[]];if(e.error)throw e.error;return[2,Object.entries(l.Z.parse(e.content.toString())).map(function(n){var e=(0,i._)(n,2);return{name:e[0],value:e[1]}})]}})})).apply(this,arguments)}function h(){return(h=(0,t._)(function(n){var e,r,t;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return[4,n.getConfig()];case 1:if(r=(e=i.sent()).config,(t=e.error)===g.Yt.NotFound)return[2];if(t)throw Error("Failed to get .replit config with Error: "+t);return[2,r]}})})).apply(this,arguments)}function _(n){return C.apply(this,arguments)}function C(){return(C=(0,t._)(function(n){var e,r,t,i,u,c,l,d,f,g,m,y,v;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return e=null,r=null,t=null,i=null,u=null,[4,function(n){return h.apply(this,arguments)}(n)];case 1:if(!(c=o.sent()))return[2,{buildCommand:e,runCommand:r,ignorePorts:t,appType:i,publicDir:u}];if(!c.deployment)return[3,2];switch(d=(l=c.deployment).build,f=l.run,g=l.ignorePorts,m=l.target,y=l.publicDir,d&&(e=(0,p.Cq)(d)),f&&(r=(0,p.Cq)(f)),null!=g&&(t=g),m){case a.api.DeploymentConfig.Target.GCE:i=t?s.Vp.Worker:s.Vp.Server;break;case a.api.DeploymentConfig.Target.CLOUDRUN:i=s.Vp.CloudRun;break;case a.api.DeploymentConfig.Target.STATIC:i=s.Vp.Static}return y&&(u=y),[3,4];case 2:return[4,n.getRunConfig()];case 3:v=o.sent(),c.compile&&(e=(0,p.Cq)(c.compile)),v.run?r=(0,p.Cq)(v.run.run):c.run&&(r=(0,p.Cq)(v.run)),o.label=4;case 4:return[2,{buildCommand:e,runCommand:r,ignorePorts:t,appType:i,publicDir:u}]}})})).apply(this,arguments)}var D={buildCommand:{delete:function(){return(0,f.xz)("deployment/build")},create:function(n){return(0,f.pi)(n.toString())}},runCommand:{delete:function(){return(0,f.xz)("deployment/run")},create:function(n){return(0,f.X6)(n.toString())}},ignorePorts:{delete:function(){return(0,f.xz)("deployment/ignorePorts")},create:function(n){return(0,f.KB)(!!n)}},appType:{delete:function(){return(0,f.xz)("deployment/deploymentTarget")},create:function(n){var e=null;switch(n){case s.Vp.Server:case s.Vp.Worker:e="gce";break;case s.Vp.CloudRun:e="cloudrun";break;case s.Vp.Static:e="static"}return e?(0,f.zk)(e):null}},publicDir:{delete:function(){return(0,f.xz)("deployment/publicDir")},create:function(n){return(0,f.TT)(n.toString())}}};function b(n,e,r){return w.apply(this,arguments)}function w(){return(w=(0,t._)(function(n,e,r){var t,i,a,s,l,p,f,g,y,v,h,_,C,b,w,S;return(0,o.Jh)(this,function(o){switch(o.label){case 0:t=r.fs,i=r.container,a=r.dotReplit,s=[],l=!0,p=!1,f=void 0;try{for(g=Object.keys(n)[Symbol.iterator]();!(l=(y=g.next()).done);l=!0)h=n[v=y.value],_=e[v],C=D[v],h!==_&&("string"==typeof h&&(0,d.Ar)(h)||"boolean"==typeof h&&h?(b=C.create(h))&&s.push(b):s.push(C.delete()))}catch(n){p=!0,f=n}finally{try{l||null==g.return||g.return()}finally{if(p)throw f}}if(i.getConnectionState()!==u.em.CONNECTED)throw new c.QO;if(!s.length)return[3,2];return[4,a.updateDotReplit(s)];case 1:if(w=o.sent().error)throw Error(w);o.label=2;case 2:return S=null,[4,new Promise(function(n){t.getStatus()!==m.kO.Syncing&&n(!0),S=setInterval(function(){t.getStatus()!==m.kO.Syncing&&n(!0)},1e3)})];case 3:return o.sent(),S&&clearInterval(S),[2]}})})).apply(this,arguments)}},4927:function(n,e,r){r.d(e,{MX:function(){return g},bN:function(){return f},uC:function(){return p}});var t=r(21262),i=r(71440);function o(){var n=(0,t._)(["\n  fragment ReplDomain2 on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return o=function(){return n},n}function u(){var n=(0,t._)(["\n  fragment CustomDomain on Domain {\n    ...ReplDomain2\n  }\n  ","\n"]);return u=function(){return n},n}function a(){var n=(0,t._)(["\n  fragment TargetHostingDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n  }\n"]);return a=function(){return n},n}function c(){var n=(0,t._)(["\n  fragment MachineConfiguration on HostingMachineConfiguration {\n    id\n    label\n    vcpu\n    memory\n    slug\n  }\n"]);return c=function(){return n},n}function s(){var n=(0,t._)(["\n  fragment CurrentBuild2 on HostingBuild {\n    id\n    description\n    status\n    timeCreated\n    hasImageTag\n    envVars {\n      name\n      value\n    }\n    repl {\n      id\n      slug\n      apexProxy\n      domains {\n        ... on Domain {\n          ...CustomDomain\n        }\n      }\n      owner {\n        ... on Team {\n          id\n          username\n        }\n        ... on User {\n          id\n          username\n        }\n      }\n      hostingDeployment {\n        ... on HostingDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n    }\n    provider\n    machineConfiguration {\n      ...MachineConfiguration\n    }\n    maxMachineInstances\n    machineJob {\n      timezone\n      crontab\n    }\n    user {\n      id\n      displayName\n      username\n    }\n  }\n  ","\n  ","\n  ","\n"]);return s=function(){return n},n}var l=(0,i.Ps)(o()),d=(0,i.Ps)(u(),l),p=(0,i.Ps)(a()),f=(0,i.Ps)(c()),g=(0,i.Ps)(s(),d,p,f)},66368:function(n,e,r){r.d(e,{b:function(){return i},c:function(){return o}});var t=r(50199);function i(n,e){return(0,t.Z)(function(){return o(e,n)},[e,n])}function o(n,e){return{get current(){return n.get(e)},subscribe:function(r){return n.sub(e,function(){return r(n.get(e))})}}}},23211:function(n,e,r){r.d(e,{X$:function(){return d},dA:function(){return s},dD:function(){return c},gr:function(){return l},lb:function(){return f},p8:function(){return p},uZ:function(){return a},yr:function(){return u}});var t=r(25443),i=r(91757),o=r(45160),u=200,a="flag-tropical-pink",c="flag-usage-utopia",s="flag-electric-stems";function l(n){switch(n){case"e2-micro":return[.00833,"6.40"];case"e2-small":return[.0166,"12.80"];case"e2-medium":return[.0333,"25.60"];case"n1-custom-1-4096":return[.0687,"52.80"];case"e2-standard-2":return[.1375,"105.60"];case"e2-standard-4":return[.275,"211.20"];default:return[null,null]}}function d(n){switch(n){case"0.25 vCPU / 1 GiB RAM":return"e2-micro";case"0.5 vCPU / 2 GiB RAM":return"e2-small";case"1 vCPU / 4 GiB RAM":return"e2-medium";case"Dedicated 1 vCPU / 4 GiB RAM":return"n1-custom-1-4096";case"Dedicated 2 vCPU / 8 GiB RAM":return"e2-standard-2";case"Dedicated 4 vCPU / 16 GiB RAM":return"e2-standard-4";default:return null}}function p(n,e){return(0,i.Z)((0,o.Z)(n,e),"zzz",{timeZone:e,locale:t.Z})}function f(n){if(!Intl||!Intl.DateTimeFormat().resolvedOptions().timeZone)throw Error("Time zones are not available in this environment");try{return Intl.DateTimeFormat(void 0,{timeZone:n}),!0}catch(n){return!1}}},28268:function(n,e,r){function t(n,e){return n.split(e).length-1}r.d(e,{Z:function(){return o}});var i=r(66626),o={parse:function(n){var e={},r=n.split(/\n|\r|\r\n/),i=!0,o=!1,u=void 0;try{for(var a,c=r[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var s=a.value;if(!function(n){var e=n.trim();return 0===e.length||e.startsWith("#")}(s)){var l=(s=function(n){if(!n.includes("#"))return n;var e=n.split("#"),r=!1,i=[],o=!0,u=!1,a=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var l=c.value;(1===t(l,'"')||t(l,"'"))&&(r?(r=!1,i.push(l)):r=!0),(0===i.length||r)&&i.push(l)}}catch(n){u=!0,a=n}finally{try{o||null==s.return||s.return()}finally{if(u)throw a}}return i.join("#")}(s)).indexOf("="),d=s.indexOf(":");if(-1!==d||-1!==l){var p=l;-1!==d&&(d<l||-1===l)&&(p=d);var f=s.slice(0,p).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),g=function(n,e){var r=n.trim();if(0===r.length)return r;var t=r.length-1,i='"'===r[0]&&'"'===r[t],o="'"===r[0]&&"'"===r[t];return(o||i)&&(r=r.slice(1,-1)),i&&(r=(r=r.replace(/\\./g,function(n){return"\\n"===n?"\n":"\\r"===n?"\r":n})).replace(/\\([^$])/g,"$1")),o||(r=r.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,function(n){var r=n.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===r)return n;if("\\"===r[1]||"("===r[2])return r[0].slice(1);var t=r[4];return""!==t?e[t]||"":n})),r}(s.slice(p+1),e);e[f]=g}}}}catch(n){o=!0,u=n}finally{try{i||null==c.return||c.return()}finally{if(o)throw u}}return e},serialize:function(n){return Object.entries(n).reduce(function(n,e){var r=(0,i._)(e,2),t=r[0],o=r[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return n+"".concat(t,'="').concat(o,'"\n')},"")}}},8668:function(n,e,r){r.d(e,{Ar:function(){return u},GV:function(){return a},Jw:function(){return c}});var t=r(73966),i=r.n(t),o=r(73524),u=function(n){return"string"==typeof n&&""!==n.trim()},a=function(n){return"object"==typeof n&&"string"==typeof n.name&&"string"==typeof n.value&&""!==n.name};function c(n){var e=n.replSlug,r=n.username,t=r?"-".concat(r):"",u=o.m7-(0+t.length);if(u>0){var a=i()(e).slice(0,u),c="".concat("").concat(a).concat(t);if(c.length<=o.m7)return c}return"".concat("").concat(i()(e)).concat(t)}},55552:function(n,e,r){r.d(e,{Cq:function(){return t}}),r(42256);var t=function(n){return n&&n.args?(n.args&&n.args.length>=3&&"sh"===n.args[0]&&"-c"===n.args[1]?n.args.slice(2):n.args).join(" "):""}},37229:function(n,e,r){r.d(e,{$0:function(){return a},D3:function(){return o},If:function(){return i},Jk:function(){return c},KB:function(){return d},KQ:function(){return t},TT:function(){return f},X6:function(){return s},pi:function(){return l},xz:function(){return u},zk:function(){return p}});var t=function(n){return{op:"add",path:"run",value:JSON.stringify(n)}},i=function(n){return{op:"add",path:"entrypoint",value:JSON.stringify(n)}},o=function(n){return{op:"add",path:"compile",value:JSON.stringify(n)}},u=function(n){return{op:"remove",path:"string"==typeof n?n:n.join("/"),value:""}},a=function(n){return{op:"add",path:"auth/pageEnabled",value:JSON.stringify(n)}},c=function(n){return{op:"add",path:"auth/buttonEnabled",value:JSON.stringify(n)}},s=function(n){return{path:"deployment/run",op:"add",value:JSON.stringify(["sh","-c",n])}},l=function(n){return{path:"deployment/build",op:"add",value:JSON.stringify(["sh","-c",n])}},d=function(n){return{path:"deployment/ignorePorts",op:"add",value:n.toString()}},p=function(n){return{path:"deployment/deploymentTarget",op:"add",value:JSON.stringify(n)}},f=function(n){return{path:"deployment/publicDir",op:"add",value:JSON.stringify(n)}}},59808:function(n,e,r){var t,i,o,u,a,c;r.d(e,{Yt:function(){return t},au:function(){return i},zW:function(){return o}}),(u=t||(t={})).NotFound="NOT_FOUND",u.ParseError="PARSE_ERROR",u.Disconnected="DISCONNECTED",u.Unknown="UNKOWN_ERROR",(a=i||(i={})).ChannelClosed="CHANNEL_CLOSED",a.JSONParseError="JSON_PARSE_ERROR",a.NotFound="NOT_FOUND",a.TOMLParseError="TOML_PARSE_ERROR",a.OpType="OP_TYPE",a.CouldNotWrite="COULD_NOT_WRITE",a.ReadLine="COULD_NOT_READ_LINE",a.Unknown="UNKNOWN_ERROR",(c=o||(o={})).CHANGE="CHANGE",c.CHANNEL_OPENED="CHANNEL_OPENED"}}]);
//# sourceMappingURL=6190-d306d2cfcd93ea35.js.map