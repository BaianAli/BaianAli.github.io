!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a271b61a-b019-4fa7-bad6-bf8b525a48ef",e._sentryDebugIdIdentifier="sentry-dbid-a271b61a-b019-4fa7-bad6-bf8b525a48ef")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"6af6db66"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6879],{92179:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironmentDesktop",function(){return t(2271)}])},40852:function(e,n,t){"use strict";t.d(n,{gC:function(){return f},LK:function(){return d},jJ:function(){return p}});var r=t(74985),i=t(11516),o=t(59868),a=t(1498),l=t(32377),c=t(50494),s=t(47611),u=["100-days-of-python","100-days-of-python-promo","add-guest-new-user","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","changelog-banner","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","deployments-mobile-download","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","prettier-formatter","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","usage-migration-reserved-vms","usage-migration-power-ups-free-user","usage-migration-power-ups-core-user","workspace-always-on-user-reserved-deployments-announcement","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-history-announcement","workspace-tools-databases-postgres-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-sidebar-tour","replit-core-banner","hosting-deployments-announcement-7-2023","teams-for-education-deprecation-12-2023","teams-for-education-verification-prompt","usage-based-billing-announcement-1-2024","port-nudges","mobileApp-themes-announcement","mobileApp-server-change-CTA","mobileApp-purchase-subscription-announcement","mobileApp-onboarding-education-announcement"],d=function(e,n){return"".concat(e,"-tutorialChallenge-").concat(n)},p=function(e,n){var t,r=JSON.parse(i.Z.get(d(e,n),"string")||"{}");if("string"==typeof r.tourName&&"string"==typeof r.url&&(t=r.tourName,u.includes(t)))return r},f=function(e){var n=e.challenge,t=u.find(function(e){return e.toString()===n.tourName})||"js-4-day-challenge-day-1",i=(0,c.o)(t),d=i.isDone,p=i.isLoading,f=i.setAsDone,h=(0,s.useRouter)();return p?null:(0,r.tZ)(a.zx,{colorway:d?"primary":"positive",onClick:function(){f(),(0,o.j)(o.U3.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:d,iconLeft:(0,r.tZ)(l.Z,{}),size:"big",text:d?"Challenge completed!":"Complete Challenge"})}},68553:function(e,n,t){"use strict";t.d(n,{l:function(){return o},x:function(){return i}});var r=t(59868),i=function(e){(0,r.j)(r.U3.COURSE_ACTION,e)},o=function(e){(0,r.j)(r.U3.LESSON_ACTION,e)}},85986:function(e,n,t){"use strict";t.d(n,{S:function(){return P}});var r=t(66626),i=t(74985),o=t(72858),a=t(89106),l=t(79378),c=t(93496),s=t(20399),u=t(49344),d=t(40227),p=t(38080),f=t(74833),h=t(56596),m=t(93918),v=t(99741),g=t(65238),y=t(66663),b=t(58003),x=t(29287),Z=t(75582),w=t(50959),k=t(41733),C=t(21262),_=t(71440),S=t(58995);function E(){var e=(0,C._)(["\n  fragment ReplDesktopAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    image\n    userSubscriptionType\n  }\n"]);return E=function(){return e},e}function R(){var e=(0,C._)(["\n  query ReplDesktopAvatarMenu {\n    currentUser {\n      id\n      ...ReplDesktopAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return R=function(){return e},e}var I={},T=(0,_.Ps)(E()),G=(0,_.Ps)(R(),T),D=(0,m.X)({wrapper:[x.l0.noDragRegion],button:[c.gU.nofill,x.l0.p(4),x.l0.viewStyle,x.l0.reset.button,x.l0.rowWithGap(2),x.l0.align.center,x.l0.color.foregroundDefault,x.l0.cursor.pointer,x.l0.borderRadius(8),{transition:"box-shadow 120ms ease-out",":hover svg":{fill:x.TV.foregroundDefault}}],surface:[x.l0.borderRadius(8),x.l0.minWidth(80),{"& > ul > li:first-of-type":{borderRadius:"10px 10px 0 0"}}],username:[x.l0.ml(8)],menuItem:[x.l0.rowWithGap(8),x.l0.align.center],accountModal:[x.l0.overflow("auto"),x.l0.height("100%")],appVersionWrapper:[x.l0.py(4),x.l0.px(8),x.l0.flex.row,x.l0.justify.spaceBetween,x.l0.border({color:x.TV.outlineDimmer,width:1,style:"solid",direction:"top"})]});function P(e){var n,t=e.showName,c=(0,r._)((0,w.useState)(!1),2),m=c[0],C=c[1],_=(0,r._)((0,w.useState)(!1),2),E=_[0],R=_[1],T=(n=(0,k._)({},I,void 0),S.a(G,n)).data,P=null==T?void 0:T.currentUser;if(!P)return null;var B=[{label:"Home",icon:(0,i.tZ)(y.Z,{}),onAction:function(){a.X.openExternalUrl("/"),C(!1)}},{label:"Account",icon:(0,i.tZ)(b.Z,{}),onAction:function(){R(function(e){return!e}),C(!1)}},{label:"Log out",icon:(0,i.tZ)(g.Z,{}),onAction:function(){a.X.logout()}}];return(0,i.BX)(h.G,{css:D.wrapper,children:[(0,i.BX)(d.xo,{isOpen:m,onOpenChange:C,placement:"bottom start",label:"Account options",noArrow:!0,children:[(0,i.BX)("button",{onClick:function(){C(function(e){return!e})},css:D.button,children:[(0,i.tZ)(l.q,{size:24,src:(null==P?void 0:P.image)||null,username:(null==P?void 0:P.username)||"",showRoleBadge:P.userSubscriptionType===Z.HP.HackerPro}),t?(0,i.BX)(h.G,{css:D.username,className:"username",children:["@",null==P?void 0:P.username]}):null,(0,i.tZ)(v.Z,{color:x.TV.foregroundDimmest,size:12})]}),(0,i.BX)(p.Tg,{elevated:!0,css:D.surface,background:"higher",children:[(0,i.tZ)(s.v2,{label:"Account options",onAction:function(e){var n=B[parseInt(e,10)];n&&n.onAction()},children:B.map(function(e,n){return(0,i.tZ)(s.ck,{"aria-label":e.label,children:(0,i.BX)(h.G,{css:D.menuItem,children:[e.icon,(0,i.tZ)(f.xv,{children:e.label})]})},n)})}),(0,i.BX)(h.G,{css:D.appVersionWrapper,children:[(0,i.tZ)(f.xv,{color:"dimmer",variant:"small",children:"Version"}),(0,i.tZ)(f.xv,{color:"dimmer",variant:"small",children:a.X.getVersion()})]})]})]}),(0,i.tZ)(u.u,{isOpen:E,onRequestClose:function(){return R(!1)},maxWidth:872,elevation:"root",skipTransition:!0,css:D.accountModal,children:(0,i.tZ)(o.Z,{})})]})}},66289:function(e,n,t){"use strict";t.d(n,{Z:function(){return ef}});var r,i,o,a,l,c=t(41733),s=t(30509),u=t(66626),d=t(63257),p=t(74985),f=t(52343),h=t(79621),m=t(38889),v=t(6187),g=t(35597),y=t(55534),b=t(6189),x=t(95571),Z=t(93049),w=t(57526),k=t(2161),C=t(15146),_=t(93496),S=t(20399),E=t(49344),R=t(54843),I=t(48272),T=t(74833),G=t(56596),D=t(93918),P=t(79217),B=t(7877),U=t(21869),A=t(8271),L=t(39390),O=t(88936),X=t(97411),M=t(13900),z=t(52682),W=t(13051),N=t(60892),j=t(29287),F=t(47611),V=t(50959),H=t(45424),Y=t(21262),q=t(71440),J=t(58995),K=t(99165);function $(){var e=(0,Y._)(["\n  fragment DesktopReplsListRepl on Repl {\n    id\n    title\n    iconUrl\n    url\n    description\n    isPrivate\n    timeUpdated\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n  }\n"]);return $=function(){return e},e}function Q(){var e=(0,Y._)(["\n  query DesktopReplsSearch(\n    $search: String!\n    $after: String\n    $excludeMultiplayer: Boolean\n    $excludeNotDeployed: Boolean\n    $excludePrivate: Boolean\n    $excludePublic: Boolean\n    $excludeOwned: Boolean\n  ) {\n    currentUser {\n      id\n      paginatedReplSearch(\n        search: $search\n        after: $after\n        excludeMultiplayer: $excludeMultiplayer\n        excludeNotDeployed: $excludeNotDeployed\n        excludePrivate: $excludePrivate\n        excludePublic: $excludePublic\n        excludeOwned: $excludeOwned\n      ) {\n        items {\n          id\n          ...DesktopReplsListRepl\n        }\n        pageInfo {\n          hasNextPage\n          nextCursor\n        }\n      }\n    }\n  }\n  ","\n"]);return Q=function(){return e},e}function ee(){var e=(0,Y._)(["\n  mutation DesktopReplsListDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return ee=function(){return e},e}var en={},et=(0,q.Ps)($()),er=(0,q.Ps)(Q(),et),ei=(0,q.Ps)(ee()),eo=(0,D.X)({rowUnfocused:{backgroundColor:"transparent"},rowFocused:{backgroundColor:_.vb.interactiveBackground}});function ea(e){var n=e.item,t=e.state,r=(0,V.useRef)(null),i=(0,H.Fb)({node:n},t,r),o=i.rowProps,a=i.gridCellProps,l=i.isSelected;return(0,V.useEffect)(function(){if(l){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({block:"nearest"})}},[l]),(0,p.tZ)(G.K.li,(0,s._)((0,c._)({},o),{ref:r,css:l?eo.rowFocused:eo.rowUnfocused,children:(0,p.tZ)(G.G,(0,s._)((0,c._)({},a),{children:n.rendered}))}))}function el(e){var n=(0,f.n_)(e),t=(0,V.useRef)(null),r=(0,H.c)(e,n,t).gridProps;return(0,p.tZ)(G.K.ul,(0,s._)((0,c._)({},r),{ref:(0,Z.l)(t,e.innerRef),children:(0,d._)(n.collection).map(function(e){return(0,p.tZ)(ea,{item:e,state:n},e.key)})}))}var ec=(0,D.X)({container:[j.l0.flex.shrink(1),j.l0.colWithGap(8),j.l0.height("100%")],searchBarWrapper:[j.l0.flex.shrink(0),j.l0.px(8)],replsListWrapper:[j.l0.flex.shrink(1),j.l0.overflowY("scroll")],headerRow:[j.l0.flex.row,j.l0.align.center,j.l0.justify.spaceBetween,j.l0.px(8)],filterContainer:[j.l0.rowWithGap(8),j.l0.center],replListItemWrapper:[_.gU.listItem,j.l0.px(8),j.l0.py(2),j.l0.flex.row,j.l0.align.center,j.l0.justify.spaceBetween],replListItemInner:[j.l0.rowWithGap(8),j.l0.pl(4),j.l0.align.center,j.l0.flex.shrink(1)],replListItemTexts:[j.l0.flex.shrink(1)],replListItemTitle:[j.l0.mb(0),j.l0.truncate],dropdownItem:[j.l0.rowWithGap(8),j.l0.align.center],dropdownDestructiveItem:[j.l0.rowWithGap(8),j.l0.color.accentNegativeStronger,j.l0.align.center],loadingStateWrapper:[j.l0.align.center,j.l0.pt(8),j.l0.pb(12),j.l0.mx(8),j.l0.textAlign.center]});(r=o||(o={})).Fork="Fork",r.Delete="Delete",(a||(a={})).DeleteRepl="DeleteRepl";var es=[{value:"Fork",label:"Fork",icon:(0,p.tZ)(A.Z,{})},{value:"Delete",label:"Delete",icon:(0,p.tZ)(z.Z,{}),isDestructive:!0}];function eu(e){var n,t,r=e.repl,i=e.onClick,o=(0,m.g)().fork,a=(0,u._)((0,V.useState)(null),2),l=a[0],s=a[1],d=(0,y.Z)(),f=d.showConfirm,v=d.showError,g="/replEnvironmentDesktop"===(0,F.useRouter)().pathname,Z=(0,u._)((n={variables:{id:r.id},onCompleted:function(){f("Repl scheduled for deletion")},onError:function(e){v((0,b.Z)(e.message))},update:function(e,n){var t;(null===(t=n.data)||void 0===t?void 0:t.deleteRepl)&&(e.evict({id:e.identify(n.data.deleteRepl)}),e.gc())}},t=(0,c._)({},en,n),K.D(ei,t)),1)[0];return(0,p.BX)(p.HY,{children:[(0,p.BX)(G.G,{css:ec.replListItemWrapper,onClick:function(e){return i(r.url,(0,x.jh)(e))},children:[(0,p.BX)(G.G,{css:ec.replListItemInner,children:[(0,p.tZ)(k.ZP,{size:24,iconUrl:r.iconUrl,alt:r.title}),(0,p.BX)(G.G,{css:ec.replListItemTexts,children:[(0,p.tZ)(T.xv,{variant:"text",css:ec.replListItemTitle,multiline:!1,children:r.title}),(0,p.BX)(T.xv,{variant:"small",color:"dimmer",multiline:!1,children:[r.owner?"".concat(r.owner.username," • "):"","edited"," ",(0,w.F)(r.timeUpdated)]})]})]}),g?null:(0,p.tZ)(S.ZE,{icon:(0,p.tZ)(M.Z,{size:16}),"aria-label":"Repl Actions",placement:"bottom-end",cssProps:[{background:"transparent"}],onAction:function(e){switch(e){case"Fork":o();return;case"Delete":s("DeleteRepl");return}},children:es.map(function(e){return(0,p.tZ)(S.ck,{textValue:e.label,children:(0,p.BX)(G.G,{css:e.isDestructive?ec.dropdownDestructiveItem:ec.dropdownItem,children:[e.icon,(0,p.tZ)(T.xv,{multiline:!1,children:e.label})]})},e.value)})})]}),(0,p.tZ)(E.u,{isOpen:"DeleteRepl"===l,onRequestClose:function(){return s(null)},centered:!0,children:(0,p.tZ)(h.Z,{delete:Z,entityType:"Repl",hideModal:function(){return s(null)}})})]})}(i=l||(l={})).All="All",i.ExcludeMultiplayer="ExcludeMultiplayer",i.ExcludeNotDeployed="ExcludeNotDeployed",i.ExcludePrivate="ExcludePrivate",i.ExcludePublic="ExcludePublic",i.ExcludeOwned="ExcludeOwned";var ed=[{value:"All",title:"All",icon:(0,p.tZ)(U.Z,{})},{value:"ExcludeMultiplayer",title:"My Repls",icon:(0,p.tZ)(W.Z,{})},{value:"ExcludeOwned",title:"Shared",icon:(0,p.tZ)(N.Z,{})},{value:"ExcludePrivate",title:"Public",icon:(0,p.tZ)(L.Z,{})},{value:"ExcludePublic",title:"Private",icon:(0,p.tZ)(X.Z,{})},{value:"ExcludeNotDeployed",title:"Deployed",icon:(0,p.tZ)(B.Z,{})}],ep=/^\/@\S+\/\S+/;function ef(e){var n,t,r,i=e.onClick,o=(0,u._)((0,V.useState)(""),2),a=o[0],l=o[1],f=(0,F.useRouter)(),h="/replEnvironmentDesktop"===f.pathname,y=(0,v.Z)(a,250),b=(0,V.useRef)(null),x=(0,V.useRef)(null),Z=(0,V.useRef)(null),w=(0,V.useRef)(null),k=(0,u._)((0,V.useState)(ed[0]),2),_=k[0],E=k[1],D=(0,u._)((0,V.useState)(null),2),B=D[0],U=D[1],A=B?new Set([B]):new Set,L=(n={variables:{search:function(e){if(!e.startsWith("http"))return null;try{var n=new URL(e),t=window.location.origin;if(n.origin!==t||!ep.test(n.pathname))return null;var r=n.pathname.split("/");if(3!==r.length)return null;return r[2]}catch(e){return null}}(y)||y,excludeOwned:"ExcludeOwned"===_.value,excludePublic:"ExcludePublic"===_.value,excludePrivate:"ExcludePrivate"===_.value,excludeNotDeployed:"ExcludeNotDeployed"===_.value,excludeMultiplayer:"ExcludeMultiplayer"===_.value},ssr:!1,notifyOnNetworkStatusChange:!0},t=(0,c._)({},en,n),J.a(er,t)),X=L.data,M=L.loading,z=L.refetch,W=L.fetchMore,N=null==X?void 0:null===(r=X.currentUser)||void 0===r?void 0:r.paginatedReplSearch,j=null==N?void 0:N.pageInfo,H=null==j?void 0:j.nextCursor,Y=null==j?void 0:j.hasNextPage,q=(null==N?void 0:N.items)||[];if(h){var K=f.query.replUrl;if("string"!=typeof K)throw Error("Expected Repl URL");q=q.filter(function(e){return e.url!==K})}var $=(0,V.useCallback)(function(){H&&!M&&W({variables:{search:y,after:H},updateQuery:function(e,n){var t,r,i=n.fetchMoreResult;return(null===(t=e.currentUser)||void 0===t?void 0:t.paginatedReplSearch)&&(null===(r=i.currentUser)||void 0===r?void 0:r.paginatedReplSearch)?(0,s._)((0,c._)({},i),{currentUser:(0,s._)((0,c._)({},i.currentUser),{paginatedReplSearch:(0,s._)((0,c._)({},i.currentUser.paginatedReplSearch),{items:(0,d._)(e.currentUser.paginatedReplSearch.items).concat((0,d._)(i.currentUser.paginatedReplSearch.items)),pageInfo:(0,c._)({},i.currentUser.paginatedReplSearch.pageInfo)})})}):e}})},[W,M,H,y]),Q=(0,g.Z)({onLoadMore:$,rootMargin:"0px 0px 100px 0px"}).targetRef,ee=function(e){var n=q.find(function(n){return n.id===e});if(!n)throw Error("Expected matching Repl");i(n.url)};(0,V.useEffect)(function(){var e;null===(e=x.current)||void 0===e||e.focus()},[x]);var et=0===q.length&&M,ei=0===q.length&&!M;return(0,p.BX)(G.G,{css:ec.container,children:[(0,p.tZ)(G.K.div,{css:ec.searchBarWrapper,ref:b,children:(0,p.tZ)(R.E,{placeholder:"Search Repls",value:a,inputRef:x,onChange:function(e){l(e.target.value)},onClear:function(){l("")},onKeyDown:function(e){if("Enter"===e.key&&B&&ee(B),"ArrowDown"===e.key||"ArrowUp"===e.key){var n;e.preventDefault(),null===(n=w.current)||void 0===n||n.dispatchEvent(new KeyboardEvent(e.nativeEvent.type,e.nativeEvent))}}})}),(0,p.BX)(G.G,{css:ec.headerRow,children:[(0,p.tZ)(T.h4,{level:2,variant:h?"subheadDefault":"subheadBig",children:"Recent"}),(0,p.tZ)(G.G,{css:ec.filterContainer,children:(0,p.tZ)(I.P,{"aria-label":"repl-list-filter-select",id:"repl-list-filter-select",items:ed,selectedItem:_,onChange:function(e){E(e)}})})]}),(0,p.BX)(G.K.div,{style:h?void 0:{paddingLeft:8,paddingRight:8},css:ec.replsListWrapper,ref:Z,children:[(0,p.tZ)(G.G,{children:(0,p.tZ)(el,{"aria-label":"Repls",selectionMode:"single",selectionBehavior:"replace",disallowEmptySelection:!0,items:q,innerRef:w,selectedKeys:A,onSelectionChange:function(e){if("all"!==e){if(0===e.size)throw Error("Expected to have a selected key");U(Array.from(e)[0])}},onAction:function(e){ee(e)},children:function(e){var n;return(0,p.tZ)(S.ck,{textValue:e.title,children:(0,p.tZ)(m.b,{forkParams:{trackingData:{forkSource:"desktopAppReplsList"}},onFork:function(){var e;null===(e=Z.current)||void 0===e||e.scrollTo({top:0}),z()},repl:e,teamContext:null===(n=e.owner)||void 0===n?void 0:n.username,children:(0,p.tZ)(eu,{repl:e,onClick:function(e,n){i(e,n)}})})},e.id)}})}),(0,p.BX)(G.G,{css:ec.loadingStateWrapper,children:[et?(0,p.tZ)(O.Z,{}):null,ei?(0,p.tZ)(T.xv,{variant:"text",color:"dimmest",children:"We couldn't find any Repls matching your search."}):null,Y?(0,p.tZ)(C.hU,{tooltipHidden:!0,alt:"Load more Repls",onClick:$,ref:Q,disabled:M,children:M?(0,p.tZ)(O.Z,{}):(0,p.tZ)(P.Z,{})}):null]})]})]})}},7776:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(66626),i=t(74985),o=t(43312),a=t(89106),l=t(5792),c=t(56337),s=t(50959),u=t(18059),d=t(56596),p=t(29287),f=(0,o.iv)(p.l0.dragRegion);function h(){var e,n,t,o,h,m,v,g,y=(0,u.NJ)(),b=(0,c.Z)(),x=(e=(0,c.Z)(),t=(n=(0,r._)((0,s.useState)(!1),2))[0],o=n[1],(0,s.useEffect)(function(){if(e)return o(document.hasFocus()),a.X.onFocusChanged(o)},[e]),t),Z=(h=(0,c.Z)(),v=(m=(0,r._)((0,s.useState)(!1),2))[0],g=m[1],(0,s.useEffect)(function(){if(h)return a.X.onFullScreenChanged(g)},[h]),v);return y&&b&&!Z?(0,i.tZ)(d.G,{css:f,children:(0,i.tZ)("svg",{width:l.TY,height:l.MX-16,children:x?null:(0,i.BX)(i.HY,{children:[(0,i.tZ)("circle",{cx:15,cy:16,r:5,fill:"none",stroke:p.TV.outlineDefault,strokeWidth:1}),(0,i.tZ)("circle",{cx:35,cy:16,r:5,fill:"none",stroke:p.TV.outlineDefault,strokeWidth:1}),(0,i.tZ)("circle",{cx:55,cy:16,r:5,fill:"none",stroke:p.TV.outlineDefault,strokeWidth:1})]})})}):null}},5792:function(e,n,t){"use strict";t.d(n,{KN:function(){return i},MX:function(){return o},TY:function(){return r}});var r=70,i=140,o=48},9915:function(e,n,t){"use strict";t.d(n,{G:function(){return o},K:function(){return a}});var r=t(74985),i=t(43312);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overscrollBehaviorX:"none"}}]})}function a(){return(0,r.tZ)(i.xB,{styles:[{body:{overscrollBehaviorY:"none"}}]})}},91470:function(e,n,t){"use strict";t.d(n,{Gp:function(){return G},Oh:function(){return Y},V3:function(){return O},Xl:function(){return M},Yd:function(){return W},gX:function(){return $},h2:function(){return A},on:function(){return P},q7:function(){return J},vs:function(){return I},w9:function(){return j},zp:function(){return V}});var r=t(41733),i=t(21262),o=t(71440),a=t(64630),l=t(58995),c=t(99165);function s(){var e=(0,i._)(["\n  fragment TeamProfileReplTemplateModelSolution on ReplTemplateModelSolution {\n    id\n    visibleAfterSubmitting\n    visibleAfterPassingTests\n    visibleAfterDueDate\n    repl {\n      id\n      url\n      nextPagePathname\n    }\n    canStudentFork\n    studentFork {\n      id\n      url\n      nextPagePathname\n    }\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment TeamProfileReplTemplate on ReplTemplate {\n    id\n    isPublished\n    isGroupProject\n    allowSelfGrouping\n    imageUrl\n    url\n    dueDate\n    modelSolution {\n      id\n      ...TeamProfileReplTemplateModelSolution\n    }\n    userSubmissionGroup {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment TeamProfileRepl on Repl {\n    id\n    title\n    isPrivate\n    description\n    slug\n    timeCreated\n    url\n    iconUrl\n    pinnedToProfile\n    nextPagePathname\n    template {\n      id\n      ...TeamProfileReplTemplate\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment TeamProfileStack on Stack {\n    id\n    title\n    repls {\n      id\n      ...TeamProfileRepl\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment TeamEduProfile on Team {\n    id\n    username\n    displayName\n    isAdmin\n    archived\n    defaultTemplateStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n      capabilities {\n        isExpired: isExpiring(daysFromNow: 0)\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment TeamProProfile on Team {\n    id\n    username\n    displayName\n    isMember\n    isAdmin\n    archived\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment TeamProfileAllStacks on Team {\n    id\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment TeamCreateReplSubmissionOutput on CreateReplSubmissionOutput {\n    ... on Repl {\n      id\n      nextPagePathname\n      url\n      template {\n        id\n        ...TeamProfileReplTemplate\n      }\n    }\n    ... on UserError {\n      message\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i._)(["\n  query TeamProProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamProProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  query TeamEduProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation TeamProProfilePinRepl($replId: String!) {\n    pinReplToProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return b=function(){return e},e}function x(){var e=(0,i._)(["\n  mutation TeamProProfileUnpinRepl($replId: String!) {\n    unpinReplFromProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return x=function(){return e},e}function Z(){var e=(0,i._)(["\n  mutation TeamProfileArrangeStackItem($input: ArrangeStackItemInput!) {\n    arrangeStackItem(input: $input) {\n      ... on Team {\n        id\n        ...TeamProfileAllStacks\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function w(){var e=(0,i._)(["\n  mutation TeamProfileUpdateReplTemplate($input: UpdateReplTemplateInput!) {\n    updateReplTemplate(input: $input) {\n      ... on ReplTemplate {\n        id\n        repl {\n          id\n          ...TeamProfileRepl\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function k(){var e=(0,i._)(["\n  mutation TeamProfileCreateReplTemplateModelSolution(\n    $input: CreateReplTemplateModelSolutionInput!\n  ) {\n    createReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function C(){var e=(0,i._)(["\n  mutation TeamProfileCreateReplTemplateModelSolutionFork(\n    $input: CreateReplTemplateModelSolutionForkInput!\n  ) {\n    createReplTemplateModelSolutionFork(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function _(){var e=(0,i._)(["\n  mutation TeamCreateReplSubmission($templateId: Int!) {\n    createReplSubmission(templateId: $templateId) {\n      ...TeamCreateReplSubmissionOutput\n    }\n  }\n  ","\n"]);return _=function(){return e},e}var S={},E=(0,o.Ps)(s()),R=(0,o.Ps)(u(),E,a.Pc),I=(0,o.Ps)(d(),R),T=(0,o.Ps)(p(),I),G=(0,o.Ps)(f(),T),D=(0,o.Ps)(h(),T),P=(0,o.Ps)(m(),T),B=(0,o.Ps)(v(),R),U=(0,o.Ps)(g(),D);function A(e){var n=(0,r._)({},S,e);return l.a(U,n)}var L=(0,o.Ps)(y(),G);function O(e){var n=(0,r._)({},S,e);return l.a(L,n)}var X=(0,o.Ps)(b());function M(e){var n=(0,r._)({},S,e);return c.D(X,n)}var z=(0,o.Ps)(x());function W(e){var n=(0,r._)({},S,e);return c.D(z,n)}var N=(0,o.Ps)(Z(),P);function j(e){var n=(0,r._)({},S,e);return c.D(N,n)}var F=(0,o.Ps)(w(),I);function V(e){var n=(0,r._)({},S,e);return c.D(F,n)}var H=(0,o.Ps)(k(),I);function Y(e){var n=(0,r._)({},S,e);return c.D(H,n)}var q=(0,o.Ps)(C(),I);function J(e){var n=(0,r._)({},S,e);return c.D(q,n)}var K=(0,o.Ps)(_(),B);function $(e){var n=(0,r._)({},S,e);return c.D(K,n)}},11656:function(e,n,t){"use strict";var r=t(26568),i=t.n(r);n.Z=i()(function(){return Promise.all([t.e(3448),t.e(3656),t.e(1843)]).then(t.bind(t,81843)).then(function(e){return e.EditReplTemplate})},{loadableGenerated:{webpack:function(){return[81843]}}})},2271:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Ek}});var r,i,o,a,l,c,s,u,d,p,f,h,m,v,g,y,b,x,Z,w,k,C,_,S,E,R,I,T,G,D,P,B,U,A,L,O,X,M,z,W,N,j,F,V,H,Y,q,J=t(66626),K=t(74985),$=t(43312),Q=t(53430),ee=t(14731),en=t(50959),et=t(98655),er=t(25425),ei=t(56596),eo=t(29287),ea=t(42516),el=t(54916),ec=t(58091),es=t(7444);function eu(e){var n=(0,el.Z)().presence,t=(0,ec.pV)(),r=(0,es.Z)(e);return(0,en.useCallback)(function(e){var i=e.username,o=e.id,a=n.getFollowedUser();if((null==a?void 0:a.username)===i){n.unfollowUser();return}n.followUser(i);var l=n.getActiveFileForUser(o),c=t();l&&l!==c&&r.current({path:l})},[r,t,n])}var ed=t(50782),ep=t(59868),ef=t(56320),eh=t(14267),em=t(63257),ev=t(55534),eg=t(2038),ey=t(76999),eb=t.n(ey),ex=t(50831),eZ=t(9617),ew=t(63461);function ek(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,K.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa root",children:[(0,K.tZ)(eZ.Z,{level:3,align:"center",children:"Are you sure?"}),(0,K.BX)(ew.Z,{align:"center",children:[(0,K.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,K.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa email",children:n})]}),(0,K.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa controls",children:[(0,K.tZ)(ex.Z,{onClick:r,children:"Cancel"}),(0,K.tZ)(ex.Z,{filled:!0,color:"primary",onClick:t,children:"Invite"})]}),(0,K.tZ)(eb(),{id:"1a6ae4ac10e8f1fa",children:".root.jsx-1a6ae4ac10e8f1fa{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-1a6ae4ac10e8f1fa{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.message.jsx-1a6ae4ac10e8f1fa{padding-bottom:var(--space-16)}"})]})}var eC=t(49344),e_=t(76566),eS=t(38080),eE=t(74833),eR=t(88936),eI=t(60892),eT=t(75582),eG=t(47611),eD=t(49932),eP=t(14709),eB=t.n(eP),eU=t(70712),eA=t(6836),eL=t(41733),eO=t(21262),eX=t(71440),eM=t(58995),ez=t(99165);function eW(){var e=(0,eO._)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n  }\n"]);return eW=function(){return e},e}function eN(){var e=(0,eO._)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        multiplayers {\n          id\n          ...MultiplayerUser\n        }\n        currentUserPermissions {\n          editMultiplayers\n          inviteGuests\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eN=function(){return e},e}function ej(){var e=(0,eO._)(["\n  mutation TeamMultiplayerManagerMultiplayersAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        multiplayers {\n          id\n          ...MultiplayerUser\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n"]);return ej=function(){return e},e}function eF(){var e=(0,eO._)(["\n  mutation TeamMultiplayerManagerMultiplayersRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        multiplayers {\n          id\n          ...MultiplayerUser\n        }\n      }\n    }\n  }\n  ","\n"]);return eF=function(){return e},e}var eV={},eH=(0,eX.Ps)(eW()),eY=(0,eX.Ps)(eN(),eH),eq=(0,eX.Ps)(ej(),eH);eF();var eJ=t(44343);function eK(e){var n,t,r,i,o,a,l,c,s=e.replId,u=(n=(0,eL._)({},eV,{variables:{replId:s}}),eM.a(eY,n)),d=u.data,p=u.loading,f=(0,eG.useRouter)(),h=(0,eg.Vg)(f),m=(0,ec.aG)(),v=(null==d?void 0:null===(r=d.currentUser)||void 0===r?void 0:r.id)||null,g=(null==d?void 0:d.repl.__typename)==="Repl"?d.repl:null,y=(0,ev.Z)(),b=y.showConfirm,x=y.showError,Z=(0,J._)((t=(0,eL._)({},eV,{onError:function(e){return x(e.message)},onCompleted:function(e){var n=e.addMultiplayerUser.user;(0,ep.j)(ep.U3.MULTIPLAYER_INVITED,{replId:s,inviteMethod:"username"});var t=n?"@".concat(n.username):"Member";b("".concat(t," added"))}}),ez.D(eq,t)),2),w=Z[0],k=Z[1],C=(0,J._)((0,eU.z8)({onError:function(e){x(e.message)},update:function(e,n){var t,r=null===(t=n.data)||void 0===t?void 0:t.createMultiplayerInvite2;if(r){if("UserError"===r.__typename){x(r.message);return}if("MultiplayerInvite"===r.__typename){var i=r.email;(0,ep.j)(ep.U3.MULTIPLAYER_INVITED,{replId:s,inviteMethod:"email"}),b("Invited ".concat(i," via email"));return}if("ReplPermission"===r.__typename){e.modify({id:e.identify({__typename:"Repl",id:s}),fields:{permissions:function(n){var t=e.writeFragment({data:r,fragment:eU.dE});return(0,em._)(n).concat([t])}}});var o=r.user;(0,ep.j)(ep.U3.MULTIPLAYER_INVITED,{replId:s,inviteMethod:"email"});var a=o?"@".concat(o.username):"Member";b("".concat(a," added"))}}}}),2),_=C[0],S=C[1];if(g&&!g.owner)throw Error("Cannot manage members on anon repls");if((null==g?void 0:g.owner)&&(null==g?void 0:g.owner.__typename)!=="Team")throw Error("Expect repl owned by a team");var E=(null==g?void 0:null===(i=g.owner)||void 0===i?void 0:i.__typename)==="Team"?g.owner:null,R=!(null==E?void 0:null===(o=E.capabilities)||void 0===o?void 0:o.hasValidSubscription)&&!(null==E?void 0:null===(a=E.capabilities)||void 0===a?void 0:a.isBusinessPlan),I=null!==(l=null==g?void 0:g.multiplayers.reduce(function(e,n){return n?(0,em._)(e).concat([n.username]):e},[]))&&void 0!==l?l:[],T=null==g?void 0:g.multiplayerInvites,G=m.filter(function(e){return!(null==E?void 0:E.members.some(function(n){return n.id===e.id}))}),D=null==E?void 0:E.members.filter(function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)!==v}),P=null==E?void 0:E.members.filter(function(e){return e.permissions&&e.permissions!==eT.SV.Member}),B=null==D?void 0:D.filter(function(e){var n=e.user;return m.some(function(e){return e.id===(null==n?void 0:n.id)})}),U=null==D?void 0:D.filter(function(e){var n=e.user;return!m.some(function(e){return e.id===(null==n?void 0:n.id)})}),A=null==P?void 0:P.some(function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===v}),L=null!==(c=null==T?void 0:T.length)&&void 0!==c?c:0,O=null==g?void 0:g.currentUserPermissions.editMultiplayers,X=null==g?void 0:g.currentUserPermissions.inviteGuests,M=(0,J._)((0,en.useState)(null),2),z=M[0],W=M[1];return p?(0,K.tZ)(eS.Tg,{css:[eh._U.root],background:"default",children:(0,K.BX)(ei.G,{css:eh._U.loading,children:[(0,K.tZ)(eR.Z,{color:eD.TV.foregroundDimmer}),(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,K.BX)(eS.Tg,{css:eh._U.root,background:"default",children:[(0,K.tZ)(ei.G,{css:[eh._U.header,h&&eh._U.header_mobile],children:(0,K.tZ)(ei.G,{css:eh._U.titleContainer,children:(0,K.tZ)(eE.xv,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),X?(0,K.tZ)(ei.G,{css:eh._U.searchContainer,children:(0,K.tZ)(eJ.Z,{existingUsernames:I,onSubmit:function(e){eB()(e)&&!S.loading?W(e):k.loading||w({variables:{username:e,replId:s,type:"rw"}})},isDisabled:p})}):null,!X&&R?(0,K.tZ)(ei.G,{css:[eo.l0.px(16)],children:(0,K.tZ)(e_.u,{icon:(0,K.tZ)(eI.Z,{}),text:'You can add people to this Repl by inviting them to the "'.concat(null==E?void 0:E.displayName,'" Friends Team.'),href:"/teams/".concat(null==E?void 0:E.username),target:"_blank"})}):null,(0,K.tZ)(eC.u,{isOpen:!!z,onRequestClose:function(){return W(null)},children:z?(0,K.tZ)(ek,{email:z,onInvite:function(){_({variables:{email:z,replId:s,type:"rw"}}),W(null)},onCancel:function(){return W(null)}}):null}),(0,K.BX)(eS.Tg,{css:eh._U.userList,children:[(null==T?void 0:T.length)?(0,K.BX)(ei.G,{css:eh._U.userGroup.root,children:[(0,K.tZ)(eh.ln,{title:"Pending Invitations",color:eD.TV.outlineStrongest,count:L}),null==T?void 0:T.map(function(e){return(0,K.tZ)(eA.Z,{canEditMultiplayers:A||!1,email:e.email,isPendingInvitation:!0,replId:s},e.email)})]}):null,(null==G?void 0:G.length)?(0,K.BX)(ei.G,{css:eh._U.userGroup.root,children:[(0,K.tZ)(eh.ln,{title:"External Guests",color:eD.TV.outlineStrongest,count:null==G?void 0:G.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),null==G?void 0:G.map(function(e){return(0,K.tZ)(eA.Z,{canEditMultiplayers:A||!1,isPendingInvitation:!1,replId:s,user:e},e.id)})]}):null,(null==B?void 0:B.length)?(0,K.BX)(ei.G,{css:eh._U.userGroup.root,children:[(0,K.tZ)(eh.ln,{title:"Online Members",color:eD.TV.greenStrongest,count:null==B?void 0:B.length}),null==B?void 0:B.map(function(e){var n=e.user;return n?(0,K.tZ)(eA.Z,{isPendingInvitation:!1,canEditMultiplayers:!!A,replId:s,user:n},n.id):null})]}):null,(null==U?void 0:U.length)?(0,K.BX)(ei.G,{css:eh._U.userGroup.root,children:[(0,K.tZ)(eh.ln,{title:"Offline Members",color:eD.TV.outlineStrongest,count:null==U?void 0:U.length}),null==U?void 0:U.map(function(e){var n=e.user;return n?(0,K.tZ)(eA.Z,{isPendingInvitation:!1,canEditMultiplayers:!!A,replId:s,user:n},n.id):null})]}):null,(null==P?void 0:P.length)?(0,K.BX)(ei.G,{css:eh._U.userGroup.root,children:[(0,K.tZ)(eh.ln,{title:"Admins",color:eD.TV.accentPrimaryStronger,count:P.length}),P.map(function(e){var n=e.user;return n?(0,K.tZ)(eA.Z,{canEditMultiplayers:!1,isPendingInvitation:!1,user:n,replId:s},n.id):null})]}):null,O||p?null:(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var e$=(0,$.iv)([eo.l0.flex.column,eo.l0.py(16),eo.l0.borderRadius(8),eo.l0.align.stretch,eo.l0.flex.growAndShrink(1),eo.l0.maxHeight("calc(100vh - ".concat(et.Mz+12,"px)")),eo.l0.backgroundColor.backgroundDefault]),eQ=function(e){var n=e.replId,t=e.handleUpgradeTriggered,r=e.isTeamRepl;return(0,K.BX)(ei.G,{css:e$,children:[r?(0,K.tZ)(eK,{replId:n}):(0,K.tZ)(eh.ZP,{replId:n,handleUpgradeTriggered:t}),(0,K.tZ)(ef.Z,{replId:n})]})},e0=t(30509),e1=t(79378),e2=t(30983),e4=t(93918),e3=(0,e4.X)({styles0:[eo.l0.cursor.pointer,{transition:"all 0.2s ease","&:hover":{filter:"brightness(95%)",boxShadow:eo.TV.shadow1}}]});function e8(e){var n=e.user,t=e.onClick;return(0,K.tZ)(e2.u,{placement:"bottom",tooltip:"Observe ".concat(n.username),children:function(e,r){return(0,K.tZ)(ei.G,(0,e0._)((0,eL._)({},e),{innerRef:r,onClick:t,children:(0,K.tZ)(e1.q,{size:24,src:n.image||null,username:n.username,ringColor:n.color,css:e3.styles0})}))}})}var e5=t(1498),e6=t(29479),e7={owner:"Owner",editor:"Can edit"},e9=t(95891),ne=t(61405),nn=t(76588),nt=t(93496),nr=t(40282),ni=(0,e4.X)({container:[eo.l0.pl(8),eo.l0.pr(16),eo.l0.py(4),eo.l0.flex.row,eo.l0.align.center,eo.l0.justify.start],button:[eo.l0.display.flex,eo.l0.align.center],img:[eo.l0.width(32),eo.l0.height(32),eo.l0.borderRadius("full"),eo.l0.backgroundColor.white,eo.l0.border({width:3,style:"solid"}),{objectFit:"cover"}],usernameContainer:[eo.l0.display.flex,eo.l0.flex.column,eo.l0.justify.center,eo.l0.ml(8),eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(2)]}),no=function(e){var n=e.id,t=e.username,r=e.image,i=e.isOwner,o=e.color,a=e.hideModal,l=e.canClickAvatar,c=e.isCurrentUser,s=e.onAvatarClick,u=function(){l&&(s({username:t,id:n}),a())};return(0,K.BX)("div",{css:[ni.container,i&&nt.gU.listItem],style:(0,eL._)({cursor:l?"pointer":"auto"},l&&nt.gU.listItem),role:"button",onClick:u,onKeyDown:u,tabIndex:0,children:[(0,K.BX)("div",{css:ni.button,children:[(0,K.tZ)(nn.Z,{src:r,alt:"",css:ni.img,style:{borderColor:o},width:32,height:32}),l?(0,K.BX)(nr.T,{children:["Observe ",t]}):null]}),(0,K.BX)("div",{css:ni.usernameContainer,children:[(0,K.BX)(eE.xv,{multiline:!1,children:["@",t,c?" (you)":null]}),(0,K.tZ)(eE.xv,{variant:"small",color:"dimmer",multiline:!1,children:i?e7.owner:e7.editor})]})]})};function na(){var e=(0,eO._)(["\n  fragment UsersOnlineOverflowMenuUser on User {\n    id\n    username\n    image\n  }\n"]);return na=function(){return e},e}function nl(){var e=(0,eO._)(["\n  query UsersOnlineOverflowMenu($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n        multiplayers {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n"]);return nl=function(){return e},e}var nc={},ns=(0,eX.Ps)(na()),nu=(0,eX.Ps)(nl(),ns),nd=(0,e4.X)({loading:[eo.l0.flex.row,eo.l0.justify.center,eo.l0.p(32)],loaded:[eo.l0.colWithGap(8),eo.l0.py(8),eo.l0.maxHeight(330),{overflowY:"auto"}]}),np=function(e){var n,t=e.replId,r=e.activeUsers,i=e.hideModal,o=e.onAvatarClick,a=(n=(0,eL._)({},nc,{variables:{replId:t}}),eM.a(nu,n)),l=a.data,c=a.loading,s=a.error;if(c)return(0,K.tZ)(ei.G,{css:nd.loading,children:(0,K.tZ)(eR.Z,{})});if(s)return(0,K.tZ)("div",{children:s.message});if((null==l?void 0:l.repl.__typename)==="Repl"){var u=l.repl,d=l.currentUser,p=u.user,f=p&&r.find(function(e){return e.username===p.username}),h=u.multiplayers.filter(function(e){var n;return e&&(n=e.id,r.some(function(e){return e.id===n}))}).slice(2);return(0,K.tZ)(ei.G,{css:nd.loaded,children:(0,K.BX)(ei.G,{children:[p?(0,K.tZ)(no,(0,e0._)((0,eL._)({},p),{color:f?f.color:"transparent",isOwner:!0,hideModal:i,isCurrentUser:p.id===(null==d?void 0:d.id),canClickAvatar:!!f&&p.id!==(null==d?void 0:d.id),onAvatarClick:o})):null,h.map(function(e){if(!e)throw Error("Expected user");var n=r.find(function(n){return n.username===e.username});if(!n)throw Error("Expected user online");var t=e.id!==(null==d?void 0:d.id);return(0,K.tZ)(no,(0,e0._)((0,eL._)({isCurrentUser:e.id===(null==d?void 0:d.id)},e),{canClickAvatar:t,color:n.color,hideModal:i,isOwner:!1,onAvatarClick:o}),"chat-user-list-".concat(e.username))})]})})}return(null==l?void 0:l.repl.__typename)==="ReplRedirect"?(0,K.BX)("div",{children:["This Repl has moved to"," ",(0,K.tZ)("a",{href:l.repl.replUrl,children:l.repl.replUrl})]}):(null==l?void 0:l.repl.__typename)==="SubscriptionExpiredError"?(0,K.BX)("div",{children:["Your subscription has expired.",(0,K.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null},nf=function(e){var n=e.isOpen,t=e.hideModal,r=e.children,i=e.onAvatarClick,o=(0,ed.Z)(),a=(0,ne.aG)();return(0,K.BX)(e9.Z,{isOpen:n,padding:0,onClickOutside:t,children:[r,(0,K.tZ)(np,{replId:o,activeUsers:a,hideModal:t,onAvatarClick:i})]})},nh=(0,e4.X)({root:[eo.l0.flex.row,eo.l0.align.center,eo.l0.backgroundColor.backgroundDefault],userStack:[eo.l0.rowWithGap(4),eo.l0.align.center,eo.l0.px(8),(0,ea._)({},eo.BC.max(e6.j.mobileMax+100),[eo.l0.display.none])],userStackListItem:{listStyleType:"none"},overflowContainer:{backgroundColor:"transparent"},overflowButton:[eo.l0.borderRadius("full"),eo.l0.minWidth(24),eo.l0.height(24),eo.l0.fontSize(10),eo.l0.border({color:eo.TV.outlineDefault})]});function nm(e){var n=(0,J._)((0,en.useState)(!1),2),t=n[0],r=n[1],i=(0,ec.aG)();if(0===i.length)return null;var o=i.slice(0,2),a=i.length-2;return(0,K.tZ)(ei.G,{css:nh.root,children:(0,K.BX)(ei.G,{tag:"ul",css:nh.userStack,"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[o.map(function(n){return(0,K.tZ)("li",{css:nh.userStackListItem,children:(0,K.tZ)(e8,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)}),a>0?(0,K.tZ)("li",{css:nh.userStackListItem,children:(0,K.tZ)(ei.G,{children:(0,K.tZ)(nf,{isOpen:t,hideModal:function(){return r(!1)},onAvatarClick:e.onAvatarClick,children:(0,K.tZ)(eS.Tg,{background:"root",css:nh.overflowContainer,children:(0,K.tZ)(e5.zx,{size:"small",onClick:function(){return r(!t)},text:a.toString(),css:nh.overflowButton})})})})}):null]})})}var nv=t(38003),ng=t(74652),ny=t(27308),nb=t(50199),nx=t(27387),nZ=t(96583),nw=t(3947),nk=t(81764),nC=t(80259),n_=t(7727),nS=t(56287),nE=t(25632),nR=t(23394),nI=t(60442),nT=t(90234),nG=t(86763),nD=t.n(nG),nP=t(73524),nB=t(92674),nU=t.n(nB);function nA(e){var n,t,r,i,o,a,l,c,s,u,d,p,f,h,m,v,g=e.codeEditorPath,y=e.isHTML,b=(t=(n={isStacked:e.isStacked,isHTML:y,isExtension:e.isExtension,codeEditorPath:g}).isStacked,r=n.isHTML,i=n.isExtension,o=n.codeEditorPath,a={codeEditor:{paneId:nU()(),pane:{type:"codeEditor",data:{path:void 0===o?"":o}}},output:{paneId:nU()(),pane:{type:r?"webview":"runnerOutput"}},shell:{paneId:nU()(),pane:{type:"shell"}},ghostwriter:{paneId:nU()(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:nU()(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:nU()(),pane:{type:"docs",data:{url:nP.TT.EXTENSIONS}}}},l={},Object.values(a).forEach(function(e){var n=e.paneId,t=e.pane;l[n]=t}),{layout:(s=(c={codeEditorId:a.codeEditor.paneId,outputId:a.output.paneId,shellId:a.shell.paneId,extensionDevtoolsId:a.extensionDevtools.paneId,extensionDocsId:a.extensionDocs.paneId,isStacked:t,isExtension:i}).codeEditorId,u=c.outputId,d=c.shellId,p=c.extensionDevtoolsId,f=c.extensionDocsId,h=c.isStacked,m=c.isExtension,v=h?{type:"split",stacked:!0,percent:100,children:[{id:nU()(),percent:60,type:"paneGroup",panes:[s],activeIndex:0},{id:nU()(),percent:40,type:"paneGroup",panes:[u,d],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:nU()(),percent:55,type:"paneGroup",panes:[s],activeIndex:0},{id:nU()(),percent:45,type:"paneGroup",panes:[u,d],activeIndex:0}]},m&&(v=h?{type:"split",stacked:!0,percent:100,children:[{id:nU()(),percent:40,type:"paneGroup",panes:[s],activeIndex:0},{id:nU()(),percent:60,type:"paneGroup",panes:[p,f,d],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:nU()(),percent:55,type:"paneGroup",panes:[s],activeIndex:0},{id:nU()(),percent:45,type:"paneGroup",panes:[p,f,d],activeIndex:0}]}),{floating:[],tiling:v}),data:l});return{data:b.data,layout:b.layout,type:"default",sidebarPercent:15}}var nL=t(78950),nO=t(45077);function nX(e,n){var t=(0,nL._)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!=typeof o)throw Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw Error("Expected paneGroup");return a}if("tiling"!==r)throw Error("Expected tiling path");var l=e.tiling;if(!l)return null;var c=l,s=i.length,u=0,d=!0,p=!1,f=void 0;try{for(var h,m=i[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value;if("paneGroup"===c.type)break;if("number"!=typeof v)throw Error("Expected number");u++,c=c.children[v]}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}return s===u?c:null}function nM(e,n){var t=e.floating.find(function(e){return e.panes.includes(n)});if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,c=void 0;try{for(var s,u=o.node.children[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,em._)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function nz(e,n){var t=e.tiling;return t?function e(n,t,r){if("paneGroup"===n.type)return{paneGroup:n,path:r};var i=0,o=n.children.length-1;return"topRight"!==t||n.stacked?"bottomRight"===t?i=o:"bottomLeft"===t&&n.stacked&&(i=o):i=o,e(n.children[i],t,(0,em._)(r).concat([i]))}(t,n,["tiling"]):null}function nW(e,n){var t=e.tiling,r=e.floating,i=(0,em._)(r);for(t&&i.push(t);i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.type)i.push.apply(i,(0,em._)(o.children));else if(o.id===n)return o}return null}function nN(e,n){var t=e.tiling;if(null===t)return null;for(var r=[[t,["tiling"]]];r.length;){var i=function(){var e=r.shift();if(!e)throw Error("Expected item");var t=(0,J._)(e,2),i=t[0],o=t[1];return"split"!==i.type?"continue":i.children.some(function(e){return"paneGroup"===e.type&&e.id===n})?{v:{node:i,path:o}}:void i.children.forEach(function(e,n){r.push([e,(0,em._)(o).concat([n])])})}();if("object"===(0,nO._)(i))return i.v}return null}function nj(e,n){var t=nM(e,n);if((null==t?void 0:t.paneGroup.type)==="paneGroup"){var r=nN(e,t.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(t.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function nF(e){if(e.length<1)throw Error("Expected a path with a parent");return e.slice(0,-1)}function nV(e){return"floatingPaneGroup"!==e.type}var nH=t(15859),nY=(0,nT.cn)([]),nq=(0,nT.cn)([]),nJ=(0,nT.cn)([]),nK={x:0,y:0,width:0,height:0},n$={type:"commands",data:{autoFocus:!1}},nQ=(0,nH.xu)(function(e){return(0,nT.cn)({paneId:e,type:"tile",rectAtom:(0,nT.cn)((0,eL._)({},nK)),data:(0,nT.cn)((0,eL._)({},n$)),isHidden:!1,isCommitted:!1})}),n0=(0,nT.cn)(function(e){return e(nY).map(function(n){return e(nQ(n))})}),n1=(0,nT.cn)(function(e){return e(n0).filter(function(e){return!e.isHidden})}),n2=(0,nT.cn)(function(e){return e(n0).filter(function(e){return e.isHidden})}),n4=(0,nT.cn)(function(e){return e(nJ).map(function(n){return e(n8(n))})}),n3=(0,nH.xu)(function(e){return(0,nT.cn)({handleId:e,rect:nK,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]})}),n8=(0,nH.xu)(function(e){return(0,nT.cn)({id:e,rectAtom:(0,nT.cn)((0,eL._)({},nK)),panes:[],path:["tiling"],activeIndex:0})}),n5=(0,nT.cn)(function(){return 32}),n6=(0,nT.cn)({x:0,y:0,width:0,height:0}),n7=(0,nT.cn)({width:0}),n9=t(64461),te=(0,nT.cn)(null),tn=(0,nT.cn)(null,function(e,n,t){t!==e(te)&&n(te,t)}),tt=(0,nT.cn)(null,function(e,n,t){var r=nQ(t);e(r).isCommitted||n(r,function(e){return(0,n9.Uy)(e,function(e){e.isCommitted=!0})})}),tr=(0,nT.cn)(function(e){var n=e(te);if(!n)return null;var t=e(nQ(n)),r=e(t.data);return(0,nw.Ur)(r)&&r.data.path||null}),ti=t(59510),to=t.n(ti),ta=t(76673),tl={top:0,bottom:0,left:0,right:0};function tc(e,n){var t=n.inside,r=n.minVisibleX,i=n.minVisibleY,o=-e.width+r,a=t.width-r,l=t.height-i;return{x:Math.min(Math.max(o,e.x),a),y:Math.min(Math.max(0,e.y),l)}}var ts=(0,nT.cn)(!0),tu=(0,nT.cn)(!1),td=(0,nT.cn)({tiling:null,floating:[]}),tp=(0,nT.cn)(function(e){return e(n0).filter(function(n){return(0,nw.Ur)(e(n.data))})}),tf=(0,nT.cn)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(n0)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&(0,nw.Ur)(e(a.data)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),th=(0,nT.cn)(function(e){return e(tp).map(function(n){return{paneId:n.paneId,filePath:e(n.data).data.path}}).filter(function(e){return e.filePath&&e.filePath.length>0})}),tm=(0,nT.cn)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(n1)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),tv=(0,nT.cn)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(n2)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),tg=(0,nT.cn)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(n0)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.data)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),ty=(0,nT.cn)(function(e){return e(tg).length}),tb=(0,nT.cn)(function(e){var n=e(n6);return!!(n.width&&n.height)}),tx=(0,nT.cn)(null),tZ=(0,nT.cn)(function(e){var n=e(te);if(!n)return null;var t=e(nQ(n)).rectAtom,r=e(t),i=e(n5);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}}),tw=(0,nT.cn)(null,function(e,n,t){var r=e(tp).find(function(n){return t===(0,nw.DQ)(e(n.data))});r&&(n(tn,r.paneId),n(tt,r.paneId))}),tk=(0,nT.cn)(null,function(e,n,t){n(e(nQ(t.paneId)).data,t.pane),t.makeActive&&n(tn,t.paneId),t.commit&&n(tt,t.paneId)}),tC=(0,nT.cn)(null);function t_(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function tS(e,n){var t,r,i,o,a,l,c,s,u,d=(r=(t={point:e,rect:n}).rect,i=t.point,o=r.height>r.width?r.width/r.height:1,a=r.width>r.height?r.height/r.width:1,(u=Math.min(l=(i.x-r.x)*a,c=(r.x+r.width-i.x)*a,s=(i.y-r.y)*o,(r.y+r.height-i.y)*o))===l?"left":u===c?"right":u===s?"top":"bottom"),p={x:n.x,y:n.y,width:n.width,height:n.height},f="below";return"top"===d?(p.height=n.height/2,f="above"):"bottom"===d?(p.height=n.height/2,p.y=n.y+n.height/2,f="below"):"left"===d?(p.width=n.width/2,p.x=n.x,f="leftOf"):"right"===d&&(p.width=n.width/2,p.x=n.x+n.width/2,f="rightOf"),{placement:f,rect:p}}function tE(e){return"handle:"+e.leftPath.join(":")}function tR(e){return(0,nb.Z)(function(){return(0,nH.kv)(e,function(e){return{width:e.width,height:e.height}},function(e,n){return!!(e.height===n.height&&e.width===n.width)})},[e])}function tI(e){return(0,nb.Z)(function(){return(0,nH.kv)(e,function(e){return{x:e.x,y:e.y}},function(e,n){return!!(e.x===n.x&&e.y===n.y)})},[e])}var tT=(0,nT.cn)(6),tG=(0,nT.cn)(function(e){var n=e(n5),t=e(n7),r=e(n6),i=e(tT);return{headerHeight:n,inset:6===i?{top:0,bottom:i+2,left:i+t.width,right:i+2}:{top:0,bottom:0,left:t.width,right:0},gap:i,size:{width:r.width,height:r.height}}}),tD=(0,nT.cn)(null,function(e,n,t){n(n6,t),n(tB,e(td))});function tP(e,n){return to()(e,n)}var tB=(0,nT.cn)(null,function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var c=nQ(r),s=e(c);tP(e(s.rectAtom),i)||n(s.rectAtom,i);var u=(0,n9.Uy)(s,function(e){e.paneId=r,e.type=o,e.isHidden=a});tP(s,u)||n(c,u)},i=e(nY),o=e(nq),a=e(nJ),l=new Set(i),c=new Set(o),s=new Set(a),u=function(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?tl:o,l=[],c=[],s=[],u=[],d=null,p={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},f=e.tiling;if((null==f?void 0:f.type)==="paneGroup"){var h={x:p.x,y:p.y+i,width:p.width,height:p.height-i},m={x:h.x,y:h.y-i,width:h.width,height:i};u.push({id:f.id,rect:m,panes:f.panes,activeIndex:f.activeIndex,path:["tiling"]}),c.push.apply(c,(0,em._)(f.panes.map(function(e,n){return{paneId:e,rect:h,active:n===f.activeIndex}})))}else f&&f.children.forEach(function(n,t){return function n(t,o,a,l){var p,f,h,m=o.children.indexOf(t),v=o.children.length,g=o.stacked?a.height:a.width,y=(p=a.width,f=a.height,h=t.percent/100,o.stacked?f=(g-(r*(v-1)+i*v))*h+i:p=(g-r*(v-1))*h,{width:p,height:f}),b=y.width,x=y.height,Z=function(){var e=a.x,n=a.y;if(0===m)return{x:e,y:n};if(!d)throw Error("Expected previousRect");return o.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),w={x:Z.x,y:Z.y,height:x,width:b};if(d=w,"paneGroup"===t.type){var k={x:w.x,y:w.y+i,width:w.width,height:w.height-i},C={x:k.x,y:k.y-i,width:k.width,height:i};u.push({id:t.id,rect:C,panes:t.panes,activeIndex:t.activeIndex,path:l}),c.push.apply(c,(0,em._)(t.panes.map(function(e,n){return{paneId:e,rect:k,active:n===t.activeIndex}})))}else t.children.forEach(function(e,r){return n(e,t,w,(0,em._)(l).concat([r]))});if(0!==m){var _={x:w.x-(o.stacked?0:r),y:w.y-(o.stacked?r:0),width:o.stacked?w.width:r,height:o.stacked?r:w.height},S=nF(l),E=(0,em._)(S).concat([m-1]),R=nX(e,E);if(!R||!nV(R))throw Error("Expected leftNode");var I=void 0;0===R.percent?I="left":0===t.percent&&(I="right"),s.push({parentPath:S,leftPath:E,rightPath:l,stacked:o.stacked,rect:_,snapped:I})}}(n,f,p,["tiling",t])});var v={x:p.x-a.left,y:p.y-a.top,width:p.width+a.left+a.right,height:p.height+a.top+a.bottom};return e.floating.forEach(function(e,n){var t=tc(e.rect,{inside:v,minVisibleX:2*i,minVisibleY:i}),r={height:i,width:e.rect.width,x:t.x,y:t.y},o={x:t.x,y:t.y+i,width:e.rect.width,height:Math.max(e.rect.height-i,0)};u.push({id:e.id,rect:r,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),l.push.apply(l,(0,em._)(e.panes.map(function(n,t){return{paneId:n,rect:o,active:t===e.activeIndex}})))}),{tiles:c,gutters:s,headers:u,floating:l}}(t,e(tG)),d=u.tiles,p=u.floating,f=u.gutters,h=u.headers,m=f.map(tE);tP(o,m)||n(nq,m);var v=(0,em._)(d).concat((0,em._)(p)).map(function(e){return e.paneId});tP(i,v)||n(nY,(0,ta.Z)(v,{existing:i,getKey:function(e){return e}}));var g=[];h.forEach(function(t){s.delete(t.id);var r=n8(t.id),i=e(r);g.push(t.id),tP(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,n9.Uy)(i,function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path});tP(i,o)||n(r,o)}),tP(a,g)||n(nJ,g),d.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"tile"})}),p.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"floating"})}),f.forEach(function(t){var r={handleId:tE(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};c.delete(r.handleId);var i=n3(r.handleId);tP(e(i),r)||n(i,r)}),l.forEach(nQ.remove),c.forEach(n3.remove),s.forEach(n8.remove);var y=e(te);y&&l.has(y)&&n(te,null),n(td,t)}),tU=t(31950),tA=t(91608),tL=t(66368),tO=t(71999),tX=t(28999),tM=t(3720),tz=t(85234),tW=t.n(tz);function tN(){var e=(0,eO._)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return tN=function(){return e},e}var tj={},tF=(0,eX.Ps)(tN());function tV(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=nX(e,t);if(!a||!nV(a))throw Error("Expected leftNode");var l=nX(e,nF(t));if((null==l?void 0:l.type)!=="split")throw Error("Expected splitNode");var c=l.children.indexOf(a);if(-1===c)throw Error("Expected leftNodeIndex");var s=c+1,u=l.children[s];if(!u)throw Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&c>0)for(var d=Math.abs(r),p=c-1;d>0;){var f=l.children[p];if(f.percent>d){f.percent-=d;break}if(d-=f.percent,f.percent=0,0===p)break;p--}var h=l.children.reduce(function(e,n){return n===u?e:e+n.percent},0);u.percent=100-h;return}var m=a.percent+u.percent,v=l.children.slice(c).reduce(function(e,n){return e+n.percent},0);if(r>m-o){if(a.percent=Math.min(v,Math.max(m,r)),u.percent=0,r>m&&s<l.children.length-1)for(var g=r-m,y=s+1;g>0;){var b=l.children[y];if(b.percent>g){b.percent-=g;break}if(g-=b.percent,b.percent=0,y===l.children.length-1)break;y++}return}var x=a.percent-r;u.percent=u.percent+x,a.percent=r}var tH=(0,nT.cn)(null),tY=(0,nT.cn)(null,function(e,n,t){if("end"===t.type){n(tH,null);return}if("update"===t.type){var r=e(tH);if(!r){var i=Error("Expected tilingResize");throw n(tx,{error:i,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),i}var o=r.stacked,a=r.leftPath,l=r.startPercent,c=r.resizeDistance,s=r.initialLayout,u=r.snapPercent,d=l+(o?t.moveDelta.y:t.moveDelta.x)/c*100;n(tB,(0,n9.Uy)(s,function(e){tV(e,{leftPath:a,percent:d,snapPercent:u})}));return}var p=e(td),f=t.stacked?window.innerHeight:window.innerWidth,h=nX(p,t.leftPath);if(!h||!nV(h)){var m=Error("Expected left node");throw n(tx,{error:m,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),m}var v=nF(t.leftPath),g=h.percent,y=null;try{y=function(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=nX(e,t);if(!r||"split"!==r.type)throw Error("Expected split node");for(var i=100,o=nF(t);o.length;){var a=nX(e,o);if(!a)break;o=nF(o),"split"===a.type&&a.stacked===r.stacked&&(i=a.percent/100*i)}return i}(n,{splitPath:t}),o=nX(n,t);if((null==o?void 0:o.type)!=="split")throw Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,s=r.inset,u=void 0===s?{top:0,bottom:0,left:0,right:0}:s,d=o.children.length,p=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(u.top+u.bottom):a.width-(u.left+u.right))-p)}({splitPath:v,layout:p,tilingOptions:e(tG)})}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),e}if(null===y)throw Error("Expected resizeDistance");n(tH,{stacked:t.stacked,leftPath:t.leftPath,startPercent:g,resizeDistance:y,snapPercent:30/f*100,initialLayout:p})});function tq(e){return(0,nb.Z)(function(){return n3(e)},[e])}function tJ(e){var n=tq(e);return(0,nb.Z)(function(){return(0,nH.kv)(n,function(e){return e.rect})},[n])}function tK(e){return(0,nb.Z)(function(){return(0,nT.cn)(function(n){var t=n(tH);return!!t&&e===tE({leftPath:t.leftPath})})},[e])}function t$(e){var n=tq(e);return(0,nb.Z)(function(){return(0,nH.kv)(n,function(e){return e.stacked})},[n])}var tQ=(0,nT.cn)(null,function(e,n){0!==e(n7).width&&(n(n7,{width:0}),n(tB,e(td)))}),t0=(0,nT.cn)(null,function(e,n){var t=e(n7).width>0?0:rt;n(n7,{width:t}),n(tB,e(td))}),t1=(0,nT.cn)(null),t2=(0,nT.cn)(null,function(e,n){n(t1,{sidebarWidthStart:e(n7).width})}),t4=(0,nT.cn)(null,function(e,n,t){var r=t.deltaX,i=e(t1);if(i){var o=e(n6),a=i.sidebarWidthStart+r;if((a=Math.min(Math.max(a,0),Math.min(o.width,t9)))<rr&&!(r>0)){if(rr-a<re)return;a=0}n(n7,{width:a}),n(tB,e(td))}}),t3=(0,nT.cn)(null,function(e,n){if(e(t1)){var t=e(n7);t.width<rr&&(n(n7,{width:0===t.width?0:rr}),n(tB,e(td))),n(t1,null)}}),t8=(0,nT.cn)(function(e){return!!e(t1)}),t5=(0,nT.cn)(function(e){return e(t8)?{width:1,height:e(t6).height}:{width:2,height:24}}),t6=(0,nT.cn)(function(e){var n=e(n6).height,t=e(n7),r=e(tT);return{x:t.width,y:0,height:n-r,width:r}}),t7=(0,nT.cn)(function(e){return e(t6).height}),t9=600,re=80,rn=(0,nT.cn)(function(e){return e(n7).width}),rt=220,rr=180,ri=(0,nT.cn)(function(e){return e(rn)>0}),ro=(0,nT.cn)(function(e){var n,t,r=e(n6);return n=e(rn)/r.width*100,Math.min(Math.max((t={min:0,max:100}).min,n),t.max)}),ra=(0,nT.cn)(function(e){var n=e(td),t={};return e(n0).forEach(function(n){t[n.paneId]=e(n.data)}),{layout:n,data:t,sidebarPercent:e(ro)}}),rl=(0,nT.cn)(null),rc=(0,nT.cn)(null),rs=(0,nT.cn)(null);function ru(){return(ru=(0,nx._)(function(e,n){var t,r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===tM.l||void 0===tM.l?void 0:tM.l.mutate({mutation:tF,variables:{input:{replId:e,state:n}}})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{success:!1,retry:!0}];case 4:if((null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.setReplLayoutState.__typename)==="Repl")return[2,{success:!0,retry:void 0}];return[2,{success:!1,retry:!1}]}})})).apply(this,arguments)}var rd=(0,nT.cn)(null,(r=(0,nx._)(function(e,n,t){var r,i,o,a,l,c;return(0,nZ.Jh)(this,function(s){switch(s.label){case 0:if((r=e(rc))&&!r.retry||r&&Date.now()-r.timestamp<6e4||!e(tb)||(i=e(ra),o=t.replId,a=e(rl),!t.force&&to()(a,i)))return[2];return n(rs,l=tW()()),[4,function(e,n){return ru.apply(this,arguments)}(o,i)];case 1:if(c=s.sent(),e(rs)!==l)return[2];if(n(rs,null),c.retry)return n(rc,{timestamp:Date.now(),retry:!0}),[2];if(!c.success)return n(rc,{timestamp:Date.now(),retry:!1}),[2];return n(rl,i),[2]}})}),function(e,n,t){return r.apply(this,arguments)})),rp=(0,nT.cn)(null,function(e,n,t){var r=t.data,i=t.layout,o=t.sidebarPercent,a=t.type;Object.entries(r).forEach(function(t){var r=(0,J._)(t,2),i=r[0],o=r[1],a=nQ(i);n(a,(0,n9.Uy)(e(a),function(e){e.isCommitted=!0})),n(e(a).data,o)});var l=window.innerWidth,c=Math.floor(o)>0?Math.min(o/100*l,t9):0;n(n7,{width:c>0?Math.max(rt,c):Math.max(0,c)}),n(tB,i),n(tC,a),n(rl,e(ra))});function rf(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating){e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});return}var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=nM(e,n.relativeTo);if(!i)throw Error("Expected pane");r=i.paneGroupPath}if(null===r)throw Error("Expected relativeTo");if("tiling"!==r[0])throw Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,c="above"===o||"below"===o,s="rightOf"===o||"below"===o;if(!e.tiling&&1===r.length){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(!e.tiling)throw Error("Expected tiling");var u=nX(e,r);if(!u||!nV(u))throw Error("Expected tiled node");if(1===r.length&&"replace"===o){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];e.tiling={type:"split",percent:100,stacked:c,children:d},rh({id:n.id,insertIndex:s?1:0,panes:a,children:d,percent:l,activeIndex:t});return}if(1===r.length&&"split"===e.tiling.type){if(!!e.tiling.stacked==!!c){rh({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:s?e.tiling.children.length:0,children:e.tiling.children});return}var p={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},f=s?[u,p]:[p,u];u.percent=100-p.percent,e.tiling={type:"split",stacked:c,children:f,percent:100};return}if(0===r.length)throw Error("Expected relativeTo length");var h=nX(e,nF(r));if((null==h?void 0:h.type)!=="split")throw Error("Expected split parent");if("replace"===o){var m=h.children.indexOf(u);h.children.splice(m,1,{id:n.id,panes:a,percent:u.percent,type:"paneGroup",activeIndex:t});return}if(!!h.stacked==!!c){var v=h.children.indexOf(u);rh({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:s?v+1:v,children:h.children});return}if(!!h.stacked!=!!c){var g={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},y=s?[u,g]:[g,u],b=u.percent;u.percent=100-g.percent;var x=h.children.indexOf(u);h.children[x]={type:"split",stacked:c,children:y,percent:b};return}}function rh(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0!==t){var l=(100-t)/100;r.forEach(function(e){e.percent=e.percent*l}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a});return}var c=r.reduce(function(e,n){return e+n.percent},0)/r.length,s=100/(100+c);r.forEach(function(e){e.percent=e.percent*s}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:c*s,activeIndex:a})}function rm(e,n){var t=nW(e,n.paneGroupId);if(!t)throw Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate;if(void 0!==r&&r>e.panes.length)throw Error("Invalid index");var a=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[a,0].concat((0,em._)(i))),(void 0===o||o)&&(e.activeIndex=a)}(t,n)}var rv=(0,nT.cn)(null,function(e,n,t){var r=nW(e(td),t);if(!r)return null;n(tn,r.panes[r.activeIndex])});function rg(e,n){e.panes.splice(n,1),0===e.activeIndex||n>e.activeIndex||(e.activeIndex=e.activeIndex-1)}function ry(e,n){var t=nM(e,n);if(!t)throw Error("Expected pane");if(t.floating){if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!=typeof r)throw Error("Expected floatingIndex");rb(e,["floating",r])}else rg(t.paneGroup,t.index);return}var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw Error("Expected paneIndex");if(!a&&1===i.panes.length){e.tiling=null;return}if(i.panes.length>1){rg(i,l);return}rb(e,o)}function rb(e,n){var t=(0,nL._)(n),r=t[0],i=t.slice(1);if("tiling"===r&&0===i.length){e.tiling=null;return}if("floating"===r&&0===i.length){e.floating=[];return}var o=nX(e,n);if(!o)throw Error("Expected node");if("floatingPaneGroup"===o.type){var a=e.floating.indexOf(o);if(-1===a)throw Error("Expected paneGroupIndex");e.floating.splice(a,1);return}var l=nF(n),c=nX(e,l);if((null==c?void 0:c.type)!=="split")throw Error("Expected split");var s=c.children.indexOf(o);if(-1===s)throw Error("Expected paneGroupIndex");var u=c.children;if(u.splice(s,1),u.length>1){var d=100/u.reduce(function(e,n){return e+n.percent},0);u.forEach(function(e){e.percent=e.percent*d});return}var p=(0,J._)(u,1)[0],f=l.length>1?nX(e,nF(l)):null;if(!f){p.percent=100,e.tiling=p;return}if("split"!==f.type)throw Error("Expected split");var h=f.children.indexOf(c);if(-1===h)throw Error("Expected parentIndex");p.percent=c.percent,f.children[h]=p}var rx=(0,nT.cn)(!1),rZ=(0,nT.cn)(function(e){return e(rx)?e(te):null}),rw=(0,nT.cn)(null,function(e,n,t){n(tn,t),n(rx,!0)}),rk=(0,nT.cn)(null,function(e,n,t){n(rx,!0);var r=nW(e(td),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(tx,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(tx,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(tn,o)}),rC=(0,nT.cn)(null,function(e,n){n(rx,!1)}),r_=(0,nT.cn)(null,function(e,n,t){e(rZ)===t?n(rC):n(rw,t)}),rS=(0,nT.cn)(null,function(e,n,t){var r=nW(e(td),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(tx,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(tx,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(r_,o)}),rE=(0,nT.cn)(function(e){var n=e(n6);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}}),rR=(0,nT.cn)(function(e){var n=e(n5),t=e(rE);return{x:t.x,y:t.y,width:t.width,height:n}}),rI=(0,nT.cn)(function(e){var n=e(n5),t=e(rE);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}}),rT=(0,nT.cn)(null,function(e,n,t){var r=e(td),i=nM(r,t);if(!i)throw Error("Expected pane");var o=!i.paneGroup.panes.some(function(e){return e!==t}),a=t===e(te),l=nj(r,t),c=(0,n9.Uy)(r,function(e){try{ry(e,t)}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});if(n(tB,c),o&&e(rx)&&n(rx,!1),a&&(o||n(rv,i.paneGroup.id),o&&l)){do"split"===l.type&&(l=l.children[0]);while("paneGroup"!==l.type);n(rv,l.id)}}),rG=(0,nT.cn)(null,function(e,n,t){var r=e(td),i=nM(r,t),o=null==i?void 0:i.paneGroup.panes.filter(function(e){return e!==t});if(null==o?void 0:o.length){var a=(0,n9.Uy)(r,function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value;ry(e,c)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});n(tB,a)}}),rD=(0,nT.cn)(null,function(e,n,t){var r=e(td),i=nM(r,t);i&&n(tB,(0,n9.Uy)(r,function(e){var n=!1,r=!0,o=!1,a=void 0;try{for(var l,c=i.paneGroup.panes[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;n&&ry(e,s),s===t&&(n=!0)}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}))}),rP=(0,nT.cn)(null,function(e,n,t){var r=e(td),i=nW(r,t.paneGroupId);if(!i){var o=Error("Expected pane group");throw n(tx,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,n9.Uy)(r,function(e){try{i.panes.forEach(function(n){ry(e,n)})}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),e}});e(rx)&&n(rx,!1),n(tB,a)}),rB=(0,nT.cn)(null,function(e,n,t){var r=e(td),i=nM(r,t.paneId);if(!i){var o=Error("Expected relativeToPane");throw n(tx,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=tW()();n(e(nQ(a)).data,{type:"commands",data:{autoFocus:!!t.autoFocus}});var l=(0,n9.Uy)(r,function(e){try{rf(e,{id:tW()(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),e}});n(tB,l),n(tn,a)}),rU=(0,nT.cn)(null,function(e,n,t){var r=e(td),i=tW()();n(e(nQ(i)).data,t.pane);var o=(0,n9.Uy)(r,function(e){try{rf(e,{id:tW()(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),e}});return n(tB,o),i}),rA=(0,nT.cn)(null,function(e,n,t){var r=e(td);n(tB,(0,n9.Uy)(r,function(e){tV(e,{leftPath:t.leftPath,percent:t.percent})}))}),rL=(0,nT.cn)(null,function(e,n,t){if(0===t.panes.length){var r=Error("Expect at least one pane");throw n(tx,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(tu),o=e(td),a=t.panes.map(function(){return tW()()}),l=(0,n9.Uy)(o,function(e){try{rf(e,{id:tW()(),panes:a,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),e}});n(tB,l),t.panes.forEach(function(t,r){var o=a[r];n(e(nQ(o)).data,t);var l=(0,nw.b)(t.type,i)?e(n0).find(function(n){return e(n.data).type===t.type&&n.paneId!==o}):null;l&&n(rT,l.paneId)}),t.makeActive&&n(tn,a[0])}),rO={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},rX=(0,nT.cn)(null,function(e,n,t){n(rU,{pane:t.pane,relativeTo:["tiling"],placement:rO[t.edge]})}),rM=(0,nT.cn)(null,function(e,n,t){var r=e(td),i=tW()(),o=(0,n9.Uy)(r,function(e){try{rf(e,{id:tW()(),panes:[i],isFloating:!0,rect:t.rect})}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),e}});return n(tB,o),n(e(nQ(i)).data,t.pane),t.makeActive&&n(tn,i),i}),rz=(0,nT.cn)(null,function(e,n,t){if(0===t.panes.length)return[];var r=e(tu),i=e(td),o=t.panes.map(function(){return tW()()}),a=(0,n9.Uy)(i,function(e){try{rm(e,{paneIds:o,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),e}});return n(tB,a),t.panes.forEach(function(i,a){var l=o[a];n(e(nQ(l)).data,i);var c=(0,nw.b)(i.type,r)?e(n0).find(function(n){return e(n.data).type===i.type&&n.paneId!==l}):null;c&&n(rT,c.paneId),t.commit&&n(tt,l)}),t.activate&&n(tn,o[0]),o}),rW=(0,nT.cn)(null,function(e,n,t){var r=t.pane,i=t.activate,o=t.placement,a=e(td);if(!a.tiling){var l=n(rU,{pane:r,relativeTo:["tiling"],placement:"replace"});return i&&n(tn,l),l}if("after"===o.type){var c=nM(a,o.paneId);if(c){var s=(0,J._)(n(rz,{panes:[r],paneGroupId:c.paneGroup.id,index:c.index+1,activate:i}),1)[0];return i&&n(tn,s),s}}if("secondary"===o.type&&o.relativeTo){var u=nj(a,o.relativeTo);if(u){if("paneGroup"===u.type){var d=(0,J._)(n(rz,{panes:[r],paneGroupId:u.id,activate:i}),1)[0];return i&&n(tn,d),d}var p=n(rU,{pane:r,relativeTo:o.relativeTo,placement:"rightOf"});return i&&n(tn,p),p}var f=nM(a,o.relativeTo);if((null==f?void 0:f.paneGroup.type)==="floatingPaneGroup"){var h=e(nQ(o.relativeTo)),m=e(h.rectAtom);return n(rM,{rect:{x:m.x+m.width,y:m.y,width:m.width,height:m.height},pane:r,makeActive:i})}}var v=n(rU,{pane:r,relativeTo:["tiling"],placement:"rightOf"});return i&&n(tn,v),v}),rN=t(30084);function rj(e){var n=e.relativeTo,t=e.rects,r=e.direction,i=t.get(n);if(!i)throw Error("Expected relativeTo rect to be included in rects");var o=null,a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=(0,J._)(s.value,2),p=d[0],f=d[1];if(p!==n){var h=function(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}({from:i,other:f,direction:r});if(("leftOf"!==r&&"above"!==r||!(h<=0))&&("rightOf"!==r&&"below"!==r||!(h<0))){var m=function(e,n,t){var r=(0,J._)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),i=r[0],o=r[1],a=Math.max(i[0],o[0]);return Math.min(i[1],o[1])-a}(i,f,"leftOf"===r||"rightOf"===r?"y":"x");!(m<=0)&&(!o||o.distance>h||o.distance===h&&o.overlap<m)&&(o={key:p,rect:f,distance:h,overlap:m})}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return(null==o?void 0:o.key)||null}var rF=t(34581),rV=(0,nT.cn)(null,function(e,n,t){var r=e(td),i=nM(r,t);if(!i){var o=Error("Expected selectedPane");throw n(tx,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}n(n8(i.paneGroup.id),function(e){return(0,n9.Uy)(e,function(e){e.activeIndex=i.index})});var a=!0,l=!1,c=void 0;try{for(var s,u=i.paneGroup.panes[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,p=nQ(d);n(p,function(e){return(0,n9.Uy)(e,function(e){e.isHidden=e.paneId!==t})})}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}n(td,(0,n9.Uy)(r,function(e){try{!function(e,n){var t=nM(e,n);if(!(null==t?void 0:t.paneGroup))throw Error("Expected pane group");var r=t.paneGroup,i=r.panes.indexOf(n);if(-1===i)throw Error("Expected index");r.activeIndex=i}(e,t)}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),e}})),n(tn,t)}),rH=(0,nT.cn)(null,function(e,n,t){var r=e(n0).find(function(n){return e(n.data).type===t});if(r){if("webview"===t||"vnc"===t)return;n(rV,r.paneId),n(tt,r.paneId);return}var i=e(td),o=nz(i,"topRight");if(!o||!i.tiling){var a=n(rU,{pane:{type:t},relativeTo:["tiling"],placement:"replace"});n(tt,a);return}if("paneGroup"===i.tiling.type){var l=n(rU,{pane:{type:t},relativeTo:["tiling"],placement:"rightOf"});n(tt,l);return}if("split"===i.tiling.type&&2===i.tiling.children.length&&"paneGroup"===i.tiling.children[1].type){var c=i.tiling.stacked,s=n(rU,{pane:{type:t},relativeTo:o.path,placement:c?"rightOf":"above"});n(tt,s);return}n(rz,{panes:[{type:t}],paneGroupId:o.paneGroup.id,commit:!0})}),rY=(0,nT.cn)(null,function(e,n){var t=e(n0).find(function(n){return"threadInbox"===e(n.data).type});if(t){n(rV,t.paneId);return}var r=e(td),i=nz(r,"bottomRight");if(!i||!r.tiling){n(rU,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"replace"});return}if("paneGroup"===r.tiling.type){n(rU,{pane:{type:"threadInbox"},relativeTo:["tiling"],placement:"rightOf"});return}n(rz,{panes:[{type:"threadInbox"}],paneGroupId:i.paneGroup.id})}),rq=(0,nT.cn)(null,function(e,n,t){var r=e(n0).find(function(n){return e(n.data).type===t.type});if(r){var i=e(td),o=(0,n9.Uy)(i,function(e){try{ry(e,r.paneId)}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePaneTypeAtom"}),e}});n(tB,o)}}),rJ=(0,nT.cn)(null,function(e,n,t){var r=e(td),i=(0,n9.Uy)(r,function(e){var r=nM(e,t.paneId);if(!r){var i=Error("Expected pane");throw n(tx,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=nW(e,t.toPaneGroupId);if(!o){var a=Error("Expected toPaneGroup");throw n(tx,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,c=!o.panes.includes(t.paneId);if(!l||c)try{ry(e,t.paneId),rm(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),c&&n(tt,t.paneId)}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),e}});n(tB,i)}),rK=(0,nT.cn)(null,function(e,n,t){var r=e(te);if(r){var i=e(td),o=nM(i,r);if(o){var a=o.paneGroup,l=rj({relativeTo:r,rects:new Map(e(n0).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t}),c=l?nM(i,l):null;if(c){n(rJ,{paneId:r,toPaneGroupId:c.paneGroup.id});return}var s=a.panes.find(function(e){return e!==r});s&&n(tB,(0,n9.Uy)(i,function(e){ry(e,r),rf(e,{id:tW()(),relativeTo:s,panes:[r],placement:t})}))}}}),r$=(0,nT.cn)(!1),rQ=(0,nT.cn)(null,function(e,n,t){var r=e(tp).map(function(n){return{paneId:n.paneId,path:(0,nw.DQ)(e(n.data))}}).filter(function(e){return t===e.path}),i=[],o=e(td),a=(0,n9.Uy)(o,function(e){var t=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var s=l.value.paneId,u=nM(e,s);if(!u){var d=Error("Expected pane");throw n(tx,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}u.floating||1!==u.paneGroup.panes.length?ry(e,s):i.push(s)}}catch(e){o=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}}),l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;n(tk,{paneId:p,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}n(tB,a)}),r0=(0,nT.cn)(null,function(e,n,t){var r=t.node.path;if(t.eventType===rN.kS.Delete){n(rQ,r);return}var i=e(tp).filter(function(n){return(0,nw.DQ)(e(n.data))===r}),o={type:(0,nw.Dp)({path:t.to}),data:{path:t.to}},a=!0,l=!1,c=void 0;try{for(var s,u=i[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value.paneId;n(tk,{paneId:d,pane:o})}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}),r1=(0,nT.cn)(null,function(e,n,t){var r=e(te),i=e(td);if(r){var o=nM(i,r);if(o){n(rz,{panes:t,paneGroupId:null==o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length});return}}var a=nz(i,"topLeft");if(a){n(rz,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});return}var l=i.floating.length?i.floating[0]:null;if(l){n(rz,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t});return}n(rL,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),r2=(0,nT.cn)(null,function(e,n){n(r1,[{type:"commands",data:{autoFocus:!0}}])}),r4=(0,nT.cn)(null,function(e,n){var t=e(te);return!!t&&(n(rT,t),!0)}),r3=(0,nT.cn)(null,function(e,n,t){var r=e(te);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=nM(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(td),{paneId:r,dir:t});i&&n(rV,i)}}),r8=(0,nT.cn)(null,function(e,n,t){var r=t.paneId,i=t.pane;n(tk,{paneId:r,pane:i});var o=e(tu),a=(0,nw.b)(i.type,o)?e(n0).find(function(n){return e(n.data).type===i.type&&n.paneId!==r}):null;if(a){var l=nM(e(td),a.paneId);if(!(null==l?void 0:l.floating)&&(null==l?void 0:l.paneGroup.panes.length)===1){n(tk,{paneId:a.paneId,pane:{type:"commands",data:{autoFocus:!1}}});return}n(rT,a.paneId)}}),r5=(0,nT.cn)(null,function(e,n,t){var r=e(e(nQ(t.b)).data);n(tk,{paneId:t.a,pane:r});var i=nM(e(td),t.b);if(!(null==i?void 0:i.floating)&&(null==i?void 0:i.paneGroup.panes.length)===1){n(r8,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}});return}n(rT,t.b)}),r6=(0,nT.cn)(null,function(e,n,t){var r=e(tu),i=nz(e(td),"topRight"),o=e(n0).find(function(n){return e(n.data).type===t.pane.type});if((0,nw.b)(t.pane.type,r)&&o){n(rV,o.paneId),n(tk,{paneId:o.paneId,pane:t.pane,makeActive:!0});return}if(!i){n(rL,{panes:[t.pane],placement:"rightOf",relativeTo:["tiling"],makeActive:!0});return}var a=i.paneGroup.panes.find(function(n){var t=e(nQ(n));if(t.isHidden)return!1;var r=e(t.data);return!t.isCommitted&&!(0,nw.RX)(r.type)});if(a){n(tk,{paneId:a,pane:t.pane,makeActive:!0});return}"debugger"===t.pane.type&&n(rX,{pane:t.pane,edge:"left"}),n(rz,{panes:[t.pane],paneGroupId:i.paneGroup.id,activate:!0})}),r7=(0,en.createContext)(null);function r9(e){var n=e.children,t=e.savedLayoutState,r=e.isHTML,i=void 0!==r&&r,o=e.isStacked,a=void 0!==o&&o,l=e.isExtension,c=void 0!==l&&l,s=e.deploymentPane,u=(0,J._)((0,en.useState)(function(){var e=(0,nT.MT)(),n=t||nA({isHTML:i,isStacked:a,isExtension:c});return e.set(rp,n),s&&e.set(r6,{pane:{type:"deployments"}}),e}),1)[0];return(0,K.tZ)(r7.Provider,{value:u,children:n})}function ie(){var e=(0,en.useContext)(r7);if(!e)throw Error("Expected store in context");return e}function it(e){return(0,tO.Dv)(e,{store:ie()})}function ir(e){return(0,tL.b)(e,ie())}var ii=function(e){return(0,tO.b9)(e,{store:ie()})};function io(e){return(0,tX.lV)((0,en.useCallback)(function(n){return n(e)},[e]),{store:ie()})}var ia={overlay:et.Is+20,gutterActive:et.Is+19,maximizedTooltip:et.Is+18,maximizedPane:et.Is+17,maximizedHeader:et.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,dropPreview:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1},il=(0,nT.cn)(null),ic=(0,tA.$)(["backgroundColor","borderRadius","zIndex","border","opacity","visiblity","width","height","x","y","innerScale","innerOpacity"]),is=ic.cssVars,iu=ic.styleTokens,id=(0,nH.kv)(il,function(e){return(0,ea._)({},is.border,(null==e?void 0:e.type)==="detachPreview"&&e.progress<.98?"1px dashed ".concat(eo.TV.foregroundDefault):"1px solid ".concat(eo.TV.accentPrimaryDefault))},to()),ip=(0,nH.kv)(il,function(e){return null==e?void 0:e.rect},to()),ih=(0,nH.kv)(ip,function(e){var n;return e?(n={},(0,ea._)(n,is.width,e.width+"px"),(0,ea._)(n,is.height,e.height+"px"),n):null},to()),im=(0,nH.kv)(ip,function(e){var n;return e?(n={},(0,ea._)(n,is.x,e.x+"px"),(0,ea._)(n,is.y,e.y+"px"),n):null},to()),iv=(0,nH.kv)(il,function(e){var n,t;return e?"detachPreview"===e.type?(n={},(0,ea._)(n,is.zIndex,ia.detachPreview.toString()),(0,ea._)(n,is.borderRadius,"100%"),(0,ea._)(n,is.backgroundColor,"transparent"),n):(t={},(0,ea._)(t,is.zIndex,ia.dropPreview.toString()),(0,ea._)(t,is.borderRadius,"8px"),(0,ea._)(t,is.backgroundColor,eo.TV.accentPrimaryDimmer),t):null},to()),ig=(0,nH.kv)(il,function(e){var n,t,r;return e?"detachPreview"===e.type?(t={},(0,ea._)(t,is.opacity,(.5*e.progress).toString()),(0,ea._)(t,is.visiblity,"visible"),t):(r={},(0,ea._)(r,is.opacity,"0.2"),(0,ea._)(r,is.visiblity,"visible"),r):(n={},(0,ea._)(n,is.opacity,"0"),(0,ea._)(n,is.visiblity,"hidden"),n)},to()),iy=(0,nH.kv)(il,function(e){return(0,ea._)({},is.innerOpacity,(null==e?void 0:e.type)==="detachPreview"?"0.5":"0")},to()),ib=(0,nH.kv)(il,function(e){return(0,ea._)({},is.innerScale,(null==e?void 0:e.type)==="detachPreview"?e.progress.toString():"1")},to()),ix=(0,e4.X)({root:[{position:"absolute",pointerEvents:"none",opacity:iu.opacity,width:iu.width,height:iu.height,transform:"translate(".concat(iu.x,", ").concat(iu.y,")"),backgroundColor:iu.backgroundColor,borderRadius:iu.borderRadius,border:iu.border,zIndex:iu.zIndex,visibility:iu.visiblity,transition:"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 200ms","@media (prefers-reduced-motion: reduce)":{transitionDuration:"0ms"}}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(eo.TV.backgroundHighest,")"),opacity:iu.innerOpacity,transform:"scale(".concat(iu.innerScale,")")}]}),iZ=(0,en.memo)(function(){var e=(0,en.useRef)(null);(0,tU.j)(e,ir(im)),(0,tU.j)(e,ir(ih)),(0,tU.j)(e,ir(id)),(0,tU.j)(e,ir(iv)),(0,tU.j)(e,ir(ig));var n=(0,en.useRef)(null);return(0,tU.j)(n,ir(iy)),(0,tU.j)(n,ir(ib)),(0,K.tZ)("div",{ref:e,css:ix.root,children:(0,K.tZ)("div",{ref:n,css:ix.inner})})}),iw=(0,nT.cn)(null,function(e,n){n(il,{type:"dropPreview",rect:e(iC)})}),ik=(0,nT.cn)(null,function(e,n,t){n(il,null),n(r$,!1),n(rL,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),iC=(0,nT.cn)(function(e){var n=e(n6),t=n.width,r=n.height,i=e(n7),o=e(tT);return{x:Math.round(i.width+o),y:0,width:t-i.width-2*o,height:r-o}});function i_(e,n){var t=n.paneGroupPath,r=n.rect,i=nX(e,t);if((null==i?void 0:i.type)!=="paneGroup")throw Error("Expected paneGroup");rb(e,t),rf(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}var iS={width:100,height:200},iE={width:200,height:100},iR=function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=n.width-t,o=n.width-iE.width/2-i/2,a=(n.height-r)/2-iS.height/2;return{middle:{rect:{x:0,y:0,width:0,height:0},paneId:null,visible:!1},above:{visible:!1,rect:{x:o,y:0,width:iE.width,height:iE.height}},below:{visible:!1,rect:{x:o,y:n.height-iE.height-r,width:iE.width,height:iE.height}},leftOf:{visible:!1,rect:{x:t+r,y:a,width:iS.width,height:iS.height}},rightOf:{visible:!1,rect:{x:n.width-iS.width-r,y:a,width:iS.width,height:iS.height}}}},iI=["above","rightOf","leftOf","below","middle"],iT=(0,nT.cn)(null),iG=(0,nT.cn)(function(e){var n=e(iT);if(!n)return null;var t=nW(e(td),n.paneGroupId);return t&&t.panes[t.activeIndex]||null});(0,nT.cn)(function(e){var n=e(n6),t=e(n5),r=e(rn),i=e(tT);return{x:n.x+r+i,y:n.y-t-i,width:n.width-r-2*i,height:n.height-i}});var iD=(0,nH.kv)(iT,function(e){return null==e?void 0:e.dropPoints}),iP=(0,nT.cn)(null,function(e,n,t){if(!e(rx)){var r=e(n6),i=nW(e(td),t.paneGroupId);if(!i){var o=Error("Expected paneGroup");throw n(tx,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(nQ(i.panes[i.activeIndex])),l=e(a.rectAtom),c=e(n5),s={x:l.x,y:l.y-c,width:l.width,height:l.height+c},u=t.mouse.x-(r.x+l.x),d=e(tT);n(iT,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(u)+"px",scale:1,fromRect:s,movedAtAll:!1,dropPoints:"floating"===a.type?iR({container:r,sidebarWidth:e(rn),gap:d}):null})}}),iB=(0,nT.cn)(null,function(e,n,t){if(!e(rx)){var r=e(iT);if(!r){n(il,null);return}var i=t.delta,o=r.paneGroupId,a=r.fromRect,l=e(td),c=nW(e(td),o);if(!c){var s=Error("Expected paneGroup");throw n(tx,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),s}var u=c.panes[c.activeIndex],d=nM(l,u);if(!d){var p=Error("Expected pane");throw n(tx,{error:p,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),p}var f=nQ(u),h=n8(d.paneGroup.id),m=e(n5),v=Math.max(Math.abs(i.x),Math.abs(i.y)),g=v>=50,y=v>0;if(g&&!d.floating){var b=e(f).rectAtom,x=e(b),Z=(0,n9.Uy)(l,function(e){try{i_(e,{paneGroupPath:d.paneGroupPath,rect:{x:x.x+i.x,y:x.y-m+i.y,width:x.width,height:x.height+m}})}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),e}});n(tB,Z),n(iA,t.mouse);return}var w=e(h),k=e(f),C="floating"===r.startType?tc({x:a.x+i.x,y:a.y+i.y,width:a.width,height:a.height},{inside:e(n6),minVisibleX:2*m,minVisibleY:m}):{x:a.x+i.x,y:a.y+i.y},_=C.x,S=C.y;if(n(w.rectAtom,function(e){return(0,n9.Uy)(e,function(e){e.x=_,e.y=S})}),n(k.rectAtom,function(e){return(0,n9.Uy)(e,function(e){e.x=_,e.y=S+m})}),!g&&!d.floating){var E=r.startPoint,R=1-.7*(1-Math.sqrt(1-Math.pow(v/50,2)));n(il,{type:"detachPreview",rect:{x:E.x-50,y:E.y-50,width:100,height:100},progress:v/50}),n(iT,(0,n9.Uy)(r,function(e){e.scale=R,e.movedAtAll=e.movedAtAll||y}));return}var I=e(tT);if(r.dropPoints){n(iT,function(n){return(0,n9.Uy)(n,function(n){(null==n?void 0:n.dropPoints)&&function(e,n){var t=n.container,r=n.gap,i=n.sidebarWidth,o=n.headerHeight,a=n.paneRects,l=n.mouse,c={x:l.x-t.x,y:l.y-t.y},s=null,u=null;if(a.length){var d=!0,p=!1,f=void 0;try{for(var h,m=a[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=(0,J._)(h.value,2),g=v[0],y=v[1],b={x:y.x-r/2,y:y.y-r/2-o,width:y.width+r,height:y.height+r+o};if(t_(l,b)){s=g,u=y;break}}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}if(e.middle.visible=!!u,u){var x={width:Math.min(100,u.width),height:Math.min(100,u.height)};e.middle.paneId=s,e.middle.rect={x:u.x+u.width/2-x.width/2,y:u.y-o+(u.height+o)/2-x.height/2-r,width:x.width,height:x.height+o/2}}}else{var Z={x:t.x+i+r,y:t.y,width:t.width-r-i,height:t.height},w={width:Math.min(100,Z.width),height:Math.min(100,Z.height)};e.middle.rect={x:Z.x+Z.width/2-w.width/2,y:Z.height/2-w.height/2,width:w.width,height:w.height},e.middle.visible=!0}var k=null,C=!0,_=!1,S=void 0;try{for(var E,R=iI[Symbol.iterator]();!(C=(E=R.next()).done);C=!0){var I=E.value,T=e[I].rect;if(t_(c,T)){k=I;break}}}catch(e){_=!0,S=e}finally{try{C||null==R.return||R.return()}finally{if(_)throw S}}var G=!0,D=!1,P=void 0;try{for(var B,U=iI[Symbol.iterator]();!(G=(B=U.next()).done);G=!0){var A=B.value;e[A].visible=!k||A===k}}catch(e){D=!0,P=e}finally{try{G||null==U.return||U.return()}finally{if(D)throw P}}}(n.dropPoints,{paneRects:e(iU),container:e(n6),sidebarWidth:e(rn),headerHeight:e(n5),gap:I,mouse:t.mouse})})});return}if(!d.floating)throw Error("Expected floating pane");n(iA,t.mouse)}}),iU=(0,nT.cn)(function(e){return e(n0).filter(function(e){return"tile"===e.type&&!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})}),iA=(0,nT.cn)(null,function(e,n,t){var r=e(n5),i=e(n6),o=function(e){var n=e.views,t=e.mouse,r=e.container,i=e.headerHeight,o=e.sidebarWidth,a=e.gap,l={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},c=!0,s=!1,u=void 0;try{for(var d,p=n[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=(0,J._)(d.value,2),h=f[0],m=f[1],v={x:m.x,y:m.y-i,width:m.width,height:i},g={x:v.x-a/2,y:v.y-a/2,width:v.width+a,height:i+a/2};if(t_(l,g))return{dropPreview:v,drop:{type:"insert",paneId:h}};var y={x:m.x,y:m.y-i,width:m.width,height:m.height+i},b={x:y.x-a/2,y:y.y-a/2,width:y.width+a,height:y.height+a};if(t_(l,b)){var x=tS(l,y);return{dropPreview:x.rect,drop:{type:"split",relativeTo:h,placement:x.placement}}}}}catch(e){s=!0,u=e}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}var Z=tS(l,{x:o,y:0,width:r.width-o,height:r.height});return{dropPreview:Z.rect,drop:{type:"split",relativeTo:["tiling"],placement:Z.placement}}}({views:e(iU),container:i,mouse:t,headerHeight:r,sidebarWidth:e(rn),gap:e(tT)}),a=o.drop;n(il,{type:"dropPreview",rect:o.dropPreview}),n(iT,function(e){return(0,n9.Uy)(e,function(e){e&&(e.drop=a,e.movedAtAll=!0)})})}),iL=(0,nT.cn)(null,function(e,n,t){var r=t.delta;if(!e(rx)){n(il,null);var i=e(iT);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,c=e(td),s=nW(e(td),o);if(!s){var u=Error("Expected paneGroup");throw n(tx,{error:u,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),u}var d=s.panes[s.activeIndex],p=nM(c,d);if(!p){var f=Error("Expected pane");throw n(tx,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),f}var h=(0,n9.Uy)(c,function(t){if(!a&&p.floating&&"floating"===i.startType){var o=nX(t,p.paneGroupPath);if((null==o?void 0:o.type)!=="floatingPaneGroup")return;var c=e(n5),s=tc({x:l.x+r.x,y:l.y+r.y,width:l.width,height:l.height},{inside:e(n6),minVisibleX:2*c,minVisibleY:c}),u=s.x,f=s.y;o.rect.x=u,o.rect.y=f;return}if(a){if("split"===a.type){if(null===t.tiling){var h=tW()();try{rf(t,{id:tW()(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=nM(e,t);if(!o)throw Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;rb(e,o.paneGroupPath),rf(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(t,{from:d,to:a.relativeTo,placement:a.placement})}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}return}var m=nM(t,a.paneId);p.paneGroup.panes.forEach(function(e){(function(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:nX(e,n.paneGroupPath);if(!t||!("panes"in t))throw Error("Expected paneGroup");ry(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++})(t,{paneId:e,paneGroupPath:(null==m?void 0:m.paneGroupPath)||["tiling"],activate:!1}),n(tt,e)})}});n(iT,null),n(tB,h),(null==a?void 0:a.type)==="insert"&&n(rV,d)}}});function iO(e){return(0,nb.Z)(function(){return(0,nT.cn)(function(n){var t=n(iT);return t&&e===t.paneGroupId?t:null})},[e])}function iX(e){return(0,nb.Z)(function(){return(0,nH.kv)(td,function(n){return nW(n,e)})},[e])}function iM(e){var n=iX(e);return(0,nb.Z)(function(){return(0,nT.cn)(function(e){if(!e(rx))return!1;var t=e(n);if(!t)return!1;var r=e(te);return!!r&&t.panes.includes(r)})},[n])}function iz(e){var n=n8(e);return(0,nb.Z)(function(){return(0,nH.kv)(n,function(e){return"floating"===e.path[0]})},[n])}var iW=(0,nT.cn)(null,function(e,n,t){var r,i=t.path,o=t.col,a=t.line,l=t.opener,c=e(td),s=(null==l?void 0:l.paneType)||(0,nw.Dp)({path:i}),u=function(){if("codeEditor"===s)return{type:"codeEditor",data:{path:i,col:o,line:a}};if("extension"===s){var e=l.extensionFileHandler;return{type:"extension",data:{filePath:i,extensionId:e.extension.extensionId,installationId:e.extension.installationId,name:e.extension.manifest.name,baseUrl:e.extension.baseUrl,path:e.handler}}}return{type:s,data:{path:i}}}();if(t.newPane){n(rX,{pane:u,edge:null!==(r=t.newPaneEdge)&&void 0!==r?r:"left"});return}var d=nz(c,"topLeft");if(!d){n(rU,{pane:u,relativeTo:["tiling"],placement:"replace"});return}var p=e(tp).find(function(n){return i===(0,nw.DQ)(e(n.data))});if(p&&!t.newTab){n(rV,p.paneId),n(tk,{paneId:p.paneId,pane:u});return}var f=d.paneGroup;if(t.newTab){n(rz,{panes:[u],paneGroupId:f.id,activate:!0,commit:!0,index:f.activeIndex+1});return}var h=e(tp).find(function(e){return!e.isCommitted});if(h){n(tk,{paneId:h.paneId,pane:u}),n(rV,h.paneId);return}var m=e(tp).find(function(n){var t=e(n.data);return"codeEditor"===t.type&&""===(0,nw.DQ)(t)});if(m){n(tk,{paneId:m.paneId,pane:u}),n(rV,m.paneId);return}var v=f.panes.find(function(n){var t=e(nQ(n));return"commands"===e(t.data).type});if(v){n(tk,{paneId:v,pane:u}),n(rV,v);return}n(rz,{panes:[u],paneGroupId:f.id,activate:!0})}),iN=(0,nT.cn)(null,function(e,n,t){n(rL,{panes:t.paths.map(function(e){var n=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!n)return!1;var t=[n[1],void 0!==n[3]&&parseInt(n[3],10),void 0!==n[5]&&parseInt(n[5],10)],r=t[0],i=t[1],o=t[2];return{type:(0,nw.Dp)({path:r}),data:{path:r,line:i,col:o}}}).filter(Boolean),placement:"rightOf",relativeTo:["tiling"],makeActive:!0})}),ij=(0,nT.cn)(null,function(e,n,t){var r=t.urls.map(function(e){var n;try{n=new URL(e)}catch(e){return!1}return"0.0.0.0"===n.hostname||"localhost"===n.hostname?{type:"webview",data:{portType:"local",path:n.pathname,port:parseInt(n.port,10)}}:(window.open(e,"_blank"),!1)}).filter(Boolean);0!==r.length&&n(rL,{panes:r,placement:"rightOf",relativeTo:["tiling"],makeActive:!0})});function iF(e,n){var t,r,i,o,a={width:t=.5*n.width,height:r=.5*n.height,x:n.x+(n.width-t)/2,y:n.y+(n.height-r)/2};if(i=e.x,o=e.y,i>a.x&&i<a.x+a.width&&o>a.y&&o<a.y+a.height)return{dropLocation:"middle",previewRect:n};var l={x:n.x+n.width/2,y:n.y+n.height/2},c=.3*n.width,s=l.x-c/2;if(e.x>=s&&e.x<=s+c){var u=e.y<=l.y?"above":"below",d=n.height/2;return{dropLocation:u,previewRect:{x:n.x,y:"above"===u?n.y:n.y+d,width:n.width,height:d}}}var p=e.x<=l.x?"leftOf":"rightOf",f=n.width/2;return{dropLocation:p,previewRect:{x:"leftOf"===p?n.x:n.x+f,y:n.y,width:f,height:n.height}}}(0,nT.cn)({x:0,y:0,width:0,height:0});var iV=(0,nT.cn)(null,function(e,n,t){if(!e(rx)){var r=e(n6),i=t.pageX,o=t.pageY,a=e(nQ(t.over)),l=iF({x:i-r.x,y:o-r.y},e(a.rectAtom)).previewRect;n(r$,!0),n(il,{type:"dropPreview",rect:l})}}),iH=(0,nT.cn)(null,function(e,n,t){if(!e(rx)){var r=e(n6),i=t.pageX,o=t.pageY,a=t.over,l=e(nQ(a)),c=iF({x:i-r.x,y:o-r.y},e(l.rectAtom)).dropLocation;n(il,null),n(r$,!1);var s=e(td);if("newPaneGroup"===t.type){if("middle"===c){var u=nM(s,l.paneId);if(!u)return;n(rz,{panes:t.panes,paneGroupId:u.paneGroup.id,activate:!0,index:u.index+1});return}n(rL,{panes:t.panes,placement:c,makeActive:!0,relativeTo:l.paneId});return}var d=a;if("middle"===c){if(d===t.paneId)return;var p=nM(s,l.paneId);if(!p)return;n(rJ,{paneId:t.paneId,toPaneGroupId:p.paneGroup.id,index:p.index+1});return}if(d===t.paneId){var f=nM(s,t.paneId);if(!f){var h=Error("Expected pane");throw n(tx,{error:h,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),h}if(f.floating)throw Error("Expected paneGroup");var m=f.paneGroup.panes.find(function(e){return e!==t.paneId});if(!m)return;d=m}var v=(0,n9.Uy)(s,function(e){try{ry(e,t.paneId),rf(e,{id:tW()(),panes:[t.paneId],relativeTo:d,placement:c}),n(tt,t.paneId)}catch(e){throw n(tx,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),e}});n(tB,v)}});function iY(e){var n=(0,nb.Z)(function(){return(0,nT.cn)(function(n){return!!n(rx)&&n(te)===e})},[e]);return(0,nb.Z)(function(){return(0,nT.cn)(function(t){if(t(n))return t(rI);var r=t(nQ(e));return t(r.rectAtom)})},[e,n])}function iq(e){return(0,nb.Z)(function(){return(0,nT.cn)(function(n){var t=n(iT);return t&&e===n(iG)?t:null})},[e])}function iJ(e){return(0,nb.Z)(function(){return(0,nT.cn)(function(n){return n(te)===e})},[e])}function iK(e){return(0,nb.Z)(function(){return(0,nT.cn)(function(n){return n(n(nQ(e)).data)})},[e])}function i$(e){return(0,nb.Z)(function(){return(0,nH.kv)(nQ(e),function(e){return"floating"===e.type})},[e])}var iQ=(0,nT.cn)(null,function(e,n,t){var r=t.paneId,i=t.activate,o=e(td);"tile"===e(nQ(r)).type?n(tB,(0,n9.Uy)(o,function(e){try{!function(e,n){var t=nM(e,n.paneId);if(t){var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map(function(e,n){return r.slice(0,n+1)}),o=!0,a=!1,l=void 0;try{for(var c,s=i[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=nX(e,u);if(!d)throw Error("Expected node");if("floatingPaneGroup"===d.type)throw Error("Expected tiled pane");if(1!==u.length){var p=u[u.length-1];if("number"!=typeof p)throw Error("Expected number");var f=nX(e,nF(u));if((null==f?void 0:f.type)!=="split")throw Error("Expected split");var h=f.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var m=p===f.children.length-1,v=m?(0,em._)(u.slice(0,-1)).concat([p-1]):u,g=m?f.children[p-1].percent-h:h;tV(e,{leftPath:v,percent:g})}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(e){throw n(tx,{error:e,origin:"Layout: revealPaneAtom/revealTiledPane"}),e}})):n(tB,(0,n9.Uy)(o,function(e){try{!function(e,n){var t=nM(e,n.paneId);if(t){var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}}(e,{paneId:r,minWidth:200,minHeight:140})}catch(e){throw n(tx,{error:e,origin:"Layout: revealPaneAtom/revealFloatingPane"}),e}})),i&&n(tn,r)}),i0=(0,nT.cn)(null),i1=(0,nT.cn)(function(e){var n=e(i0);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=nM(e(td),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map(function(n){var t=e(nQ(n));return[t.paneId,e(t.data)]})}}),i2=(0,nT.cn)(function(e){var n=e(i1);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}}),i4=(0,nT.cn)(function(e){var n=e(i0);if(!n||"sidebar"===n.target)return null;if(e(rZ)===n.paneId)return e(rI);var t=e(nQ(n.paneId)),r=e(t.rectAtom),i=e(n5);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}}),i3=(0,nT.cn)(null,function(e,n,t){var r=e(te),i=null!=t?t:r;if(i){n(i0,{target:"pane",paneId:i}),i!==r&&n(tn,i);return}var o=nz(e(td),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;if(a){n(i0,{target:"pane",paneId:a});return}}),i8=(0,nT.cn)(null,function(e,n){var t=e(i0);t&&(n(i0,null),"sidebar"!==t.target&&n(iQ,{paneId:t.paneId,activate:!0}))}),i5=(0,nT.cn)(null,function(e,n){if(e(i1)){n(i8);return}var t=e(te);if(t){n(i3,t);return}var r=nz(e(td),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;if(i){n(i3,i);return}}),i6=(0,nT.cn)(function(e){return null!==e(i0)}),i7=(0,nT.cn)(null,function(e,n){n(i0,null)}),i9=(0,nT.cn)(null,function(e,n,t){var r=e(te);if(!(!r||e(rZ))){var i=rj({relativeTo:r,rects:new Map(e(n0).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t});i&&(n(te,i),e(i0)&&n(i0,{target:"pane",paneId:i}))}}),oe=(0,nT.cn)(null,function(e,n,t){var r=e(i1);null!==r&&"sidebar"!==r.target&&n(tB,(0,n9.Uy)(e(td),function(e){!function(e,n){var t=n.paneGroupId,r=n.direction,i=nW(e,t),o=nN(e,t);if((null==i?void 0:i.type)==="paneGroup"&&o){var a=o.node.children.indexOf(i);if(-1===a)throw Error("Expected index");var l=(0,em._)(o.path).concat([a]),c="down"===r||"right"===r,s=0===a,u=a===o.node.children.length-1,d=o.node.stacked===("up"===r||"down"===r),p=o.path.length>2;if(d&&!((u&&c||s&&!c)&&p)){!function(e,n,t){var r=e.indexOf(n);if(-1===r)throw Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1;if("forward"===t&&i){e.pop(),e.unshift(n);return}if("back"===t&&0===r){e.shift(),e.push(n);return}var o="forward"===t?1:-1;e[r]=e[r+o],e[r+o]=n}}(o.node.children,i,c?"forward":"back");return}var f=(g=nN(e,i.id))?function e(n,t){var r=t.path,i=t.forwards,o=t.vertical,a=nX(n,r);if((null==a?void 0:a.type)!=="split")return null;var l=nF(r);if(0===l.length)return null;var c=nX(n,l);if((null==c?void 0:c.type)!=="split")return null;if(c.stacked!==o)return e(n,{path:l,forwards:i,vertical:o});var s=c.children.indexOf(a),u=0===s;if(!(s===c.children.length-1&&i||u&&!i)){var d=s+(i?1:-1),p=c.children[d],f=c.children[s];return p?{other:f,node:p,parent:c,path:(0,em._)(l).concat([d])}:null}if(1===l.length){var h=u&&!i?c.children.length-1:0;return{parent:c,other:c.children[s],path:(0,em._)(l).concat([h]),node:c.children[h]}}return e(n,{path:l,forwards:i,vertical:o})}(e,{path:g.path,forwards:"down"===r||"right"===r,vertical:"up"===r||"down"===r}):null;if(f){var h=l.slice(0,f.path.length+("paneGroup"===f.node.type?2:1));!function(e){if("tiling"!==e[0])throw Error("Expected tiling path")}(h);var m=nX(e,h);if(!m||"floatingPaneGroup"===m.type)throw Error("Expected adjacentNode");if("split"!==f.other.type)throw Error("Expected split");var v=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e.slice(0,t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value.percent;r+=s}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(f.other.children,m);if("paneGroup"===f.node.type){var g,y,b,x=(y={start:0,end:100},b=!f.parent.stacked,v.start-y.start<y.end-v.end?b?"above":"rightOf":b?"below":"leftOf");rb(e,(0,em._)(o.path).concat([a])),rf(e,{placement:x,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:f.path});return}var Z=function(e,n){var t=e.children,r=e.stacked,i="above",o=0,a=0,l=0,c=0,s=!0,u=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var h=p.value,m={start:l,end:l+h.percent},v=Math.max(0,Math.min(n.end,m.end)-Math.max(n.start,m.start));v>c&&(c=v,o=a,i=n.start-m.start<m.end-n.end?r?"above":"rightOf":r?"below":"leftOf"),l+=h.percent,a++}}catch(e){u=!0,d=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw d}}return{placement:i,index:o}}(f.node,v),w=Z.index,k=Z.placement;rb(e,(0,em._)(o.path).concat([a])),rf(e,{placement:k,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,em._)(f.path).concat([w])})}}}(e,{paneGroupId:r.paneGroupId,direction:t.direction})}))}),on=(0,nT.cn)(null,function(e,n,t){n(rp,nA({isHTML:t.isHTML,isStacked:t.isStacked,isExtension:t.isExtension,codeEditorPath:t.entrypoint})),n(rd,{replId:t.replId,force:!0})});(0,nT.cn)(null,function(e,n,t){n(rp,t)});var ot={height:0,width:0},or={width:120,height:120},oi=(0,nT.cn)(null),oo=(0,nT.cn)(null,function(e,n,t){var r=e(td);if("end"===t.type){n(oi,null),n(tB,r);return}if("update"===t.type){var i=e(oi);if(!i){var o=Error("Expected floatingResizeState");throw n(tx,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}var a=e(n5),l=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?ot:i,a=(0,eL._)({},e),l=o.height,c=o.width;if("top"===t||"topLeft"===t||"topRight"===t){var s=e.height-r.y;a.height=Math.max(s,l),s<l?a.y=e.y+e.height-l:a.y=e.y+r.y}else if("bottom"===t||"bottomLeft"===t||"bottomRight"===t){var u=e.height+r.y;a.height=Math.max(u,l)}if("right"===t||"bottomRight"===t||"topRight"===t){var d=e.width+r.x;a.width=Math.max(d,c)}else if("left"===t||"bottomLeft"===t||"topLeft"===t){var p=e.width-r.x;a.width=Math.max(p,c),p<c?a.x=e.x+e.width-c:a.x=e.x+r.x}return a}(i.rectStart,{delta:t.moveDelta,edge:i.edge,minSize:or}),c=i.paneId,s=(0,n9.Uy)(r,function(e){var t=e.floating.find(function(e){return e.panes.includes(c)});if(!t){var r=Error("Expected floating");throw n(tx,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=l.x,i.y=l.y-a,i.width=l.width,i.height=l.height+a});n(tB,s);return}var u=e(n0).find(function(e){return e.paneId===t.paneId});if(!u){var d=Error("Expected pane");throw n(tx,{error:d,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),d}n(tn,t.paneId),n(oi,{paneId:t.paneId,edge:t.edge,rectStart:e(u.rectAtom)})}),oa=(0,nT.cn)(null,function(e,n,t){var r=e(td),i=e(nQ(t)),o=i.rectAtom,a=i.type,l=e(o),c=nM(r,t);if(!c){var s=Error("Expected pane");throw n(tx,{error:s,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),s}if("tile"===a){n(tB,(0,n9.Uy)(r,function(e){i_(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})}));return}var u=e(n0).filter(function(e){return"tile"===e.type&&!e.isHidden}),d=e(n5),p={x:l.x+l.width/2,y:l.y+l.height/2},f=u.find(function(n){var t=e(n.rectAtom);return t_(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})}),h="leftOf";f&&(h=tS(p,e(f.rectAtom)).placement),n(tB,(0,n9.Uy)(r,function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=nX(e,t);if((null==o?void 0:o.type)!=="floatingPaneGroup")throw Error("Expected floatingPaneGroup");if(rb(e,t),null===i){e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex};return}rf(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r})}(e,{paneGroupPath:c.paneGroupPath,to:(null==f?void 0:f.paneId)||["tiling"],placement:h})}))}),ol=1920/1020,oc=(0,nT.cn)(null,function(e,n,t){var r,i,o,a,l=e(n0).find(function(n){return e(n.data).type===t.type});if(l){n(tk,{paneId:l.paneId,pane:t});return}n(rM,{pane:t,rect:(r=e(n6),i=e(n5),{width:o=Math.min(600,r.width),height:a=Math.min(600/ol+i,r.height),x:r.width-o,y:r.height-a})})}),os=(0,nT.cn)(null,function(e,n,t){e(n0).filter(function(n){return e(n.data).type===t}).forEach(function(e){return n(rT,e.paneId)})}),ou=(0,nT.cn)(null),od=(0,nT.cn)(function(e){var n=e(ou);return n&&e(n0).find(function(t){var r=e(t.data);return"videoPlayer"===r.type&&r.data.embedUrl===(null==n?void 0:n.embedUrl)})||null}),op=(0,nT.cn)(function(e){var n=e(od);return n&&!n.isHidden?n:null}),of=(0,nT.cn)(null,function(e,n,t){n(ou,t);var r="videoPlayer";if(!t){n(os,r);return}n(oc,{type:r,data:{title:"Tutorial",embedUrl:t.embedUrl}})}),oh=(0,nT.cn)(null,function(e,n){var t=e(od);if(null==t?void 0:t.isHidden){n(rV,t.paneId);return}var r=e(ou);r&&n(of,r)}),om=(0,nT.cn)(function(e){return e(n0).find(function(n){return"tutorial"===e(n.data).type})||null}),ov=(0,nT.cn)(null,function(e,n){var t=e(om);if(null==t?void 0:t.isHidden){n(rV,t.paneId);return}n(rL,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1}),n(tQ)}),og=(0,nT.cn)(function(e){return!!(e(iT)||e(oi)||e(tH)||e(r$)||e(t8))}),oy=(0,nT.cn)(function(e){if(e(i6))return null;var n=e(te);if(!n)return null;var t=e(nQ(n)),r=e(t.data),i=t.paneId+r.type;return(0,nw.Ur)(r)&&(i+=r.data.path),i}),ob=t(73336),ox=t(55828),oZ=t(78638),ow=t(1901),ok=t(33455),oC=(0,nT.cn)(null,function(e,n,t){if(null===t){n(il,null),n(iT,function(e){return e?(0,n9.Uy)(e,function(e){e.drop=null}):e});return}n(iT,function(e){return e?(0,n9.Uy)(e,function(e){!function(e,n){if("edge"===n.type||"emptyLayout"===n.type){e.drop={type:"split",relativeTo:["tiling"],placement:"edge"===n.type?n.position:"replace"};return}var t=n.paneId;if("middle"===n.position){e.drop={type:"insert",paneId:t};return}e.drop={type:"split",relativeTo:t,placement:n.position}}(e,t)}):e});var r=e(n6),i=e(n5),o=e(rn),a=e(tT);if("pane"===t.type){var l=e(nQ(t.paneId)),c=e(l.rectAtom);n(il,{type:"dropPreview",rect:{x:c.x,y:c.y-i,width:c.width,height:c.height+i}});return}if("emptyLayout"===t.type){n(il,{type:"dropPreview",rect:function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=e.location,o={x:t+r,y:0,width:n.width-t-2*r,height:n.height-r},a=o.x,l=o.y,c=o.width,s=o.height;switch(i){case"middle":return o;case"leftOf":return{x:a,y:l,width:c/2,height:s};case"rightOf":return{x:a+c/2,y:l,width:c/2,height:s};case"above":return{x:a,y:l,width:c,height:s/2};case"below":return{x:a,y:l+s/2,width:c,height:s/2}}}({container:r,sidebarWidth:o,location:t.position,gap:a})});return}n(il,{type:"dropPreview",rect:function(e,n){var t=n.container,r=n.sidebarWidth,i=n.position,o=n.gap,a={x:r+o,y:0,width:t.width-r-2*o,height:t.height-o};if((null==e?void 0:e.type)!=="split"){switch(i){case"above":case"below":a.height=a.height/2,"below"===i&&(a.y+=a.height);break;case"rightOf":case"leftOf":a.width=a.width/2,"rightOf"===i&&(a.x+=a.width)}return a}if(e.stacked){switch(i){case"above":a.height=a.height*(e.children[0].percent/100)/2;break;case"below":a.height=a.height*(e.children[e.children.length-1].percent/100)/2,a.y=t.height-a.height;break;case"leftOf":a.width=a.width/2;break;case"rightOf":a.width=a.width/2,a.x=t.width-a.width-o}return a}switch(i){case"above":a.height=a.height/2;break;case"below":a.height=a.height/2,a.y=t.height-a.height-o;break;case"leftOf":a.width=a.width*(e.children[0].percent/100)/2;break;case"rightOf":a.width=a.width*(e.children[e.children.length-1].percent/100)/2,a.x=t.width-a.width}return a}(e(td).tiling,{container:r,sidebarWidth:o,position:t.position,gap:a})})}),o_=(0,tA.$)(["opacity","width","height","transform","pointerEvents"]),oS=o_.cssVars,oE=o_.styleTokens,oR=(0,e4.X)({dropPoint:[eo.l0.center,eo.l0.top(0),eo.l0.left(0),eo.l0.position.absolute,{zIndex:ia.overlay,cursor:"grabbing",width:oE.width,height:oE.height,transform:oE.transform,opacity:"var(".concat(oS.opacity,", 0)"),pointerEvents:oE.pointerEvents,transition:"opacity 200ms ease-out 200ms","&:hover":{color:eo.TV.accentPrimaryStronger}}]}),oI={above:(0,K.tZ)(ow.Z,{}),below:(0,K.tZ)(ob.Z,{}),leftOf:(0,K.tZ)(ox.Z,{}),rightOf:(0,K.tZ)(oZ.Z,{}),middle:(0,K.tZ)(ok.Z,{})};function oT(e){var n=(0,en.useRef)(null),t=(0,en.useMemo)(function(){return(0,nH.kv)(iD,function(n){return null==n?void 0:n[e]})},[e]),r=(0,en.useMemo)(function(){return(0,nH.kv)(t,function(e){return e?(0,ea._)({},oS.transform,"translate(".concat(e.rect.x,"px, ").concat(e.rect.y,"px)")):null},to())},[t]);(0,tU.j)(n,ir(r));var i=(0,en.useMemo)(function(){return(0,nH.kv)(t,function(e){var n;return e?(n={},(0,ea._)(n,oS.width,e.rect.width+"px"),(0,ea._)(n,oS.height,e.rect.height+"px"),n):null},to())},[t]);(0,tU.j)(n,ir(i));var o=(0,en.useMemo)(function(){return(0,nH.kv)(t,function(e){var n;return n={},(0,ea._)(n,oS.opacity,(null==e?void 0:e.visible)?"1":"0"),(0,ea._)(n,oS.pointerEvents,(null==e?void 0:e.visible)?"all":"none"),n},to())},[t]);return(0,tU.j)(n,ir(o)),n}function oG(){var e=oT("middle"),n=ii(oC),t=io((0,en.useMemo)(function(){return(0,nH.kv)(iD,function(e){var n;return null!==(n=null==e?void 0:e.middle.paneId)&&void 0!==n?n:null})},[]));return(0,K.tZ)(ei.G,{css:oR.dropPoint,innerRef:e,onMouseEnter:function(){var e=t(),r="middle";n(e?{type:"pane",position:r,paneId:e}:{type:"emptyLayout",position:r})},onMouseLeave:function(){return n(null)},children:(0,K.tZ)(ok.Z,{size:32})})}function oD(e){var n=e.position,t=oT(n),r=ii(oC);return(0,K.tZ)(ei.G,{css:oR.dropPoint,innerRef:t,onMouseEnter:function(){return r({type:"edge",position:n})},onMouseLeave:function(){return r(null)},children:(0,en.cloneElement)(oI[n],{size:32})})}var oP=(0,en.memo)(function(){return(0,K.BX)(K.HY,{children:[(0,K.tZ)(oD,{position:"above"}),(0,K.tZ)(oD,{position:"below"}),(0,K.tZ)(oD,{position:"leftOf"}),(0,K.tZ)(oD,{position:"rightOf"}),(0,K.tZ)(oG,{})]})});function oB(e){return it((0,nb.Z)(function(){return(0,nT.cn)(function(n){var t=n(nQ(e));return n(t.data)})},[e]))}function oU(){var e=ii(tn),n=ii(tt);return(0,nb.Z)(function(){return function(t,r){(null==r?void 0:r.commit)&&n(t),e(t)}},[n,e])}function oA(e){var n=e.paneId;return it((0,nb.Z)(function(){return(0,nT.cn)(function(e){return e(te)===n})},[n]))}function oL(){return ii(r6)}var oO=(0,nT.cn)(null,function(e,n){n(r$,!1)});function oX(e){var n=e.paneGroupId,t=ii(iP),r=ii(iB),i=ii(iL),o=(0,nb.Z)(function(){return{start:function(e){t({paneGroupId:n,mouse:e.mouse})},update:function(e){r(e)},end:function(e){i(e)}}},[n,t,r,i]);return{isDragging:it((0,nb.Z)(function(){return(0,nT.cn)(function(e){var t;return n===(null===(t=e(iT))||void 0===t?void 0:t.paneGroupId)})},[n])),dnd:o}}function oM(){return ii(iW)}function oz(){return{maximizePane:ii(rw),maximizePaneGroup:ii(rk),restoreMaximizedPaneGroup:ii(rC),toggleMaximizePane:ii(r_),toggleMaximizedPaneGroup:ii(rS)}}function oW(e){var n,t,r=(n=n8(e),{activeIndexAtom:(0,nb.Z)(function(){return(0,nT.cn)(function(e){return e(n).activeIndex})},[n]),pathAtom:(0,nb.Z)(function(){return(0,nH.kv)(n,function(e){return e.path},to())},[n]),panesAtom:(0,nb.Z)(function(){return(0,nH.kv)(n,function(e){return e.panes},to())},[n]),activeFileAtom:(0,nb.Z)(function(){return(0,nT.cn)(function(e){var t=e(n),r=e(nQ(t.panes[t.activeIndex])),i=e(r.data);return(0,nw.Ur)(i)?(0,nw.DQ)(i):null})},[n])}),i=r.activeIndexAtom,o=r.pathAtom,a=r.panesAtom;return{activeIndex:ir(i),path:ir(o),panes:ir(a),activeTabPaneId:ir((t=n8(e),(0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(t);return e(nQ(n.panes[n.activeIndex])).paneId})},[t])))}}function oN(e){var n,t,r,i,o,a,l,c,s,u,d,p=tR(iY(e)),f=(t=tI(iY(e)),n=iq(e),r=(0,nb.Z)(function(){return(0,nH.kv)(n,function(e){var n;return null!==(n=null==e?void 0:e.scale)&&void 0!==n?n:1})},[n]),(0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(t);return{x:n.x,y:n.y,scale:e(r)}})},[t,r])),h=(i=iq(e),(0,nb.Z)(function(){return(0,nH.kv)(i,function(e){var n;return null!==(n=null==e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"})},[i])),m=(o=iY(e),(0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(o),t=e(n6);return{x:Math.round(t.x+n.x),y:Math.round(t.y+n.y)}})},[o])),v=(0,nb.Z)(function(){return(0,nH.kv)(nQ(e),function(e){return e.isHidden})},[e]),g=(0,nb.Z)(function(){return(0,nT.cn)(function(n){var t=n(nQ(e)),r=e===n(te);return n(rZ)===e?ia.maximizedPane:e===n(iG)?ia.draggingPane:"floating"===t.type?r?ia.floatingPaneActive:ia.floatingPane:r?ia.tiledPaneActive:ia.tiledPane})},[e]),y=(0,nb.Z)(function(){return(0,nT.cn)(function(n){return!!n(iT)&&n(iG)!==e&&"floating"!==n(nQ(e)).type})},[e]),b=(a=iK(e),(0,nb.Z)(function(){return(0,nH.kv)(a,function(e){return e.type})},[a])),x=i$(e),Z=iJ(e),w=(0,nb.Z)(function(){return(0,nT.cn)(function(n){return n(te)===e})},[e]),k=(0,nb.Z)(function(){return(0,nH.kv)(nQ(e),function(e){return e.isCommitted})},[e]),C=iK(e),_=(l=i$(e),c=iJ(e),s=iq(e),(0,nb.Z)(function(){return(0,nT.cn)(function(e){return!e(rx)&&!!(e(l)||e(c)||e(s))})},[l,c,s])),S=(u=iq(e),(0,nb.Z)(function(){return(0,nH.kv)(u,Boolean)},[u])),E=(d=iq(e),(0,nb.Z)(function(){return(0,nH.kv)(d,function(e){var n;return null!==(n=null==e?void 0:e.movedAtAll)&&void 0!==n&&n})},[d]));return{size:ir(p),transform:ir(f),paneType:ir(b),transformOriginXAtom:ir(h),viewportInset:ir(m),zIndex:ir(g),disableInteractions:ir(og),animate:ir(y),data:ir(C),isFloating:ir(x),isActive:ir(Z),isActivePane:ir(w),isCommitted:ir(k),isHidden:ir(v),isBeingDragged:ir(S),hasMovedWhileDragging:ir(E),headerHeight:ir(n5),hasBorder:ir(_)}}function oj(e){var n,t,r,i,o,a,l,c,s,u=(t=iM(e),(0,nb.Z)(function(){return(0,nT.cn)(function(n){if(n(t))return n(rR);var r=n(n8(e));return n(r.rectAtom)})},[t,e])),d=tR(u),p=tI(u),f=(r=iO(e),(0,nb.Z)(function(){return(0,nH.kv)(r,function(e){var n;return null!==(n=null==e?void 0:e.scale)&&void 0!==n?n:1})},[r])),h=(i=iO(e),(0,nb.Z)(function(){return(0,nH.kv)(i,function(e){var n;return null!==(n=null==e?void 0:e.transformOriginX)&&void 0!==n?n:"0px"})},[i])),m=(o=iO(e),a=iM(e),l=iz(e),n=iX(e),c=(0,nb.Z)(function(){return(0,nT.cn)(function(e){var t=e(te);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)})},[n]),(0,nb.Z)(function(){return(0,nT.cn)(function(e){return e(a)?ia.maximizedHeader:e(o)?ia.draggingHeader:e(l)?e(c)?ia.floatingHeaderActive:ia.floatingHeader:ia.tiledHeader})},[o,a,l,c])),v=(s=iz(e),(0,nb.Z)(function(){return(0,nT.cn)(function(n){var t=n(iT);return!(!t||t.paneGroupId===e||n(s))})},[e,s])),g=iM(e),y=iz(e);return{size:ir(d),position:ir(p),scale:ir(f),transformOriginX:ir(h),zIndex:ir(m),animate:ir(v),isMaximized:ir(g),isFloating:ir(y)}}(0,nT.cn)(function(e){return!!e(tH)||e(t8)});var oF=(0,nT.cn)(!1),oV=(0,nT.cn)(0);function oH(){return{width:ir(rn),isOpen:ir(ri),toggle:ii(t0)}}var oY=t(57468),oq=t(99656),oJ=t(82723),oK=t(67337),o$=t(17225),oQ=t(1643),o0=t(69119),o1=t(43208),o2=(0,$.iv)([eo.l0.borderRadius("full"),eo.l0.position.absolute,eo.l0.top(-3),eo.l0.right(-3)]);function o4(e){var n=e.color,t=void 0===n?eo.TV.redStronger:n,r=e.small,i=e.className,o=r?6:8;return(0,K.tZ)(ei.G,{className:i,style:{backgroundColor:t,width:o,height:o,zIndex:2,boxShadow:"0 0 0 2px ".concat(eo.TV.backgroundDefault)},css:o2})}var o3=[{padding:(0,oQ.fP)(8)}],o8=(0,e4.X)({root:[o3,eo.l0.align.center,eo.l0.flex.row,{gap:(0,oQ.fP)(8),"&:hover .icon":{backgroundColor:"var(".concat(nt.dj.interactiveBackground,")")}}],iconSurface:[{padding:(0,oQ.fP)(8),borderRadius:(0,oQ.fP)(8)},eo.l0.position.relative],titleWithAlias:[eo.l0.rowWithGap(8)],aliasContainer:[eo.l0.rowWithGap(4),eo.l0.color.foregroundDimmest,eo.l0.align.center]}),o5=(0,e4.X)({root:[eo.l0.position.relative,(0,oQ.D$)(16),{width:(0,oQ.fP)(16),height:(0,oQ.fP)(16)}]});function o6(e){var n=e.pane,t=e.active,r=e.highlight,i=(0,nw.Se)(),o=i.Icon({pane:n}),a=i.getTitle(n),l=(0,ec.b2)({paneType:n.type});return(0,K.BX)(ei.G,{css:o8.root,children:[(0,K.BX)(eS.Tg,{elevated:!0,css:o8.iconSurface,className:"icon",children:[(0,K.tZ)(ei.G,{css:o5.root,style:{opacity:e.active?1:.7},children:o}),l?(0,K.tZ)(o4,{color:l}):null]}),e.alias?(0,K.BX)(ei.G,{css:o8.titleWithAlias,children:[(0,K.tZ)(eE.xv,{children:a}),(0,K.BX)(ei.G,{css:o8.aliasContainer,children:["(",e.aliasPrefix?(0,K.BX)(eE.xv,{color:"dimmest",children:[e.aliasPrefix," "]}):null,(0,K.tZ)(o0.x,{dimmed:!0,text:e.alias,highlight:r}),")"]})]}):(0,K.tZ)(o0.x,{dimmed:!t,text:a,highlight:r})]})}var o7=t(81810),o9=t(21488),ae=t(92796),an=t(76568),at=t(41500);function ar(e){var n=(0,nw.Se)();return(0,nb.Z)(function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,K.tZ)(oJ.Z,{}),key:"codeSearch"},commands:function(t){var r=t.search;if(!r)return[];var i={type:"searchReplace",data:{initialQuery:r}};return[{match:nC.pl,data:{type:"action",label:n.getTitle(i),icon:n.Icon({pane:i}),run:function(){e({pane:i})}}}]}}},[n,e])}function ai(e){var n=(0,ec.Bx)(),t=it(th);return(0,nb.Z)(function(){var r=t.map(function(e){return e.filePath}),i=n.filter(function(e){return!r.includes(e)});return{data:{type:"context",label:"Recent",icon:(0,K.tZ)(nk.Z,{})},commands:function(n){var t=n.search;return(0,n_.w)({paths:i,search:t,run:function(n){e({path:n})}})}}},[n,t,e])}function ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=(0,nw.Se)(),t=ii(r5),r=ii(rV),i=it(tg),o=(0,an.dr)();return(0,nb.Z)(function(){var a,l=e?i.filter(function(n){return(0,J._)(n,1)[0]!==e}):i;return l.length?[{data:{type:"context",label:e?"Switch to tab":"Jump to tab",icon:(0,K.tZ)(oK.Z,{})},commands:(a=(0,nx._)(function(i){var a,c,s,u,d,p,f,h,m,v,g,y,b,x,Z,w,k,C,_,S,E,R,I,T;return(0,nZ.Jh)(this,function(G){switch(G.label){case 0:if(!(a=i.search))return[2,[]];c=new Map,s=[],u=!0,d=!1,p=void 0;try{for(f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0)(m=(0,J._)(h.value,2))[0],v=m[1],(0,nw.Ur)(v)&&v.data.path&&s.push(v.data.path)}catch(e){d=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw p}}return[4,(0,o$.Rz)(a,s)];case 1:g=G.sent(),y=!0,b=!1,x=void 0;try{for(Z=g[Symbol.iterator]();!(y=(w=Z.next()).done);y=!0)k=w.value,c.set(k.path,{score:k.score,ranges:k.ranges})}catch(e){b=!0,x=e}finally{try{y||null==Z.return||Z.return()}finally{if(b)throw x}}C=[],_=!0,S=!1,E=void 0;try{for(R=function(){var i=(0,J._)(T.value,2),a=i[0],l=i[1],s=(0,nw.Ur)(l)?l.data.path:null,u=s?c.get(s):null;if("deployments"===l.type){var d=o(a);if((null==d?void 0:d.type)==="deployments"){var p=d.getTabs();if(p)return C.push({match:nC.pl,data:{type:"context",label:n.getTitle(l),icon:(0,K.tZ)(n.Icon,{pane:l})},commands:function(){return p.map(function(e){return{match:nC.pl,data:{key:a+e.id,type:"action",label:e.label,icon:(0,K.tZ)(e.Icon,{size:16}),run:function(){r(a),d.setTab(e.id)}}}})}}),"continue"}}var f=s&&u?function(){return{score:u.score,render:(0,o$.xy)({path:s,ranges:u.ranges})}}:nC.pl;C.push({match:f,data:{key:a,type:"action",label:n.getTitle(l),icon:n.Icon({pane:l}),run:function(){return e?t({a:e,b:a}):r(a)}}})},I=l[Symbol.iterator]();!(_=(T=I.next()).done);_=!0)R()}catch(e){S=!0,E=e}finally{try{_||null==I.return||I.return()}finally{if(S)throw E}}return[2,C]}})}),function(e){return a.apply(this,arguments)})}]:[]},[e,i,n,r,t,o])}function aa(e){var n=(0,nw.Se)(),t=(0,ae.B)(),r=it(tg),i=(0,er.P5)({controlName:o7.wK,logFlagToAnalytics:!1});return(0,nb.Z)(function(){var o=r.map(function(e){var n=(0,J._)(e,2);return(n[0],n[1]).type}),a=[],l=new Map([["envEditor",["Environment variables"]],["ghostwriterChat",[{alias:"Ghostwriter",prefix:"previously"}]]]),c=!0,s=!1,u=void 0;try{for(var d,p=t[Symbol.iterator]();!(c=(d=p.next()).done);c=!0)!function(){var t,r,c,s,u=d.value;!((0,nw.b)(u.type,i)&&o.includes(u.type))&&a.push({match:(r=(t={pane:u,aliases:l.get(u.type)}).pane,c=t.aliases,s=void 0===c?[]:c,function(e){var n=e.search,t=e.data,i=e.active;if("group"===t.type)return null;if(!n)return{score:1,render:{height:48,content:(0,K.tZ)(o6,{pane:r})}};var o=o1.Z.match(n,t.label);if(o)return{score:o.score,render:{height:48,content:(0,K.tZ)(o6,{pane:r,highlight:o.ranges,active:i})}};var a=!0,l=!1,c=void 0;try{for(var u,d=s[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var p=u.value,f="string"==typeof p?{alias:p,prefix:void 0}:p,h=f.alias,m=f.prefix,v=o1.Z.match(n,h);if(v)return{score:v.score,render:{height:48,content:(0,K.tZ)(o6,{pane:r,active:i,alias:h,aliasPrefix:m,highlight:v.ranges})}}}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return null}),data:{type:"action",label:n.getTitle(u),icon:n.Icon({pane:u}),run:function(){e({pane:u})}}})}()}catch(e){s=!0,u=e}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}return a},[t,e,r,n,i])}var al={type:"group",key:"root",description:"Search for tools and files"};function ac(e){var n=e.currentPaneId,t=e.openPane,r=(0,el.Z)(),i=r.fs,o=r.container,a=aa(t),l=ao(n),c=(0,en.useCallback)(function(e){var n=e.path;t({pane:{type:(0,nw.Dp)({path:n}),data:{path:n}}})},[t]),s=ai(c),u=(0,ec.AA)(),d=(0,o9.T)(),p=ar(t);return(0,nb.Z)(function(){var e,n,t,r={data:{type:"context",label:"Search",icon:(0,K.tZ)(oJ.Z,{}),key:"searchGroup"},commands:function(){return[(0,n_.i)({openFile:c,fs:i,shouldHideFile:d,getRecentFiles:u}),(0,nS.F)({container:o,openFile:c})]}},f={data:{type:"context",label:"Tools",icon:(0,K.tZ)(oK.Z,{})},commands:function(){return(0,em._)(a)}},h=(n=(e={fs:i,openFile:c}).openFile,t=e.fs,{match:nC.pl,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,K.tZ)(oq.Z,{})},commands:function(e){var r=e.search,i=e.active;return r&&i?[{match:nC.pl,data:{type:"action",description:"Create a new file",label:r,icon:(0,K.tZ)(oY.Z,{path:r}),run:function(){return(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return[4,t.stat(r)];case 1:if(e.sent().exists)return[2,{type:"error",message:'"'.concat(r,'" already exists')}];return[4,t.writeFile(r,at.Z.from(""))];case 2:if(e.sent().error)return[2,{type:"error",message:'Could not create "'+r+'"'}];return n({path:r}),[2]}})})()}}}]:[]}});return{data:al,commands:function(){return[s,r,h,f,p].concat((0,em._)(l))}}},[o,i,u,a,l,d,s,c,p])}var as=t(95223),au=(0,nT.cn)(!1),ad=(0,nT.cn)(null,function(e,n,t){if(e(au)){n(af,null),n(au,!1);return}t&&n(af,t),n(au,!0)});function ap(){return(0,tO.b9)(ad)}var af=(0,nT.cn)(null),ah=(0,nT.cn)([]),am={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,ny.l2)({cmdOrCtrl:!0,key:"k"})};function av(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,tO.b9)(ah);(0,en.useEffect)(function(){if(n)return t(function(n){return(0,em._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t,e,n])}var ag=(0,en.memo)(function(){var e,n,t,r,i,o,a,l=(0,tO.Dv)(au),c=ap(),s=(e=oL(),n=aa((0,en.useCallback)(function(n){(0,ep.j)(ep.U3.TOOL_OPENED,{source:"Command Bar",tool:n.pane.type}),e(n)},[e])),t=(0,ng.gf)("toggleGlobalCommandBarCommand"),r=(0,nb.Z)(function(){return{type:"context",icon:(0,K.tZ)(as.Z,{}),label:"",description:"Type a command...",keyboardShortcut:t}},[t]),i=ao(),o=(0,nb.Z)(function(){return(0,nT.cn)(function(e){var t=e(ah),o={data:{type:"context",label:"Tools",icon:(0,K.tZ)(oK.Z,{})},commands:function(){return n}};return{data:r,commands:function(){return(0,em._)(t).concat((0,em._)(i),[o])}}})},[n,r,i]),a=(0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(o),t=e(af);return t?[n,t]:n})},[o]),(0,tO.Dv)(a)),u=(0,ng.gf)(am.id);return(0,K.tZ)(eC.u,{hideCloseButton:!0,isOpen:l,onRequestClose:c,noPadding:!0,skipTransition:!0,children:(0,K.tZ)(eS.Tg,{css:[eo.l0.maxHeight("70vh"),eo.l0.borderRadius(8)],children:(0,K.tZ)(nv.X,{keyboardShortcut:u,onAction:function(){return c()},command:s,autoFocus:!0})})})}),ay=t(917),ab=t(15146),ax=t(26026),aZ=t(70781),aw=t(61673),ak=t(11516),aC=t(32377),a_=t(11656),aS=t(19659),aE=t(46689);function aR(){var e=(0,eO._)(["\n  mutation ReplEnvironmentHeaderSubmitRepl($replId: String!) {\n    submitRepl(replId: $replId) {\n      ... on Repl {\n        id\n        workspaceCta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return aR=function(){return e},e}function aI(){var e=(0,eO._)(["\n  query ReplEnvironmentHeaderSubmitReplDueDate($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        template {\n          id\n          dueDate\n        }\n      }\n    }\n  }\n"]);return aI=function(){return e},e}var aT={},aG=(0,eX.Ps)(aR()),aD=(0,eX.Ps)(aI());function aP(e){var n,t,r,i=e.replId,o=e.onDone,a=e.isResubmit,l=e.lastUpdated,c=e.openIOtesterPane,s=(0,el.Z)().iotester,u=(0,aE.CH)({variables:{replId:i}}),d=s.lastRunAt.getTime()>l,p=(n=(0,eL._)({},aT,{variables:{replId:i}}),eM.a(aD,n)).data,f=(null==p?void 0:p.repl.__typename)==="Repl"?p.repl:null,h=(null==f?void 0:f.template)||null,m=(null==h?void 0:h.dueDate)||null,v=new Date().toISOString(),g=(0,ev.Z)(),y=g.showConfirm,b=g.showError,x=(0,J._)((t=(0,eL._)({},aT,{variables:{replId:i},onCompleted:function(e){var n=e.submitRepl;if("UserError"===n.__typename){b(n.message);return}"Repl"===n.__typename&&(y("Repl submitted"),o())},onError:function(e){b(e.message)}}),ez.D(aG,t)),2),Z=x[0],w=x[1],k=d&&s.lastRunDidPass;return(null===(r=u.data)||void 0===r?void 0:r.repl.__typename)==="Repl"&&u.data.repl.ioTests.length>0&&!k?(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(24)],children:[(0,K.tZ)(eE.h4,{variant:"headerDefault",level:2,children:d?"Fix test failures before submitting":"Run tests before submitting"}),(0,K.tZ)(eE.xv,{children:d?"Input/Output tests did not pass.":"Input/Output tests have not been run since this Repl was last changed."}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.justify.end],children:[(0,K.tZ)(e5.zx,{disabled:w.loading,colorway:"primary",onClick:function(){c(),o()},text:"View tests"}),(0,K.tZ)(e5.zx,{disabled:w.loading,onClick:function(){return Z()},iconLeft:(0,K.tZ)(aC.Z,{}),text:"Submit anyway"})]})]}):(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(24)],children:[(0,K.tZ)(eE.h4,{variant:"headerDefault",level:2,children:a?" Resubmit Repl":"Submit Repl"}),(0,K.tZ)(eE.xv,{children:a?"This will re-notify Team admins about your submission.":"This will submit your Repl for review and notify the Team's admins."}),m&&m<v?(0,K.tZ)(eE.xv,{css:[eo.l0.color.accentNegativeStronger],children:"Note: Your submission is past the due date and will be marked late."}):null,(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.justify.end],children:[(0,K.tZ)(e5.zx,{disabled:w.loading,onClick:o,text:"Cancel"}),(0,K.tZ)(e5.zx,{colorway:"primary",disabled:w.loading,onClick:function(){return Z()},iconLeft:(0,K.tZ)(aC.Z,{}),text:a?"Submit again":"Submit"})]})]})}var aB=t(15576),aU=t(73157),aA=t(60769),aL=t(37951),aO=t(10981),aX=t(91470);function aM(){var e=(0,eO._)(["\n  query UpdateModelSolutionModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...TeamProfileRepl\n          template {\n            id\n            dueDate\n          }\n          unitTests {\n            tests {\n              id\n            }\n          }\n          ioTests {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return aM=function(){return e},e}function az(){var e=(0,eO._)(["\n  mutation UpdateModelSolution($input: UpdateReplTemplateModelSolutionInput!) {\n    updateReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return az=function(){return e},e}var aW={},aN=(0,eX.Ps)(aM(),aX.vs),aj=(0,eX.Ps)(az(),aX.vs),aF=function(e){var n,t,r,i,o,a,l,c,s,u,d,p=e.replId,f=e.onDone,h=(0,ev.Z)(),m=h.showConfirm,v=h.showError,g=(n=(0,eL._)({},aW,{variables:{replId:p},onCompleted:function(e){var n,t,r=e.repl;"Repl"===r.__typename&&(null===(t=r.origin)||void 0===t?void 0:null===(n=t.template)||void 0===n?void 0:n.modelSolution)&&"ReplTemplateModelSolution"===r.origin.template.modelSolution.__typename&&(_(r.origin.template.modelSolution.visibleAfterSubmitting),R(r.origin.template.modelSolution.visibleAfterPassingTests),G(r.origin.template.modelSolution.visibleAfterDueDate))}}),eM.a(aN,n)),y=g.data,b=g.loading,x=(0,J._)((t=(0,eL._)({},aW,{onError:function(e){return v(e.message)},onCompleted:function(){m("Updated solution"),f()}}),ez.D(aj,t)),2),Z=x[0],w=x[1],k=(0,J._)((0,en.useState)(!1),2),C=k[0],_=k[1],S=(0,J._)((0,en.useState)(!1),2),E=S[0],R=S[1],I=(0,J._)((0,en.useState)(!1),2),T=I[0],G=I[1],D=(0,J._)((0,en.useState)(),2),P=D[0],B=D[1],U=(0,aO.U)();if((0,en.useEffect)(function(){var e="Students can ";if(C||T||E){e+="view the solution after";var n=[];C&&n.push("submitting their project"),E&&n.push("passing all tests"),T&&n.push("the due date has passed");for(var t=0;t<n.length;t++)t>0&&(e+=",",t===n.length-1&&(e+=" and")),e+=" "+n[t];e+="."}else e+="never view the solution.";B(e)},[C,E,T]),b)return(0,K.tZ)(ei.G,{css:[eo.l0.center],children:(0,K.tZ)(eR.Z,{})});var A=(null==y?void 0:y.repl.__typename)==="Repl"&&(null===(r=y.repl.owner)||void 0===r?void 0:r.__typename)==="Team"&&(null===(i=y.repl.owner)||void 0===i?void 0:i.id),L=(null==y?void 0:y.repl.__typename)==="Repl"&&(null===(a=y.repl.origin)||void 0===a?void 0:null===(o=a.template)||void 0===o?void 0:o.modelSolution);if(!L)return null;var O=L.id,X=(null==y?void 0:y.repl.__typename)==="Repl"&&((null===(l=y.repl.origin)||void 0===l?void 0:l.ioTests.length)||(null===(s=y.repl.origin)||void 0===s?void 0:null===(c=s.unitTests)||void 0===c?void 0:c.tests.length)),M=(null==y?void 0:y.repl.__typename)==="Repl"&&(null===(d=y.repl.origin)||void 0===d?void 0:null===(u=d.template)||void 0===u?void 0:u.dueDate);return(0,K.tZ)("form",{onSubmit:function(e){e.preventDefault(),A&&O&&Z({variables:{input:{teamId:A,solutionId:O,visibleAfterSubmitting:C,visibleAfterPassingTests:E,visibleAfterDueDate:T}}})},children:(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(24)],children:[(0,K.tZ)(eE.h4,{level:1,variant:"headerDefault",children:"Update solution"}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.tZ)(aA.X,{id:U("availableAfterSubmitting"),checked:C,onChange:function(){return _(!C)}}),(0,K.tZ)("label",{htmlFor:U("availableAfterSubmitting"),children:(0,K.tZ)(eE.xv,{multiline:!1,children:"Available after submitting"})})]}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.tZ)(aA.X,{id:U("availableAfterPassingTests"),checked:E,onChange:function(){return R(!E)}}),(0,K.tZ)("label",{htmlFor:U("availableAfterPassingTests"),children:(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4)],children:[(0,K.tZ)(eE.xv,{multiline:!1,children:"Available after passing tests"}),(0,K.BX)(eE.xv,{multiline:!1,children:["(",X?"".concat(X," ").concat((0,aU.Z)("test",X)," defined"):"no tests exist yet",")"]})]})})]}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,K.tZ)(aA.X,{id:U("availableAfterDueDate"),checked:T,onChange:function(){return G(!T)}}),(0,K.tZ)("label",{htmlFor:U("availableAfterDueDate"),children:(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4)],children:[(0,K.tZ)(eE.xv,{multiline:!1,children:"Available after due date"}),(0,K.BX)(eE.xv,{css:{textDecoration:"italic"},multiline:!1,children:["(",M?(0,aB.p)(M):"no due date set yet",")"]})]})})]})]}),(0,K.tZ)(aL.E,{text:"".concat(P),colorway:C||E||T?"positive":"negative"}),(0,K.tZ)(ei.G,{css:{alignItems:"end"},children:(0,K.tZ)(e5.zx,{type:"submit",stretch:!1,colorway:"primary",text:"".concat(w.loading?"Saving...":"Save"),iconLeft:(0,K.tZ)(aC.Z,{}),disabled:w.loading})})]})})},aV=(_={},(0,ea._)(_,eT.Sy.PublishTemplate,"Publish project"),(0,ea._)(_,eT.Sy.EditTemplate,"Edit project"),(0,ea._)(_,eT.Sy.Submit,"Submit"),(0,ea._)(_,eT.Sy.Resubmit,"Resubmit"),(0,ea._)(_,eT.Sy.UpdateModelSolution,"Update solution"),_);function aH(e){var n=e.cta,t=e.replId,r=e.isGroupProject,i=e.openIOtesterPane,o=(0,J._)((0,en.useState)(null),2),a=o[0],l=o[1],c=function(){return l(null)},s=(0,ec.R3)(),u=(0,el.Z)().fs,d=(0,J._)((0,en.useState)(0),2),p=d[0],f=d[1];(0,en.useEffect)(function(){if(!(!s||(0,aS.T3)(s)||(0,aS.sL)(s)))return u.watchTextFile(s,{onChange:function(e){e.changeSource===rN.Fl.Local&&f(Date.now())}})},[s,u,f]);var h=!!(a&&[eT.Sy.PublishTemplate,eT.Sy.EditTemplate].includes(a));return(0,en.useEffect)(function(){n===eT.Sy.ReviewSubmission&&(ak.Z.get("annotations/educationModalDismissed")||(l(n),ak.Z.set("annotations/educationModalDismissed",!0)))},[n]),(0,K.BX)(K.HY,{children:[aV[n]&&(0,K.tZ)(e5.zx,{onClick:function(){return l(n)},text:aV[n],iconLeft:(0,K.tZ)(aC.Z,{})}),(0,K.tZ)(eC.u,{isOpen:a===eT.Sy.Submit||a===eT.Sy.Resubmit,onRequestClose:c,maxWidth:512,children:(0,K.tZ)(aP,{replId:t,onDone:c,isResubmit:a===eT.Sy.Resubmit,lastUpdated:p,openIOtesterPane:i})}),(0,K.tZ)(eC.u,{preventClose:!0,isOpen:h,onRequestClose:c,maxWidth:r?900:550,children:(0,K.tZ)(a_.Z,{replId:t,onDone:c})}),(0,K.tZ)(eC.u,{isOpen:a===eT.Sy.UpdateModelSolution,onRequestClose:c,maxWidth:600,children:(0,K.tZ)(aF,{replId:t,onDone:c})})]})}var aY=t(86265),aq=t(98924),aJ=t(92029),aK=t(29642),a$=t(89106),aQ=t(93049),a0=t(27690),a1=t(48228),a2=t(70944),a4=t(40227),a3=t(99741),a8=t(78272),a5=t(4773),a6=t(25813);function a7(){var e=(0,eO._)(["\n  fragment ReplEnvironmentNavMenuCurrentUser on CurrentUser {\n    id\n    ...LayoutSidebarCurrentUser\n  }\n  ","\n"]);return a7=function(){return e},e}function a9(){var e=(0,eO._)(["\n  query ReplEnvironmentNavMenu {\n    currentUser {\n      id\n      ...ReplEnvironmentNavMenuCurrentUser\n    }\n  }\n  ","\n"]);return a9=function(){return e},e}var le={},ln=(0,eX.Ps)(a7(),a6.d),lt=(0,eX.Ps)(a9(),ln),lr=[eo.l0.viewStyle,eo.l0.reset.button,nt.gU.nofill,eo.l0.flex.row,eo.l0.height(32),eo.l0.width(40),eo.l0.center,eo.l0.color.foregroundDefault,eo.l0.cursor.pointer,eo.l0.borderRadius(6),{":hover svg":{fill:eo.TV.foregroundDefault}}],li={button:(0,$.iv)(lr),surface:(0,$.iv)([eo.l0.borderRadius(8),eo.l0.width(200),eo.l0.maxHeight("80vh"),eo.l0.maxWidth("80vw"),eo.l0.overflowY("auto")]),ctas:(0,$.iv)([eo.l0.colWithGap(8),eo.l0.p(8)]),link:(0,$.iv)([eo.l0.viewStyle,eo.l0.rowWithGap(4),eo.l0.color.foregroundDefault,eo.l0.p(8),eo.l0.align.center,nt.gU.listItem,{":active":{backgroundColor:"".concat(eo.TV.backgroundHighest," !important")}}]),linkText:(0,$.iv)(eo.l0.flex.shrink(1))},lo="workspace-header-nav-menu";function la(){var e,n,t=(e=(0,eL._)({},le,void 0),eM.a(lt,e)).data,r=(0,J._)((0,en.useState)(!1),2),i=r[0],o=r[1],a=(0,J._)((0,en.useState)(null),2),l=a[0],c=a[1],s=(null==t?void 0:null===(n=t.currentUser)||void 0===n?void 0:n.userSubscriptionType)!==eT.HP.HackerPro;return(0,K.BX)(K.HY,{children:[(0,K.BX)(a4.xo,{isOpen:i,onOpenChange:o,placement:"bottom start",label:"Site Navigation",noArrow:!0,children:[function(e){var n=e.ref,t=(0,aq._)(e,["ref"]);return(0,K.BX)("button",(0,e0._)((0,eL._)({ref:n,"aria-label":"Nav menu","aria-expanded":i,"aria-controls":lo},t),{onClick:function(){return o(!i)},css:li.button,"data-cy":"global-nav-dropdown-btn",children:[(0,K.tZ)(a2.N2,{color:eo.TV.foregroundDefault,size:20}),(0,K.tZ)(a3.Z,{color:eo.TV.foregroundDimmest,size:12})]}))},(0,K.BX)(eS.Tg,{id:lo,elevated:!0,css:li.surface,background:"higher",children:[(0,K.tZ)(ei.G,{css:[li.ctas],children:(0,K.tZ)(e5.zx,{"data-cy":"global-nav-dropdown-new-repl-btn",text:"Create",iconLeft:(0,K.tZ)(oq.Z,{}),colorway:void 0,variant:"outlined",onClick:function(){o(!1),c("create")}})}),(null==t?void 0:t.currentUser)?(0,K.tZ)(ll,{currentUser:t.currentUser}):null,s?(0,K.tZ)(ei.G,{css:li.ctas,children:(0,K.tZ)(a5.Z,{colorway:"primary",variant:"default",context:"workspace_sidebar",dataCy:"global-nav-dropdown-upgrade-btn"})}):null]})]}),(0,K.tZ)(a8.Z,{isOpen:"upgrade"===l,onClose:function(){return c(null)},type:"purchase",analyticsContext:{upgrade:{context:"workspace_menu_nav"}}}),(0,K.tZ)(aK.Z,{isOpen:"create"===l,onRequestClose:function(){return c(null)},children:(0,K.tZ)(aJ.Z,{})})]})}var ll=function(e){var n=e.currentUser,t=(0,a1.N)({currentUser:n}).sidebarItems,r=t.homeItem,i=t.profileItem,o=t.deploymentsItem,a=t.usageItem,l=t.teamsItem,c=t.settingsItem;return(0,K.BX)(ei.G,{children:[(0,K.tZ)(a0.L,(0,e0._)((0,eL._)({},r),{active:!1})),(0,K.tZ)(a0.L,(0,e0._)((0,eL._)({},i),{active:!1})),(0,K.tZ)(a0.L,(0,e0._)((0,eL._)({},o),{active:!1})),a?(0,K.tZ)(a0.L,(0,e0._)((0,eL._)({},a),{active:!1})):null,l?(0,K.tZ)(a0.L,(0,e0._)((0,eL._)({},l),{active:!1})):null,(0,K.tZ)(a0.L,(0,e0._)((0,eL._)({},c),{active:!1}))]})},lc=t(58610),ls=t(66289),lu=t(40664),ld=t(30601),lp=t(30869);function lf(){var e=(0,eO._)(['\n  fragment DesktopAppNavMenuCurrentUser on CurrentUser {\n    id\n    hasSeenWorkspaceTour: tourSeen(name: "workspace-desktop-new-user-tour")\n    hasSeenSidebarTour: tourSeen(name: "workspace-desktop-sidebar-tour")\n  }\n']);return lf=function(){return e},e}function lh(){var e=(0,eO._)(["\n  query DesktopAppNavMenuTour {\n    currentUser {\n      id\n      ...DesktopAppNavMenuCurrentUser\n    }\n  }\n  ","\n"]);return lh=function(){return e},e}var lm={},lv=(0,eX.Ps)(lf()),lg=(0,eX.Ps)(lh(),lv),ly={id:"DesktopAppNavMenu",title:"Native App Navigation",content:function(){return(0,K.tZ)(ei.G,{children:(0,K.tZ)(eE.xv,{children:"In the desktop app, you can use this menu to switch between your Repls, create new ones, and open more windows."})})}};function lb(e){var n,t=e.targetElement,r=(0,lu.Z)("workspace","desktop-app-nav-menu"),i=r.shouldDisplay,o=r.register,a=r.dismiss,l=(n=(0,eL._)({},lm,void 0),eM.a(lg,n));return((0,en.useEffect)(function(){if(!l.loading&&(null===(e=l.data)||void 0===e?void 0:e.currentUser)){var e,n=l.data.currentUser,t=n.hasSeenWorkspaceTour,r=n.hasSeenSidebarTour;(t||r)&&o()}},[o,l]),t&&i)?(0,K.BX)(K.HY,{children:[(0,K.tZ)(ld.w,{targetElement:t}),(0,K.tZ)(lp.k,{placement:"bottom-start",targetElement:t,activeStep:ly,currentStepIndex:0,done:a,goto:function(){},totalSteps:1,disableAnimation:!0,onClickOutside:a})]}):null}var lx=(0,e4.X)({button:lr,wrapper:[eo.l0.borderRadius(8),eo.l0.width(300),eo.l0.maxHeight("60vh"),eo.l0.flex.column],newReplButtonWrapper:[eo.l0.p(8)],newWindowButtonWrapper:[eo.l0.p(8),eo.l0.pt(0)],replsListContainer:[eo.l0.flex.shrink(1),eo.l0.borderRadius(8)]});function lZ(){var e=(0,J._)((0,en.useState)(!1),2),n=e[0],t=e[1],r=(0,J._)((0,en.useState)(!1),2),i=r[0],o=r[1],a=(0,eG.useRouter)(),l=(0,en.useRef)(null);return(0,K.BX)(K.HY,{children:[(0,K.BX)(a4.xo,{background:"default",isOpen:n,onOpenChange:function(e){i||t(e)},placement:"bottom start",label:"Navigation menu",noArrow:!0,children:[function(e){var n=e.ref,t=(0,aq._)(e,["ref"]);return(0,K.BX)("button",(0,e0._)((0,eL._)({css:lx.button,"data-cy":"global-nav-dropdown-btn",ref:(0,aQ.l)(n,l)},t),{children:[(0,K.tZ)(a2.N2,{color:eD.TV.foregroundDefault,size:20}),(0,K.tZ)(a3.Z,{color:eD.TV.foregroundDimmest,size:12})]}))},(0,K.BX)(ei.G,{css:lx.wrapper,children:[(0,K.tZ)(ei.G,{css:lx.newReplButtonWrapper,children:(0,K.tZ)(e5.zx,{colorway:"primary",text:"Create a Repl",iconLeft:(0,K.tZ)(oq.Z,{}),onClick:function(){return o(!0)}})}),(0,K.tZ)(ei.G,{css:lx.newWindowButtonWrapper,children:(0,K.tZ)(e5.zx,{text:"New window",iconLeft:(0,K.tZ)(lc.Z,{}),onClick:function(){a$.X.openNewWindow()}})}),(0,K.tZ)(ei.G,{css:lx.replsListContainer,children:(0,K.tZ)(ls.Z,{onClick:function(e,n){if(n){a$.X.openWindow(e);return}a.push({pathname:"/replEnvironmentDesktop",query:{replUrl:e}},{pathname:e})}})})]})]}),(0,K.tZ)(aK.Z,{isOpen:i,onRequestClose:function(){return o(!1)},maxWidth:600,children:(0,K.tZ)(aJ.Z,{})}),(0,K.tZ)(lb,{targetElement:l.current})]})}var lw=t(7776),lk=t(56337),lC=t(16643),l_=t(32604),lS=t(38168),lE=(0,e4.X)({popover:[eo.l0.maxWidth(460),eo.l0.width("100%")],button:[nt.gU.nofill,eo.l0.height(32),eo.l0.flex.growAndShrink(1),eo.l0.align.center,eo.l0.rowWithGap(4),eo.l0.px(6),eo.l0.borderRadius(6),eo.l0.color.foregroundDefault]});function lR(e){var n=e.repl,t=e.onDeployClick,r=(0,J._)((0,en.useState)(!1),2),i=r[0],o=r[1];return(0,K.BX)(a4.xo,{isOpen:i,onOpenChange:function(e){o(e),e&&(0,ep.j)(ep.U3.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",noArrow:!0,css:lE.popover,children:[(0,K.BX)(ei.K.button,{dataCy:"ws-repl-info-container",css:lE.button,onClick:function(){(0,ep.j)(ep.U3.REPL_METADATA_OPENED)},children:[(0,K.tZ)(lS.Z,{repl:n}),(0,K.tZ)(a3.Z,{color:eo.TV.foregroundDimmest,size:12})]}),(0,K.tZ)(l_.Z,{setIsEditing:o,onDeployClick:t})]})}var lI=t(58719),lT=t(74854),lG=t(93302),lD=t(20573),lP=t(26881),lB=t(68514),lU=t(52924),lA=t(97411),lL=t(70671),lO=t(74044),lX=t(2689),lM=t(81106),lz=t(99149),lW=lO.Dy.Object({cpuUtilizationPercent:lO.Dy.Number(),memoryUsageRssBytes:lO.Dy.Number(),memoryUsageCacheBytes:lO.Dy.Number(),memorySoftLimitBytes:lO.Dy.Number(),memoryHardLimitBytes:lO.Dy.Number(),numVCpu:lO.Dy.Number(),user:lO.Dy.Object({cpuUtilizationPercent:lO.Dy.Number()}),system:lO.Dy.Object({cpuUtilizationPercent:lO.Dy.Number()})});function lN(e,n){var t=100*n;return e.slice(0,10).filter(function(e){return e>=t}).length}function lj(e){return lN(e,1)>=5?"danger":lN(e,.9)>=5?"warning":"ok"}function lF(){var e,n,t,r=(0,nb.Z)(function(){return(0,nT.cn)({cpu:{numVCpu:0,utilPercent:0,recentUtilPercents:Array(20).fill(0),status:"ok",user:{utilPercent:0,recentUtilPercents:Array(20).fill(0)},system:{utilPercent:0,recentUtilPercents:Array(20).fill(0)}},memory:{softLimitBytes:0,hardLimitBytes:0,recentUtilPercents:Array(20).fill(0),status:"ok",rss:{usageBytes:0,recentUtilPercents:Array(20).fill(0)},cache:{usageBytes:0,recentUtilPercents:Array(20).fill(0)}},storage:{usedBytes:0,totalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0}})},[]),i=(0,nb.Z)(function(){return{cpu:{currentAtom:(0,nT.cn)(function(e){return lV(e(r).cpu.utilPercent)}),totalAtom:(0,nT.cn)(function(){return 100}),cpuCountAtom:(0,nT.cn)(function(e){return e(r).cpu.numVCpu}),recentUtilPercentsAtom:(0,nT.cn)(function(e){return e(r).cpu.recentUtilPercents}),status:(0,nT.cn)(function(e){return e(r).cpu.status}),user:{currentAtom:(0,nT.cn)(function(e){return lV(e(r).cpu.user.utilPercent)}),recentUtilPercentsAtom:(0,nT.cn)(function(e){return e(r).cpu.user.recentUtilPercents})},system:{currentAtom:(0,nT.cn)(function(e){return lV(e(r).cpu.system.utilPercent)}),recentUtilPercentsAtom:(0,nT.cn)(function(e){return e(r).cpu.system.recentUtilPercents})}},ram:{totalAtom:(0,nT.cn)(function(e){return lH(e(r).memory.softLimitBytes)}),recentUtilPercentsAtom:(0,nT.cn)(function(e){return e(r).memory.recentUtilPercents}),status:(0,nT.cn)(function(e){return e(r).memory.status}),rss:{currentAtom:(0,nT.cn)(function(e){return lV(lH(e(r).memory.rss.usageBytes))}),recentUtilPercentsAtom:(0,nT.cn)(function(e){return e(r).memory.rss.recentUtilPercents})},cache:{currentAtom:(0,nT.cn)(function(e){return lV(lH(e(r).memory.cache.usageBytes))}),recentUtilPercentsAtom:(0,nT.cn)(function(e){return e(r).memory.cache.recentUtilPercents})}},disk:{currentAtom:(0,nT.cn)(function(e){return lH(e(r).storage.usedBytes)}),totalAtom:(0,nT.cn)(function(e){return lH(e(r).storage.totalBytes)}),scratchCurrentAtom:(0,nT.cn)(function(e){return lH(e(r).storage.scratchUsedBytes)}),scratchTotalAtom:(0,nT.cn)(function(e){return lH(e(r).storage.scratchTotalBytes)})}}},[r]),o=(0,tO.b9)(r),a=(0,J._)((0,en.useState)(!0),2),l=a[0],c=a[1],s=(0,J._)((0,en.useState)(!0),2),u=s[0],d=s[1];function p(e,n){return[Math.min(Math.round(n),100)].concat((0,em._)(e.slice(0,e.length-1)))}return e=(0,el.Z)().container,n=(0,lM.Z)(e),t=(0,es.Z)(function(e){var n=e.trackingResult,t=e.storageResult;o(function(e){try{var r,i,o=JSON.parse(n.output||"{}");if(!lz.B4.Check(lW,o))throw Error("Got wrong shape for resource response");var a=p(e.cpu.recentUtilPercents,o.cpuUtilizationPercent),l=(o.memoryUsageRssBytes+o.memoryUsageCacheBytes)/o.memorySoftLimitBytes*100,s=p(e.memory.recentUtilPercents,l),f=o.memoryUsageRssBytes/o.memorySoftLimitBytes*100,h=o.memoryUsageCacheBytes/o.memorySoftLimitBytes*100;r={cpu:{numVCpu:o.numVCpu,utilPercent:Math.min(o.cpuUtilizationPercent,100),recentUtilPercents:a,status:lj(a),user:{utilPercent:Math.min(o.user.cpuUtilizationPercent,100),recentUtilPercents:p(e.cpu.user.recentUtilPercents,o.user.cpuUtilizationPercent)},system:{utilPercent:Math.min(o.system.cpuUtilizationPercent,100),recentUtilPercents:p(e.cpu.system.recentUtilPercents,o.system.cpuUtilizationPercent)}},memory:{softLimitBytes:o.memorySoftLimitBytes,hardLimitBytes:o.memoryHardLimitBytes,recentUtilPercents:s,status:lj(s),rss:{usageBytes:o.memoryUsageRssBytes,recentUtilPercents:p(e.memory.rss.recentUtilPercents,f)},cache:{usageBytes:o.memoryUsageCacheBytes,recentUtilPercents:p(e.memory.cache.recentUtilPercents,h)}},storage:{usedBytes:0,totalBytes:1073741824,scratchUsedBytes:0,scratchTotalBytes:1073741824}}}catch(n){return lX.kg.error("Could not calculate resources",{errorMessage:n.message}),e}if(!r)throw Error("Expected resources");try{i=function(e){if(4!==e.length)throw Error("Received unexpected output from storage command: ".concat(e));var n=parseInt(e[0],10),t=parseInt(e[1],10),r=parseInt(e[2],10),i=parseInt(e[3],10);if(isNaN(n)||isNaN(t)||isNaN(r)||isNaN(i))throw Error("Could not parse values from storage output command: ".concat(e));return{storageUsedBytes:n,storageTotalBytes:t,scratchUsedBytes:r,scratchTotalBytes:i}}((t.output||"").trim().split("\n"))}catch(n){return lX.kg.error("Could not calculate resources",{errorMessage:n.message}),e}return r.storage.usedBytes=i.storageUsedBytes,r.storage.totalBytes=i.storageTotalBytes,r.storage.scratchUsedBytes=i.scratchUsedBytes,r.storage.scratchTotalBytes=i.scratchTotalBytes,u||c(!1),d(!1),r})}),(0,en.useEffect)(function(){var e=function(){return o.apply(this,arguments)},r=!1,i=null;function o(){return(o=(0,nx._)(function(){var o,a,l,c;return(0,nZ.Jh)(this,function(s){switch(s.label){case 0:return a=!1,[4,n({args:["bash","-c","cat /repl/stats/resources.json"]})];case 1:if(l=s.sent(),r)return[2];return null!==l.error&&(lX.kg.error("Error running resource tracking command",{errorMessage:l.error}),a=!0),[4,n({args:["bash","-c","cat /repl/stats/subvolume_usage_bytes /repl/stats/subvolume_total_bytes /repl/stats/scratch_usage_bytes /repl/stats/scratch_total_bytes"]})];case 2:if(c=s.sent(),r)return[2];return null===c.error||(null===(o=c.output)||void 0===o?void 0:o.includes("No such file or directory"))||(lX.kg.error("Error running storage command",{errorMessage:c.error}),a=!0),a||t.current({trackingResult:l,storageResult:c}),i=setTimeout(e,2e3),[2]}})})).apply(this,arguments)}return e(),function(){r=!0,i&&clearTimeout(i)}},[e,n,t]),{dataAtom:i,loading:l}}function lV(e){return Math.round((e+Number.EPSILON)*100)/100}function lH(e){return e/1024/1024}var lY=t(85289),lq=t(87001),lJ=t(91612);function lK(e){return Math.round(10*e)/10}function l$(e){return e>lJ.lb?"".concat((0,lG.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,lG.p6)(e)).toLocaleString()," MiB")}lP.kL.register(lP.jn,lP.Gu);var lQ=(0,e4.X)({sectionPadding:[eo.l0.py(4),eo.l0.px(12)],rowSpacing:[eo.l0.rowWithGap(8),eo.l0.justify.spaceBetween,eo.l0.align.center]}),l0=(0,e4.X)({wrapper:[eo.l0.borderRadius(4),eo.l0.border({color:eo.TV.outlineDimmer}),eo.l0.overflow("hidden")],rowSection:[lQ.sectionPadding,lQ.rowSpacing],hoverRowSection:[lQ.sectionPadding,lQ.rowSpacing,{":hover":{backgroundColor:eo.TV.backgroundHigher}}],hoverColumnSection:[lQ.sectionPadding,eo.l0.colWithGap(8),{":hover":{backgroundColor:eo.TV.backgroundHigher}}],sectionHeading:[eo.l0.fontWeight.bold],alignedRow:[eo.l0.rowWithGap(8),eo.l0.align.center],alignedSpaceBetweenRow:[lQ.rowSpacing],tooltipContent:[eo.l0.colWithGap(8),eo.l0.width(240)],tooltipSectionsWrapper:[eo.l0.borderRadius(4),eo.l0.border({color:eo.TV.outlineDimmer}),eo.l0.overflow("hidden")],warningText:[eo.l0.color.orangeStronger],dangerText:[eo.l0.color.redStronger],chartWrapper:[eo.l0.width(22),eo.l0.height(18),eo.l0.borderRadius(2)]});function l1(e){var n=e.resources,t=e.onEditCompute,r=e.isTeamRepl,i=e.isReplOwner,o=e.isCoreMember,a=e.canUseCyclesBoosts,l=(0,er.P5)({controlName:"flag-usage-dynamo"}),c=lK((0,tO.Dv)(n.dataAtom.cpu.cpuCountAtom)),s=lK((0,tO.Dv)(n.dataAtom.ram.totalAtom)/1024),u=l?i&&o&&!r:a,d=r?"Team Repls have a fixed amount of compute":i?o?"Not eligible to edit compute":"Join Replit ".concat(lq.we," to upgrade your compute"):"Only owners of Repls can edit compute";return(0,K.BX)(ei.G,{css:l0.wrapper,children:[(0,K.BX)(ei.G,{css:l0.rowSection,children:[(0,K.tZ)(eE.xv,{css:l0.sectionHeading,children:"Compute"}),(0,K.BX)(ei.G,{css:l0.alignedRow,children:[(0,K.BX)(eE.xv,{color:"dimmer",children:[c," vCPU, ",s," GiB RAM"]}),u?(0,K.tZ)(ab.hU,{onClick:t,alt:"Edit compute",children:(0,K.tZ)(lU.Z,{})}):null,!u&&l?(0,K.tZ)(ab.hU,{disabled:!0,alt:d,children:(0,K.tZ)(lA.Z,{})}):null]})]}),(0,K.tZ)(lB.R,{}),(0,K.tZ)(l2,{resources:n}),(0,K.tZ)(l4,{resources:n})]})}function l2(e){var n=e.resources,t=Math.round((0,tO.Dv)(n.dataAtom.cpu.currentAtom)),r=Math.round((0,tO.Dv)(n.dataAtom.cpu.user.currentAtom)),i=Math.round((0,tO.Dv)(n.dataAtom.cpu.system.currentAtom)),o=(0,tO.Dv)(n.dataAtom.cpu.recentUtilPercentsAtom),a=(0,tO.Dv)(n.dataAtom.cpu.user.recentUtilPercentsAtom),l=(0,tO.Dv)(n.dataAtom.cpu.system.recentUtilPercentsAtom),c=(0,tO.Dv)(n.dataAtom.cpu.status);return(0,K.tZ)(l3,{title:"CPU",displayValue:"".concat(t,"%"),recentPercents:o,status:c,tooltipText:"The amount of processing power this Repl is using.",tooltipRows:[{title:"User",displayValue:"".concat(r,"%"),recentPercents:a},{title:"System",displayValue:"".concat(i,"%"),recentPercents:l}]})}function l4(e){var n=e.resources,t=(0,tO.Dv)(n.dataAtom.ram.totalAtom),r=Math.round((0,tO.Dv)(n.dataAtom.ram.rss.currentAtom)),i=Math.round((0,tO.Dv)(n.dataAtom.ram.cache.currentAtom)),o=(0,tO.Dv)(n.dataAtom.ram.recentUtilPercentsAtom),a=(0,tO.Dv)(n.dataAtom.ram.rss.recentUtilPercentsAtom),l=(0,tO.Dv)(n.dataAtom.ram.cache.recentUtilPercentsAtom),c=(0,tO.Dv)(n.dataAtom.ram.status);return(0,K.tZ)(l3,{title:"RAM",displayValue:"".concat(Math.round(100*Math.min(1,(r+i)/t)),"%"),recentPercents:o,status:c,tooltipText:"The memory this Repl is using.",tooltipRows:[{title:"Active",displayValue:l$(1048576*r),recentPercents:a},{title:"Cache",displayValue:l$(1048576*i),recentPercents:l}]})}function l3(e){var n=e.title,t=e.displayValue,r=e.status,i=e.recentPercents,o=e.tooltipText,a=e.tooltipRows;return(0,K.tZ)(e2.u,{colorway:"darker",placement:"right-start",maxWidth:300,delay:"none",tooltip:(0,K.BX)(ei.G,{css:l0.tooltipContent,children:[(0,K.tZ)(eE.xv,{children:o}),(0,K.tZ)(ei.G,{css:l0.tooltipSectionsWrapper,children:a.map(function(e,n){return(0,K.BX)(ei.G,{css:l0.rowSection,children:[(0,K.tZ)(eE.xv,{children:e.title}),(0,K.BX)(ei.G,{css:l0.alignedRow,children:[(0,K.tZ)(eE.xv,{color:"dimmer",children:e.displayValue}),(0,K.tZ)(ei.G,{css:l0.chartWrapper,children:(0,K.tZ)(l5,{data:e.recentPercents,colorAreaUnderLine:!0})})]})]},n)})})]}),children:(0,K.BX)(ei.G,{css:l0.hoverRowSection,children:[(0,K.BX)(ei.G,{css:l0.alignedRow,children:[(0,K.tZ)(eE.xv,{children:n}),(0,K.tZ)(l8,{status:r})]}),(0,K.BX)(ei.G,{css:l0.alignedRow,children:[(0,K.tZ)(eE.xv,{color:"dimmer",children:t}),(0,K.tZ)(ei.G,{css:l0.chartWrapper,children:(0,K.tZ)(l5,{data:i,colorAreaUnderLine:!0})})]})]})})}function l8(e){var n=e.status;return"warning"===n?(0,K.BX)(K.HY,{children:[(0,K.tZ)(lD.Z,{color:eo.TV.orangeStronger}),(0,K.tZ)(eE.xv,{css:l0.warningText,children:"Near limit"})]}):"danger"===n?(0,K.BX)(K.HY,{children:[(0,K.tZ)(lD.Z,{color:eo.TV.redStronger}),(0,K.tZ)(eE.xv,{css:l0.dangerText,children:"At limit"})]}):null}function l5(e){var n=e.data,t=e.colorAreaUnderLine,r=void 0!==t&&t,i=e.showHorizontalGridLines,o=(0,lL.F)().values,a=n.map(function(e,n){return{x:-n,y:e}});return(0,K.tZ)(lY.x1,{updateMode:"none",options:{clip:4,animation:!1,maintainAspectRatio:!1,events:[],elements:{point:{radius:0},line:{tension:.3,borderWidth:1}},scales:{x:{display:!1,type:"linear",grid:{display:!1},min:0,max:-(n.length-1)},y:{display:void 0!==i&&i,min:0,max:100,ticks:{display:!1,stepSize:10},afterBuildTicks:function(e){var n=[10,50,90];e.ticks=e.ticks.filter(function(e){return n.includes(e.value)})},grid:{color:function(e){return e.tick.value>85?o.global.orangeDimmer:o.global.outlineDimmest},drawTicks:!1},border:{dash:[2,2],display:!1}}}},data:{datasets:[{data:a,fill:{target:"origin"},borderColor:function(e){var n=e.chart,t=n.ctx,r=n.chartArea;if(r){var i=t.createLinearGradient(0,r.bottom,0,r.top),a=o.global.blueDefault,l=o.global.orangeDefault,c=o.global.redDefault;return i.addColorStop(0,a),i.addColorStop(.77,a),i.addColorStop(.9299999999999999,l),i.addColorStop(.9,l),i.addColorStop(.98,c),i}},backgroundColor:function(e){if(!r)return"transparent";var t=e.chart,i=t.ctx,l=t.chartArea;if(l){var c=i.createLinearGradient(l.left,0,l.right,0),s=l6(o.global.blueDimmest),u=l6(o.global.orangeDimmest),d=l6(o.global.redDimmest);return a.forEach(function(e,t){if(c){var r=1-t/(n.length-1);e.y<85?c.addColorStop(r,s):e.y<98?c.addColorStop(r,u):c.addColorStop(r,d)}}),c}}}]}})}function l6(e){var n,t,r=(n=(n=e).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,n,t,r){return n+n+t+t+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null);if(!r)return e;var i=r.r,o=r.g,a=r.b;return"rgba(".concat(i,", ").concat(o,", ").concat(a,", ",.5,")")}function l7(e){var n=e.resources,t=e.alertDialogType,r=e.onRequestUpgrade,i=n.dataAtom,o=i.cpu,a=i.ram,l=(0,tO.Dv)(o.cpuCountAtom),c=(0,tO.Dv)(a.totalAtom),s=(0,tO.Dv)(o.recentUtilPercentsAtom),u=(0,tO.Dv)(a.recentUtilPercentsAtom),d="cpu_alert"===t?"CPU":"RAM",p="You have been near the ".concat("cpu_alert"===t?"".concat(l," vCPU"):"".concat((0,lG.$s)(1048576*c)," GiB RAM")," limit of the free plan ").concat(5," or more times in the past ").concat(20," seconds. More ").concat("cpu_alert"===t?"vCPUs":"RAM"," would improve performance and limit disruptions.");return(0,K.BX)(ei.G,{css:l9.dialogContainer,children:[(0,K.tZ)(lD.Z,{color:eo.TV.orangeStrongest}),(0,K.BX)(eE.xv,{variant:"subheadDefault",multiline:!1,children:["High ",d," usage"]}),(0,K.tZ)(eE.xv,{color:"dimmer",children:p}),(0,K.tZ)(ei.G,{css:l9.chartWrapper,children:(0,K.tZ)(l5,{data:"cpu_alert"===t?s:u,showHorizontalGridLines:!0})}),(0,K.tZ)(e5.zx,{size:"big",colorway:"warning",text:"Increase ".concat(d," limit"),onClick:function(){(0,ep.j)(ep.U3.UPGRADE_SELECTED,{source:"compute_alert_dialog"}),r()}})]})}var l9=(0,e4.X)({dialogContainer:[eo.l0.p(8),eo.l0.colWithGap(8)],chartWrapper:[eo.l0.height(67),eo.l0.backgroundColor.backgroundRoot,eo.l0.borderRadius(12),eo.l0.py(12),eo.l0.px(16)]}),ce=t(68866),cn=t(71411),ct=t(23291),cr=t(40102),ci=t(2454),co=t(43182),ca=t(85195),cl=t(49996);function cc(){var e=(0,eO._)(["\n  fragment EditComputeCurrentBoost on Repl {\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        boost {\n          __typename\n          sku\n        }\n      }\n    }\n  }\n"]);return cc=function(){return e},e}function cs(){var e=(0,eO._)(["\n  query EditComputeDialog($replId: String!) {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n            isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n          }\n        }\n        ...EditComputeCurrentBoost\n      }\n    }\n  }\n  ","\n"]);return cs=function(){return e},e}function cu(){var e=(0,eO._)(["\n  mutation EditCompute($input: BoostRepl2Input!) {\n    boostRepl2(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on PaymentError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on BoostRepl2Result {\n        repl {\n          ... on Repl {\n            id\n            ...EditComputeCurrentBoost\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return cu=function(){return e},e}var cd={},cp=(0,eX.Ps)(cc()),cf=(0,eX.Ps)(cs(),cp),ch=(0,eX.Ps)(cu(),cp),cm=["boost_8cpu_16ram","boost_16cpu_32ram","boost_32cpu_64ram"],cv={off:{graphQlSetting:eT.jU.Off,displayName:"4 vCPUs, 8 GiB RAM",description:"Basic applications and everyday tasks",costUsd:0},boost_8cpu_16ram:{graphQlSetting:eT.jU.Boost_8cpu_16ram,displayName:"8 vCPUs, 16 GiB RAM",description:"Moderate data processing and multitasking",costUsd:.36},boost_16cpu_32ram:{graphQlSetting:eT.jU.Boost_16cpu_32ram,displayName:"16 vCPUs, 32 GiB RAM",description:"High-performance computing tasks",costUsd:.72},boost_32cpu_64ram:{graphQlSetting:eT.jU.Boost_32cpu_64ram,displayName:"32 vCPUs, 64 GiB RAM",description:"Heavy workloads and large-scale processing",costUsd:1.12}};function cg(e){var n,t,r=e.onEditComplete,i=(0,ed.Z)(),o=(0,J._)((0,en.useState)(null),2),a=o[0],l=o[1],c=(0,J._)((0,en.useState)(null),2),s=c[0],u=c[1],d=(0,ev.Z)().showError,p=(0,aO.U)(),f=(n=(0,eL._)({},cd,{variables:{replId:i},onCompleted:function(e){if((null==e?void 0:e.repl.__typename)!=="Repl"){d("Failed to load Repl");return}if("ReplPowerUpTypes"!==e.repl.powerUps.__typename){d("Failed to load Repl power ups");return}var n=e.repl.powerUps.boost.sku;if(n===eT.ri.Boost_2cpu_2ram||n===eT.ri.Boost_4cpu_4ram||n===eT.ri.Boost_8cpu_8ram||n===eT.ri.Boost_16cpu_16ram){co.uT("Unexpected Boost SKU ".concat(n," for repl ").concat(i));return}l(n),u(n)}}),eM.a(cf,n)).loading,h=(0,J._)((0,en.useState)(!1),2),m=h[0],v=h[1],g=(0,J._)((t=(0,eL._)({},cd,{onError:function(e){co.Tb(e),d(e.message)},onCompleted:function(e){(null==e?void 0:e.boostRepl2.__typename)!=="BoostRepl2Result"&&d(e.boostRepl2.message),setTimeout(function(){r()},3e3)}}),ez.D(ch,t)),1)[0],y=(0,er.P5)({controlName:"flag-beefy-boost-tier"});return f?(0,K.tZ)(ei.G,{css:cb.loadingWrapper,children:(0,K.tZ)(eR.Z,{})}):(0,K.BX)(ei.G,{css:cb.root,children:[(0,K.BX)(ca.E,{tag:"fieldset",name:p("pickAmount"),value:null!=s?s:"off",onChange:function(e){u(e.target.value)},css:cb.radioGroup,children:[(0,K.tZ)(cy,{checked:"off"===s,option:"off",isCurrentOption:"off"===a}),cm.filter(function(e){return!!y||"boost_32cpu_64ram"!==e}).map(function(e){return(0,K.tZ)(cy,{checked:s===e,option:e,isCurrentOption:a===e},e)})]}),(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",css:cb.explanationText,children:"You will only be charged for the time this Repl is active"}),(0,K.tZ)(e5.zx,{css:cb.submitButton,colorway:"primary",text:m?(0,K.tZ)(eR.Z,{}):"Apply change",disabled:a===s||m,onClick:function(){s&&(v(!0),g({variables:{input:{replId:i,setting:cv[s].graphQlSetting}}}))}})]})}function cy(e){var n=e.checked,t=e.option,r=e.isCurrentOption;return(0,K.tZ)("label",{htmlFor:t,css:[cx.base,n?cx.checked:cx.unchecked],children:(0,K.BX)(ei.G,{children:[(0,K.tZ)(nr.T,{children:(0,K.tZ)(ca.Y,{id:t,value:t})}),(0,K.BX)(ei.G,{css:cb.optionContainer,children:[(0,K.BX)(ei.G,{css:cb.optionHeader,children:[(0,K.tZ)(eE.xv,{css:cb.optionDisplayText,children:cv[t].displayName}),(0,K.BX)(ei.G,{css:cb.optionPriceAndStatus,children:["off"===t?(0,K.BX)(eE.xv,{children:["Free with ",lq.we]}):(0,K.tZ)(eE.xv,{children:(0,K.BX)(eE.xv,{children:["$",cv[t].costUsd," / hour"]})}),r?(0,K.tZ)(aC.Z,{size:16}):null]})]}),(0,K.tZ)(eE.xv,{color:"dimmer",children:cv[t].description})]})]})})}var cb=(0,e4.X)({root:[eo.l0.p(8),eo.l0.colWithGap(16)],explanationText:[eo.l0.textAlign.center],submitButton:[eo.l0.borderRadius(4)],radioGroup:[eo.l0.colWithGap(8)],optionContainer:[eo.l0.flex.growAndShrink(1)],optionHeader:[eo.l0.rowWithGap(32),eo.l0.align.center,eo.l0.justify.spaceBetween],optionDisplayText:[eo.l0.fontWeight.bold],optionPriceAndStatus:[eo.l0.rowWithGap(6),eo.l0.align.center],loadingWrapper:[eo.l0.p(16),eo.l0.align.center,eo.l0.justify.center]}),cx=(0,e4.X)({base:[eo.l0.position.relative,eo.l0.flex.growAndShrink(1),eo.l0.p(8),(S={border:"1px solid "+eo.TV.outlineDimmest,cursor:"pointer",flexBasis:0,transition:"transform 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)"},(0,ea._)(S,(0,cl.et)("mobileMax"),[eo.l0.py(8),eo.l0.colWithGap(4)]),(0,ea._)(S,"&:focus-within",{borderColor:eo.TV.outlineStrongest}),S),eo.l0.borderRadius(4)],checked:[[(0,ea._)({backgroundColor:eo.TV.accentPrimaryDimmest,borderColor:eo.TV.accentPrimaryStronger},(0,cl.et)("mobileMax"),{transform:"scale(1.02)",boxShadow:eo.TV.shadow1})]],unchecked:[nt.gU.outlined]});function cZ(){var e=(0,eO._)(["\n  query ReplResourcesCurrentUser {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n        userSubscription {\n          isTrial\n        }\n        paymentMethod {\n          __typename\n          ... on PaymentMethod {\n            id\n            last4\n          }\n        }\n        cycles {\n          balance {\n            __typename\n            ... on CyclesBalance {\n              cycles\n            }\n          }\n        }\n        cyclesAutoRefillConfiguration {\n          ... on CyclesAutoRefillConfiguration {\n            id\n            enabled\n          }\n        }\n        replPowerUps {\n          __typename\n          ... on ReplPowerUpDescriptionType {\n            id\n            type\n          }\n        }\n      }\n    }\n  }\n"]);return cZ=function(){return e},e}var cw={},ck=(0,eX.Ps)(cZ());function cC(e){var n=(0,eL._)({},cw,e);return eM.a(ck,n)}var c_=t(73476),cS=t(47957),cE=t(25202);function cR(e){return e>lJ.lb?"".concat((0,lG.$s)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,lG.p6)(e)).toLocaleString()," MiB")}function cI(e,n){return 0===n||0===e?0:Math.round(e/n*100)}function cT(e){var n,t,r,i,o=e.resources,a=e.onEditStorage,l=e.isReplOwner,c=o.dataAtom.disk,s=c.currentAtom,u=c.totalAtom,d=(0,tO.Dv)(s),p=(0,tO.Dv)(u),f=(0,ed.Z)(),h=(0,cS.mE)({variables:{replId:f}}).data,m=(null==h?void 0:null===(n=h.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(t=h.repl.owner)||void 0===t?void 0:t.__typename)==="Team",v=(0,cS.Pf)(),g=v.data,y=v.refetch,b=(null==g?void 0:null===(r=g.currentUser)||void 0===r?void 0:r.storageInfo.accountStorageUtilization.__typename)==="AccountStorageUtilization"?Number(g.currentUser.storageInfo.accountStorageUtilization.total):0,x=(null==g?void 0:null===(i=g.currentUser)||void 0===i?void 0:i.userSubscriptionType)===eT.HP.HackerPro?lJ.CU:lJ.tC,Z=(0,en.useMemo)(function(){return(0,cE.Z)(function(){return y()},{wait:12e4,maxWait:3e5})},[y]);(0,en.useEffect)(function(){var e,n=!1,t=null,r=(e=(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:if(n)return[2];return[4,Z()];case 1:return e.sent(),t=setTimeout(r,3e5),[2]}})}),function(){return e.apply(this,arguments)});return r(),function(){n=!0,t&&clearTimeout(t),Z.isScheduled()&&Z.flush()}},[Z,d,p,y]);var w=(0,er.P5)({controlName:"flag-usage-utopia"});return(0,K.BX)(ei.G,{css:l0.wrapper,children:[(0,K.BX)(ei.G,{css:l0.rowSection,children:[(0,K.tZ)(eE.xv,{css:l0.sectionHeading,children:"Storage"}),l?(0,K.BX)(ei.G,{css:l0.alignedRow,children:[(0,K.tZ)(eE.xv,{color:"dimmer",children:cR(b)}),w?null:(0,K.tZ)(ab.hU,{onClick:a,alt:"Edit storage limit",children:(0,K.tZ)(lU.Z,{})})]}):null]}),(0,K.tZ)(lB.R,{}),l?(0,K.tZ)(cG,{resources:o,accountUsedInBytes:b,accountQuotaInBytes:x}):(0,K.tZ)(cD,{resources:o,isReplOwner:l,isTeamRepl:m})]})}function cG(e){var n=e.resources,t=e.accountUsedInBytes,r=e.accountQuotaInBytes,i=cI(t,r),o=n.dataAtom.disk,a=o.currentAtom,l=o.scratchCurrentAtom,c=(0,tO.Dv)(a),s=(0,tO.Dv)(l),u=[{title:"Total",usageDisplayText:"".concat(cR(t)),percentOfUsage:null},{title:"This Repl",usageDisplayText:"".concat(cR(1048576*c)),percentOfUsage:cI(1048576*c,t)},{title:"Scratch disk",usageDisplayText:"".concat(cR(1048576*s)),percentOfUsage:cI(1048576*s,t)}];return(0,K.tZ)(e2.u,{colorway:"darker",placement:"right-start",maxWidth:300,delay:"none",tooltip:(0,K.BX)(ei.G,{css:l0.tooltipContent,children:[(0,K.tZ)(eE.xv,{children:"Your account storage usage."}),(0,K.tZ)(ei.G,{css:l0.tooltipSectionsWrapper,children:u.map(function(e,n){return(0,K.BX)(ei.G,{css:l0.rowSection,children:[(0,K.BX)(ei.G,{css:l0.alignedRow,children:[n>0?(0,K.tZ)(c_.Z,{color:eo.TV.outlineDefault,size:16}):null,(0,K.tZ)(eE.xv,{children:e.title})]}),(0,K.BX)(ei.G,{css:l0.alignedRow,children:[(0,K.tZ)(eE.xv,{color:"dimmer",children:e.usageDisplayText}),null===e.percentOfUsage?null:(0,K.BX)(eE.xv,{color:"dimmer",children:["(",e.percentOfUsage,"%)"]})]})]},n)})})]}),children:(0,K.BX)(ei.G,{css:l0.hoverColumnSection,children:[(0,K.BX)(ei.G,{css:l0.alignedSpaceBetweenRow,children:[(0,K.BX)(eE.xv,{children:[cR(r)," included"]}),(0,K.BX)(ei.G,{css:l0.alignedRow,children:[(0,K.BX)(eE.xv,{color:"dimmer",multiline:!1,children:[Math.min(i,100),"%"]}),(0,K.tZ)(cU,{percentage:i})]})]}),t>r?(0,K.BX)(ei.G,{css:l0.alignedSpaceBetweenRow,children:[(0,K.tZ)(eE.xv,{children:"Additional usage"}),(0,K.tZ)(eE.xv,{color:"dimmer",children:cR(t-r)})]}):null]})})}function cD(e){var n=e.resources,t=e.isReplOwner,r=e.isTeamRepl,i=n.dataAtom.disk,o=i.currentAtom,a=i.totalAtom,l=(0,tO.Dv)(o),c=(0,tO.Dv)(a),s=1048576*l,u=cI(s,1048576*c);return(0,K.BX)(ei.G,{css:l0.rowSection,children:[(0,K.BX)(ei.G,{css:l0.alignedRow,children:[t?(0,K.tZ)(c_.Z,{color:eo.TV.outlineDefault,size:16}):null,(0,K.tZ)(eE.xv,{children:"This Repl"})]}),(0,K.BX)(eE.xv,{color:"dimmer",children:[cR(s)," ",r?"(".concat(u,"% of total)"):null]})]})}var cP=(0,e4.X)({bar:[eo.l0.width(1.5),eo.l0.height(7),eo.l0.borderRadius(1)]}),cB=(0,e4.X)({wrapper:[eo.l0.rowWithGap(1)],dimBar:[cP.bar,eo.l0.backgroundColor.greyDimmest],blueBar:[cP.bar,eo.l0.backgroundColor.blueStronger],yellowBar:[cP.bar,eo.l0.backgroundColor.yellowStronger],redBar:[cP.bar,eo.l0.backgroundColor.redStronger]});function cU(e){var n=e.percentage,t=Math.round(n/10),r=(0,em._)(Array(7).fill(cB.blueBar)).concat((0,em._)([,,].fill(cB.yellowBar)),[cB.redBar]);return(0,K.tZ)(ei.G,{css:cB.wrapper,children:r.map(function(e,i){var o=n>100?cB.blueBar:r[i];return(0,K.tZ)(ei.G,{css:i<t?o:cB.dimBar},i)})})}var cA=t(5344);function cL(e){var n=e.resources,t=e.onRequestUpgrade,r=(0,ed.Z)(),i=cC().loading,o=(0,cA.BZ)({variables:{replId:r}}),a=o.data,l=o.refetch,c=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl:null;return!c||n.loading||i?(0,K.tZ)(ei.G,{css:cM.loadingStateWrapper,children:(0,K.tZ)(eR.Z,{})}):(0,K.tZ)(cO,{repl:c,refetch:l,resources:n,onRequestUpgrade:t})}function cO(e){var n,t,r,i,o,a,l,c,s,u,d,p,f,h,m,v,g=e.repl,y=e.resources,b=e.onRequestUpgrade,x=cC().data,Z=function(e){w.goTo({step:"power_up_details",powerUpCategory:e})},w=(0,cn.P)({step:"not_shown"}),k=g.currentUserPermissions.changeAlwaysOn===eT.fn.Allowed,C=(null==g?void 0:null===(o=g.owner)||void 0===o?void 0:o.__typename)==="Team",_=(null==g?void 0:null===(a=g.owner)||void 0===a?void 0:a.id)===(null==x?void 0:null===(l=x.currentUser)||void 0===l?void 0:l.id),S=null==x?void 0:null===(c=x.currentUser)||void 0===c?void 0:c.userSubscriptionType,E=null==x?void 0:null===(s=x.currentUser)||void 0===s?void 0:s.replPowerUps.filter(function(e){return"boost"===e.type}),R=!!(null==E?void 0:E.length),I=(null==x?void 0:null===(u=x.currentUser)||void 0===u?void 0:u.cycles.balance.__typename)==="CyclesBalance"&&x.currentUser.cycles.balance.cycles>0,T=(null==x?void 0:null===(p=x.currentUser)||void 0===p?void 0:null===(d=p.cyclesAutoRefillConfiguration)||void 0===d?void 0:d.__typename)==="CyclesAutoRefillConfiguration"&&x.currentUser.cyclesAutoRefillConfiguration.enabled,G=(0,er.P5)({controlName:"flag-usage-dynamo"}),D=(R||I||T||C)&&(_||k),P=(null==x?void 0:null===(h=x.currentUser)||void 0===h?void 0:null===(f=h.paymentMethod)||void 0===f?void 0:f.__typename)==="PaymentMethod"&&null!==x.currentUser.paymentMethod.id,B=null==x?void 0:null===(v=x.currentUser)||void 0===v?void 0:null===(m=v.userSubscription)||void 0===m?void 0:m.isTrial,U=_&&("HACKER_PRO"!==S||B&&!P),A=(0,tO.Dv)(y.dataAtom.cpu.status),L=(0,tO.Dv)(y.dataAtom.ram.status),O=(0,J._)((0,en.useState)(""),2),X=O[0],M=O[1];(0,en.useLayoutEffect)(function(){("warning"===L||"danger"===L)&&M("for 16x RAM"),("warning"===A||"danger"===A)&&M("for 8x CPU")},[]);var z=(0,J._)((0,en.useState)(!1),2),W=z[0],N=z[1];return W&&G?(0,K.BX)(ei.G,{children:[(0,K.BX)(ei.G,{css:cM.editComputeContainer,children:[(0,K.tZ)(ab.hU,{alt:"Back",tooltipHidden:!0,onClick:function(){return N(!1)},dataCy:"edit-compute-back-button",children:(0,K.tZ)(cr.Z,{})}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Edit compute"})]}),(0,K.tZ)(cg,{onEditComplete:function(){return N(!1)}})]}):"not_shown"!==w.currentStep.step?(0,K.tZ)(ce.s,(0,e0._)((0,eL._)({},w),{analyticsContext:"repl_resources"})):(0,K.BX)(ei.G,{css:cM.replResourcesContainer,children:[(0,K.BX)(ei.G,{css:cM.headerAndSubheaderContainer,children:[(0,K.BX)(ei.G,{css:cM.headerContainer,children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Resources"}),(0,K.tZ)(cX,{resourceTier:(t=(n={isTeamRepl:C,isReplOwner:_,plan:S}).isTeamRepl,r=n.isReplOwner,i=n.plan,t?"team":r&&"HACKER_PRO"===i?"member":r&&null===i?"free":"hidden"),isOnTrial:B})]}),(0,K.tZ)(eE.xv,{color:"dimmest",children:"Resources for cloud development environment"})]}),(0,K.tZ)(l1,{resources:y,isTeamRepl:C,isReplOwner:_,isCoreMember:"HACKER_PRO"===S,canUseCyclesBoosts:D,onEditCompute:function(){if(G){N(!0);return}Z("boost")}}),(0,K.tZ)(cT,{resources:y,onEditStorage:function(){return Z("storage")},isReplOwner:_}),U?(0,K.tZ)(e5.zx,{colorway:"blurple",iconLeft:(0,K.tZ)(ci.Z,{}),text:"Join Replit ".concat(lq.we," ").concat(X),onClick:function(){return b()},css:cM.trialButton}):null]})}function cX(e){var n=e.resourceTier,t=e.isOnTrial;switch(n){case"free":return(0,K.tZ)(ct.D,{text:"Free",colorway:"grey"});case"member":if(t)return(0,K.tZ)(ct.D,{text:"".concat(lq.we," Trial"),colorway:"blue"});return(0,K.tZ)(ct.D,{text:"".concat(lq.we),colorway:"purple"});case"team":return(0,K.tZ)(ct.D,{text:"Team",colorway:"green"});default:return null}}var cM=(0,e4.X)({replResourcesContainer:[eo.l0.p(8),eo.l0.colWithGap(8)],headerContainer:[eo.l0.rowWithGap(8)],trialButton:[eo.l0.borderRadius(4)],headerAndSubheaderContainer:[eo.l0.colWithGap(4)],editComputeContainer:[eo.l0.rowWithGap(8),eo.l0.p(8),eo.l0.align.center],loadingStateWrapper:[eo.l0.center,eo.l0.p(16)]}),cz=t(18107);function cW(e){var n,t,r,i,o,a,l,c,s,u,d,p,f,h,m,v,g,y,b,x,Z,w,k,C,_,S,E=e.repl,R=e.currentUser,I=(0,J._)((0,en.useState)(!1),2),T=I[0],G=I[1],D=(0,J._)((0,en.useState)("resources"),2),P=D[0],B=D[1],U=(0,J._)((0,en.useState)(!1),2),A=U[0],L=U[1],O=lF(),X=(r=(n={resources:O,repl:E,currentUser:R,onAlert:function(e){B(e),G(!0)}}).resources,i=n.repl,o=n.currentUser,a=n.onAlert,c=(l=r.dataAtom).cpu,s=l.ram,u=(0,tO.Dv)(c.status),d=(0,tO.Dv)(s.status),p=(0,eG.useRouter)(),f=(0,el.Z)().runner,h=(0,er.P5)({controlName:"flag-slippery-banana",logFlagToAnalytics:!0}),v=(m=(0,J._)((0,en.useState)(!1),2))[0],g=m[1],y=(null===(t=i.owner)||void 0===t?void 0:t.__typename)==="User"&&i.owner.id===(null==o?void 0:o.id),b=null==o?void 0:o.userSubscriptionType,Z=(x=(0,lu.Z)("announcement","resources-upgrade-modal")).shouldDisplay,w=x.register,k=x.dismiss,(0,en.useEffect)(function(){!(0,eg.Vg)(p)&&y&&null===b&&h&&w()},[h,y,w,p,b]),_=(C=(0,J._)((0,en.useState)(!0),2))[0],S=C[1],(0,en.useEffect)(function(){var e=setTimeout(function(){S(!1)},6e4);return function(){return clearTimeout(e)}},[]),(0,en.useEffect)(function(){if(f&&!v)return f.onStateChanged(function(e){e!==cz.Ah.RUNNING||v||g(!0)})},[f,v]),(0,en.useEffect)(function(){!(_||(0,eg.Vg)(p))&&Z&&v&&("warning"===d||"danger"===d?a("ram_alert"):("warning"===u||"danger"===u)&&a("cpu_alert"))},[u,d,w,_,h,y,a,p,Z,b,v]),{dismissAlert:k}).dismissAlert,M=function(){X(),G(!1),B("resources")};return(0,K.BX)(K.HY,{children:[(0,K.BX)(a4.xo,{isOpen:T,onOpenChange:function(e){G(e),e&&(0,ep.j)(ep.U3.REPL_RESOURCES_OPENED),e||"cpu_alert"!==P&&"ram_alert"!==P||M()},placement:"bottom start",label:"Repl resources",noArrow:!0,css:cj.popover,children:[(0,K.tZ)(ab.hU,{"aria-label":"Repl resources",alt:"Repl resources","aria-expanded":T,dataCy:"repl-resources-button",css:cj.button,children:(0,K.BX)(ei.G,{css:cj.buttonWrapper,children:[(0,K.tZ)(lT.Z,{size:16}),(0,K.tZ)(cN,{resources:O})]})}),(0,K.BX)(ei.G,{css:{overflow:"auto",maxHeight:"80vh"},children:["resources"===P?(0,K.tZ)(cL,{resources:O,onRequestUpgrade:function(){return L(!0)}}):null,"cpu_alert"===P||"ram_alert"===P?(0,K.BX)(ei.G,{css:cj.alertDialogWrapper,children:[(0,K.tZ)(ab.hU,{onClick:M,alt:"Close",css:cj.alertDialogCloseButton,children:(0,K.tZ)(lI.Z,{})}),(0,K.tZ)(l7,{resources:O,alertDialogType:P,onRequestUpgrade:function(){return L(!0)}})]}):null]})]}),(0,K.tZ)(a8.Z,{isOpen:A,onClose:function(){return L(!1)},type:"purchase",analyticsContext:{upgrade:{context:"repl_resources"}}})]})}function cN(e){var n=e.resources.dataAtom,t=n.cpu,r=n.ram,i=(0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(t.status),i=e(r.status);return"danger"===n||"danger"===i?"danger":"warning"===n||"warning"===i?"warning":"ok"})},[t.status,r.status]),o=(0,tO.Dv)(i);return"ok"===o?null:(0,K.BX)(K.HY,{children:[(0,K.tZ)(ei.G,{css:[cY.base]}),(0,K.tZ)(ei.G,{css:[cY.base,"warning"===o&&cY.warningColors,"danger"===o&&cY.dangerColors]})]})}var cj=(0,e4.X)({popover:[eo.l0.width(360)],buttonWrapper:[eo.l0.position.relative],button:[eo.l0.height(32),eo.l0.width(32),eo.l0.borderRadius(6)],alertDialogWrapper:[eo.l0.position.relative],alertDialogCloseButton:[eo.l0.position.absolute,eo.l0.top(8),eo.l0.right(8),eo.l0.zIndex(1)]}),cF=function(e){return"\n0% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 ".concat(e,";\n}\n\n70% {\n  transform: scale(1);\n  box-shadow: 0 0 0 6px transparent;\n}\n\n100% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 transparent;\n}\n")},cV=(0,$.F4)(cF(eo.TV.orangeDefault)),cH=(0,$.F4)(cF(eo.TV.redDefault)),cY=(0,e4.X)({base:[eo.l0.position.absolute,{width:8,height:8,borderRadius:"50%",top:-4,right:-4,backgroundColor:eo.TV.backgroundRoot,outline:"2px solid "+eo.TV.backgroundRoot,borderStyle:"solid"}],warningColors:[{backgroundColor:eo.TV.orangeStronger,animation:"".concat(cV," 2s infinite"),outlineColor:"transparent"}],dangerColors:[{backgroundColor:eo.TV.redStronger,animation:"".concat(cH," 2s infinite"),outlineColor:"transparent"}]});function cq(e,n){e.preventDefault();var t={x:e.pageX,y:e.pageY},r={x:0,y:0};n.start&&n.start({mouse:t,shiftKey:e.shiftKey});var i=function(e){var i={x:e.pageX,y:e.pageY};r={x:i.x-t.x,y:i.y-t.y},n.move({delta:r,shiftKey:e.shiftKey,mouse:i})},o=null,a=function(e){e.preventDefault(),o&&cancelAnimationFrame(o),o=requestAnimationFrame(function(){i(e)})},l=function(){o&&cancelAnimationFrame(o),document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),document.removeEventListener("touchcancel",l),n.end&&n.end({delta:r,shiftKey:e.shiftKey})};document.addEventListener("pointermove",a),document.addEventListener("pointerup",l),document.addEventListener("touchcancel",l)}var cJ=t(62624),cK=t(48796),c$=t(79217),cQ=(0,tA.$)(["transformX","transformY","hoverScaleX","hoverScaleY","width","height","zIndex","cursor","gripVisibility","gripColor","gripWidth","gripHeight","transitionDuration","rotation"]),c0=cQ.cssVars,c1=cQ.styleTokens,c2=(0,e4.X)({root:[eo.l0.center,eo.l0.position.absolute,eo.l0.top(0),eo.l0.left(0),{transform:"translate(".concat(c1.transformX,", ").concat(c1.transformY,")"),width:c1.width,height:c1.height,cursor:c1.cursor,zIndex:c1.zIndex,"&:hover":{zIndex:ia.gutterHovered},"& .icon":{transform:"rotate(".concat(c1.rotation,")")},"&:hover .blanket":{transform:"scale(".concat(c1.hoverScaleX,", ").concat(c1.hoverScaleY,")")},"&:active .blanket":[eo.l0.height("200vh"),eo.l0.width("200vw"),{transform:"translate(-50%, -50%)"}],"&:not(:active):hover > .grip":(0,ea._)({},c0.gripColor,eo.TV.foregroundDefault)}],blanket:eo.l0.coverContainer,grip:[eo.l0.borderRadius(4),{width:c1.gripWidth,height:c1.gripHeight,visibility:c1.gripVisibility,background:c1.gripColor,transitionProperty:"opacity, width, height, background-color",transitionTimingFunction:"ease-out"}]});function c4(e){var n=(0,en.useRef)(null),t=(0,cK.T)();(0,tU.j)(n,e.size,function(e){var n,t=e.width,r=e.height;return n={},(0,ea._)(n,c0.width,t+"px"),(0,ea._)(n,c0.height,r+"px"),n}),(0,tU.j)(n,e.position,function(e){var n,t=e.x,r=e.y;return n={},(0,ea._)(n,c0.transformX,Math.round(t)+"px"),(0,ea._)(n,c0.transformY,Math.round(r)+"px"),n}),(0,tU.j)(n,e.rotation,function(e){return(0,ea._)({},c0.rotation,e+"deg")}),(0,tU.j)(n,e.gripIsHidden,function(e){return(0,ea._)({},c0.gripVisibility,e?"hidden":"visible")}),(0,tU.j)(n,e.length,function(e){return(0,ea._)({},c0.transitionDuration,(t?0:Math.min(Math.max(100/e*1,.08),.12))+"ms")});var r=(0,cJ.y)()?3:2;return(0,tU.j)(n,e.isStacked,function(e){var n;return n={},(0,ea._)(n,c0.cursor,e?"row-resize":"col-resize"),(0,ea._)(n,c0.hoverScaleX,(e?1:r).toString()),(0,ea._)(n,c0.hoverScaleY,(e?r:1).toString()),n}),(0,tU.j)(n,e.isActive,function(e){var n;return n={},(0,ea._)(n,c0.gripColor,e?"radial-gradient(circle, ".concat(eo.TV.accentPrimaryDefault," calc(100% - 48px), transparent)"):eo.TV.outlineDimmest),(0,ea._)(n,c0.zIndex,(e?ia.gutterActive:ia.gutter).toString()),n}),(0,tU.j)(n,e.gripSize,function(e){var n,t=e.width,r=e.height;return n={},(0,ea._)(n,c0.gripWidth,t+"px"),(0,ea._)(n,c0.gripHeight,r+"px"),n}),n}var c3=(0,en.memo)(function(e){var n,t,r,i,o,a,l,c,s,u,d,p,f,h,m,v,g,y,b,x,Z,w=(d=tq(n=e.handleId),f=tR(p=tJ(n)),h=tI(p),m=tK(n),v=(t=tq(n),(0,nb.Z)(function(){return(0,nH.kv)(t,function(e){return!!e.snapped})},[t])),g=t$(n),y=(r=tR(tJ(n)),i=t$(n),(0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(r),t=n.width,o=n.height;return e(i)?t:o})},[r,i])),b=(o=tq(n),(0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(o),t=n.snapped,r=n.stacked;return"right"===t?r?180:90:"left"===t?r?0:270:0})},[o])),x=(a=t$(n),l=tK(n),c=tR(tJ(n)),(0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(c),t=n.width,r=n.height,i=e(l);return e(a)?{width:i?t:24,height:2}:{height:i?r:24,width:2}})},[c,a,l])),Z=(s=tR(tJ(n)),u=t$(n),(0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(s),t=n.width,r=n.height;return(e(u)?t:r)<24})},[s,u])),{handle:ir(d),size:ir(f),position:ir(h),isActive:ir(m),isSnapped:ir(v),isStacked:ir(g),length:ir(y),rotation:ir(b),gripSize:ir(x),gripIsHidden:ir(Z)}),k=c4(w),C=ii(tY),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,en.useRef)(e),t=ii(rA),r=io(td);return(0,en.useCallback)(function(i){if(i.snapped){t({leftPath:i.leftPath,percent:n.current});return}Promise.resolve(r()).then(function(r){var o=nX(r,i.leftPath);if(!o||!nV(o))throw Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})})},[e,t,r])}(),S=(0,en.useRef)(null),E=(0,lC.Z)(w.isSnapped);return(0,K.BX)(ei.G,{innerRef:k,css:c2.root,onDoubleClick:function(){_(w.handle.current)},onPointerDown:function(e){cq(e,{start:function(){var e=w.handle.current;S.current=document.activeElement,C({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){C({type:"update",moveDelta:e.delta})},end:function(){var e,n;C({type:"end"}),null===(n=S.current)||void 0===n||null===(e=n.focus)||void 0===e||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,K.tZ)(ei.G,{className:"blanket",css:c2.blanket}),E?(0,K.tZ)(c$.Z,{className:"icon"}):(0,K.tZ)(ei.G,{className:"grip",css:c2.grip})]})}),c8=(0,en.memo)(function(){var e,n,t=c4((e=tR(t6),n=tI(t6),{size:ir(e),position:ir(n),isActive:ir(t8),length:ir(t7),gripSize:ir(t5),isStacked:ir(oF),gripIsHidden:ir(oF),rotation:ir(oV)})),r={start:ii(t2),update:ii(t4),end:ii(t3)},i=oH().toggle,o=(0,en.useRef)(null);return(0,K.BX)(ei.G,{innerRef:t,css:c2.root,onDoubleClick:function(){i()},onPointerDown:function(e){cq(e,{start:function(){o.current=document.activeElement,r.start()},move:function(e){var n=e.delta;r.update({deltaX:n.x})},end:function(){var e,n;r.end(),null===(n=o.current)||void 0===n||null===(e=n.focus)||void 0===e||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,K.tZ)(ei.G,{className:"blanket",css:c2.blanket}),(0,K.tZ)(ei.G,{className:"grip",css:c2.grip})]})}),c5=t(62789),c6=t(26508),c7=t(79621),c9=t(78531),se=t(41084),sn=t(50494),st=t(76111),sr=t(85267),si=t(68348),so=t(23090),sa=t(70912);function sl(){var e=(0,eO._)(["\n  query ReplEnvironmentDesktopSidebarContent {\n    currentUser {\n      id\n      ...UserPlanStateCurrentUser\n    }\n  }\n  ","\n"]);return sl=function(){return e},e}var sc={},ss=(0,eX.Ps)(sl(),sa.$),su=t(67774),sd=t(18440),sp=t(19724),sf=t(78711);function sh(){var e=(0,eO._)(["\n  query workspaceMultiplayersOnline($ids: [Int!]!) {\n    currentUser {\n      id\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n      fullName\n    }\n  }\n"]);return sh=function(){return e},e}var sm={},sv=(0,eX.Ps)(sh()),sg=t(94376),sy={type:"context",icon:(0,K.tZ)(oJ.Z,{}),label:"",description:"Search"},sb=(0,$.iv)([eo.l0.top(0),eo.l0.left(0),eo.l0.width("100%"),eo.l0.zIndex(3),{"& > div:first-of-type > div:first-of-type":[eo.l0.pl(0),eo.l0.pr(0),eo.l0.pt(0)]},{'& [role="listbox"]':[eo.l0.pl(8),eo.l0.position.absolute,eo.l0.top(40),eo.l0.height("calc(100% - ".concat(40,"px)")),eo.l0.left(0),eo.l0.width("100%"),eo.l0.zIndex(3),eo.l0.backgroundColor.backgroundRoot]},{'& [role="option"] > div':[eo.l0.borderRadius(8)]}]);function sx(){var e,n,t,r,i,o,a,l,c,s,u,d,p,f,h,m=(e=(0,el.Z)().fs,n=(0,ec.AA)(),t=(0,o9.T)(),i=ai(r=oM()),o=(0,sd.s6)(sp.Y.SidebarSearch),a=oL(),c=aa(l=(0,en.useCallback)(function(e){(0,ep.j)(ep.U3.TOOL_OPENED,{source:"Sidebar Search",tool:e.pane.type}),a(e)},[a])),s=ar(l),u=eu(oM()),d=(0,ne.aG)(),f=(0,J._)((p=(0,eL._)({},sm,void 0),sf.t(sv,p)),1)[0],h=(0,nb.Z)(function(){return{data:{type:"context",label:"Multiplayers",icon:(0,K.tZ)(eI.Z,{})},commands:(0,nx._)(function(){var e,n,t,r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:if(!d.length)return[2,[]];return[4,f({variables:{ids:d.map(function(e){return e.id}).slice(0,sg.I)}})];case 1:if(!(e=i.sent().data))return[2,[]];return n=d.reduce(function(e,n){return e[n.id]=n.color,e},{}),t=e.currentUser,r=e.usersByIds.filter(function(e){return e.id!==(null==t?void 0:t.id)}).map(function(e){return{match:nC.pl,data:{type:"action",label:e.username,icon:(0,K.tZ)(ei.G,{style:{border:"2px solid",borderColor:n[e.id],borderRadius:"50%",width:20,height:20},children:(0,K.tZ)(e1.q,{size:16,src:e.image,username:e.username,fullName:e.fullName})}),run:function(){return u({username:e.username,id:e.id})}}}}),d.length>sg.I&&r.push({match:nC.pl,data:{type:"action",label:"+".concat(d.length-sg.I," more"),icon:(0,K.tZ)(eI.Z,{}),run:function(){}}}),[2,r]}})})}},[d,u,f]),(0,nb.Z)(function(){var a={data:{type:"context",label:"Tools",icon:(0,K.tZ)(oK.Z,{})},commands:function(){return c}},l=(0,n_.i)({openFile:r,fs:e,shouldHideFile:t,getRecentFiles:n,lazyLoad:!0});return l.match=void 0,{data:sy,commands:function(){return[i,l,a,h,s,{data:{type:"group",key:"extensions"},commands:(0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{}}],[4,Promise.all(o.map((t=(0,nx._)(function(n){var t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,su.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}]}}},[e,c,i,t,r,n,h,s,o]));return(0,K.tZ)(ei.G,{css:sb,children:(0,K.tZ)(nv.X,{command:m,openOnInput:!0})})}var sZ=t(9331);function sw(e){var n=e.sections,t=e.id,r=n.findIndex(function(e){return e.id===t});if(-1===r)throw Error("");var i=n[r],o=i.height;i.height=0;var a=n.slice(r),l=n.slice(0,r).reverse(),c=!0,s=!1,u=void 0;try{for(var d,p=(0,em._)(a).concat((0,em._)(l))[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;if(0!==f.height){f.height+=o;return}}}catch(e){s=!0,u=e}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}}var sk=(0,en.createContext)(void 0);function sC(){var e=(0,en.useContext)(sk);if(!e)throw Error("Expected store in context");return e}function s_(e){var n=sC();return(0,tO.Dv)(e,{store:n})}var sS=function(e){var n=sC();return(0,tO.b9)(e,{store:n})};function sE(e){var n=(0,J._)((0,en.useState)(function(){return(0,nT.MT)()}),1)[0];return(0,K.tZ)(sk.Provider,{value:n,children:e.children})}var sR=(0,nT.cn)({}),sI=(0,nT.cn)(null,function(e,n,t){n(sR,function(e){return(0,n9.Uy)(e,function(e){e[t.id]=t.preferredHeight})})}),sT=(0,nH.O4)("replEnvironmentDesktopSidebarSections",[]),sG=(0,nT.cn)(null,function(e,n,t){try{n(sT,t)}catch(e){co.Tb(e)}}),sD=(0,nT.cn)(0);function sP(e,n){return e.map(function(e){return{id:e.id,height:e.percent/100*n}})}var sB=(0,nT.cn)(null,function(e,n,t){var r=t.height-36*t.sections.length;n(sD,t.height);var i=e(sT);if(i.length!==t.sections.length){n(sG,sP(t.sections,r));return}for(var o=[],a=i.map(function(e){return e.height}).reduce(function(e,n){return e+n},0),l=0;l<i.length;l++){if((null===(c=i[l])||void 0===c?void 0:c.id)!==(null===(s=t.sections[l])||void 0===s?void 0:s.id)){n(sG,sP(t.sections,r));return}var c,s,u=i[l];o.push((0,e0._)((0,eL._)({},u),{percent:0===a?0:u.height/a*100}))}n(sG,sP(o,r))}),sU=(0,nH.kv)(sT,function(e){return e.map(function(e){return e.id})},to()),sA=(0,nT.cn)(null,function(e,n,t){n(sD,t),n(sG,function(e){return(0,n9.Uy)(e,function(e){var n=e.reduce(function(e,n){return e+n.height},0),r=t-36*e.length-n,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(s.height>0){var u=0===n?0:s.height/n;s.height=Math.max(0,s.height+r*u)}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})})}),sL=(0,nT.cn)(null,function(e,n,t){var r=e(sT),i=e(sR)[t],o=r.find(function(e){return e.id===t});if(!o)throw Error("");if(0===o.height){n(sT,(0,n9.Uy)(r,function(n){!function(e){var n=e.sections,t=e.preferredHeight,r=e.id,i=n.findIndex(function(e){return e.id===r});if(-1===i)throw Error("Expected sectionIndex");var o=n.reduce(function(n,t){return n+(t.height+e.headerHeight)},0),a=e.totalHeight-o,l=n[i];if(a>0){l.height=a;return}var c=n.slice(i+1).find(function(e){return e.height>0})||n.slice(0,i).reverse().find(function(e){return e.height>0});if(c){if(void 0!==t&&t<c.height){l.height=t,c.height-=t;return}l.height=c.height,c.height=0}}({sections:n,id:t,totalHeight:e(sD),headerHeight:36,preferredHeight:i})}));return}n(sI,{id:o.id,preferredHeight:o.height}),n(sT,(0,n9.Uy)(r,function(e){return sw({sections:e,id:t})}))});function sO(e){return s_((0,nb.Z)(function(){return(0,nT.cn)(function(n){var t;return(null===(t=n(sT).find(function(n){return n.id===e}))||void 0===t?void 0:t.height)===0})},[e]))}var sX=(0,nT.cn)(null),sM=(0,nT.cn)(null,function(e,n,t){var r=e(sT);if("start"===t.type){var i=r.find(function(e){return e.id===t.id});if(!i)throw Error("");n(sX,{id:t.id,heightStart:i.height,sectionStart:r});return}var o=e(sX);if(!o)throw Error("");if("update"===t.type){var a=e(sD);n(sT,(0,n9.Uy)(o.sectionStart,function(e){var n=o.heightStart+t.delta;!function(e){var n=e.sections,t=e.id,r=e.totalHeight-n.reduce(function(n,t){return n+(t.height+e.headerHeight)},0),i=n.findIndex(function(e){return e.id===t});if(-1===i)throw Error("Expected sectionIndex");var o=r+n.slice(i).reduce(function(e,n){return e+n.height},0),a=n[i],l=e.height>a.height,c=Math.min(o,e.height),s=Math.abs(a.height-c);if(l){a.height=Math.max(0,c);var u=!0,d=!1,p=void 0;try{for(var f,h=n.slice(i+1)[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;if(0!==m.height){if(m.height<s){s-=m.height,m.height=0;continue}m.height-=s;break}}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}return}var v=n[i+1];if(e.height>=0){a.height=e.height,v&&(v.height+=s);return}var g=a.height;a.height=0;var y=-1*e.height,b=!0,x=!1,Z=void 0;try{for(var w,k=n.slice(0,i).reverse()[Symbol.iterator]();!(b=(w=k.next()).done);b=!0){var C=w.value;if(C.height>y){g+=y,C.height-=y;break}g+=C.height,y-=C.height,C.height=0}}catch(e){x=!0,Z=e}finally{try{b||null==k.return||k.return()}finally{if(x)throw Z}}v&&(v.height+=g)}({headerHeight:36,totalHeight:a,sections:e,id:o.id,height:n})}));return}n(sT,(0,n9.Uy)(r,function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.height>=32||sw({sections:e,id:a.id})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}})),n(sX,null)}),sz=(0,nT.cn)(function(e){return!!e(sX)});function sW(e){var n=e.id;return s_((0,nb.Z)(function(){return(0,nT.cn)(function(e){var t;return(null===(t=e(sX))||void 0===t?void 0:t.id)===n})},[n]))}var sN=t(44166),sj=t(73097),sF={maxCount:8,key:"recentTools"},sV=lO.Dy.Object({type:lO.Dy.String()}),sH=t(13729),sY=t(15250),sq=t(475),sJ=t(38889),sK=t(20840),s$=t(44620),sQ=t(8271),s0=t(96239),s1=t(73722),s2=t(86612),s4=t(30826),s3=t.n(s4),s8=t(57526),s5=t(2161),s6=t(50451),s7=t(33988),s9=t.n(s7);function ue(){var e=(0,eO._)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n"]);return ue=function(){return e},e}function un(){var e=(0,eO._)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return un=function(){return e},e}var ut=(0,eX.Ps)(ue()),ur=(0,eX.Ps)(un(),ut),ui=(0,e4.X)({root:[eo.l0.rowWithGap(8),eo.l0.align.center,eo.l0.px(8),{textDecoration:"none"}],info:[eo.l0.colWithGap(2),eo.l0.flex.growAndShrink(1)],meta:{fontSize:10}});function uo(e){var n=e.repl,t=e.height,r=e.isActive,i=e.search,o=n.title,a=(0,en.useMemo)(function(){return i?o1.Z.match(i,o):null},[i,o]);return(0,K.tZ)(s9(),{legacyBehavior:!0,href:n.url,passHref:!0,children:(0,K.BX)(ei.G,{tag:"a",style:{height:t},css:ui.root,children:[(0,K.tZ)(s5.ZP,{alt:n.title,size:32,iconUrl:n.iconUrl}),(0,K.BX)(ei.G,{css:ui.info,children:[(0,K.tZ)(o0.x,{text:n.title,highlight:null==a?void 0:a.ranges,dimmed:!r}),(0,K.BX)(eE.xv,{css:ui.meta,color:"dimmest",multiline:!1,children:[n.owner.username," • edited ",(0,s8.F)(n.timeUpdated)]})]})]})})}function ua(){return(ua=(0,nx._)(function(e){var n;return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:if(!tM.l)throw Error("Expected apolloClient");return[4,tM.l.query({query:ur,variables:e})];case 1:return[2,(null===(n=t.sent().data.currentUser)||void 0===n?void 0:n.search.repls.filter(function(e){return!!e.owner}))||[]]}})})).apply(this,arguments)}function ul(){var e=(0,rF.WU)(),n=io(tm),t=io(tv),r=ii(rW),i=ii(iQ),o=ii(tk),a=io(tf),l=(0,er.P5)({controlName:o7.wK,logFlagToAnalytics:!1});return(0,en.useCallback)(function(c){var s=c.pane,u=c.activate,d=c.replaceExistingType,p=c.updateOnReveal,f=(0,nw.Ur)(s)?a():null;if(f||(f=function(e){var n,t,r,i,o=e.panes,a=e.pane,l=e.replaceExistingType,c=e.multiplePortsEnabled;if((0,nw.Ur)(a)){var s,u,d=a.data.path;return null!==(u=null===(s=o.find(function(e){var n=(0,J._)(e,2)[1];return(0,nw.Ur)(n)&&n.data.path===d}))||void 0===s?void 0:s[0])&&void 0!==u?u:null}return(0,nw.WQ)(a)?null!==(t=null===(n=o.find(function(e){var n=(0,J._)(e,2)[1];return!!(0,nw.WQ)(n)&&n.data.installationId===a.data.installationId&&n.data.path===a.data.path&&n.data.filePath===a.data.filePath}))||void 0===n?void 0:n[0])&&void 0!==t?t:null:(l||(0,nw.b)(a.type,c))&&null!==(i=null===(r=o.find(function(e){return(0,J._)(e,2)[1].type===a.type}))||void 0===r?void 0:r[0])&&void 0!==i?i:null}({panes:(0,em._)(n()).concat((0,em._)(t())),pane:s,replaceExistingType:d,multiplePortsEnabled:l})),f)return(void 0===p||p)&&o({paneId:f,pane:s}),i({paneId:f,activate:u}),f;var h=c.placement;return(null==h?void 0:h.type)!=="secondary"||h.relativeTo||(h={type:"secondary",relativeTo:e()}),r({pane:s,activate:u,placement:h})},[t,n,e,r,i,o,a,l])}var uc={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,ea._)({},eT.Bd.DesktopApp,(0,ny.l2)({ctrl:!0,key:"Tab"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,ea._)({},eT.Bd.DesktopApp,(0,ny.l2)({ctrl:!0,shift:!0,key:"Tab"}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,ea._)({},eT.Bd.DesktopApp,(0,ny.l2)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,ea._)({},eT.Bd.DesktopApp,(0,ny.l2)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,ea._)({},eT.Bd.DesktopApp,(0,ny.l2)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,ny.l2)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:nS.q},run:{id:"repl.run",name:"Run Repl",default:(0,ny.l2)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,ny.l2)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,ny.l2)({cmdOrCtrl:!0,shift:!0,key:"s"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showDocs:{id:"repl.showDocs",name:"Show docs",description:"Opens or reveals the Replit Docs in a tab",default:void 0},showReplitAi:{id:"repl.showGhostwriter",name:"Show Replit AI",description:"Opens or reveals Replit AI in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,ea._)({},eT.Bd.DesktopApp,(0,ny.l2)({cmdOrCtrl:!0,key:","}))},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0},webviewRefresh:{id:"webviewpane.reload",name:"Refresh the webview",default:(0,ny.l2)({cmdOrCtrl:!0,shift:!0,key:"s"})}},us=Object.values(uc),uu=(0,en.memo)(function(e){var n,t,r,i,o,a=e.isAdmin,l=e.isServer,c=ap(),s=(0,J._)((0,en.useState)(!1),2),u=s[0],d=s[1],p=(0,ec.AA)(),f=(0,el.Z)(),h=f.fs,m=f.container,v=f.runner,g=(0,sJ.g)(),y=g.fork,b=g.isForking,x=(0,aw.L7)(v),Z=(0,o9.T)(),w=oM(),k=ii(r2),C=ii(r4),_=ii(rK),S=ii((n=(0,rF.gv)(),(0,nb.Z)(function(){return(0,nT.cn)(null,function(e,t){var r=n();if(r){t(r1,[r]);var i=e(te);i&&t(tt,i)}})},[n]))),E=ii(i9),R=ii(r3),I=it(te),T=it((0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(te);if(!n)return null;var t=nM(e(td),n);return t?t.paneGroup.id:null})},[])),G=ii(oa),D=oz().toggleMaximizePane,P=ii(rP),B=ii(rG),U=ii(i7),A=ii(rB),L=(0,an.Y6)(I),O=(0,sK.Z)("replUrl","string"),X=(0,ed.Z)(),M=(0,lk.Z)(),z=io(ty),W=oL(),N=(0,s2.Z)(m),j=s3()(function(e){return(0,ep.j)(ep.U3.PROJECT_RAN,{replId:X,placement:e})},500);(0,ng.Il)(function(){return[uc.newTab.id,function(){return k()}]},[k]),(0,ng.Il)(function(){return[uc.nextTab.id,function(){return R("next")}]},[R]),(0,ng.Il)(function(){return[uc.previousTab.id,function(){return R("previous")}]},[R]),(0,ng.Il)(function(){return[uc.closeTab.id,function(){return C()||z()>0}]},[C,z]),(0,ng.Il)(function(){return[uc.reopenClosedTab.id,function(){return S()}]},[S]),(0,ng.Il)(function(){return[uc.moveTabUpGroup.id,function(){return _("above")}]},[_]),(0,ng.Il)(function(){return[uc.moveTabRightGroup.id,function(){return _("rightOf")}]},[_]),(0,ng.Il)(function(){return[uc.moveTabLeftGroup.id,function(){return _("leftOf")}]},[_]),(0,ng.Il)(function(){return[uc.moveTabDownGroup.id,function(){return _("below")}]},[_]),(0,ng.Il)(function(){return I?[uc.insertPaneGroupUp.id,function(){return A({paneId:I,placement:"above",autoFocus:!0})}]:void 0},[I]),(0,ng.Il)(function(){return I?[uc.insertPaneGroupRight.id,function(){return A({paneId:I,placement:"rightOf",autoFocus:!0})}]:void 0},[I]),(0,ng.Il)(function(){return I?[uc.insertPaneGroupLeft.id,function(){return A({paneId:I,placement:"leftOf",autoFocus:!0})}]:void 0},[I]),(0,ng.Il)(function(){return I?[uc.insertPaneGroupDown.id,function(){return A({paneId:I,placement:"below",autoFocus:!0})}]:void 0},[I]),(0,ng.Il)(function(){return[am.id,function(){return c()}]},[c]);var F=(0,ng.gf)(uc.findFile.id);(0,ng.Il)(function(){return[uc.findFile.id,function(){return c(n_.i({openFile:w,fs:h,shouldHideFile:Z,getRecentFiles:p,keyboardShortcut:F}))}]},[c]),av(n_.i({openFile:w,fs:h,shouldHideFile:Z,getRecentFiles:p,keyboardShortcut:F}));var V=(0,ng.gf)(uc.searchFileContents.id),H=ul();(0,ng.Il)(function(){return[uc.searchFileContents.id,function(){if((null==L?void 0:L.type)==="searchReplace"){null===(e=L.focusSearchInput)||void 0===e||e.call(L);return}var e,n,t=void 0;(null==L?void 0:L.type)==="codeEditor"&&(t=null===(n=L.getCurrentSelectionText)||void 0===n?void 0:n.call(L)),H({pane:{type:"searchReplace",data:{initialQuery:t}},activate:!0,placement:{type:"secondary"},replaceExistingType:!0,updateOnReveal:void 0!==t})}]},[L,c,w,H]),(0,ng.Il)(function(){return I?[uc.toggleFloatPaneGroup.id,function(){return G(I)}]:void 0},[I]),(0,ng.Il)(function(){return I?[uc.toggleMaximizePaneGroup.id,function(){return D(I)}]:void 0},[I]),(0,ng.Il)(function(){return T?[uc.removePaneGroup.id,function(){P({paneGroupId:T}),U()}]:void 0},[T]),(0,ng.Il)(function(){return I?[uc.removeOthersInPaneGroup.id,function(){B(I)}]:void 0},[I]),(0,ng.Il)(function(){return[uc.moveFocusUp.id,function(){return E("above")}]},[]),(0,ng.Il)(function(){return[uc.moveFocusDown.id,function(){return E("below")}]},[]),(0,ng.Il)(function(){return[uc.moveFocusRight.id,function(){return E("rightOf")}]},[]),(0,ng.Il)(function(){return[uc.moveFocusLeft.id,function(){return E("leftOf")}]},[]),av(ar(W)),av(nS.F({container:m,keyboardShortcut:V,openFile:w})),(0,ng.Il)(function(){if(x!==cz.Ah.OFFLINE)return[uc.run.id,function(){x===cz.Ah.RUNNING&&v.stopRun(),j("shortcut_cmd_enter"),v.run()}]},[x]);var Y=(0,ng.gf)(uc.run.id);return av({match:nC.pl,data:{type:"action",icon:(0,K.tZ)(lc.Z,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){a$.X.openNewWindow()}}},{enabled:M}),av({match:nC.pl,data:{type:"action",icon:(0,K.tZ)(sY.Z,{}),label:"Run",description:"Run Repl",run:function(){v.run()},keyboardShortcut:Y}},{enabled:x===cz.Ah.IDLE}),av({match:nC.pl,data:{type:"action",icon:(0,K.tZ)(sq.Z,{}),label:"Stop",description:"Stop Repl",run:function(){v.stopRun()}}},{enabled:x===cz.Ah.RUNNING}),av({match:nC.pl,data:{type:"action",icon:(0,K.tZ)(s1.Z,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){m.exec("kill","1")}}},{enabled:a}),av({match:nC.pl,data:{type:"action",icon:(0,K.tZ)(s$.Z,{}),label:"Open development URL",run:function(){if(!N)throw Error("Expected dotdevUrl");window.open(N,"_blank")}}},{enabled:l}),av({match:nC.pl,data:{type:"action",icon:(0,K.tZ)(s0.Z,{}),label:"Open in desktop app",description:"Open this Repl in the desktop app",run:function(){if(!O)throw Error("Expected Repl URL query param");var e="".concat(window.location.origin,"/desktopApp/open?replUrl=").concat(O);window.open(e,"_blank")}}},{enabled:!M}),av((r=(t={description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}}).description,i=t.onRun,o=(0,es.Z)(i),(0,nb.Z)(function(){return{match:(0,nC.zf)({defaultScore:.5}),data:{type:"context",label:"My Repls",icon:(0,K.tZ)(s6.Z,{}),description:r},commands:function(e){var n=e.search,t=e.active;return(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:if(!t)return[2,[]];return[4,function(e){return ua.apply(this,arguments)}({query:n,count:50})];case 1:return[2,e.sent().map(function(e){var t,r,i,a;return r=(t={repl:e,search:n,run:function(){return o.current(e)}}).repl,i=t.search,a=t.run,{match:function(){return{score:1,render:{height:44,content:(0,K.tZ)(uo,{repl:r,height:44,search:i})}}},data:{type:"action",label:r.title,icon:(0,K.tZ)(s5.ZP,{alt:r.title,size:16,iconUrl:r.iconUrl}),run:function(){return a(r)}}}})]}})})()}}},[r,o]))),av({match:(0,nC.zf)({defaultScore:.5}),data:{type:"action",label:"Fork",icon:(0,K.tZ)(sQ.Z,{}),description:"Fork Repl",run:function(){b||y()}}}),av({match:(0,nC.zf)({defaultScore:.5}),data:{type:"action",label:"Create",icon:(0,K.tZ)(oq.Z,{}),description:"Create a new Repl",run:function(){d(!0)}}}),(0,K.tZ)(aK.Z,{isOpen:u,onRequestClose:function(){return d(!1)},maxWidth:600,children:(0,K.tZ)(aJ.Z,{})})}),ud=(0,en.createContext)({toolTourMap:{}}),up=function(e){return(0,en.useContext)(ud).toolTourMap[e.type]},uf=function(e){var n=e.children;return(0,K.tZ)(ud.Provider,{value:{toolTourMap:{}},children:n})},uh={38:20,32:16,20:14},um=(0,tA.$)(["background","foreground"]),uv=um.cssVars,ug=um.styleTokens,uy=(0,e4.X)({toolListItemText:[eo.l0.flex.growAndShrink(1),{textAlign:"left",fontSize:13}],coloredToolRecentItem:[eo.l0.viewStyle,eo.l0.reset.button,eo.l0.colWithGap(4),eo.l0.cursor.pointer,eo.l0.center,{border:"none"," .icon":nt.gU.listItem,"&:hover":[eo.l0.color.foregroundDefault],"&:active .frame":{opacity:.5},"&:focus-visible .icon":[{boxShadow:"0 0 0 2px ".concat(ug.foreground),outline:"2px solid transparent",outlineOffset:"4px"}]}],coloredToolListItem:[eo.l0.viewStyle,eo.l0.reset.button,nt.gU.listItem,eo.l0.borderRadius(4),eo.l0.rowWithGap(6),eo.l0.cursor.pointer,eo.l0.align.center,eo.l0.pl(1),eo.l0.pr(4),eo.l0.height(24),eo.l0.color.foregroundDimmer,eo.l0.hover(eo.l0.color.foregroundDefault),{"&:active .frame":{opacity:.5}}],tooltip:[eo.l0.fontSize(13),{lineHeight:1}]});function ub(e){var n=e.children,t=e.className;return(0,K.tZ)(eE.xv,{className:t,css:uy.toolListItemText,multiline:!1,children:n})}var ux={ghostwriterChat:{background:eo.TV.backgroundDefault,foreground:eo.TV.blurpleStronger},deployments:{background:eo.TV.backgroundDefault,foreground:eo.TV.greenStrongest},docs:{background:eo.TV.backgroundDefault,foreground:eo.TV.yellowStrongest},chat:{background:eo.TV.backgroundDefault,foreground:eo.TV.blueStronger},threadInbox:{background:eo.TV.backgroundDefault,foreground:eo.TV.blueStronger},packager:{background:eo.TV.backgroundDefault,foreground:eo.TV.purpleStrongest},git:{background:eo.TV.backgroundDefault,foreground:eo.TV.greenStrongest},debugger:{background:eo.TV.backgroundDefault,foreground:eo.TV.orangeStronger},database:{background:eo.TV.backgroundDefault,foreground:eo.TV.blurpleStronger},shell:{background:eo.TV.backgroundDefault,foreground:eo.TV.blueStrongest},runnerOutput:{background:eo.TV.backgroundDefault,foreground:eo.TV.yellowStrongest},webview:{background:eo.TV.backgroundDefault,foreground:eo.TV.foregroundDimmer},replAuth:{background:eo.TV.backgroundDefault,foreground:eo.TV.orangeStrongest},adminPanel:{background:eo.TV.backgroundDefault,foreground:eo.TV.redStronger},unitTests:{background:eo.TV.backgroundDefault,foreground:eo.TV.greenStrongest},extensionStore:{background:eo.TV.backgroundDefault,foreground:eo.TV.yellowStronger},neon:{background:eo.TV.backgroundDefault,foreground:eo.TV.blueStrongest},sshConfigurator:{background:eo.TV.backgroundDefault,foreground:eo.TV.yellowStrongest},preferences:{background:eo.TV.backgroundDefault,foreground:eo.TV.greyStrongest},objectStorage:{background:eo.TV.backgroundDefault,foreground:eo.TV.tealStrongest}},uZ=(0,e4.X)({root:[nt.gU.filled,eo.l0.position.relative,eo.l0.center,eo.l0.borderRadius(8),{"> svg":{filter:"drop-shadow(0 0 3px rgba(255, 255, 255, 0.5))"}},{background:ug.background,border:"none","& > svg":{fill:ug.foreground},"& img":[eo.l0.borderRadius(8)]}],listView:[eo.l0.position.relative,eo.l0.center,eo.l0.borderRadius(4),{background:ug.background,border:"none","& > svg":{fill:ug.foreground},"& img":[eo.l0.borderRadius(8)]}],frame:[eo.l0.position.absolute,eo.l0.top(0),eo.l0.left(0),eo.l0.right(0),eo.l0.bottom(0),eo.l0.borderRadius(8),{border:"1px solid ".concat(ug.foreground),opacity:.15}],hovered:{backgroundColor:nt.vb.interactiveBackgroundActive,"& > svg":eo.l0.color.foregroundDefault},active:[nt.gU.filled["@media (hover: hover)"][":not([disabled])"][":active"],{"& > svg":eo.l0.color.foregroundDimmer}],focused:[{boxShadow:"0 0 0 2px "+eo.TV.accentPrimaryDefault,outline:"2px solid transparent",outlineOffset:"4px"}]});function uw(e){var n,t=e.indicator,r=e.children,i=e.className,o=e.size,a=void 0===o?38:o,l=e.background,c=e.foreground;return(0,K.BX)(ei.G,{className:i,css:uZ.listView,style:(n={width:a,height:a},(0,ea._)(n,uv.background,l),(0,ea._)(n,uv.foreground,c),n),children:[(0,en.cloneElement)(r,{size:uh[a]}),t?(0,K.tZ)(o4,{color:t}):null]})}var uk={background:eo.TV.backgroundDefault,foreground:eo.TV.foregroundDimmer};function uC(e){var n,t,r=e.pane,i=e.onClick,o=e.dragRef,a=e.buttonRef,l=e.onKeyDown,c=e.tabIndex,s=(0,nw.Se)(),u=s.Icon({pane:r,size:20}),d=s.getTitle(r),p=(0,ec.b2)({paneType:r.type});(0,er.P5)({controlName:"flag-colored-tool-icons-ghostwriter-marketing",logFlagToAnalytics:!1})&&"ghostwriterChat"===r.type&&(n={background:eo.TV.blurpleDimmest,foreground:eo.TV.blurpleStrongest});var f=null!==(t=null!=n?n:ux[r.type])&&void 0!==t?t:uk,h=f.background,m=f.foreground,v=up(r),g=(0,sH.lq)(null==v?void 0:v.buttonRef,a,o),y=(0,en.useCallback)(function(e){i(e),null==v||v.dismissTour()},[i,v]);return(0,K.tZ)(e2.u,{delay:"none",tooltip:(0,K.tZ)(eE.xv,{css:uy.tooltip,children:d}),children:(0,K.tZ)("button",{css:uy.coloredToolRecentItem,onClick:y,ref:g,onKeyDown:l,tabIndex:c,children:(0,K.tZ)(uw,{background:h,foreground:m,className:"icon",indicator:p,size:32,children:u})})})}var u_={searchReplace:uc.searchFileContents,shell:uc.showShell,runnerOutput:uc.showConsole,docs:uc.showDocs,ghostwriterChat:uc.showReplitAi,preferences:uc.showSettings,git:uc.showGit};function uS(e){var n=e.name,t=(0,ng.gf)(n.id);if(!t)return null;var r=(0,ng.Ih)(t);return(0,K.tZ)(eE.xv,{css:eo.l0.fontSize(13),color:"dimmest",children:r})}function uE(e){var n,t,r=e.pane,i=e.onClick,o=e.dragRef,a=e.buttonRef,l=e.onKeyDown,c=e.tabIndex,s=(0,nw.Se)(),u=s.Icon({pane:r,size:20}),d=s.getTitle(r),p=(0,ec.b2)({paneType:r.type});(0,er.P5)({controlName:"flag-colored-tool-icons-ghostwriter-marketing",logFlagToAnalytics:!1})&&"ghostwriterChat"===r.type&&(n={background:eo.TV.blurpleDimmest,foreground:eo.TV.blurpleStrongest});var f=null!==(t=null!=n?n:ux[r.type])&&void 0!==t?t:uk,h=f.background,m=f.foreground,v=up(r),g=(0,sH.lq)(null==v?void 0:v.buttonRef,a,o),y=(0,en.useCallback)(function(e){i(e),null==v||v.dismissTour()},[i,v]),b=u_[r.type];return(0,K.BX)("button",{css:uy.coloredToolListItem,onClick:y,ref:g,onKeyDown:l,tabIndex:c,children:[(0,K.tZ)(uw,{background:h,foreground:m,className:"icon",indicator:p,size:20,children:u}),(0,K.tZ)(ub,{className:"text",children:d}),b?(0,K.tZ)(uS,{name:b}):null]})}var uR=t(24549),uI=t(84900),uT=t(1169),uG=function(e){return(0,$.iv)({"body *":{cursor:"".concat(e," !important")}})},uD=(0,$.iv)({"body *":{userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"}}),uP={"n-resize":uG("n-resize"),"ne-resize":uG("ne-resize"),"nesw-resize":uG("nesw-resize"),"s-resize":uG("s-resize"),"se-resize":uG("se-resize"),"sw-resize":uG("sw-resize"),"e-resize":uG("e-resize"),"ew-resize":uG("ew-resize"),"row-resize":uG("row-resize"),"col-resize":uG("col-resize"),grabbing:uG("grabbing")};function uB(e){var n=e.cursor;return(0,K.tZ)($.xB,{styles:[uD,uP[n]]})}var uU=t(91535),uA=t(98045),uL=t(39313),uO={root:eo.l0.px(4),rowWrap:(0,$.iv)([eo.l0.borderRadius(8)]),row:(0,$.iv)([nt.gU.nofill,eo.l0.rowWithGap(8),eo.l0.p(4),eo.l0.minHeight(32),eo.l0.align.center,{transition:"initial"}]),icon:(0,$.iv)([eo.l0.position.relative,{"& > svg":eo.l0.color.foregroundDimmer}]),textWrap:[eo.l0.colWithGap(2),eo.l0.flex.growAndShrink(1)],heading:[eo.l0.flex.growAndShrink(1),{opacity:.5}],text:[eo.l0.flex.growAndShrink(1)]};function uX(e){var n=e.title,t=e.icon,r=e.active,i=e.highlightRanges,o=e.heading,a=e.dragRef;return(0,K.tZ)(ei.G,{css:uO.root,children:(0,K.tZ)(eS.Tg,{elevated:r,css:uO.rowWrap,"data-search-item-surface":!0,children:(0,K.BX)(eS.Tg,{innerRef:a,css:uO.row,children:[(0,K.tZ)(ei.G,{css:uO.icon,children:t}),(0,K.BX)(ei.G,{css:uO.textWrap,children:[o?(0,K.tZ)(eE.xv,{variant:"small",color:"dimmest",css:uO.heading,multiline:!1,children:o}):null,(0,K.tZ)(eE.xv,{multiline:!1,css:uO.text,color:(null==i?void 0:i.length)?"dimmest":"default",children:(null==i?void 0:i.length)?(0,K.tZ)(uL.xK,{style:{color:eo.TV.foregroundDimmest},matchStyle:{fontWeight:eo.TV.fontWeightBold,color:eo.TV.foregroundDefault},source:n,matches:i.map(function(e){return{column:e.from,length:e.to-e.from}})}):n})]})]})})})}var uM={root:(0,$.iv)([eo.l0.position.absolute,eo.l0.borderRadius(8),eo.l0.minWidth(100),{"[data-search-item-surface]":eo.l0.shadow(2)}])};function uz(e){var n=e.pane,t=e.x,r=e.y,i=(0,nw.Se)(),o=i.Icon({pane:n,size:20}),a=i.getTitle(n);return(0,K.tZ)(ei.G,{css:uM.root,style:{transform:"translate(".concat(t,"px, ").concat(r,"px)")},children:(0,K.tZ)(uX,{active:!0,icon:o,title:a})})}function uW(){var e=(0,uA.u)();if(!e.display)return null;var n=e.item,t=e.monitor.getSourceClientOffset();return t?(0,K.BX)(K.HY,{children:[(0,K.tZ)(uB,{cursor:"grabbing"}),(0,K.tZ)(uz,{pane:n.pane,x:t.x,y:t.y})]}):null}var uN=(0,$.iv)({position:"fixed",pointerEvents:"none",zIndex:ia.filetreeDragLayer,left:0,top:0,width:"100%",height:"100%"});function uj(){var e=(0,uU.f)(function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging()}}),n=e.isDragging,t=e.itemType===uR.z.NewPane;return n&&t?(0,K.tZ)("div",{css:uN,children:(0,K.tZ)(uW,{})}):null}(i=E||(E={})).Files="files",i.Dock="dock",i.Kaboom="kaboom";var uF=function(e){var n={action:"opened"};switch(co.n_({category:"dock",message:"Opened ".concat(e)}),(0,ep.j)(ep.U3.TOOL_OPENED,{source:"Sidebar Dock",tool:e}),e){case"git":return(0,ep.j)(ep.U3.GIT_FEATURE_USED,{action:"pane-opened",source:"git-pane"});case"envEditor":return(0,ep.j)(ep.U3.ENV_EDITOR_USED,n);case"database":return(0,ep.j)(ep.U3.DATABASE_USED,{action:"opened",type:"ReplitKV",provider:"replit"});case"neon":return(0,ep.j)(ep.U3.DATABASE_USED,{action:"opened",type:"PostgreSQL",provider:"neon"});case"replAuth":return(0,ep.j)(ep.U3.AUTH_SIDEBAR_USED,n);case"packager":return(0,ep.j)(ep.U3.PACKAGE_MANAGER_USED,n);case"unitTests":return(0,ep.j)(ep.U3.REPL_UNIT_TEST_USED,n);case"debugger":return(0,ep.j)(ep.U3.DEBUGGER_USED,n);case"extensionStore":return(0,ep.j)(ep.U3.EXTENSION_STORE_VIEWED,{source:"tools-sidebar"})}};function uV(e){var n=e.pane,t=e.variant,r=e.updateRecentTools,i=oL(),o=ii(oO),a=(0,J._)((0,uI.c)({type:uR.z.NewPane,item:function(){return{type:uR.z.NewPane,pane:n,grid:!0}},end:function(){o()}}),3),l=a[1],c=a[2],s=(0,en.useRef)(null),u=(0,J._)((0,uT.XZ)(s,!1),4),d=u[0],p=u[1],f=u[2],h=u[3];return((0,uT.Ym)(p,s),(0,sj.K)(c),"recent"===(void 0===t?"default":t))?(0,K.tZ)(uC,{pane:n,dragRef:l,buttonRef:s,tabIndex:d,onKeyDown:f,onClick:function(){h(),i({pane:n}),uF(n.type)}}):(0,K.tZ)(uE,{pane:n,dragRef:l,buttonRef:s,tabIndex:d,onKeyDown:f,onClick:function(){h(),i({pane:n}),uF(n.type),r&&r(n)}})}var uH=(0,e4.X)({grid:[eo.l0.pl(8),{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fill, minmax(".concat(60,"px, 1fr))"),gridAutoFlow:"dense"}],list:eo.l0.pl(8),recentSection:[eo.l0.position.relative,eo.l0.colWithGap(4),eo.l0.pb(8),eo.l0.pt(4)],allSection:[eo.l0.colWithGap(6)],recentRow:[eo.l0.rowWithGap(6),eo.l0.overflowX("auto"),eo.l0.px(8),eo.l0.pb(8),eo.l0.pt(4),{backgroundColor:"transparent"}],fadeLeft:[eo.l0.position.absolute,eo.l0.height(32),eo.l0.width(8),eo.l0.left(0),{background:"linear-gradient(to right, ".concat(eo.TV.backgroundRoot,", transparent)")}],fadeRight:[eo.l0.position.absolute,eo.l0.height(32),eo.l0.width(16),eo.l0.right(0),{background:"linear-gradient(to left, ".concat(eo.TV.backgroundRoot,", transparent)")}],sectionTitle:[eo.l0.fontWeight.medium,eo.l0.fontSize(10),eo.l0.pl(8),{lineHeight:1}],noRecentTools:[eo.l0.rowWithGap(6),eo.l0.pl(8),eo.l0.pb(8),eo.l0.position.relative,eo.l0.overflow("hidden")],emptyRecentTool:[eo.l0.width(32),eo.l0.height(32),eo.l0.border({color:eo.TV.outlineDimmest,style:"dashed"}),eo.l0.borderRadius(4)],noRecentToolsFade:[eo.l0.position.absolute,eo.l0.height(32),eo.l0.width(16),eo.l0.right(0),{background:"linear-gradient(to left, ".concat(eo.TV.backgroundRoot,", transparent)")}]});function uY(e){var n=e.text;return(0,K.tZ)(eE.xv,{color:"dimmest",css:uH.sectionTitle,children:n})}function uq(){return(0,K.BX)(ei.G,{css:uH.noRecentTools,children:[Array.from({length:sF.maxCount},function(e,n){return(0,K.tZ)(ei.G,{css:uH.emptyRecentTool},n)}),(0,K.tZ)(ei.G,{css:uH.noRecentToolsFade})]})}var uJ={title:"Tools",content:(0,K.tZ)(function(){var e,n,t,r,i,o=sO(E.Dock),a=(0,ae.B)(),l=a.length,c=sS(sI);(0,en.useEffect)(function(){c({id:E.Dock,preferredHeight:Math.min(300,40*l)})},[l,c]);var s=(e=(0,nw.Se)().decode,t=(n=(0,J._)((0,en.useState)(function(){return function(e){var n=ak.Z.get(sF.key,"array");if(!n)return[];var t=[],r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(lz.B4.Check(sV,c)){var s=e(c.type,c);s&&t.push(s)}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t}(e)}),2))[0],r=n[1],i=(0,en.useCallback)(function(e){var n=(0,n9.Uy)(t,function(n){var t=n.findIndex(function(n){return to()(n,e)});t>-1&&n.splice(t,1),n.unshift(e),n.length>sF.maxCount&&n.pop()});r(n),ak.Z.set(sF.key,n)},[t]),{recentTools:t.filter(function(e){return a.some(function(n){return to()(e,n)})}),updateRecentTools:i}),u=s.recentTools,d=s.updateRecentTools;return(0,K.tZ)(uf,{panes:a,isCollapsed:o,children:(0,K.BX)(K.HY,{children:[(0,K.tZ)(uj,{}),(0,K.BX)(ei.G,{css:uH.recentSection,children:[(0,K.tZ)(uY,{text:"Recent"}),u.length>0?(0,K.BX)(eS.Tg,{elevated:!0,css:uH.recentRow,"aria-orientation":"horizontal",children:[(0,K.tZ)(uT.uP,{options:{direction:"horizontal",loopAround:!0},children:u.map(function(e){return(0,K.tZ)(uV,{pane:e,variant:"recent"},"extension"===e.type?e.data.installationId:e.type)})}),(0,K.tZ)(ei.G,{css:uH.fadeLeft}),(0,K.tZ)(ei.G,{css:uH.fadeRight})]}):(0,K.tZ)(uq,{})]}),(0,K.BX)(ei.G,{css:uH.allSection,children:[(0,K.tZ)(uY,{text:"All"}),(0,K.tZ)(ei.G,{role:"toolbar",css:uH.list,"aria-label":"Dock","aria-orientation":"vertical",children:(0,K.tZ)(uT.uP,{options:{direction:"vertical",loopAround:!0},children:a.map(function(e){return(0,K.tZ)(uV,{pane:e,updateRecentTools:d},"extension"===e.type?e.data.installationId:e.type)})})})]})]})})},{})},uK=t(95571),u$=t(43151),uQ=t(37199),u0=t(31384),u1=t(72676),u2=t(30965),u4=t(80499),u3=t(13779),u8=t(87716),u5=t(31232),u6=t(39756),u7=t(10041),u9=t(24227),de=t(1574),dn=t(48728),dt=t(87599),dr=t(41859),di=t(80339),da=t(98859),dl=t(8017),dc=t(41140),ds=t(52682),du=t(12506),dd=t(38806),dp=t(84707),df=t(13090);function dh(e){return{match:nC.pl,data:{type:"action",label:"Rename",icon:(0,K.tZ)(lU.Z,{}),run:e}}}function dm(e){return[{label:"Copy file path",icon:(0,K.tZ)(dn.Z,{}),run:function(){return(0,u7.Z)(e)}},{label:"Copy link",icon:(0,K.tZ)(dl.Z,{}),run:function(){return(0,u7.Z)((0,dd.dr)({path:e}))}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:nC.pl,data:{type:"action",label:n,icon:t,run:r}}})}function dv(e){return{match:nC.pl,data:{type:"action",icon:(0,K.tZ)(ds.Z,{color:eo.TV.redDefault}),label:"Delete",run:e}}}function dg(e){var n=e.size,t=e.iconUrl,r=e.name;return(0,K.tZ)(nn.Z,{src:t,width:n,height:n,alt:"Icon for file opener: ".concat(r)})}var dy=t(69470),db=t(42463),dx=t(39028),dZ=t(13900),dw=t(6620),dk=t(6033),dC=t(39783),d_=t(46866);function dS(e){var n=e.filetree,t=(0,ed.Z)(),r=(0,ec.OM)(),i=(0,ec.t9)(),o=(0,en.useRef)(null),a=(0,en.useRef)(null),l=ii(rX),c=(0,dy.Z)(),s=(0,en.useCallback)(function(){var e=[{icon:(0,K.tZ)(dw.Z,{}),label:dk.st.UploadFile.text,run:function(){o.current&&(o.current.click(),(0,dp.Z)({replId:t,action:"uploaded",fileType:rN.Tv.File}))}}];return c&&e.push({icon:(0,K.tZ)(dx.Z,{}),label:dk.st.UploadFolder.text,run:function(){a.current&&(a.current.click(),(0,dp.Z)({replId:t,action:"uploaded",fileType:rN.Tv.Directory}))}}),e.push({icon:(0,K.tZ)(ox.Z,{}),label:dk.st.OpenPane.text,run:function(){l({pane:{type:"commands",data:{autoFocus:!0}},edge:"left"})}},{icon:(0,K.tZ)(db.Z,{}),label:dk.st.DownloadZip.text,run:function(){return(0,d_.R)(t)}},{icon:i?(0,K.tZ)(da.Z,{}):(0,K.tZ)(di.Z,{}),label:i?dk.st.HideHiddenFiles.text:dk.st.ShowHiddenFiles.text,run:function(){r(!i)}}),n.getExpandedDirs()&&e.push({icon:(0,K.tZ)(dt.Z,{}),label:"Collapse all",run:function(){var e=n.getExpandedDirs();e&&n.collapse((0,em._)(e))}}),{data:{type:"context",label:"Search actions",icon:(0,K.tZ)(oJ.Z,{})},commands:function(){return e.map(function(e){return{match:nC.pl,data:{type:"action",label:e.label,run:e.run,icon:e.icon}}})}}},[i,r,t,c,l,n]),u=(0,u0.av)().openContextMenu,d=(0,en.useRef)(null);return(0,K.BX)(K.HY,{children:[(0,K.tZ)(ab.hU,{alt:"menu",tooltipHidden:!0,ref:d,onClick:function(){return d.current&&u({target:d.current,command:s()})},children:(0,K.tZ)(dZ.Z,{})}),(0,K.tZ)(dC.Q,{fileUploadInputRef:o,dirUploadInputRef:a,uploadFiles:n.upload})]})}function dE(e){var n="For example, here is a code block in ".concat(e);switch(e){case"python3":return"".concat(n,'\n```python\ndef hello_world():\n  print("hello world!")\n```\n');case"java10":return"".concat(n,'\n```java\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println("hello world");\n  }\n}\n```\n');case"html":return"".concat(n,"\n```python\n<html>\n<body>\n  <h1>hello world</h1>\n</body>\n</html>\n``")}return""}function dR(){return(dR=(0,nx._)(function(e){var n,t,r,i,o,a,l;return(0,nZ.Jh)(this,function(c){var s,u;switch(c.label){case 0:return n=e.fs,r=void 0===(t=e.language)?"python3":t,[4,n.createDir(".lesson")];case 1:if((i=c.sent()).error)return[2,i];return[4,n.writeFile(".lesson/assets/logo.png",at.Z.from("iVBORw0KGgoAAAANSUhEUgAAATcAAABeCAYAAABGrlMUAAAACXBIWXMAAAWJAAAFiQFtaJ36AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABiXSURBVHgB7Z1bcxNXtseXuGM4FTGVPOakzWuqDnISLoEHBHlJKtTBwxSvg8kHiO18gCCfDwBmPgCIvKZOEFNJpSpViZs8hEAYbOZ9cFN5SkgFpwowd83/397tacu9+yJ1y5K8flVtyeqL1N27/3vttfZeW0RRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEVRFEWJoCSKouRKtVqVx48fO1Hrtm3btuC67oIohbNJFEXJDSNsw81m807U+kePHk3hpSZK4XRd3A4cOOC8fPmygptfLpVKDpYyPn6F6/DZXfPqcdm5c+ec1nLKeuTkyZPieV4Fz8do1PoNGzbM//jjj5ekDWq1muC5Kj948KAStX5QnruuixvNctRsCxCvN7A4WPbgBvoXGa8Sfl1cXJT9+/d7eDuH7Rq4oVdxQz1RlAHn3r17fBnBs3Amaj2ehxm8tCVuEC5alyMbN278LurQEL2j3Ez6nELEbe/evb5l1vo5bhRrAw8C5Uro4tGaw0sVFt3xiJqK62jhjeKYFDsK3bQKnaIoceQqbhCpKoSHNU3Vto2xxvh2DosHQXOfP39+++bNm3X8X4fPooxaZdQcx4k4BE31uhG6Ot5PqcgpitJKLuJmRO0clkqG3bhtBRaYb6nt27dvAULlwuHauHHjRh0f1VOI5RjWj6nIKYrSygbpADYnISwzpv2fRdhWYQILo7TKcMx5iB1Fzbt+/foRfHaa72N2p8jNYL8JURRFkQ7EDUIyjiblrMQ0QTuAPrYaBQsidwoWWf3Jkycj+Px83D5YzlFsjQ9PUZR1TGZxo08MAnIRb6eNtVUkjrHkZhFlLcOKm0AzdhKiFxemZlN25p133qmKoijrlkziRosIAQE2QcekuzD6OsMo7LVr16bx/ojEN1MdhLlnTNNWUZR1SGpxo7Dl4VvrAAdWG5uc1Z9++mkOFt2RBAuOfryaCpzSj3Ckw44dOy6jDA9blo9EiSVVtDQkbI6sLWX8jsuw4I7ADzfHV3w2E9c8NgIniMBOiaL0CRxFABbMorRBouXWQ8IWUIYFd5m/ixYcmp+JoqUWnKKsPxLFjZaS9I6wBVBwGdQQ44NrJO1gBG5UFEVZF8Q2SxGlPCcZfWz0g0FIOPrg9suXL+kbW4CltcK0fvHiBaOgDt4G40odyU6V3UTQ3Lz09OnT01u2bKkmRW+x/iIsvjnt7Ksog49V3ODPGsNLqk6xRtAuYWlcv37dlYwEY0txnFOSod8crTE4Xq8wgwGOcd6MZoijbCzREVEUZaCJFDfjZ0vjo/KwTA8NDV3qJEWKsaTqsjTkiimRahCuUyl2ZdeUMf6Gx48fT8N6G0/R964Ci68Gi68mPY4ZZ1t+/vy5s2nTJq8IizP4DljT5SDZAb+rX5MqBokiw+fD1gMij56mz1pfRGbixcNfjxMXY6lNwUqblhgoVHww0Swth7OEsLBBwBbiCl1akcNx5yBUI2afWkpR5neP5C0WtHZNc3sFPM+ka0UoNA8fPjyF60UrdkUzG/9P5SHI7EqD63rYuANiXQJhFwPEonHz5k1XcsaIEX9TNWo9Ks5pmygFeclwzUZxzQ7LktXviIUuno81WWXa+8hzazQaZVTYka0nnK9rsutEfT+fnTGJx4l5tupBbsU46OtmUE96lFWWGzvKJgiKiwt7ulUYzIO5opAxcweimf76IEdbAD5nQso5WF4L+E6mMbpNEXj27Jk3Nze3YI4/ZgTLGq3lQ8rRCCyotN62bt2aRtzKJiBxRHIE525rVntYrOLGa/fo0aNxLByBEVgbkhfB8XFMjsF10h7biGuVC+7XuMmt5+adpIDCZslb1sQ9rUtLd4jgAf76668n6MoIrlkSUeeD/evY/1Kv+WGZcw3W8y5bZY1r5m9m2X3Ycj3TMpaijDSZUFaWsvv0JKvEDTf6nG3jqFqHEUhciHGIVBX7SgIulga2v5K2MHG7SqUyAtGq4d/xqG1QUBkFdSmKKLCupPPbVQNRlDWEY3QhPLVSQUPZcj6+I2uYiSWw1FDW+OD6Fk2HlUAwhnmMrRXtCzlYrBA3k2Koatl2Ejd/2fowTbBzKR+aoLZ3pQ0oWniZwO9biKrJ8Nnh0L9XJGVQAqLIY7myBhhritbjaJ5WWgAtcFQ2PH6liOPLksgdhiiwwmsrI2wWmHb7q6++GsE5fSH5d03yRQ6CfQqvRzWaPhisMLVQWMct200GPiM+NMy8wQcnhbB5HCbFtEXtClsYHIMWyKralU1TigXfQ7BcSU91LQbY87dyjK4tP36n0FrDsbsxVI7Nn4tFd5BmM/Tnn39mZcq02I4UB31ltzR11mCwbLmZCOmqh800RX1h40OD/2t4m2itYbtLcAZP5B2hosDht0qrBQexoPV25YcffpgziS9TNcOCJq10EZN8oBDhwbU5w3uU0VrzjLM9uFeOpBeRkrF63kAlVsh4R1i4f6aIpjmn0Hl45n+WAydDs3wXlrMoQ69oMzV/HsxICRbVdxl3aw4dkaMZ9/mPuEUJGzgf+NiyPDR5RfZsUOBQ+Pa0WD7DwRtTuFMV5pYmbeGk6RhtEgKwKc+I1Tycx39ICsdtcI+StuPxYXkzN54Lp7V1piPTtOX14XWuJhz2NNPHFyBwvK8XbCuNmLm4RlcQeW9EnUsogsjrPpqimxEF+wzO5480Ue5egueKKCtThMUGy3Dd2MPgbNQqLJM4/9uSAK535mACw4svs+eAbEobhMXtVItwedu3b6/xTdqHxhxnqht9yDgqAUGGcFcGJ7R6TlJaHqXic9Itk6JjtGu62LiSEQZ2UtwjuglOpz2+CfNzOY/fzpmYLpguJDbomL+bo8VTgiB9EXOP2MdyKql1wMijLFlyHh7+BoSOQQTeh/G478ZyFm6LubUOOmUhNODetW1jxL7E3gxRvHjx4nY/nbMNX9xMk3RFoaWvjIUm1BRNJIuwtXQdKZvlNo4xm2ZmKwYZ8LtPm24ixAn9jj8KcqJ3BM7L5pvyRaddv6S5f+cSNjvPyqpdNwGEbhb3bMQIg+08fIsHgnA1r4fDImzzTPnTzvUKhA7nMoFz4aiWOD9eCW6LL7Dtbu0A3H/4AQUodbXl8zrFxQyLSmuW19MIG0WNDmj4UeZNNG9M/tPsGTczW80z229SuvCWKQJfkR7GWG1O6+f0TUJ0RjoJuLCzs8R3XqU12LH/k8Lw6quvUtxOxOTSoyBcCAI8BTBrIpqudADP5f33359/8uTJWxLvc90FH+kFUfoOX9xQWKqhz7wgIhmyipJgE3YyaSOTyZeFM02/K3Y1SJwPIRQ9jd1urYmy2oylO9aJ6JguOXGjSXJ1E3z55ZccNXAZ5/NJzGbD7JAs+TOPcpZbVw024dACuM9jSrzAjWra+v4j6AqyJ/iAlgQLj83SiIJNqqQHtM28cE6SwLEGbyZk5E3Ak+JxZPV5n89DdGKauv7wmCL8n6b3/MWobjkBWPdxztYbm6JHi2ge4nc2YcGdEHtZoDX6qSh9RWC5Bf42Dw9L3V8R89C0UE/TRDDDnRzJznLuNhvMSNLy/xvS23DKwo4tG3a6Fvs15b1MtKbbxQgcxc21bLIrR+utWeRoCFpw5XL5fkLq7qpab/3FhharyG3DakuMjJnjVaV9/NxttpUQP1dCtW54kH4KEkPeecNgjeRA3ODowAKXYqHo/J9tJa03yQdmRCl0FIQRa7YCbN9D6+24KH0DLTcn+CcQqoxWm5e0kRlQ3hEc9C3247f2t3EkPZ50EfrA8hCdSqVSjvG1ed3ojhMIgtitt3IO1k4zTQWaE02Upbjv6rgcK91jA2r/wMpxTYS0KhmtthSTIFelc6o2H44RCy5y8ODBSpa+a4gU+8KIc+hGwV1u9ncKMw/HrHale8RZb3lYO4VbbQFGrD0pVqyVLrEhlNCvzlfLSIUo3MACYWJA20YUG8mJBw8exB3Lb14+e/Ys0/ft3LnTF7cM590Jbl5NxZYI9wpwP7oiBsR0CJ2LCerskc5wpbs0UeF/ZllXYq49UfqC8MD5q/yTdjhSIIZsHknMcKKQZVgoJrdU7EMfgWtSlDvShflYc25e2URjoZu9y40zPkgCGUUn15Vd6K9IF6FYo4Js2NbjPDsVa6VL+CMUmDQS0TsvaqRCDL4YDg0NOSgM1o04OQwsCSmawO+GwpdlrKj/4HTDaguuseQE75NlFMacdJknT57whZZzNWJ1meWqXYs1zRjHPKFYHzp0iElT5yxDzVTcOmAbiu6DNpLEPpqRtH1uA5qbOMgciy9UHFicctjScj5/WmZRqbWXf9SjR97WrVslD4ImZBSBv5CZZiUl+N1BDc0xhp4USHCN88AEE2wWcXX//v1tDTRuF5MV1gruCQXBk+wsrEVutc2bN9N6o6hGiZsjStuYfgJuhl1kcUZK7Qy238DJQJhP3nyQ1mpbrk3NNH3WfmUm0aQrHULLJ6kDZ4q88WEyB1A6JGvNY4XWsvQRuC+7pA0CV0O3oSUaSv+0ihQBNKUHYLR0IbCI0voTKDQtHzGSad2+tZNtO6DZOR23ngWulG7GLB+I8hR/c0gQ/5ACwffclZzolh9zrYkTmCJBS6PZ4agXpQfYQOslsIjSNunCNaqZnMNhvizb9viOunRmuczHdQcwIlWT9Fw2E8osC2KEYOdKL88SpCiDSOuMLo6kICxuQVeSpCYhh7Zg2/uSEe7DMYVx23AqtSxWG7b9pFUQ8dmsFIdaAYrSZZbFjQ97qY3EjaEuGONxTVNaiLDymF5mXtIf+z6W2CwQzP6KbVKnpAlGCLQKYp7NxgjyFjcvYX2zhxYJvWbFkbWj9xICKplYzsQb16xMCWdzGkMovW6yga7COPCPQkjOhIQlqhDxYeD8qB/FCRvFdHFxcULSR1IuclgS98NvPRuKDHv91GzEvVqIiUBfwXlNSA+xY8eOdsW9zHtlEkx2jadPnzLp5v/Y1uvsWP3BJumQsNOXU/2hIDLyai3MpmCchshNwYo6bjoNO2Y1rbt/MnqbJDbBzN54m5SBNmB2+/btfnP04cOHY/iecN82V/oIRqBtk+Dger7xwQcfeLYKps8om0rXky7Cfpm2yauL9s0q+dGWuG3cuHE56y07z4ZysdN6O3Ps2LFJJjWMw4jcebNkIhA2kyI6DTMQthNmNMJwa2IATjAifYYZEVCN+LzCiYtlQPx8Jkt0XboEK4VGo1E283OsYq0iuEp2EqeItzAcvGETKbyCTaJff/31z3H+t05oETYnYXOq7vT169f9JIfvvvsuJ8VYNanvtm3bujrEJyesPfcTxuD2ExzLebibViibwJs3b7aNWGEXkdw6YyvF0q64OcEb00nXC6/kLEkUoLwFLouwMRiBB+MEhG0y2Be+Pk5l1vrg1/tx8o/Q6IpVwLI+MyDNUnLcWKJd4dmzZxRUayYTlCFXlL5gWdxMM9FNud+e8MMTUZuVKUB5CRy/i1YXjncEheuWxAubb60NDQ3tvnbtmi8ARhRrEjGtXjczaORJQiaOajcFgdfXtuRAGZZolvHCbcPfyxE3eGsTN+/mzZtqufUJK3xuHEmAB6aaYr9q2K/DTLgR/cwcI3BHUWjm24l4UdS438zMzC6IGnPYT1jGvjbN5LyXsJwPR7OMKJ6xTEc336/zM9Ji3r9/P4U5cu5N+j5Pnjw5+fnnn0uR4N6WEiLt89IZzAk3gXO9AitcCobzpNZixle7onREOzPO01p52cZg+xXixpEEKEQUASdpR+PXcfmeKWLggL0YsRkF7hYetEk8BHwQm0kiF6rtSxC18uLiIh/e8YjIYBDFcLFcgaV2Kdy8NKlrSs+fP2dTNLJrRBczvBYCm6a4vuOWdROe532GCmK2qCaqETZbxUEobLulc2i5TeD7povqFhK4PHDd/mrZJDalupKOdmec/68j2SuWVT63tA88atPx4KFJGBzPDBYXOfejrZnKz2Bl+B1yaQWwqwa2/w7Lv7Dvp1gYnW2aEQ4zWKY5dyYioH9isADL+bCwmeMMQ9jYhLX1+ZrtVobXomiZt3UV8B39P61eKYCQ/9MmbBSDmuQDTalP+X1FCDXLnjmXb2M2c7V/W3+xqiuIsd7YxKwm7LuiaUpRTGjSjnE9rLgpNqcgTMtWHAXt7t27r3A9jrPLNAsaZrKOBY6C2LFjh5fk+D927Jjcu3ePO4+bjsJWvxPWnZABIOG6D+PafrF3796jH374YTMvYQgJW5wYMC3WZ5Ifu/h9KANv4/vv52XB8VwQ3d8VFUUPwey8n4jSV0T2c0shVIR92iZqS/hWBETLk/gmLTtGsvl6JiRy/NwzhTVzYsLAEmQTFIV0FMc/a74nbrfpQamFzXWfFruFWoUF9x0suBN5iAIrkN9++y0pYp2n1RZmGNb8tzj2X9r144Zh2cF5/AlCTZG2dZ+h+6OuiQ/6j0hxS/HA+HA8KQoYtwtbbxclmWWRQ2F1EaH6DN/noqnLaFWTgvfaa6/Jm2++KYG1EQQX+DmsM+bcovPXt/rwSktzPOXYWM5a3te+tlZwLabg82SEb9iySRXX6R+4Pu/hgfYkhe+zFV7/b775pvTLL79UIJaxVo4szYqWp9UWZoQWHM6n43OB+yPpXIinvrb+xDpCgf3D9u3bdxg3dkTs+CMSUMgmWcBMk5YO2bSRDQfLGERtDK9MmjkHobqKYMVtFLwFiBjHovrCySYwCnQZTnJ/zgYUSuaeO24bJmOhWdSs5WsJfZ5mzO4tNustm9HauoPKpM6H9eDBg96WLVuarCxsEVWKAKLJDB75wR34MMdTTPvIyiPPJpwnq8VnxbkEIscVNqFrDVSlPBeWl9Pqa+tPYodfsROsaX7YLAI/KofC/3cUnhkWLKY2SnjIbDhcwmM+UXil9T3WSwd8MqgF9fXXX4fue+/h7bcJ156+zzGO30XF1MA+/zx06NAcHnYxLgL/WrPCMNFq+kGZvv2vKSzjeVqHOVYevriYrC/DtnOhyLE7EsrG9zgXjyuYKjw4F76nhc+hXDgeLdzDKc6FAawpVPLar61PiVUKCgGE6kRSHjZYXheCSJZJbdRzzldTUKdlQKH15TjOLM7zvWa6vHn0T9Zxr27BX/k7/r9jItSszO7gvv+Oe/o7tmGz7eOUwna0gMqDZfAvCec0xnOhNcdzYZQ8fC5Pnz79netwrhcobmmF7caNGwPlvlhvJJpBdKTSgpP4nFzsz/YFamzfYmDztJf6kJmCWpMBhwKHqPIs7tfbkqHzrHnYHVmKkHNxStly+90pSNh8jGgzYWniOZnfzeBAVdo7F5bzSRW2/idVG48BhhSZdCuoKc+yY6fZp2YErt1EhbmwXoQtwMya7ltRpitNkdefx2bGlbeLbO4b0eZUe2x2dzriwQbPZR5W4lvsNylK35PagUVrLEXtSf/HBfg9SnTgUuBME3UtBK653oQtwAR3vKGhITbXPpKle5bnPQg6VE8GGVekYMw5MVixO+dKs2lS2U/h2G9pl4/BIZN3njfezGcQK3D0edAHx57f165dm8Y+u6W4GncVprB+tB6FLUwQwTaCQJHj6I5w+u8sBPvNUAiYmGAtLBxjmbJVsDtkmbZ1PoGo8Vxwnaa6INLt/taijjPQZE5WSYugUqm8tXXrVobROa4xqh9GhVFWROLYcXQWhcbDZ7sPHDhQg9n/cRuR1CzQ53RiLaKiOLdLUZMvr3WCQ9M9oo57UTeD3Kv4rRyvuccyq3oYj9lnmdAT+3zfC5aNOR9mGx7D+wlEfauylMkj9nxMcgX+/tscl1tEJJQtlkajcX/Lli1RPrsmyqbbzePEMM+WTdSxOZexFES7M863Q+oOYlFArBiKZ7YOa1cRXkBj8vudLTm/qBkaFaQX7+g3hL6H+dv+xqawKKkxnaP9PoQSSvfOP92oIMx8FrTEovqcsSvI7iy/wwwNY7ePMqL4Zbwu4HUB1t7CoPVvVOLpWFhgxZVRcCaMyNmO5xmRWzGmlOIIoftffD7awe/xe8SzM6d2tuw/8hY3RQnIxWoiKS2yFSLHDyh0KOC0HNiU9ZsWeK1EhO9bj8f9G9jubyY7htKHqLgpRZGbuAVQ5GTJp/NxyP/R+j2+yKEZeRWLPwyIhTyctSIQPByHWX2ZNskJ1nGUAqzFaW1m9D8qbkpR5C5uYSh0xho73mKNhb+XqY0aiFj9He/9fnRFJSRUeg8VN6UoOp63NI7W6fv27t1bMRYYX//bWGRcTi0uLp7C/9/DKqtLl+epVBRl8ChU3Fox3Qi4NERRFKVAOkqxoSiK0quouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpCouCmKMpB0dYSCorRiphHkmOKoTM2abVZRFEVRFEVRFEVRlH7k30ucc3EstpUHAAAAAElFTkSuQmCC","base64"))];case 2:if((o=c.sent()).error)return[2,o];return[4,n.writeFile(".lesson/lessonplan.md",at.Z.from((s=r,"# Lesson plan\n  \n  ** this file should contain teacher lesson plan details ** \n\n  __ students will never see this __\n\n  ## Learning Objectives\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your lesson plan.\n\n  ".concat(dE(s),"\n  "))))];case 3:if((a=c.sent()).error)return[2,a];return[4,n.writeFile(".lesson/instructions.md",at.Z.from((u=r,"# Instructions  \n\n  ** this file should contain student lesson instructions **\n\n  _ students will see these instructions in a read-only workspace tab _\n\n  ## Steps\n  1. \n  2. \n  3. \n\n  Use [Markdown](https://gist.github.com/cuonggt/9b7d08a597b167299f0d) to format your instructions.\n\n  ".concat(dE(u),"\n  "))))];case 4:if((l=c.sent()).error)return[2,l];return[2,{error:null}]}})})).apply(this,arguments)}function dI(){var e=(0,eO._)(["\n  query TeamsForEduLessonCta($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProject\n      }\n    }\n  }\n"]);return dI=function(){return e},e}var dT={},dG=(0,eX.Ps)(dI()),dD=(0,e4.X)({root:[eo.l0.p(8),eo.l0.colWithGap(4),eo.l0.backgroundColor.accentPrimaryDimmest,eo.l0.borderRadius(8),{fontSize:eD.TV.fontSizeSmall}]});function dP(){var e,n,t=oM(),r=(e={variables:{replId:(0,ed.Z)()}},n=(0,eL._)({},dT,e),eM.a(dG,n)).data,i=(0,el.Z)().fs,o=(0,J._)((0,en.useState)(!1),2),a=o[0],l=o[1],c=(0,J._)((0,en.useState)(!1),2),s=c[0],u=c[1],d=(null==r?void 0:r.repl.__typename)==="Repl"&&r.repl.isProject,p=(0,ev.Z)().showError;if((0,en.useEffect)(function(){if(d){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,nx._)(function(){var n;return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:return[4,i.readDir(u6.oh)];case 1:if(n=t.sent(),e||!n.error&&n.children.length)return[2];return l(!0),[2]}})})).apply(this,arguments)}},[i,d]),!a)return null;function f(){return(f=(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return u(!0),[4,function(e){return dR.apply(this,arguments)}({fs:i})];case 1:if(e.sent().error)return p("Something when wrong"),[2];return t({path:u6.oh+"/lessonplan.md"}),l(!1),[2]}})})).apply(this,arguments)}return(0,K.BX)(ei.G,{css:dD.root,children:[(0,K.tZ)(e5.zx,{iconLeft:s?(0,K.tZ)(eR.Z,{}):(0,K.tZ)(oq.Z,{}),text:"Add lesson contents",size:"small",onClick:function(){return f.apply(this,arguments)},disabled:s}),(0,K.tZ)("a",{href:"https://docs.replit.com/teams-edu/lesson-authoring",target:"_blank",children:"Learn more"})]})}var dB=en.createContext(null),dU=dB.Provider,dA=(0,e4.X)({root:eo.l0.coverContainer,inner:[eo.l0.coverContainer,eo.l0.pl(8)],loader:[eo.l0.justify.start,eo.l0.position.absolute,{top:2,left:16,overflow:"hidden"}]}),dL=(0,e4.X)({root:[eo.l0.rowWithGap(4),eo.l0.align.center],text:[eo.l0.fontWeight.medium,{fontSize:13}]}),dO=(0,e4.X)({root:[eo.l0.rowWithGap(4),eo.l0.pr(2)]}),dX={title:(0,K.tZ)(function(){return(0,K.BX)(ei.G,{css:dL.root,children:[(0,K.tZ)(eE.xv,{css:dL.text,children:"Files"}),(0,K.tZ)(u4.m,{})]})},{}),controls:(0,K.tZ)(function(){var e=(0,en.useContext)(dB),n=(0,J._)((0,en.useState)(!1),2),t=n[0],r=n[1],i=sO(E.Files),o=sS(sL);if(!e)throw Error("Expected filetree");return(0,en.useEffect)(function(){return e.onLoad(function(){return r(!0)})},[e]),(0,K.BX)(ei.G,{css:dO.root,style:{opacity:t?1:0},children:[(0,K.tZ)(ab.hU,{dataCy:"filetree-add-file",alt:"New file",tooltipPlacement:"top",onClick:function(){i&&o(E.Files),e.create(rN.Tv.File)},children:(0,K.tZ)(u$.Z,{})}),(0,K.tZ)(ab.hU,{alt:"New folder",tooltipPlacement:"top",onClick:function(){i&&o(E.Files),e.create(rN.Tv.Directory)},children:(0,K.tZ)(uQ.Z,{})}),(0,K.tZ)(dS,{filetree:e})]})},{}),content:(0,K.tZ)(function(){var e=(0,en.useContext)(dB),n=(0,J._)((0,en.useState)(!!(null==e?void 0:e.hasLocalCache)),2),t=n[0],r=n[1];if(!e)throw Error("Expected filetree");return(0,en.useEffect)(function(){return e.onLoad(function(){return r(!0)})},[e]),(0,K.BX)(ei.G,{"data-cy":"sidebar-filetree-section",css:dA.root,children:[t?null:(0,K.tZ)(ei.G,{css:dA.loader,style:{opacity:t?0:1},children:(0,K.tZ)(u2.Z,{path:u6.Ql})}),(0,K.BX)(ei.G,{css:dA.inner,style:{opacity:t?1:0},children:[(0,K.tZ)(dP,{}),(0,K.tZ)(u1.s,{store:e.store})]})]})},{})},dM=t(35972),dz=t(32591),dW=t(22487),dN=t(93711),dj=t(72190);function dF(e){var n=e.path,t=e.initialExpanded,r=e.fs,i=(0,J._)((0,en.useState)(null),2),o=i[0],a=i[1],l=(0,J._)((0,en.useState)(null),2),c=l[0],s=l[1],u=(0,J._)((0,en.useState)(!!t),2),d=u[0],p=u[1];(0,en.useEffect)(function(){if(d){var e=r.watchDir(n,{onChange:function(e){a(e.filter(function(e){return!(0,dj.Ci)((0,dN.K1)(n,e.filename).toString())}))},onError:function(e){s(e)}});return function(){a(null),e()}}},[r,n,d,a,s]);var f=(0,en.useCallback)(function(){p(!0)},[]),h=(0,en.useCallback)(function(){p(!1)},[]);return d?c?{collapse:h,expand:f,children:null,expanded:d,loading:!1,error:c}:o?{collapse:h,expand:f,children:o,loading:!1,error:c,expanded:d}:{collapse:h,expand:f,children:o,loading:!0,error:c,expanded:d}:{collapse:h,expand:f,children:null,loading:!1,error:null,expanded:d}}var dV=t(29358),dH=t(56050),dY=t(97754),dq=t.n(dY);function dJ(e){return function(n){for(var t in e)n.key===t&&e[t](n)}}function dK(e,n){R||(R=document.createElement("input")).setAttribute("type","file"),R.setAttribute("accept",n.join(","));var t=function(){R.files&&((0,em._)(R.files).forEach(e),R.removeEventListener("change",t))};R.addEventListener("change",t),R.click()}var d$=(0,$.iv)({"&":{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"var(--border-radius-4)",padding:"var(--space-8)",color:"var(--foreground-dimmer)",position:"relative"},"&.active":{background:"var(--accent-primary-default)",color:"var(--white)",fontWeight:"var(--font-weight-medium)"},"&:hover":{color:"var(--foreground-default)",background:"var(--background-higher)",cursor:"pointer"},".options-icon":{display:"flex",justifyContent:"center",alignItems:"center",width:"var(--space-16)",height:"var(--space-16)",opacity:0,color:"var(--foreground-dimmest)"},".options-icon:hover":{color:"var(--foreground-dimmest)"},".options-icon.active":{opacity:1,color:"var(--white)"},".entry:hover .options-icon":{opacity:1},".options-box":{position:"absolute",top:"var(--space-32)",right:"var(--space-16)",padding:"var(--space-4)",background:"var(--background-default)",border:"1px solid var(--outline-dimmest)",borderRadius:"var(--border-radius-4)",fontSize:"var(--font-size-subhead-default)",fontWeight:"var(--font-weight-medium)",zIndex:500},".option":{padding:"var(--space-8)",borderRadius:"var(--border-radius-4)",color:"var(--foreground-default)"},".option.danger":{color:"var(--accent-negative-default)"},".option:hover":{background:"var(--background-higher)"},".option.danger:hover":{background:"var(--accent-negative-default)",color:"var(--white)"}}),dQ=function(e){var n=e.isActive,t=e.name,r=e.icon,i=e.options,o=e.onClick,a=e.onRename,l=(0,J._)((0,en.useState)(!1),2),c=l[0],s=l[1],u=(0,J._)((0,en.useState)(null),2),d=u[0],p=u[1],f=(0,dW.Z)(function(){s(!1)},[]),h=(0,dW.Z)(function(){p(null)},[]);return(0,en.useEffect)(function(){h.current&&null!==d&&h.current.focus()},[h,d]),(0,K.BX)("div",{className:dq()({active:n&&null===d}),onClick:o,css:d$,children:[(0,K.BX)(dM.Ug,{spacing:1,align:"center",children:[r,null===d?(0,K.tZ)("p",{children:t}):(0,K.tZ)(dV.ZP,{ref:h,value:d,onChange:function(e){p(e.currentTarget.value)},onKeyDown:dJ({Escape:function(){p(null)},Enter:function(){a&&d&&a(d),p(null)}})})]}),i&&i.length>0?(0,K.tZ)("div",{className:dq()("options-icon",{active:n}),onClick:function(e){e.stopPropagation(),s(!c)},children:(0,K.tZ)(dZ.Z,{})}):null,i&&i.length>0&&c?(0,K.tZ)("div",{className:"options-box",ref:f,onKeyDown:dJ({Escape:function(){s(!1)}}),children:i.map(function(e){return e?(0,K.tZ)("div",{className:dq()("option",{danger:e.danger}),onClick:function(n){n.stopPropagation(),s(!1),e.action(),"Rename"===e.name&&p(t)},children:e.name},e.name):null})}):null]})},d0=(0,e4.X)({root:[eo.l0.flex.row,eo.l0.justify.spaceBetween,eo.l0.align.center],right:[eo.l0.rowWithGap(4),eo.l0.align.center],headerAction:{display:"flex",justifyContent:"center",alignItems:"center",width:"var(--space-24)",height:"var(--space-24)",borderRadius:"var(--border-radius-4)",color:"var(--foreground-dimmer)","&:hover":{background:"var(--background-higher)",cursor:"pointer"}}}),d1=function(e){var n=e.title,t=e.sub,r=e.actions,i=void 0===r?[]:r;return(0,K.BX)(ei.G,{css:d0.root,children:[(0,K.tZ)(eE.xv,{variant:void 0!==t&&t?"subheadDefault":"subheadBig",children:n}),(0,K.tZ)(ei.G,{css:d0.right,children:i?i.map(function(e,n){return(0,K.tZ)("div",{css:d0.headerAction,onClick:e.action,children:e.icon},n)}):null})]})},d2=(0,$.iv)({"&":{position:"relative",width:"100%"},".dragfilter":{position:"absolute",width:"100%",height:"100%",top:0,left:0,background:"var(--accent-primary-default)",borderRadius:"var(--border-radius-4)",opacity:"0.2"},".dragfilter.hidden":{display:"none"}}),d4=function(e){var n=e.fileDrag,t=e.children,r=(0,J._)((0,en.useState)(!1),2),i=r[0],o=r[1],a=(0,en.useRef)(0);return(0,K.BX)("div",{className:"section",onDragEnter:function(e){if(n){e.preventDefault(),e.stopPropagation();var t=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(n.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var l=r[i];n.accept.includes(l.type)||(t=!1)}t&&(o(!0),a.current++)}}},onDragLeave:function(e){n&&(e.preventDefault(),e.stopPropagation(),a.current--,0===a.current&&o(!1))},onDrop:function(e){n&&(e.preventDefault(),e.stopPropagation(),a.current=0,o(!1),(0,em._)(e.dataTransfer.files).filter(function(e){return n.accept.includes(e.type)}).forEach(n.onDrop))},css:d2,children:[t,(0,K.tZ)("div",{className:dq()("dragfilter",{hidden:!i})})]})};function d3(e){var n,t,r,i=e.close,o=e.entries,a=e.openFile,l=(0,el.Z)().fs,c=(0,dW.Z)(i,[]),s=(0,ev.Z)().showError,u=(0,J._)([t=(n=(0,J._)((0,en.useState)({name:""}),2))[0],r=n[1],function(e){var n=null;switch(e.currentTarget.type){case"checkbox":n=e.currentTarget.checked;break;case"number":case"range":n=Number(e.currentTarget.value);break;default:n=e.currentTarget.value}r((0,e0._)((0,eL._)({},t),(0,ea._)({},e.currentTarget.name,n)))}],3),d=u[0],p=u[2];return(0,en.useEffect)(function(){c.current&&c.current.focus()},[c]),(0,K.tZ)(dV.ZP,{ref:c,name:"name",onChange:p,onKeyDown:dJ({Escape:i,Enter:function(){var e="".concat(d.name,".js"),n="code/".concat(e);if(o.includes(e)){s("file '".concat(d.name,"' already exists"));return}l.writeFile(n,at.Z.from("")).then(function(){a(n)}),i()}})})}var d8=function(e){var n=e.onFileOpen,t=(0,el.Z)().fs,r=(0,ec.R3)(),i=(0,J._)((0,en.useState)(!1),2),o=i[0],a=i[1],l=(0,ev.Z)().showError,c=(0,J._)((0,en.useState)(null),2),s=c[0],u=c[1],d=(dF({path:"code",initialExpanded:!0,fs:t}).children||[]).filter(function(e){return e.type===rN.Tv.File}).map(function(e){return e.filename}).sort();return(0,K.BX)(d4,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var n="code/".concat(e.name);if(d.includes(n)){l("scene '".concat((0,aS.eb)(e.name),"' already exists"));return}e.text().then(function(e){t.writeFile(n,at.Z.from(e))})}},children:[(0,K.tZ)(d1,{sub:!0,title:"Code",actions:[{icon:(0,K.tZ)(oq.Z,{}),action:function(){return a(!0)}}]}),(0,K.tZ)(dH.Z,{height:"4px"}),(0,K.tZ)("div",{children:d.map(function(e){var i="code/".concat(e),o=(0,aS.eb)(e),a=[{name:"Rename",action:function(){}}];return"main"!==o&&a.push({name:"Delete",action:function(){return u(i)},danger:!0}),(0,K.tZ)(dQ,{isActive:i===r,onClick:function(){return n(i)},onRename:function(e){t.moveFile(i,"code/".concat(e,".js")).then(function(e){e.error&&l("failed to rename")})},name:o,options:a},o)})}),o?(0,K.tZ)(d3,{entries:d,close:function(){return a(!1)},openFile:n}):null,s?(0,K.tZ)(eC.u,{isOpen:!!s,onRequestClose:function(){return u(null)},children:(0,K.tZ)(dz.Z,{danger:!0,prompt:"Delete scene '".concat((0,aS.eb)(s),"' ?"),desc:"Are you sure you want to delete this scene? This action cannot be undone.",onCancel:function(){return u(null)},confirmText:"Yes, delete this scene",icon:(0,K.tZ)(ds.Z,{}),onConfirm:function(){t.deleteFile(s),u(null)}})}):null]})},d5=t(85508),d6=t(44680),d7=(0,$.iv)({"&":{cursor:"pointer"}});function d9(e){var n=e.file,t=e.name,r=oL();return(0,K.tZ)("div",{className:"entry",onClick:function(){r({pane:{type:"markdown",data:{path:n}}})},css:d7,children:(0,K.BX)(dM.Ug,{spacing:1,align:"center",children:[(0,K.tZ)(d5.Z,{}),(0,K.tZ)(ew.Z,{foreground:2,fontWeight:"regular",children:null!=t?t:(0,aS.eb)(n)})]})})}var pe=function(){var e=(0,J._)((0,en.useState)(!0),2),n=e[0],t=e[1],r=(0,J._)((0,en.useState)(!1),2),i=r[0],o=r[1],a=(0,el.Z)().fs,l=dF({path:"learn",initialExpanded:!0,fs:a});(0,en.useEffect)(function(){var e=!1;return a.stat("README.md").then(function(n){!e&&n.exists&&o(!0)}),function(){e=!0}},[a]);var c=(l.children||[]).filter(function(e){return e.type===rN.Tv.File&&(0,aS.gK)(e.filename)}).map(function(e){return e.filename}).sort();return(0,K.BX)(d4,{children:[(0,K.tZ)(d1,{sub:!0,title:"Learn",actions:[{icon:(0,K.tZ)(c$.Z,{rotate:n?0:-90}),action:function(){return t(!n)}}]}),n?(0,K.BX)(dM.gC,{spacing:1,children:[(0,K.tZ)("div",{}),i?(0,K.tZ)(d9,{name:"Intro",file:"README.md"}):null,c.map(function(e){return(0,K.tZ)(d9,{file:"learn/".concat(e)},e)})]}):null]})},pn=(0,nH.O4)("kaboom3000UpdateNoticeClosed",!1),pt=(0,e4.X)({notice:[eo.l0.borderRadius(4),eo.l0.p(8),eo.l0.colWithGap(4)],title:[eo.l0.rowWithGap(4),eo.l0.align.center],titleRow:[eo.l0.flex.row,eo.l0.justify.spaceBetween,eo.l0.align.center]}),pr=function(){var e=(0,el.Z)().fs,n=(0,J._)((0,en.useState)(!1),2),t=n[0],r=n[1],i=(0,J._)((0,tO.KO)(pn),2),o=i[0],a=i[1];return((0,en.useEffect)(function(){e.readFile("package.json").then(function(e){if(!e.error)try{var n,t=JSON.parse(e.content.toString()),i=null===(n=t.dependencies)||void 0===n?void 0:n.kaboom;if(i){var o=/\d+/.exec(i);(null==o?void 0:o[0])&&Number(o[0])>=3e3&&r(!0)}}catch(e){}})},[e]),!t||o)?null:(0,K.BX)(eS.Tg,{elevated:!0,css:pt.notice,children:[(0,K.BX)(ei.G,{css:pt.titleRow,children:[(0,K.BX)(ei.G,{css:pt.title,children:[(0,K.tZ)("img",{alt:"mark",src:"/public/images/mark.png",width:"24",height:"24"}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",multiline:!1,children:"Update notice"})]}),(0,K.tZ)(ab.hU,{onClick:function(){r(!1),a(!0)},alt:"Close",children:(0,K.tZ)(lI.Z,{})})]}),(0,K.tZ)(eE.xv,{children:"You're using Kaboom v3000! Things might work differently from v2000."}),(0,K.tZ)("a",{href:"https://kaboomjs.com/blog/3000",target:"_blank",children:"New features"}),(0,K.tZ)("a",{href:"https://kaboomjs.com/doc/migration-3000",target:"_blank",children:"Migration guide"})]})},pi=function(e){var n=e.openFile,t=(0,J._)((0,en.useState)(!1),2),r=t[0],i=t[1];return(0,K.BX)(d4,{children:[(0,K.tZ)(d1,{title:"Kaboom",actions:[{icon:(0,K.tZ)(c$.Z,{rotate:r?0:-90}),action:function(){return i(!r)}}]}),r?(0,K.BX)(dM.gC,{spacing:1,children:[(0,K.tZ)("div",{}),(0,K.tZ)(ex.Z,{Icon:lU.Z,size:"small",onClick:function(){return n("template.html")},children:"Edit HTML Template"})]}):null]})},po=t(59811),pa=t(88883),pl=t(45005),pc=t.n(pl),ps=(0,$.iv)({"&":{padding:"var(--space-24)"},".box":{width:"100%",height:"320px",overflowX:"hidden",overflowY:"scroll"}}),pu=function(e){var n=e.kind,t=e.renderItem,r=e.onRequestClose,i=e.onAdd,o=e.openFile,a=(0,el.Z)().fs,l=(0,J._)((0,en.useState)([]),2),c=l[0],s=l[1],u=(0,J._)((0,en.useState)(""),2),d=u[0],p=u[1],f="https://kaboomjs.com/".concat(n),h=(0,ev.Z)().showError;function m(e){var t="".concat(f,"/").concat(e);pc()(t).then(function(e){return e.arrayBuffer()}).then(function(l){var c="".concat(n,"/").concat(e);a.writeFile(c,at.Z.from(l)).then(function(n){if(n.error)throw Error(n.error);o(c),i&&i(e,t)}),r()}).catch(function(){return h("Failed to fetch ".concat(e))})}return(0,en.useEffect)(function(){pc()("https://kaboomjs.com/api/assets/".concat(n)).then(function(e){return e.json()}).then(function(e){return s(e)}).catch(function(){return h("Failed to fetch assets lib listing")})},[s,h,f]),(0,K.tZ)("div",{className:"assets",css:ps,children:(0,K.BX)(dM.gC,{spacing:2,children:[(0,K.tZ)(eZ.Z,{level:3,children:"Assets Lib (beta)"}),0===c.length?(0,K.tZ)(ew.Z,{foreground:2,children:"Loading..."}):(0,K.BX)(K.HY,{children:[(0,K.tZ)(dV.ZP,{large:!0,label:"Search",onChange:function(e){p(e.target.value)}}),(0,K.tZ)("div",{className:"box",children:c.filter(function(e){return!d||e.includes(d)}).map(function(e){return(0,K.tZ)(en.Fragment,{children:t({name:e,url:"".concat(f,"/").concat(e),add:function(){return m(e)}})},e)})}),(0,K.tZ)(ex.Z,{size:"small",onClick:function(){c.length>0&&m(c[Math.floor(Math.random()*c.length)])},children:"I’m Feeling Lucky"})]})]})})};function pd(e){var n=e.name,t=e.url,r=e.add;return(0,K.BX)(dM.Ug,{justify:"space-between",align:"center",children:[(0,K.BX)(dM.gC,{spacing:1,children:[(0,K.tZ)(ew.Z,{children:n}),(0,K.tZ)("audio",{src:t,controls:!0})]}),(0,K.tZ)(ex.Z,{onClick:r,children:"Import"})]})}var pp=function(e){var n=e.onFileOpen,t=(0,el.Z)().fs,r=(0,ec.R3)(),i=(0,ec.Qt)(),o=(0,ev.Z)().showError,a=(0,J._)((0,en.useState)(null),2),l=a[0],c=a[1],s=(0,J._)((0,en.useState)(!1),2),u=s[0],d=s[1],p=(0,pa.Z)(r),f=(dF({path:"sounds",initialExpanded:!0,fs:t}).children||[]).filter(function(e){return e.type===rN.Tv.File}).map(function(e){return e.filename}).sort(),h=["audio/ogg","audio/mpeg","audio/wav"],m=function(e){var n="sounds/".concat(e.name);if(f.includes(n))return o("sound '".concat((0,aS.eb)(e.name),"' already exists"));e.arrayBuffer().then(function(e){t.writeFile(n,at.Z.from(e))})},v=[{icon:(0,K.tZ)(po.Z,{}),action:function(){return d(!0)}},{icon:(0,K.tZ)(dw.Z,{}),action:function(){return dK(m,h)}}];return(0,K.BX)(d4,{fileDrag:{accept:h,onDrop:m},children:[(0,K.tZ)(d1,{sub:!0,title:"Sounds",actions:v}),(0,K.tZ)(dH.Z,{height:"4px"}),(0,K.tZ)("div",{children:f.map(function(e){var a=(0,aS.eb)(e),l="sounds/".concat(e),s=p?[{name:"Insert load code",action:function(){var e,n,t;return p({insertAt:null!==(t=null===(n=i())||void 0===n?void 0:null===(e=n.position)||void 0===e?void 0:e.offset)&&void 0!==t?t:0,code:"loadSound(".concat(JSON.stringify(a),", ").concat(JSON.stringify(l),");")})}}]:[];return(0,K.tZ)(dQ,{isActive:l===r,onClick:function(){return n(l)},onRename:function(n){t.moveFile(l,"sounds/".concat(n,".").concat((0,aS.r6)(e))).then(function(e){e.error&&o("failed to rename")})},name:a,options:(0,em._)(s).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return c(l)},danger:!0}])},a)})}),l?(0,K.tZ)(eC.u,{isOpen:!!l,onRequestClose:function(){return c(null)},children:(0,K.tZ)(dz.Z,{danger:!0,prompt:"Delete sound '".concat((0,aS.eb)(l),"' ?"),desc:"Are you sure you want to delete this sound? This action cannot be undone.",confirmText:"Yes, delete this sound",icon:(0,K.tZ)(ds.Z,{}),onCancel:function(){return c(null)},onConfirm:function(){t.deleteFile(l),c(null)}})}):null,(0,K.tZ)(eC.u,{isOpen:u,onRequestClose:function(){return d(!1)},maxWidth:872,children:(0,K.tZ)(pu,{kind:"sounds",renderItem:pd,onRequestClose:function(){return d(!1)},onAdd:function(e,n){return new window.Audio(n).play()},openFile:n})})]})},pf=t(18836),ph=t(76940),pm=(0,e4.X)({previewImg:{width:"var(--space-32)",height:"var(--space-32)",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden","& > img":{width:"100%",imageRendering:"crisp-edges"}}}),pv=(0,e4.X)({root:{padding:"var(--space-16)",height:"120px",imageRendering:"pixelated",borderRadius:"var(--border-radius-4)","&:hover":{cursor:"pointer",background:"var(--background-root)"}}});function pg(e){var n=e.url,t=e.add;return(0,K.tZ)(K.HY,{children:(0,K.tZ)("img",{className:"entry",src:n,loading:"lazy",onClick:t,alt:"sprite asset",css:pv.root})})}function py(e){var n=e.close,t=e.entries,r=e.onFileOpen,i=(0,el.Z)().fs,o=(0,dW.Z)(n,[]),a=(0,en.useRef)(null),l=(0,ev.Z)().showError,c=(0,J._)((0,en.useState)({name:"",width:32,height:32}),2),s=c[0],u=c[1];(0,en.useEffect)(function(){a.current&&a.current.focus()},[a]);var d=function(){if(0===s.name.length){l("invalid 'name'");return}var e=s.width,o=s.height;if(isNaN(e)||isNaN(o)||e<=0||o<=0){l("invalid width / height!");return}if(e>256||o>256){l("only supports sprites smaller than 256x256 yet");return}var a="".concat(s.name,".pedit"),c="sprites/".concat(a);if(t.includes(a)){l("sprite '".concat(s.name,"' already exists"));return}i.writeFile(c,at.Z.from(JSON.stringify({fromKaboom:!0,width:s.width,height:s.height}))).then(function(){r(c)}),n()},p=(0,aO.U)();return(0,K.tZ)("div",{ref:o,className:"dialog",onKeyDown:dJ({Escape:n,Enter:d}),children:(0,K.tZ)(eS.Tg,{elevated:!0,css:[eo.l0.borderRadius(8),eo.l0.p(8),eo.l0.mt(8)],children:(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4)],children:[(0,K.tZ)("label",{htmlFor:p("name"),children:(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Name"})}),(0,K.tZ)(pf.II,{id:p("name"),ref:a,value:s.name,onChange:function(e){u((0,e0._)((0,eL._)({},s),{name:e.target.value}))}})]}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4),{flex:"1 1 0px"}],children:[(0,K.tZ)("label",{htmlFor:p("width"),children:(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Width"})}),(0,K.tZ)(pf.II,{id:p("width"),value:"".concat(s.width),onChange:function(e){return u((0,e0._)((0,eL._)({},s),{width:parseInt(e.target.value,10)||0}))}})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4),{flex:"1 1 0px"}],children:[(0,K.tZ)("label",{htmlFor:p("height"),children:(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Height"})}),(0,K.tZ)(pf.II,{id:p("height"),value:"".concat(s.height),onChange:function(e){return u((0,e0._)((0,eL._)({},s),{height:parseInt(e.target.value,10)||0}))}})]})]}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.justify.end],children:[(0,K.tZ)(e5.zx,{onClick:n,text:"Cancel"}),(0,K.tZ)(e5.zx,{colorway:"primary",onClick:d,text:"Create",iconLeft:(0,K.tZ)(oq.Z,{})})]})]})})})}var pb=function(e){var n=e.onFileOpen,t=(0,el.Z)().fs,r=(0,ev.Z)().showError,i=(0,ec.R3)(),o=(0,ec.Qt)(),a=(0,J._)((0,en.useState)(!1),2),l=a[0],c=a[1],s=(0,J._)((0,en.useState)(!1),2),u=s[0],d=s[1],p=(0,J._)((0,en.useState)(null),2),f=p[0],h=p[1],m=(0,pa.Z)(i),v=(0,ph.Z)({fs:t,onContentProcess:function(e,n){if(n.endsWith("pedit")){var t=JSON.parse(e.toString());if(!t.fromKaboom)return t.frames[0]}else{var r=(0,aS.yC)(n);if(r)return"data:".concat(r,";base64,").concat(e.toString("base64"))}return""}}),g=(dF({path:"sprites",initialExpanded:!0,fs:t}).children||[]).filter(function(e){return e.type===rN.Tv.File}).map(function(e){return e.filename}).sort(),y=["image/png","image/jpeg",".pedit"],b=function(e){var n="sprites/".concat(e.name);if(g.includes(n))return r("sprite '".concat((0,aS.eb)(e.name),"' already exists"));e.arrayBuffer().then(function(e){t.writeFile(n,at.Z.from(e))})},x=[{icon:(0,K.tZ)(po.Z,{}),action:function(){return d(!0)}},{icon:(0,K.tZ)(dw.Z,{}),action:function(){return dK(b,y)}},{icon:(0,K.tZ)(oq.Z,{}),action:function(){return c(!0)}}];return(0,K.BX)(d4,{fileDrag:{accept:y,onDrop:b},children:[(0,K.tZ)(d1,{sub:!0,title:"Sprites",actions:x}),(0,K.tZ)(dH.Z,{height:"4px"}),(0,K.tZ)("div",{children:g.map(function(e){var a="sprites/".concat(e),l=(0,aS.r6)(e),c=(0,aS.eb)(e),s=v(a),u=m?[{name:"Insert load code",action:function(){var e,n,t,r="pedit"===l?"loadPedit":"loadSprite";m({code:"".concat(r,"(").concat(JSON.stringify(c),", ").concat(JSON.stringify(a),");"),insertAt:null!==(t=null===(n=o())||void 0===n?void 0:null===(e=n.position)||void 0===e?void 0:e.offset)&&void 0!==t?t:0})}}]:[];return(0,K.tZ)(dQ,{isActive:a===i,onClick:function(){return n(a)},onRename:function(e){t.moveFile(a,"sprites/".concat(e,".").concat(l)).then(function(e){e.error&&r("failed to rename")})},icon:(0,K.tZ)("div",{css:pm.previewImg,children:s.state===ph.j.Ready&&(0,K.tZ)("img",{src:s.content,alt:""})}),name:c,options:(0,em._)(u).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return h(a)},danger:!0}])},c)})}),l?(0,K.tZ)(py,{entries:g,close:function(){return c(!1)},onFileOpen:n}):null,f?(0,K.tZ)(eC.u,{isOpen:!!f,onRequestClose:function(){return h(null)},children:(0,K.tZ)(dz.Z,{danger:!0,prompt:"Delete sprite '".concat((0,aS.eb)(f),"' ?"),desc:"Are you sure you want to delete this sprite? This action cannot be undone.",confirmText:"Yes, delete this sprite",icon:(0,K.tZ)(ds.Z,{}),onCancel:function(){return h(null)},onConfirm:function(){t.deleteFile(f),h(null)}})}):null,(0,K.tZ)(eC.u,{isOpen:u,onRequestClose:function(){return d(!1)},maxWidth:872,children:(0,K.tZ)(pu,{kind:"sprites",renderItem:pg,onRequestClose:function(){return d(!1)},openFile:n})})]})};function px(e){var n=e.onFileOpen;return(0,K.tZ)(ei.G,{css:[eo.l0.p(8),eo.l0.flex.growAndShrink(1),eo.l0.overflow("scroll"),{userSelect:"none"}],children:(0,K.BX)(dM.gC,{spacing:1,children:[(0,K.tZ)(pr,{}),(0,K.tZ)(pi,{openFile:n}),(0,K.tZ)(d8,{onFileOpen:n}),(0,K.tZ)(pb,{onFileOpen:n}),(0,K.tZ)(pp,{onFileOpen:n}),(0,K.tZ)(pe,{}),(0,K.tZ)("div",{}),(0,K.tZ)(ex.Z,{Icon:s$.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com")},children:"Docs"}),(0,K.tZ)(ex.Z,{Icon:s$.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/play")},children:"Examples"}),(0,K.tZ)(ex.Z,{Icon:s$.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/doc/migration-3000")},children:"v3000 migration guide"})]})})}var pZ={kaboom:{title:"Kaboom",content:(0,K.tZ)(function(){var e=oM();return(0,K.tZ)(px,{onFileOpen:function(n){return e({path:n})}})},{})},files:dX,dock:uJ},pw={root:(0,$.iv)([eo.l0.rowWithGap(4),eo.l0.align.center,eo.l0.height(36),{userSelect:"none"}]),header:(0,$.iv)([eo.l0.reset.button,eo.l0.height("100%"),eo.l0.focusRing,eo.l0.borderRadius(4),eo.l0.ml(8),eo.l0.flex.growAndShrink(1),eo.l0.rowWithGap(4),eo.l0.align.center,eo.l0.cursor.pointer]),title:(0,$.iv)([eo.l0.fontWeight.medium,{fontSize:13}]),border:(0,$.iv)([eo.l0.position.absolute,eo.l0.top(0),eo.l0.right(0),eo.l0.width("calc(100% - ".concat(eo.TV.space8,")")),{pointerEvents:"none",borderTop:"1px solid",borderColor:eo.TV.outlineDimmest}]),content:(0,$.iv)([eo.l0.flex.growAndShrink(1),eo.l0.overflowY("auto"),eo.l0.scrollbar.hidden])},pk=(0,en.memo)(function(e){var n=sO(e.id),t=sS(sL),r=pZ[e.id],i=r.title,o=r.controls;return(0,K.BX)(ei.G,{css:pw.root,children:[(0,K.BX)(ei.G,{id:"sidebar-section-header-".concat(e.id),tag:"button",onClick:function(){(0,ep.j)(ep.U3.WS_SIDEBAR_SECTION_TOGGLED,{section:e.id,action:n?"open":"close"}),t(e.id)},css:pw.header,"aria-expanded":!n,"aria-controls":"sidebar-section-content-".concat(e.id),dataCy:"sidebar-section-content-".concat(e.id),children:[(0,K.tZ)(sZ.Z,{rotate:n?0:90,color:eo.TV.foregroundDimmer}),"string"==typeof i?(0,K.tZ)(eE.xv,{css:pw.title,multiline:!1,children:i}):en.cloneElement(i,{collapsed:n})]}),o||null]})}),pC=(0,en.memo)(function(e){var n=pZ[e.id].content,t=sO(e.id);return(0,K.tZ)(ei.G,{id:"sidebar-section-content-".concat(e.id),inert:t?"true":void 0,css:[pw.content,"files"===e.id?eo.l0.position.relative:{}],children:(0,K.tZ)(ei.G,{css:eo.l0.pb(8),children:n})})}),p_={root:(0,$.iv)([eo.l0.position.relative,eo.l0.height(0),eo.l0.width("100%"),{zIndex:1,"&:hover > div":{transform:"scaleY(2)"},cursor:"ns-resize"}]),hoverArea:(0,$.iv)([eo.l0.position.relative,eo.l0.height(8),eo.l0.top(-4)])},pS=(0,en.memo)(function(e){var n=sS(sM),t=sW({id:e.id});return(0,K.tZ)(ei.G,{css:p_.root,onPointerDown:function(t){cq(t,{start:function(){n({type:"start",id:e.id})},move:function(e){n({type:"update",delta:e.delta.y})},end:function(e){n({type:"end",delta:e.delta.y})}})},children:(0,K.tZ)(ei.G,{style:t?{transform:"scaleY(100)"}:void 0,css:p_.hoverArea})})});function pE(e){var n,t,r,i=(0,en.useRef)(null),o=(0,cK.T)(),a=sW({id:e.id}),l=s_(sz),c=(n=e.id,t=sC(),r=(0,nb.Z)(function(){return(0,nT.cn)(function(e){var t;return 36+((null===(t=e(sT).find(function(e){return e.id===n}))||void 0===t?void 0:t.height)||0)})},[n]),(0,tL.b)(r,t));return(0,en.useEffect)(function(){return(0,sN.A)(i,"height",c.current+"px"),c.subscribe(function(e){(0,sN.A)(i,"height",e+"px")})},[c]),(0,K.BX)(ei.G,{innerRef:i,style:{zIndex:a?2:void 0,position:"relative",transition:o||l?void 0:"height 120ms ease-out"},children:[e.border?(0,K.tZ)(ei.G,{css:pw.border}):null,(0,K.tZ)(pk,{id:e.id}),(0,K.tZ)(pC,{id:e.id}),e.resizable?(0,K.tZ)(pS,{id:e.id}):null]})}var pR=(0,e4.X)({root:[eo.l0.pl(8),eo.l0.pt(4),eo.l0.rowWithGap(2),eo.l0.align.center],cta:[eo.l0.flex.growAndShrink(1),eo.l0.mb(8)]});function pI(){var e,n,t=(e=(0,eL._)({},sc,void 0),eM.a(ss,e)),r=t.data,i=t.loading,o=(0,sn.o)("ghostwriter-repl-resources-cta"),a=o.isLoading,l=o.isDone,c=o.setAsDone;if(i||a||!(null==r?void 0:r.currentUser))return null;var s=(0,st.d)({user:r.currentUser}).plan;if(s.name===lq.we&&null===s.trial||s.name===lq.we&&null!==s.trial&&null===s.trial.cancelsAt)return null;if(s.name!==lq.we)return l?null:(0,K.BX)(ei.G,{css:pR.root,children:[(0,K.tZ)(ei.G,{dataCy:"workspace-sidebar-upgrade-cta",css:pR.cta,children:(0,K.tZ)(a5.Z,{style:{borderRadius:4},context:"workspace_sidebar",stretch:!0})}),(0,K.tZ)(ab.hU,{onClick:function(){return c()},tooltipHidden:!0,alt:"Hide",children:(0,K.tZ)(lI.Z,{})})]});var u=(null===(n=s.trial)||void 0===n?void 0:n.cancelsAt)?"Trial ends ".concat((0,c9.V)(s.trial.cancelsAt)):void 0;return(0,K.tZ)(ei.G,{css:pR.root,children:(0,K.tZ)(ei.G,{css:pR.cta,children:(0,K.tZ)(a5.Z,{style:{borderRadius:4},colorway:"blurple",context:"workspace_sidebar",text:u})})})}var pT=(0,$.F4)({from:{opacity:0},to:{opacity:1}}),pG={container:(0,$.iv)([eo.l0.position.absolute,eo.l0.colWithGap(4),eo.l0.top(0),eo.l0.left(0),eo.l0.width("100%"),eo.l0.height("100%"),eo.l0.minWidth(rr),{animation:"".concat(pT," 0.2s ease-in-out")}]),header:(0,$.iv)([eo.l0.pl(8),{zIndex:3}]),content:(0,$.iv)([eo.l0.flex.growAndShrink(1)]),footer:(0,$.iv)([eo.l0.colWithGap(8),{zIndex:2}]),help:(0,$.iv)([eo.l0.flex.growAndShrink(1),eo.l0.justify.center,{button:eo.l0.borderRadius(4)}])};function pD(){return(0,K.tZ)(ei.G,{css:pG.footer,children:(0,K.tZ)(pI,{})})}var pP=(0,en.memo)(function(){var e,n,t,r,i,o,a,l,c,s,u,d,p,f,h,m,v,g,y,b,x,Z,w,k,C,_,S,E,R,I,T,G=(e=(0,ed.Z)(),t=(n=(0,J._)((0,en.useState)(null),2))[0],r=n[1],i=oM(),o=(0,u8.L)(),a=(0,o9.T)(!0),l=(0,en.useCallback)(function(e){return!a(e.filename)},[a]),c=(0,el.Z)().fs,s=(0,nE.Gn)("multiselectModifierKey").preferences,u=ii(tw),d="cmdOrCtrlKey"===s.multiselectModifierKey?"cmdOrCtrlKey":"altKey",p=(0,ec.AA)(),f=(0,en.useCallback)(function(e){return(0,u5.mn)(e,p)},[p]),h=(0,er.P5)({controlName:"flag-filetree-local-cache",logFlagToAnalytics:!1}),m=(0,u0.av)().onContextMenu,v=(0,ed.Z)(),g=(0,el.Z)().fs,y=oM(),b=ii(rX),x=(0,sd.c_)(),Z=(0,sd.s6)(sp.Y.FiletreeContextMenu),w=(0,er.P5)({controlName:"flag-open-with",type:"boolean",default:!1,logFlagToAnalytics:!1}),k=(0,en.useCallback)(function(e,n){var t,r=e.path,i=[{data:{type:"group",key:"rename"},commands:function(){return[dh(function(){return n.rename(r)})]}}];if(i.push({data:{type:"group",key:"open"},commands:function(){return function(e){var n=e.path,t=e.getSelectedNodes,r=e.openFile,i=[{type:rN.Tv.File,path:n}],o=!0,a=!1,l=void 0;try{for(var c,s=t()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,J._)(c.value,2),d=u[0],p=u[1];p!==rN.Tv.Directory&&d!==n&&i.push({path:d,type:p})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}var f=i.length,h=1===f?"Open":"Open ".concat(f," files");return[{label:h,icon:(0,K.tZ)(di.Z,{}),run:function(){var e=!0,n=!1,t=void 0;try{for(var o,a=i[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;r({path:l.path,newTab:!0})}}catch(e){n=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}}},{label:h+" in split",icon:(0,K.tZ)(ox.Z,{}),run:function(){var e=(0,nL._)(i),n=e[0],t=e.slice(1);r({path:n.path,newPane:!0});var o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;r({path:u.path,newTab:!0})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:nC.pl,data:{type:"action",label:n,icon:t,run:r}}})}({path:r,getSelectedNodes:n.getSelectedNodes,openFile:y})}}),w){var o=function(e,n,t){var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var n=l.value,i=(0,de.Z)(n.glob);if(i&&i.exec(e)){var o=n.icon?n.icon:n.extension.manifest.icon,a=n.name?n.name:n.extension.manifest.name,c=o?(0,df.Vh)(n.extension.baseUrl,o):null;r.push({match:nC.pl,data:{type:"action",icon:c?(0,K.tZ)(dg,{size:16,name:a,iconUrl:c}):(0,K.tZ)(di.Z,{}),label:"Open with "+a,run:function(){return t({path:e,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:n}})}}})}}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r}(r,x,y);o.length&&i.push({data:{type:"group",key:"extensions"},commands:function(){return o}})}return i.push({data:{type:"group",key:"copy"},commands:function(){return dm(r)}}),i.push((t=(0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:e=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,u9.Z)(r,g)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,dp.Z)({replId:v,action:"duplicated",fileType:rN.Tv.File}),n.rename(e),[2]}})}),{match:nC.pl,data:{type:"action",label:"Duplicate file",icon:(0,K.tZ)(dr.Z,{}),run:t}})),i.push((0,du.H4)(r,g)),i.push({data:{type:"group",key:"deleteFile"},commands:function(){return[dv(function(){return n.deleteNodes(e)})]}}),i.push({data:{type:"group",key:"extensions"},commands:(0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{filePath:r,fileType:rN.Tv.File}}],[4,Promise.all(Z.map((t=(0,nx._)(function(n){var t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,su.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),i},[y,v,Z,x,g,w]),C=(0,ec.OM)(),_=(0,ec.t9)(),S=(0,en.useCallback)(function(e,n){var t,r=e.path,i=r===u6.Ql,o=i?[]:[{data:{type:"group",key:"rename"},commands:function(){return[dh(function(){return n.rename(e.path)})]}}];return o.push({data:{type:"group",key:"search"},commands:function(){var n;return[(n=e.path,{match:nC.pl,data:{type:"action",icon:(0,K.tZ)(oJ.Z,{}),label:"Search this directory",run:function(){b({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(n,"/**")}},edge:"right"})}}})]}}),o.push.apply(o,(0,em._)((t=function(t){return n.create(t,e.path)},[{label:"Add file",icon:(0,K.tZ)(u$.Z,{}),run:function(){return t(rN.Tv.File)}},{label:"Add folder",icon:(0,K.tZ)(uQ.Z,{}),run:function(){return t(rN.Tv.Directory)}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:nC.pl,data:{type:"action",label:n,icon:t,run:r}}})))),o.push({data:{type:"group",key:"openShell"},commands:function(){return[{match:nC.pl,data:{type:"action",label:"Open shell here",icon:(0,K.tZ)(dc.Z,{}),run:function(){b({pane:{type:"shell",data:{initialPwd:r}},edge:"left"})}}}]}}),i||o.push({data:{type:"group",key:"copy"},commands:function(){return dm(r)}}),n.getExpandedDirs()&&o.push({match:nC.pl,data:{icon:(0,K.tZ)(dt.Z,{}),type:"action",label:"Collapse "+(i?"all":"child folders"),run:function(){var e=n.getExpandedDirs(r);e&&n.collapse((0,em._)(e))}}}),i||o.push({data:{type:"group",key:"deleteFile"},commands:function(){return[dv(function(){return n.deleteNodes(e)})]}}),i&&o.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:nC.pl,data:{type:"action",label:(_?"Hide":"Show")+" hidden files",icon:_?(0,K.tZ)(da.Z,{}):(0,K.tZ)(di.Z,{}),run:function(){C(!_)}}}]}}),o.push({data:{type:"group",key:"extensions"},commands:(0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{dirPath:r,fileType:rN.Tv.Directory}}],[4,Promise.all(Z.map((t=(0,nx._)(function(n){var t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,su.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),o},[_,C,Z,b]),E=(0,en.useCallback)(function(e,n){return{data:{type:"context",label:"Search actions",icon:(0,K.tZ)(oJ.Z,{})},commands:function(){return e.type===rN.Tv.Directory?S(e,n):k(e,n)}}},[k,S]),R=(0,u1.p)({fs:c,filter:l,fontSize:13,onFileDoubleClick:function(e,n){u(n)},onFileSelect:function(e){var n=e.path,t=e.type,r=e.event,a="click"===t&&"altKey"===d?(0,uK.jh)(r):r.altKey;i({path:n,newTab:a}),o(n,{newTab:a})},onCreate:function(e){e.type===rN.Tv.File&&i({path:e.path})},multiselectModifierKey:d,onConflicts:function(e){return r({type:"conflicts",data:e})},onDeleteNodes:function(e){return r({type:"deleteNode",data:e})},onContextMenu:function(e,n){return m(e,{command:E(n,R)})},autocomplete:f,localCacheKey:h?e+":sidebar":void 0}),I=(0,u3.O)(),(0,en.useEffect)(function(){return R.setFileStatus(I)},[R,I]),T=(0,ec.Y_)(),(0,en.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:if(null===e)return R.select(null),[2];return[4,R.select({path:e,type:rN.Tv.File})];case 1:if(n.sent(),T.current!==e)return[2];return R.scrollToPath(e),[2]}})})).apply(this,arguments)}return e(T.current),T.subscribe(e)},[T,R]),{filetree:R,activeModal:t,closeModal:function(){return r(null)}}),D=G.filetree,P=G.activeModal,B=G.closeModal,U=(0,ne.HQ)();return(0,en.useEffect)(function(){return D.setPresenceState(U.current),U.subscribe(D.setPresenceState)},[D,U]),(0,K.BX)(dU,{value:D,children:[(0,K.tZ)(pB,{}),(0,K.BX)(eC.u,{isOpen:!!P,onRequestClose:B,children:[(null==P?void 0:P.type)==="conflicts"?(0,K.tZ)(sr.Z,{paths:P.data.conflicts.map(function(e){return e.path}),onCancel:B,onConfirm:function(){var e=P.data;"move"===e.type?D.move({nodes:e.nodes,to:e.to,overwrite:!0}):D.upload({files:e.files,parentPath:e.to,overwrite:!0}),B()}}):null,(null==P?void 0:P.type)==="deleteNode"?(0,K.tZ)(c7.Z,(0,e0._)((0,eL._)({},(0,so.B)(P.data.nodes)),{delete:function(){return P.data.confirm()},hideModal:B})):null]})]})}),pB=(0,en.memo)(function(){var e,n,t,r,i,o=s_(sU),a=(e=sS(sB),n=sS(sA),t=(0,c5.oj)(),r=(0,en.useRef)(null),(0,en.useEffect)(function(){if(r.current){var n=r.current.getBoundingClientRect().height;if(t){e({height:n,sections:[{id:E.Files,percent:0},{id:E.Kaboom,percent:60},{id:E.Dock,percent:40}]});return}e({height:n,sections:[{id:E.Files,percent:60},{id:E.Dock,percent:40}]})}},[e,t]),i=(0,c6.Z)(function(e){e&&n(e.height)},{wait:100,type:"debounce"}),(0,aQ.l)(i,r)),l=(0,se.Z)(ay.y.Sidepane),c=(0,si.Z)().isTutorial,s=o[o.length-1];return(0,K.BX)(ei.G,{innerRef:c?null:l,css:pG.container,children:[(0,K.tZ)(ei.G,{css:pG.header,children:(0,K.tZ)(sx,{})}),(0,K.tZ)(ei.G,{css:pG.content,innerRef:a,children:o.map(function(e,n){return(0,K.tZ)(pE,{id:e,resizable:e!==s,border:0!==n},e)})}),(0,K.tZ)(pD,{})]})}),pU={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,ny.l2)({cmdOrCtrl:!0,shift:!0,key:"b"})},pA=(0,tA.$)(["width","visibility"]),pL=pA.cssVars,pO=pA.styleTokens,pX=(0,$.iv)([eo.l0.height("100%"),eo.l0.position.absolute,eo.l0.top(0),eo.l0.left(0),eo.l0.flex.row,eo.l0.flex.growAndShrink(1),eo.l0.overflow("auto"),{width:pO.width,visibility:pO.visibility}]),pM=(0,en.memo)(function(){var e=(0,en.useRef)(null),n=oH();return(0,tU.j)(e,n.width,function(e){return(0,ea._)({},pL.width,e+"px")}),(0,tU.j)(e,n.isOpen,function(e){return(0,ea._)({},pL.visibility,e?"visible":"hidden")}),(0,K.BX)(K.HY,{children:[(0,K.tZ)(sE,{children:(0,K.tZ)(ei.G,{css:pX,innerRef:e,children:(0,K.tZ)(pP,{})})}),(0,K.tZ)(c8,{})]})}),pz=t(83783);function pW(){var e=(0,eO._)(["\n  fragment ReplEnvironmentDekstopUserLayoutsUserWorkspaceLayout on UserWorkspaceLayout {\n    id\n    name\n    state\n  }\n"]);return pW=function(){return e},e}function pN(){var e=(0,eO._)(["\n  fragment ReplEnvironmentDekstopUserLayoutsCurrentUser on CurrentUser {\n    id\n    workspaceLayouts {\n      ...ReplEnvironmentDekstopUserLayoutsUserWorkspaceLayout\n    }\n  }\n  ","\n"]);return pN=function(){return e},e}function pj(){var e=(0,eO._)(["\n  query ReplEnvironmentDekstopUserLayouts {\n    currentUser {\n      ...ReplEnvironmentDekstopUserLayoutsCurrentUser\n    }\n  }\n  ","\n"]);return pj=function(){return e},e}function pF(){var e=(0,eO._)(["\n  mutation ReplEnvironmentDekstopCreateUserLayout(\n    $input: CreateUserWorkspaceLayoutInput!\n  ) {\n    createUserWorkspaceLayout(input: $input) {\n      ... on UserWorkspaceLayout {\n        ...ReplEnvironmentDekstopUserLayoutsUserWorkspaceLayout\n      }\n    }\n  }\n  ","\n"]);return pF=function(){return e},e}function pV(){var e=(0,eO._)(["\n  mutation ReplEnvironmentDekstopUpdateUserLayout(\n    $input: UpdateUserWorkspaceLayoutInput!\n  ) {\n    updateUserWorkspaceLayout(input: $input) {\n      ... on UserWorkspaceLayout {\n        ...ReplEnvironmentDekstopUserLayoutsUserWorkspaceLayout\n      }\n    }\n  }\n  ","\n"]);return pV=function(){return e},e}function pH(){var e=(0,eO._)(["\n  mutation ReplEnvironmentDekstopDeleteUpdateUserLayout(\n    $input: DeleteUserWorkspaceLayoutInput!\n  ) {\n    deleteUserWorkspaceLayout(input: $input) {\n      ... on CurrentUser {\n        id\n        workspaceLayouts {\n          id\n        }\n      }\n    }\n  }\n"]);return pH=function(){return e},e}var pY={},pq=(0,eX.Ps)(pW()),pJ=(0,eX.Ps)(pN(),pq),pK=(0,eX.Ps)(pj(),pJ),p$=(0,eX.Ps)(pF(),pq),pQ=(0,eX.Ps)(pV(),pq),p0=(0,eX.Ps)(pH()),p1=t(45123);function p2(){var e=(0,J._)((0,en.useState)(!1),2),n=e[0],t=e[1],r=(0,ed.Z)(),i=(0,el.Z)(),o=i.dotReplit,a=i.fs,l=ii(on),c=(0,nR.T)(),s=(0,nE.Gn)("isLayoutStacked").preferences.isLayoutStacked,u=(0,nI.cR)();return{reset:(0,en.useCallback)((0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return t(!0),[4,(0,p1.W)({fs:a,dotReplit:o})];case 1:return e=n.sent().entrypoint,t(!0),l({replId:r,isStacked:s,isHTML:c,isExtension:u,entrypoint:e}),[2]}})}),[r,a,o,l,s,c,u]),reseting:n}}var p4=lO.Dy.String();lO.Dy.String();var p3=lO.Dy.Object({width:lO.Dy.Number(),height:lO.Dy.Number()}),p8=lO.Dy.Object({x:lO.Dy.Number(),y:lO.Dy.Number()}),p5=lO.Dy.Intersect([p8,p3]),p6=lO.Dy.Object({top:lO.Dy.Number(),bottom:lO.Dy.Number(),left:lO.Dy.Number(),right:lO.Dy.Number()}),p7=lO.Dy.Object({id:lO.Dy.String(),type:lO.Dy.Literal("paneGroup"),panes:lO.Dy.Array(p4),percent:lO.Dy.Number(),activeIndex:lO.Dy.Number()}),p9=lO.Dy.Object({id:lO.Dy.String(),type:lO.Dy.Literal("floatingPaneGroup"),panes:lO.Dy.Array(p4),activeIndex:lO.Dy.Number(),rect:p5}),fe=lO.Dy.Recursive(function(e){return lO.Dy.Object({type:lO.Dy.Literal("split"),stacked:lO.Dy.Boolean(),children:lO.Dy.Array(lO.Dy.Union([p7,e])),percent:lO.Dy.Number()})});lO.Dy.Union([p7,fe]);var fn=lO.Dy.Object({tiling:lO.Dy.Union([fe,p7,lO.Dy.Null()]),floating:lO.Dy.Array(p9)});lO.Dy.Union([lO.Dy.Literal("left"),lO.Dy.Literal("right")]),lO.Dy.Object({inset:lO.Dy.Optional(p6),size:p3,gap:lO.Dy.Number(),headerHeight:lO.Dy.Number()});var ft=lO.Dy.Union([lO.Dy.Literal("above"),lO.Dy.Literal("below"),lO.Dy.Literal("leftOf"),lO.Dy.Literal("rightOf")]);lO.Dy.Union([ft,lO.Dy.Literal("replace")]),lO.Dy.Union([lO.Dy.Literal("up"),lO.Dy.Literal("left"),lO.Dy.Literal("right"),lO.Dy.Literal("down")]);var fr=lO.Dy.Number({minimum:0,exclusiveMaximum:100}),fi=lO.Dy.Object({sidebarPercent:lO.Dy.Optional(fr),layout:fn,data:lO.Dy.Record(lO.Dy.String(),lO.Dy.Object({type:lO.Dy.String()}))});function fo(e,n){var t=null;try{t=lz.B4.Decode(fi,e)}catch(e){}if(null===t)return null;var r={layout:t.layout,data:{},type:"saved",sidebarPercent:null!==(c=t.sidebarPercent)&&void 0!==c?c:15},i=new Set,o=!0,a=!1,l=void 0;try{for(var c,s,u=Object.entries(t.data)[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=(0,J._)(s.value,2),p=d[0],f=d[1],h=n(f.type,f);h?r.data[p]=h:i.add(p)}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return(0,n9.Uy)(r,function(e){var n=!0,t=!1,r=void 0;try{for(var o,a=i[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;ry(e.layout,l)}}catch(e){t=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}var c=!0,s=!1,u=void 0;try{for(var d,p=Object.entries(e.data)[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=(0,J._)(d.value,2),h=f[0],m=f[1];"commands"!==m.type&&("codeEditor"!==m.type||m.data.path)||(delete e.data[h],ry(e.layout,h))}}catch(e){s=!0,u=e}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}})}var fa={root:[nt.gU.filledAndOutlined,eo.l0.borderRadius("full"),eo.l0.center,eo.l0.width(20),eo.l0.height(20)],selected:[eo.l0.borderRadius("full"),eo.l0.width(12),eo.l0.height(12),eo.l0.backgroundColor.accentPrimaryDefault]};function fl(e){return(0,K.tZ)(ei.G,{css:fa.root,children:e.selected?(0,K.tZ)(ei.G,{css:fa.selected}):null})}var fc=[eo.l0.align.center,eo.l0.flex.row,eo.l0.height(32),eo.l0.textAlign.left,eo.l0.width("100%"),eo.l0.position.relative],fs=[eo.l0.reset.button,nt.gU.nofill,eo.l0.rowWithGap(8),eo.l0.cursor.pointer,eo.l0.textAlign.left,eo.l0.align.center,eo.l0.borderRadius(0),eo.l0.px(8)],fu=(0,e4.X)({root:[fs,fc]});function fd(e){var n=e.onClick,t=e.selected,r=p2(),i=r.reset,o=r.reseting;return(0,K.BX)(ei.G,{disabled:o,tag:"button",css:fu.root,onClick:function(){i(),n()},children:[(0,K.tZ)(fl,{selected:t}),(0,K.tZ)(eE.xv,{children:"Default"})]})}var fp=(0,tA.$)(["fontStyle"]),ff=fp.cssVars,fh=fp.styleTokens,fm=(0,e4.X)({root:fc,content:[fs,eo.l0.flex.growAndShrink(1),eo.l0.position.relative,eo.l0.height("100%"),{fontStyle:fh.fontStyle}],text:[eo.l0.flex.growAndShrink(1)],right:[eo.l0.position.absolute,eo.l0.height("100%"),eo.l0.right(0),eo.l0.pr(4),eo.l0.rowWithGap(4),eo.l0.align.center]});function fv(e){var n,t,r,i,o,a,l,c,s=e.layout,u=e.selected,d=e.onClick,p=e.onDelete,f=(r=(t=(0,J._)((n=(0,eL._)({},pY,void 0),ez.D(pQ,n)),2))[0],i=t[1].loading,o=io(ra),{loading:i,update:(0,en.useCallback)(function(e){r({variables:{input:{id:e,state:o()}}})},[r,o])}),h=f.update,m=f.loading,v=(c=(l=(0,J._)((a=(0,eL._)({},pY,{onCompleted:function(e){"CurrentUser"===e.deleteUserWorkspaceLayout.__typename&&p()}}),ez.D(p0,a)),2))[0],{loading:l[1].loading,deleteLayout:(0,en.useCallback)(function(e){c({variables:{input:{id:e}}})},[c])}).deleteLayout,g=(0,nw.Se)(),y=(0,en.useMemo)(function(){return fo(s.state,g.decode)},[s.state,g]),b=it(ra),x=ii(rp),Z=(0,en.useMemo)(function(){return!!u&&!(to()(null==y?void 0:y.data,b.data)&&to()(null==y?void 0:y.layout,b.layout))},[b,y,u]);return y?(0,K.BX)(ei.G,{css:fm.root,style:(0,ea._)({},ff.fontStyle,Z?"italic":"normal"),children:[(0,K.BX)(ei.G,{tag:"button",css:fm.content,onClick:function(){x(y),d()},children:[(0,K.tZ)(fl,{selected:u}),(0,K.tZ)(eE.xv,{multiline:!1,css:fm.text,children:s.name})]}),(0,K.BX)(ei.G,{css:fm.right,children:[Z?(0,K.tZ)(ab.hU,{disabled:m,alt:"Save layout",onClick:function(){return h(s.id)},tooltipHidden:!0,children:m?(0,K.tZ)(eR.Z,{}):(0,K.tZ)(aC.Z,{})}):null,(0,K.tZ)(ab.hU,{alt:"Delete layout",onClick:function(){return v(s.id)},tooltipHidden:!0,children:(0,K.tZ)(ds.Z,{})})]})]}):null}var fg=(0,e4.X)({root:[eo.l0.colWithGap(8),eo.l0.p(8)],name:[eo.l0.colWithGap(4)]});function fy(e){var n,t,r,i,o,a=e.onCreate,l=e.onCancel,c=(r=(t=(0,J._)((n=(0,eL._)({},pY,{onCompleted:function(e){var n="UserWorkspaceLayout"===e.createUserWorkspaceLayout.__typename?e.createUserWorkspaceLayout:null;n&&a(n)}}),ez.D(p$,n)),2))[0],i=t[1].loading,o=io(ra),{loading:i,create:(0,en.useCallback)(function(e){r({variables:{input:{name:e,state:o()}}})},[r,o])}),s=c.create,u=c.loading,d=(0,J._)((0,en.useState)(""),2),p=d[0],f=d[1],h=(0,en.useId)(),m=(0,es.Z)(l),v=(0,dW.Z)(function(){return m.current()},[m]);return(0,K.BX)(ei.G,{innerRef:v,css:fg.root,tag:"form",onSubmit:function(e){e.preventDefault(),p&&!u&&s(p)},children:[(0,K.BX)(ei.G,{css:fg.name,children:[(0,K.tZ)(ei.G,{tag:"label",htmlFor:h,children:(0,K.tZ)(eE.xv,{variant:"small",color:"dimmer",children:"Save current layout as:"})}),(0,K.tZ)(pf.II,{autoFocus:!0,placeholder:"Layout name",id:h,value:p,onChange:function(e){return f(e.currentTarget.value)},onKeyDown:function(e){"Escape"===e.key&&l()}})]}),(0,K.tZ)(e5.zx,{type:"submit",text:"Save",colorway:"primary"})]})}var fb=(0,tA.$)(["color"]),fx=fb.cssVars,fZ=fb.styleTokens,fw=(0,e4.X)({root:[eo.l0.reset.button,nt.gU.nofill,eo.l0.height(32),eo.l0.pl(4),eo.l0.pr(2),eo.l0.align.center,eo.l0.cursor.pointer,eo.l0.borderRadius(6),eo.l0.rowWithGap(2),(I={},(0,ea._)(I,fx.color,eo.TV.foregroundDimmer),(0,ea._)(I,"color",fZ.color),(0,ea._)(I,"&:hover",(0,ea._)({},fx.color,eo.TV.foregroundDefault)),I)],popover:[eo.l0.p(8)],header:[eo.l0.p(4),eo.l0.rowWithGap(4)]});function fk(){var e=(0,J._)((0,en.useState)(!1),2),n=e[0],t=e[1],r=(0,J._)((0,en.useState)(null),2),i=r[0],o=r[1];return(0,K.BX)(a4.xo,{isOpen:n,onOpenChange:t,label:"Workspace",noArrow:!0,placement:"bottom left",children:[function(e){var n=e.ref,t=(0,aq._)(e,["ref"]);return(0,K.BX)(ei.G,(0,e0._)((0,eL._)({tag:"button",innerRef:n,css:fw.root},t),{children:[(0,K.tZ)(pz.Z,{}),(0,K.tZ)(a3.Z,{size:12})]}))},(0,K.tZ)(fS,{selectedLayout:i,setSelectedLayout:o})]})}var fC=[eo.l0.align.center,eo.l0.flex.row,eo.l0.height(32),eo.l0.textAlign.left,eo.l0.width("100%"),eo.l0.position.relative],f_=(0,e4.X)({root:[eo.l0.width(220)],header:[fC,nt.gU.nofill,eo.l0.rowWithGap(8),eo.l0.px(8),eo.l0.reset.button,eo.l0.cursor.pointer,{borderRadius:"8px 8px 0 0"}],footer:[fC,nt.gU.nofill,eo.l0.rowWithGap(8),eo.l0.px(8),eo.l0.reset.button,eo.l0.cursor.pointer,eo.l0.border({direction:"bottom",color:eo.TV.outlineDimmer}),{borderRadius:"0 0 8px 8px"}],divider:[eo.l0.height(1),{margin:4,backgroundColor:eo.TV.outlineDimmest}],text:[eo.l0.flex.growAndShrink(1)],loading:[eo.l0.p(32),eo.l0.center]});function fS(e){var n,t,r,i,o,a,l=e.selectedLayout,c=e.setSelectedLayout,s=(0,ng.gf)(pU.id),u=oH(),d=(0,lC.Z)(u.isOpen),p=(i=(n=(0,eL._)({},pY,{ssr:!1,fetchPolicy:"cache-and-network"}),r=eM.a(pK,n)).data,o=r.loading,a=r.client,{loading:o,layouts:null==i?void 0:null===(t=i.currentUser)||void 0===t?void 0:t.workspaceLayouts,addLayout:function(e){i&&a.writeQuery({query:pK,data:(0,n9.Uy)(i,function(n){n.currentUser&&n.currentUser.workspaceLayouts.push(e)})})}}),f=p.layouts,h=p.loading,m=p.addLayout,v=[{type:"toggleSidebar"},{type:"defaultLayout"}].concat((0,em._)((null!=f?f:[]).map(function(e){return{type:"layout",layout:e}})),[{type:"createLayout"}]),g=(0,J._)((0,en.useState)(!1),2),y=g[0],b=g[1],x=u.toggle;return(0,ng.Il)(function(){return[pU.id,function(){return x()}]},[x]),(0,K.tZ)(ei.G,{css:f_.root,role:"menu",tabIndex:-1,children:h&&!f?(0,K.tZ)(ei.G,{css:f_.loading,children:(0,K.tZ)(eR.Z,{})}):(0,K.tZ)(K.HY,{children:v.map(function(e,n){if("divider"===e.type)return(0,K.tZ)(ei.G,{css:f_.divider},e.type+n);if("toggleSidebar"===e.type)return(0,K.BX)(ei.G,{tag:"button",css:f_.header,onClick:function(){return x()},children:[(0,K.tZ)(ox.Z,{}),(0,K.BX)(eE.xv,{css:f_.text,children:[d?"Close":"Open"," Sidebar"]}),s?(0,K.tZ)(ng.bM,{small:!0,keyCombo:s}):null]},e.type);if("defaultLayout"===e.type)return(0,K.tZ)(fd,{onClick:function(){return c(null)},selected:null===l},e.type);if("layout"===e.type){var t=e.layout;return(0,K.tZ)(fv,{layout:t,onClick:function(){return c(t.id)},onDelete:function(){t.id===l&&c(null)},selected:t.id===l},t.id)}return y?(0,K.tZ)(fy,{onCancel:function(){b(!1)},onCreate:function(e){m(e),b(!1),c(e.id)}},e.type):(0,K.BX)(ei.G,{tag:"button",css:f_.footer,onClick:function(){return b(!0)},children:[(0,K.tZ)(lU.Z,{}),(0,K.tZ)(eE.xv,{css:f_.text,children:"Create a new layout..."}),(0,K.tZ)(sZ.Z,{size:12})]},e.type)})})})}var fE=(0,e4.X)({root:[eo.l0.rowWithGap(8),eo.l0.align.center]});function fR(e){return(0,K.BX)(ei.G,{css:fE.root,children:[(0,K.tZ)(eE.xv,{multiline:!1,children:e.text}),(0,K.tZ)(ng.bM,{small:!0,keyCombo:e.shortcut})]})}var fI=(0,e4.X)({root:[eo.l0.reset.button,nt.gU.nofill,eo.l0.height(32),eo.l0.width(32),eo.l0.center,eo.l0.cursor.pointer,eo.l0.borderRadius(6),{"& > div":{opacity:.75,transition:"opacity 0.1s"},"&:hover > div":{opacity:1}}],iconContainer:[eo.l0.flex.row,eo.l0.align.center,{height:14,width:16,border:"1px solid ".concat(eo.TV.foregroundDefault),borderRadius:eo.TV.borderRadius2}],icon:[{height:"100%",borderRight:"1px solid ".concat(eo.TV.foregroundDefault),transition:"0.1s ease-out width, 0.1s background-color"}]});function fT(){var e=oH(),n=(0,lC.Z)(e.isOpen),t=e.toggle;(0,ng.Il)(function(){return[pU.id,function(){return t()}]},[t]);var r=(0,ng.gf)(pU.id),i=(n?"Close":"Open")+" sidebar",o=(0,J._)((0,en.useState)(!1),2),a=o[0],l=o[1],c=r?(0,K.tZ)(fR,{shortcut:r,text:i}):i;return(0,K.tZ)(e2.u,{tooltip:c,placement:"bottom-start",children:(0,K.tZ)(ei.G,{tag:"button",alt:i,css:fI.root,"aria-label":"Toggle sidebar","aria-expanded":n,onClick:function(){t(),l(!1)},onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},children:(0,K.BX)(ei.G,{css:fI.iconContainer,children:[(0,K.tZ)(ei.G,{css:fI.icon,style:{width:n&&!a||!n&&a?"40%":"20%",backgroundColor:n?eo.TV.foregroundDefault:"transparent"}}),(0,K.tZ)(ei.G,{})]})})})}function fG(e){var n=e.repl,t=e.currentUser,r=(0,lk.Z)(),i=oL(),o=(0,er.P5)({controlName:"flag-user-layouts",logFlagToAnalytics:!1});return(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.align.center,eo.l0.justify.start],children:[(0,K.tZ)(lw.Z,{}),(0,K.tZ)(ei.G,{css:eo.l0.noDragRegion,children:o?(0,K.tZ)(fk,{}):(0,K.tZ)(fT,{})}),(0,K.tZ)(ei.G,{css:eo.l0.noDragRegion,children:r?(0,K.tZ)(lZ,{}):(0,K.tZ)(la,{})}),(0,K.tZ)(ei.G,{css:[eo.l0.flex.shrink(1),eo.l0.flex.row,eo.l0.maxWidth(530),eo.l0.align.center,{"& > span":[eo.l0.viewStyle,eo.l0.flex.shrink(1)]},eo.l0.noDragRegion],children:(0,K.tZ)(lR,{repl:n,onDeployClick:function(){i({pane:{type:"deployments"}})}})}),(0,K.tZ)(ei.G,{css:eo.l0.noDragRegion,children:(0,K.tZ)(cW,{repl:n,currentUser:t})}),(null==t?void 0:t.isFirewallMode)?(0,K.tZ)(ei.G,{css:[eo.l0.noDragRegion,eo.l0.pl(8)],children:(0,K.tZ)(aY.Z,{isWorkspace:!0})}):null]})}var fD=t(68553),fP=t(60561),fB=t(8279),fU="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651",fA="https://linkedin.com/sharing/share-offsite",fL=t(54085),fO=t(70002),fX=t(8300),fM=t(14264),fz=t(90409),fW=t(72720),fN=t(24607),fj=function(e){var n,t,r,i,o,a,l,c=e.lessonSlug,s=e.courseSlug,u=(0,ev.Z)().showConfirm;if(!c||!s)return null;var d=(0,fN.QW)(s),p=(0,fN.qv)(s,c);if(!p)return null;var f=p.ordinalLabel,h=(0,fN.tD)(d.socialSharingText,p),m="".concat(h," ").concat(d.sharableLink),v=(0,fL.Z)({text:h,url:d.sharableLink}),g=(n=({url:d.sharableLink}).url,"".concat(fA,"?url=").concat(encodeURIComponent(n))),y=(r=(t={url:d.sharableLink,hashtag:d.socialHashtag}).url,i=t.hashtag,o=t.redirectBackTo,(a=new URLSearchParams).append("href",r),o&&a.append("redirect_uri",o),i&&(i.startsWith("#")||(i="#".concat(i)),a.append("hashtag",i)),l=a.toString(),"".concat(fU,"&").concat(l)),b=[{url:v,icon:fz.Z,base:fL.c,cta:"Share on Twitter",color:fW.Z.brands.twitter},{url:g,icon:fM.Z,base:fA,cta:"",color:fW.Z.brands.linkedin},{url:y,icon:fX.Z,base:fU,cta:"",color:fW.Z.brands.facebook}];return(0,K.BX)(ei.G,{children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(16),eo.l0.align.center,eo.l0.pr(24)],children:[(0,K.tZ)(ei.G,{css:{fontSize:48},children:"\uD83E\uDD73"}),(0,K.BX)(eE.xv,{variant:"headerDefault",multiline:!1,children:["Congrats on completing ",f,"!"]})]}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",css:[eo.l0.py(12)],multiline:!1,children:"Share your progress"}),(0,K.BX)(ei.G,{css:[eo.l0.position.relative,eo.l0.borderRadius(8),eo.l0.backgroundColor.backgroundHigher,eo.l0.py(8),eo.l0.px(12)],children:[(0,K.tZ)(ei.G,{css:eo.l0.pr(16),children:m}),(0,K.tZ)(ab.hU,{css:[eo.l0.position.absolute,eo.l0.top(8),eo.l0.right(8)],alt:"Copy",size:18,tooltipHidden:!0,onClick:function(){u("Copied to clipboard!"),(0,u7.Z)(m),(0,fD.l)({action:"copied_share_text",lessonSlug:c,courseSlug:s,origin:"lesson_complete_modal"})},children:(0,K.tZ)(dr.Z,{size:16})})]}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(16),eo.l0.justify.center,eo.l0.pt(16),eo.l0.align.center],children:[(0,K.tZ)(fO.Z,{variant:"outlined",text:"Back to the learning hub",href:"/learn/".concat(s,"/hub")}),(0,K.tZ)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:b.map(function(e){var n=e.url,t=e.icon,r=e.base,i=e.cta,o=e.color;return(0,K.tZ)(e5.zx,{css:[{backgroundColor:o,color:"white"}],onClick:function(){window.open(n,"_blank"),(0,ep.j)(ep.U3.EXTERNAL_LINK_VIEWED,{url:r,placement:"lesson-complete-modal",campaign:s,lessonSlug:c})},text:i,iconLeft:(0,K.tZ)(t,{})},n)})})]})]})};function fF(){var e=(0,eO._)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return fF=function(){return e},e}function fV(){var e=(0,eO._)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return fV=function(){return e},e}var fH={},fY=(0,eX.Ps)(fF()),fq=(0,eX.Ps)(fV()),fJ=function(e){var n,t=e.lesson,r=(0,ev.Z)().showError,i=(0,fP.$0)().fireCircularBurstFrom,o=(0,en.useRef)(null),a=(0,cK.T)(),l=(0,J._)((0,en.useState)(!1),2),c=l[0],s=l[1],u=(0,J._)((n=(0,eL._)({},fH,{onError:function(){return r("Something went wrong")},onCompleted:function(e){var n,l;(null===(n=e.completeUserCourseLesson)||void 0===n?void 0:n.__typename)!=="UpdatedUserCourseLesson"?r((null===(l=e.completeUserCourseLesson)||void 0===l?void 0:l.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===t.id?(o.current&&!a&&i({element:o.current}),s(!0)):r("Something went wrong")}}),ez.D(fq,n)),2),d=u[0],p=u[1].loading;return(0,K.BX)(K.HY,{children:[null!==t.timeCompleted?(0,K.tZ)(e5.zx,{ref:o,disabled:!0,text:"Lesson completed \uD83C\uDF89",colorway:"primary"}):(0,K.tZ)(e5.zx,{iconLeft:p?(0,K.tZ)(eR.Z,{}):void 0,onClick:function(){(0,fD.l)({action:"completed",lessonSlug:t.lessonSlug,courseSlug:t.course.courseSlug}),d({variables:{input:{userLessonId:t.id}}})},text:p?"Verifying…":"Mark lesson as complete",colorway:"primary",css:[p&&fB.p.backgroundPulse()]}),(0,K.tZ)(eC.u,{isOpen:c,onRequestClose:function(){return s(!1)},children:(0,K.tZ)(fj,{lessonSlug:t.lessonSlug,courseSlug:t.course.courseSlug})})]})};function fK(e){var n,t=e.lesson,r=(n="tutorial",it((0,nb.Z)(function(){return(0,nT.cn)(function(e){return e(n0).find(function(t){return!t.isHidden&&e(t.data).type===n})})},[n]))),i=ii(ov);return r?(0,K.tZ)(fJ,{lesson:t}):(0,K.tZ)(e5.zx,{colorway:"primary",iconLeft:(0,K.tZ)(d6.Z,{}),text:"Show tutorial",onClick:function(){return i()}})}var f$=t(11707),fQ=t(80428),f0=t(86893);function f1(){var e=(0,eO._)(["\n  fragment WorkspaceHeaderComputeAlertCurrentUser on CurrentUser {\n    id\n    userSubscriptionType\n  }\n"]);return f1=function(){return e},e}function f2(){var e=(0,eO._)(["\n  fragment WorkspaceHeaderComputeAlertRepl on Repl {\n    id\n    owner {\n      __typename\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return f2=function(){return e},e}var f4=(0,eX.Ps)(f1()),f3=(0,eX.Ps)(f2());function f8(){var e=(0,eO._)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    isFirewallMode\n    ...WorkspaceHeaderComputeAlertCurrentUser\n  }\n  ","\n"]);return f8=function(){return e},e}function f5(){var e=(0,eO._)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    isAlwaysOn\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n    ...WorkspaceHeaderComputeAlertRepl\n  }\n  ","\n  ","\n"]);return f5=function(){return e},e}var f6=(0,eX.Ps)(f8(),f4),f7=(0,eX.Ps)(f5(),f$.s,f3);function f9(){var e=(0,eO._)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    hasSeenOldWorkspaceTour: tourSeen(name: "workspace-desktop-tour")\n    hasSeenOldSidebarTour: tourSeen(name: "workspace-desktop-sidebar-tour")\n  }\n']);return f9=function(){return e},e}function he(){var e=(0,eO._)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    lesson {\n      id\n    }\n  }\n"]);return he=function(){return e},e}var hn=(0,eX.Ps)(f9()),ht=(0,eX.Ps)(he()),hr=t(39244);function hi(){var e=(0,eO._)(['\n  fragment ReplEnvironmentDesktopCurrentUser on CurrentUser {\n    id\n    image\n    isFirewallMode\n    isAdmin: hasRole(role: ADMIN)\n    userSubscriptionType\n    hasAiPro\n    ...CrosisContextCurrentUser\n    editorPreferences {\n      ...CurrentUserPreferences\n    }\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    canMigrateRepls: gate(feature: "migrate2nix-killswitch")\n  }\n  ',"\n  ","\n  ","\n  ","\n  ","\n"]);return hi=function(){return e},e}function ho(){var e=(0,eO._)(["\n  fragment ReplEnvironmentDesktopRepl on Repl {\n    id\n    title\n    layoutState\n    description\n    hostedUrl: hostedUrl(dotty: true)\n    multiplayers {\n      id\n    }\n    currentUserPermissions {\n      containerWrite\n    }\n    origin {\n      id\n    }\n    language\n    config {\n      isVnc\n      isServer\n      isExtension\n    }\n    lesson {\n      id\n    }\n    rootOriginReplUrl\n    source {\n      release {\n        id\n      }\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return ho=function(){return e},e}var ha=(0,eX.Ps)(hi(),fQ.D,f0.wO,f6,hn,hr.z),hl=(0,eX.Ps)(ho(),fQ.C,f7);function hc(){var e=(0,eO._)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    isSubscribed\n    isFirewallMode\n    isExplorer: hasRole(role: EXPLORER)\n    url\n    username\n    image\n  }\n"]);return hc=function(){return e},e}function hs(){var e=(0,eO._)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    slug\n    url\n    workspaceCta\n    currentUserPermissions {\n      editMultiplayers\n      inviteGuests\n    }\n    owner {\n      ... on Team {\n        id\n        capabilities {\n          isEducationPlan\n        }\n      }\n      ... on User {\n        id\n      }\n    }\n    template {\n      id\n      isGroupProject\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    multiplayers {\n      id\n    }\n    hostingDeploymentPermissions {\n      canDeploy\n    }\n  }\n  ","\n"]);return hs=function(){return e},e}function hu(){var e=(0,eO._)(["\n  fragment ReplEnvironmentHeaderPropsRepl on Repl {\n    ...ReplEnvironmentDesktopRepl\n  }\n  ","\n"]);return hu=function(){return e},e}function hd(){var e=(0,eO._)(["\n  fragment ReplEnvironmentHeaderPropsCurrentUser on CurrentUser {\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    ...ReplEnvironmentDesktopCurrentUser\n  }\n  ","\n  ","\n"]);return hd=function(){return e},e}function hp(){var e=(0,eO._)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n        ...WorkspaceHeaderReplMetadataRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return hp=function(){return e},e}var hf={},hh=(0,eX.Ps)(hc()),hm=(0,eX.Ps)(hs(),fY);hu(),hd(),hr.z;var hv=(0,eX.Ps)(hp(),hm,f$.s,hh),hg=t(16362),hy=t(91173),hb=t(43667),hx=t(85986),hZ=t(5792),hw=t(18059),hk=t(89788),hC=t(4832),h_=t(60427),hS=t(37996),hE=t(14186),hR=t(7877),hI=t(40028),hT=(0,e4.X)({self:[eo.l0.position.relative,eo.l0.borderRadius(8,0,0,8)],dotWrapper:[eo.l0.position.absolute,eo.l0.top("-3px"),eo.l0.right("-3px"),eo.l0.width("10px"),eo.l0.height("10px"),eo.l0.borderRadius("full"),eo.l0.border({color:eo.TV.backgroundDefault,width:2})],dot:[eo.l0.width("100%"),eo.l0.height("100%"),eo.l0.borderRadius("full")]});function hG(e){var n=e.color;return(0,K.BX)(ei.G,{css:hT.self,children:[(0,K.tZ)(hR.Z,{}),(0,K.tZ)(ei.G,{tag:"span",css:hT.dotWrapper,children:(0,K.tZ)(ei.G,{tag:"span",css:hT.dot,style:{backgroundColor:n,boxShadow:"0 0 6px ".concat(n)}})})]})}var hD=(0,$.iv)([eo.l0.flex.growAndShrink(1),eo.l0.borderRadius(8,0,0,8),(0,ea._)({},eo.BC.max("tabletMin"),{"div span":[eo.l0.display.none],"div svg":[eo.l0.mr(0)]})]),hP=(0,$.iv)([hD,eo.l0.borderRadius(8)]),hB={base:{self:hD,loading:(0,$.iv)([hD,fB.p.backgroundPulse()])},rounded:{self:hP,loading:(0,$.iv)([hP,fB.p.backgroundPulse()])}};function hU(e){var n=e.text,t=e.icon,r=e.disabled,i=e.rounded,o=e.onClick,a=e.tooltip,l=e.loading,c=(0,K.tZ)(e5.zx,{text:n,iconLeft:t,css:hB[i?"rounded":"base"][l?"loading":"self"],disabled:r,onClick:o});return a?(0,K.tZ)(e2.u,{tooltip:a,children:c}):c}function hA(){var e,n,t=(0,h_.kW)(),r=(0,h_.Sl)((0,ed.Z)()).hostingTier,i=(0,h_.gg)(),o=i.isDeployableRepl,a=i.reason,l=!!r,c=void 0,s=!1,u=!1;switch(t){case hS.z.Ready:case hS.z.Suspended:case hS.z.ProcessingLifecycleCommand:e="Deploy",l?(n=(0,K.tZ)(hG,{color:eo.TV.blueStronger}),c="Deploy active hosting tier"):n=(0,K.tZ)(hR.Z,{});break;case hS.z.Loading:e="Deploy",n=(0,K.tZ)(hR.Z,{}),s=!0,u=!0;break;case hS.z.Preparing:e="Preparing",n=(0,K.tZ)(hR.Z,{}),s=!0,u=!0;break;case hS.z.Deploying:e="Deploying",n=(0,K.tZ)(eR.Z,{}),u=!0;break;default:(0,hI.Z)(t)}o||(c=a,s=!0);var d=oL();return(0,K.tZ)(hU,{text:e,icon:n,onClick:function(){d({pane:{type:"deployments"}}),t!==hS.z.Ready||l||(0,ep.j)(ep.U3.DEPLOY_PROJECT_SELECTED,{source:"deploy_button"})},tooltip:c,disabled:s,loading:u,rounded:!0})}var hL={self:eo.l0.rowWithGap(1),open:(0,$.iv)([eo.l0.borderRadius(0,8,8,0),eo.l0.px(4)])};function hO(){var e,n,t,r=(0,h_.kW)(),i=(0,h_.H7)(),o=(0,h_.ev)(),a=(0,h_._U)(),l=(0,h_.XA)(),c=oL(),s=(0,ev.Z)().showError,u=(e=(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:if(r===hS.z.Deploying||r===hS.z.Suspended||r===hS.z.ProcessingLifecycleCommand||r===hS.z.Preparing)return c({pane:{type:"deployments"}}),[2];if(p&&(f(void 0),p===eT.Fe.Failed)||o)return c({pane:{type:"deployments",data:{view:hE.k.Deployment}}}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,l({subdomain:i})];case 2:return e.sent(),[3,4];case 3:return s(e.sent().message),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),d=(0,J._)((0,en.useState)(void 0),2),p=d[0],f=d[1];(0,en.useEffect)(function(){if(a&&"HostingBuildDeployStatusAction"===a.__typename)switch(a.status){case eT.Fe.Success:case eT.Fe.Failed:f(a.status)}},[a]),(0,en.useEffect)(function(){r===hS.z.Deploying&&f(void 0)},[r]);var h=void 0,m=!1,v=!1;switch(r){case hS.z.Ready:n="Redeploy",t=(0,K.tZ)(hR.Z,{}),p&&(p===eT.Fe.Success?(t=(0,K.tZ)(hG,{color:eo.TV.accentPositiveDefault}),h="Success"):(t=(0,K.tZ)(hG,{color:eo.TV.accentNegativeDefault}),h="An error occurred"));break;case hS.z.Suspended:n="Redeploy",t=(0,K.tZ)(hG,{color:eo.TV.greyDefault}),h="Deployment suspended";break;case hS.z.Loading:n="Redeploy",t=(0,K.tZ)(hR.Z,{}),m=!0,v=!0;break;case hS.z.ProcessingLifecycleCommand:n="Redeploy",t=(0,K.tZ)(hG,{color:eo.TV.orangeStronger}),v=!0,h="Updating deployment";break;case hS.z.Preparing:n="Preparing",t=(0,K.tZ)(eR.Z,{}),v=!0,m=!0;break;case hS.z.Deploying:n="Deploying",t=(0,K.tZ)(eR.Z,{}),v=!0;break;default:(0,hI.Z)(r)}return o&&(n="Error",t=(0,K.tZ)(hG,{color:eo.TV.accentNegativeDefault}),h=o),(0,K.BX)(ei.G,{css:hL.self,children:[(0,K.tZ)(hU,{text:n,icon:t,tooltip:h,onClick:u,disabled:m,loading:v}),(0,K.tZ)(e2.u,{tooltip:"Open Deployments pane",children:(0,K.tZ)(e5.zx,{text:"",iconLeft:(0,K.tZ)(a3.Z,{}),onClick:function(){c({pane:{type:"deployments"}})},css:hL.open})})]})}function hX(){var e=(0,h_.hn)(),n=(0,h_.$y)();return e&&n?(0,K.tZ)(hO,{}):(0,K.tZ)(hA,{})}var hM=t(23896),hz=t(20399),hW=t(12130),hN=t(37229),hj=t(52191),hF=function(e){var n=e.hideModal,t=(0,el.Z)().dotReplit,r=(0,ev.Z)().showError,i=(0,J._)((0,en.useState)(!1),2),o=i[0],a=i[1],l=(0,J._)((0,en.useState)(""),2),c=l[0],s=l[1],u=oM(),d=(0,en.useCallback)(function(){return r("Failed to update run command, please try again or contact support")},[r]),p=(0,J._)((0,en.useState)(null),2),f=p[0],h=p[1];(0,en.useEffect)(function(){var e;(e=(0,nx._)(function(){var e,n;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return[4,t.getConfig()];case 1:var i;return(n=r.sent()).errorMessage?h({error:n.error,errorMessage:n.errorMessage}):h(null),s((i=null==n?void 0:null===(e=n.config)||void 0===e?void 0:e.run)&&i.args?(i.args&&i.args.length>=3&&"sh"===i.args[0]&&"-c"===i.args[1]?i.args.slice(2):i.args).join(" "):""),[2]}})}),function(){return e.apply(this,arguments)})()},[t]);var m=(0,en.useCallback)((0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),e=c?(0,hN.KQ)(c):(0,hN.xz)("run"),a(!0),[4,t.updateDotReplit([e])];case 1:return r.sent(),n(),[3,4];case 2:return r.sent(),d(),[3,4];case 3:return a(!1),[7];case 4:return[2]}})}),[c,d,t,n]);return(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8),eo.l0.p(2),o&&eo.l0.cursor.progress],children:[(0,K.tZ)(eE.h4,{level:1,variant:"text",css:[eo.l0.fontWeight.normal,eo.l0.color.foregroundDimmer],children:"Run Command"}),f?(0,K.tZ)(eE.xv,{multiline:!1,children:f.errorMessage}):(0,K.BX)(K.HY,{children:[(0,K.tZ)(pf.II,{value:c,onChange:function(e){return s(e.target.value)},spellCheck:!1,placeholder:"Command to run"}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.mt(12)],children:[(0,K.tZ)(e5.zx,{onClick:function(){n(),u({path:hj.Z})},text:"Advanced"}),(0,K.tZ)(ei.G,{css:eo.l0.flex.grow(1)}),(0,K.tZ)(e5.zx,{colorway:"blue",text:"Save",onClick:m})]})]})]})};(o=T||(T={}))[o.Closed=0]="Closed",o[o.MenuOpen=1]="MenuOpen",o[o.EditorOpen=2]="EditorOpen";var hV=(0,$.iv)([eo.l0.position.relative,eo.l0.noDragRegion,(0,ea._)({},eo.BC.min("tabletMin"),[eo.l0.position.absolute,eo.l0.right(-28)])]),hH=(0,$.iv)([eo.l0.color.foregroundDimmest,eo.l0.height(32),eo.l0.borderRadius(6)]),hY=(0,$.iv)([eo.l0.maxWidth(300),eo.l0.backgroundColor.backgroundHigher,eo.l0.borderRadius(8)]),hq=(0,$.iv)([eo.l0.borderRadius(6),eo.l0.overflow("hidden")]);function hJ(e){var n=e.runner,t=e.shortcut,r=(0,ec.R3)(),i=it(th),o=(0,hM.T)(),a=(0,en.useMemo)(function(){return(0,hW.Z)(o||null,i.map(function(e){return e.filePath||""}),r,(null==o?void 0:o.entrypoint)||"")},[r,i,o]),l=(0,J._)((0,en.useState)(void 0),2),c=l[0],s=l[1];(0,en.useEffect)(function(){(a.length>0&&!c||c&&!a.find(function(e){return e.runner.id===c.runner.id&&e.filePath===c.filePath}))&&s(a[0])},[a]);var u=(0,J._)((0,en.useState)(0),2),d=u[0],p=u[1],f=(0,aZ.e)(ay.y.Run),h=[];return h.push.apply(h,(0,em._)(a.map(function(e,n){return(0,K.tZ)(hz.ck,{"aria-label":"Run ".concat(e.filePath," (").concat(e.runner.name,")"),children:(0,K.tZ)(ei.G,{css:eo.l0.rowWithGap(8),children:(0,K.BX)(eE.xv,{multiline:!1,children:["Run ",e.filePath,"\xa0(",e.runner.name,")"]})})},n)}))),h.push((0,K.tZ)(hz.ck,{"aria-label":"custom",children:(0,K.tZ)(ei.G,{css:eo.l0.rowWithGap(8),children:(0,K.tZ)(eE.xv,{multiline:!1,children:"Custom..."})})},"custom")),(0,K.BX)(ei.G,{css:eo.l0.flex.row,children:[(0,K.BX)(a4.xo,{onOpenChange:function(e){p(e?1:0)},isOpen:0!==d,label:"Run Options",noArrow:!0,children:[(0,K.tZ)(aw.ZP,{shortcut:t,runner:n,runConfig:c,disableTooltip:null==f?void 0:f.isActive}),(0,K.BX)(ei.G,{css:hY,children:[1===d&&(0,K.tZ)(hz.v2,{css:hq,label:"Configure Repl run",onAction:function(e){if("custom"===e)p(2);else{p(0);var t=a[Number(e)];s(t),n.run(t)}},children:h}),2===d&&(0,K.tZ)(hF,{hideModal:function(){return p(0)}})]})]}),(0,K.tZ)(ei.G,{css:hV,children:(0,K.tZ)(ab.hU,{alt:"Configure Repl run",onClick:function(){p(function(e){return 0===e?1:0})},css:hH,children:(0,K.tZ)(a3.Z,{})})})]})}var hK=t(55846),h$=t(19229);function hQ(e,n){var t=n.onReceiveAnnotationUpdate,r=void 0===t?function(){}:t,i=(0,ev.Z)().showError,o=(0,J._)((0,en.useState)(null),2),a=o[0],l=o[1],c=(0,hK.xT)({variables:{replId:e}}),s=function(){var e,n=null===(e=c.data)||void 0===e?void 0:e.currentUser;return n?{user:{__typename:"User",id:n.id,username:n.username,fullName:n.fullName,image:n.image}}:null},u=function(n,t){var r=n.readQuery({query:hK.yi,variables:{replId:e}});if(!r)throw Error("expected data");if("Repl"!==r.repl.__typename)throw Error("expected repl");var i=[],o=r.repl.annotationAnchors,a=o.findIndex(function(e){return e.id===t.id});i=-1===a?(0,em._)(o).concat([t]):(0,em._)(o.slice(0,a)).concat([t],(0,em._)(o.slice(a+1))),n.writeQuery({query:hK.yi,variables:{replId:e},data:(0,e0._)((0,eL._)({},r),{repl:(0,e0._)((0,eL._)({},r.repl),{annotationAnchors:i})})})},d=(0,J._)((0,hK.AS)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return i(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.createAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&u(e,r))}}),1)[0],p=(0,J._)((0,hK.gE)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return i(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.createAnnotationMessage;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&u(e,r))}}),1)[0],f=(0,J._)((0,hK.Rp)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors){n.errors.forEach(function(e){return i(e.message)});return}var t,r=null===(t=n.data)||void 0===t?void 0:t.updateAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&u(e,r))}}),1)[0],h=(0,J._)((0,h$.n)(),1)[0],m=(0,J._)((0,hK.Hj)(),1)[0];(0,hK.Tt)({variables:{replId:e},onData:function(e){var n=e.data.data,t=e.client,i=null==n?void 0:n.updatedAnnotation;i&&(u(t,i),r(i))}});var v=(0,J._)((0,en.useState)([]),2),g=v[0],y=v[1];(0,en.useEffect)(function(){var e,n=[];(null===(e=c.data)||void 0===e?void 0:e.repl.__typename)==="Repl"&&n.push.apply(n,(0,em._)(c.data.repl.annotationAnchors)),a&&n.push((0,e0._)((0,eL._)({},a),{isGeneral:!!a.isGeneral,messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),y(n)},[c,a]);var b=(0,en.useMemo)(function(){return g.find(function(e){return e.isGeneral})},[g]),x=(0,en.useMemo)(function(){return g.reduce(function(e,n){return n.isResolved?e:n.messages.some(function(e){return!1===e.seen})?e+1:e},0)},[g]),Z=function(e){var n=e.annotationAnchor,t=e.annotationMessage;d({variables:{annotationAnchor:n,annotationMessage:t,highlight:e.highlight},optimisticResponse:{__typename:"RootMutationType",createAnnotationAnchor:(0,e0._)((0,eL._)({},s(),n),{isGeneral:!!n.isGeneral,__typename:"AnnotationAnchor",messages:t?[(0,e0._)((0,eL._)({},s(),t),{content:{text:t.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})},w=(0,nb.Z)(function(){return s3()(m,1e3,{trailing:!1})},[m]);return{annotations:g,loading:c.loading,generalThread:b,unreadThreadCount:x,placeholderAnchorId:null==a?void 0:a.id,createAnnotationAnchorPlaceholder:function(e){l(e.annotationAnchor)},deleteAnnotationAnchorPlaceholder:function(){l(null)},createAnnotationAnchor:Z,createAnnotationMessage:function(n){var t=n.anchor,r=n.annotationMessage,i=n.highlight;(null==a?void 0:a.id)===t.id?(l(null),Z({annotationAnchor:(0,eL._)({},a),annotationMessage:r,highlight:i})):p({variables:{replId:e,anchorId:t.id,annotationMessage:r,highlight:i},optimisticResponse:{__typename:"RootMutationType",createAnnotationMessage:(0,e0._)((0,eL._)({},t),{messages:(0,em._)(t.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,e0._)((0,eL._)({},s(),r),{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var n=e.annotationAnchor,t=e.changes;f({variables:{id:n.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateAnnotationAnchor:(0,e0._)((0,eL._)({},n,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:n.isResolved})}})},updateThreadPreview:function(e){w({variables:{threadId:e.threadId,messageId:e.messageId}})},markAllMessagesInReplAsSeenByUser:function(){h({variables:{replId:e}})}}}var h0=function(e){var n=hQ(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,en.useMemo)(function(){return n?n.messages.filter(function(e){return!1===e.seen}).length:0},[n])};function h1(e){var n=hQ(e,{onReceiveAnnotationUpdate:function(){}}).annotations;return(0,en.useMemo)(function(){return n.reduce(function(e,n){return n.isGeneral?e:e+n.messages.filter(function(e){return!1===e.seen}).length},0)},[n])}var h2=t(74883),h4={container:(0,$.iv)([eo.l0.position.relative]),button:(0,$.iv)([eo.l0.position.relative,nt.gU.filled,eo.l0.width(32),eo.l0.height(32),eo.l0.borderRadius(8,0,0,8)]),notificationDot:(0,$.iv)(eo.l0.display.none)},h3=function(){var e=(0,ed.Z)(),n=h0(e),t=h1(e),r=ii(rY),i=oL();return(0,K.tZ)(ei.G,{css:[eo.l0.flex.row,eo.l0.align.center,{"&:only-child .open-chat-button":[eo.l0.width(32),eo.l0.height(32),eo.l0.borderRadius(8),nt.gU.nofill],"&:only-child .notification-dot-on-button":[eo.l0.display.block],"&:not(:only-child) .notification-dot-on-icon":[eo.l0.display.block]}],children:(0,K.tZ)(ab.hU,{alt:"Open Chat and Threads",onClick:function(){r(),i({pane:{type:"chat"}})},css:h4.button,className:"open-chat-button",children:(0,K.BX)(K.HY,{children:[n>0||t>0?(0,K.tZ)(ei.G,{className:"notification-dot-on-button",css:h4.notificationDot,children:(0,K.tZ)(o4,{})}):null,(0,K.BX)(ei.G,{css:h4.container,children:[n>0||t>0?(0,K.tZ)(ei.G,{className:"notification-dot-on-icon",css:h4.notificationDot,children:(0,K.tZ)(o4,{})}):null,(0,K.tZ)(h2.Z,{})]})]})})})},h8=[eT.Sy.Submit,eT.Sy.Resubmit,eT.Sy.UpdateModelSolution,eT.Sy.PublishTemplate,eT.Sy.EditTemplate,eT.Sy.ReviewSubmission],h5=(0,$.F4)({from:{transform:"translateY(-20%)"},to:{transform:"translateY(0)"}}),h6=(0,$.F4)({from:{opacity:0},to:{opacity:1}}),h7={root:(0,$.iv)([eo.l0.width("100%"),eo.l0.top(0),eo.l0.left(0),eo.l0.py(8),eo.l0.px(12),eo.l0.position.absolute,eo.l0.dragRegion,{userSelect:"none",display:"grid",gridTemplateColumns:"1fr max-content 1fr",alignItems:"center",gap:8},{"@media(prefers-reduced-motion: no-preference)":{animation:"".concat(h5," 0.2s ease-in-out, ").concat(h6," 0.2s ease-in-out")},animation:"".concat(h6," 0.2s ease-in-out")}]),center:(0,$.iv)([eo.l0.noDragRegion,eo.l0.position.relative,eo.l0.flex.row,eo.l0.align.center]),right:(0,$.iv)([eo.l0.rowWithGap(6),eo.l0.align.center,eo.l0.justify.end]),socialGroup:(0,$.iv)([eo.l0.rowWithGap(1),eo.l0.align.stretch,eo.l0.borderRadius(8),eo.l0.noDragRegion,{overflow:"hidden"}]),inviteButton:(0,$.iv)([nt.gU.filled,eo.l0.borderRadius(0,8,8,0),(0,ea._)({},eo.BC.max("tabletMax"),{svg:[eo.l0.mr(0)],span:[eo.l0.display.none]})]),searchButton:(0,$.iv)([eo.l0.height(32),eo.l0.width(32)]),rightIconButtons:(0,$.iv)([eo.l0.flex.row])},h9={windowsOSRoot:(0,$.iv)([h7.root,eo.l0.dragRegion,{paddingRight:hZ.KN}])},me=(0,en.memo)(function(e){var n,t,r,i,o,a=(0,eG.useRouter)(),l=(0,el.Z)().runner,c=(0,ed.Z)(),s=(0,J._)((0,en.useState)(!1),2),u=s[0],d=s[1],p=(0,aZ.e)(ay.y.Run),f=(0,aZ.e)(ay.y.Share),h=(0,lk.Z)(),m=(0,hw.Cl)(),v=(0,J._)((0,en.useState)(!1),2),g=v[0],y=v[1],b=(n=(0,eL._)({},hf,{variables:{id:c}}),eM.a(hv,n)).data,x=oL(),Z=eu(oM()),w=ap(),k=(0,er.P5)({controlName:"flag-toolchain-multiple-runners",logFlagToAnalytics:!1}),C=(0,er.P5)({controlName:"flag-deployments",logFlagToAnalytics:!1}),_=(0,er.P5)({controlName:"flag-no-workspace-notifications",default:!1}),S=(0,nI.cR)(),E=(null==b?void 0:b.repl.__typename)==="Repl"?b.repl:null,R=(null==E?void 0:E.multiplayers)&&E.multiplayers.length>0,I=(0,en.useRef)(null),T=(0,en.useRef)(null),G=(0,en.useRef)(u&&(null==f?void 0:f.isActive));(0,en.useEffect)(function(){!G.current||(null==f?void 0:f.isActive)||d(!1),G.current=u&&(null==f?void 0:f.isActive)},[f,u]),(0,en.useEffect)(function(){if(null==f?void 0:f.isActive){if(u&&T.current){null==f||f.delegateTooltip(T.current);return}f.delegateTooltip(I.current)}},[f,u,T]);var D=(null==E?void 0:null===(t=E.owner)||void 0===t?void 0:t.__typename)==="Team",P=!!((null==E?void 0:null===(r=E.owner)||void 0===r?void 0:r.__typename)==="Team"&&(null==E?void 0:null===(i=E.owner.capabilities)||void 0===i?void 0:i.isEducationPlan)),B=h8.find(function(e){return e===(null==E?void 0:E.workspaceCta)}),U=!P&&(null==E?void 0:E.currentUserPermissions.editMultiplayers),A=!!(C&&(null==E?void 0:E.hostingDeploymentPermissions.canDeploy)&&!S);(0,ng.Il)(function(){if(!P)return[uc.toggleInviteDialog.id,function(){return d(function(e){return!e})}]},[d]);var L=(0,ng.gf)(uc.toggleInviteDialog.id);av({match:nC.pl,data:{type:"action",label:"Invite",icon:(0,K.tZ)(eI.Z,{}),description:"Open invite dialog",keyboardShortcut:L,run:function(){d(!0)}}},{enabled:!P});var O=(0,ng.gf)(uc.run.id),X=(0,ng.gf)(am.id),M=[{type:"button",key:"shortcuts",onClick:function(){w(),(0,ep.j)(ep.U3.KEYBOARD_SHORTCUTS_OPENED)},content:(0,K.BX)(K.HY,{children:[(0,K.tZ)(hk.Z,{}),(0,K.tZ)(eE.xv,{children:"Shortcuts"}),X?(0,K.tZ)(ng.bM,{keyCombo:X,small:!0}):null]})}],z=(0,K.tZ)(hy.Z,{extraItems:M,onDocsClick:function(e){e.preventDefault(),x({pane:{type:"docs",data:{url:null}}})}});return(0,K.BX)(eS.Tg,{tag:"header",css:h&&m?h9.windowsOSRoot:h7.root,children:[(0,K.tZ)(fG,{repl:e.repl,currentUser:e.currentUser}),(0,K.tZ)(ei.G,{innerRef:null==p?void 0:p.delegateTooltip,dataCy:"ws-run-btn",onClick:function(){(null==p?void 0:p.isActive)&&p.next()},css:h7.center,children:k?(0,K.tZ)(hJ,{runner:l,shortcut:O}):(0,K.tZ)(aw.ZP,{runner:l,disableTooltip:null==p?void 0:p.isActive,shortcut:O})}),(0,K.BX)(ei.G,{css:h7.right,children:[(null==E?void 0:E.lesson)?(0,K.tZ)(fK,{lesson:E.lesson}):null,(0,K.tZ)(ab.hU,{css:h7.searchButton,onClick:function(){w()},alt:"Search & run commands",tooltipContents:(0,K.BX)(ei.G,{children:[(0,K.tZ)(eE.xv,{multiline:!1,children:"Search & run commands"}),X?(0,K.tZ)(ei.G,{css:[eo.l0.center,eo.l0.pt(4)],children:(0,K.tZ)(ng.bM,{keyCombo:X})}):null]}),tooltipPlacement:"bottom-end",children:(0,K.tZ)(oJ.Z,{})}),(0,K.BX)(eS.Tg,{css:[h7.socialGroup],background:"root",children:[R?(0,K.tZ)(h3,{}):null,(0,K.tZ)(nm,{onAvatarClick:Z}),U?(0,K.tZ)(K.HY,{children:(0,K.tZ)(ei.G,{innerRef:I,css:{"&:only-child .invite-button":[eo.l0.borderRadius(8)]},children:(0,K.BX)(a4.xo,{isOpen:u,placement:"bottom end",label:"Invite",css:eo.l0.width(400),onOpenChange:function(e){if(u&&!g){d(!1);return}e&&(0,ep.j)(ep.U3.INVITE_MODAL_OPENED,{replId:E.id,source:"replEnvironment"}),d(e)},noArrow:!0,children:[(0,K.tZ)(e5.zx,{iconLeft:(0,K.tZ)(ax.Z,{}),text:"Invite",css:[h7.inviteButton],className:"invite-button"}),(0,K.tZ)("div",{ref:T,children:(0,K.tZ)(eQ,{handleUpgradeTriggered:function(e){return y(e)},replId:c,isTeamRepl:D})})]})})}):null]}),A&&E?(0,K.tZ)(ei.G,{children:(0,K.tZ)(hX,{})}):null,S?(0,K.tZ)(e5.zx,{text:"Extension Devtools",iconLeft:(0,K.tZ)(hC.Z,{}),onClick:function(){x({pane:{type:"extensionDevtools"}})}}):null,B?(0,K.tZ)(aH,{cta:B,replId:c,isGroupProject:!!(null==E?void 0:null===(o=E.template)||void 0===o?void 0:o.isGroupProject),openIOtesterPane:function(){x({pane:{type:"autograder"}})}}):null,h?(0,K.BX)(K.HY,{children:[z,(0,K.tZ)(hx.S,{})]}):(0,K.BX)(K.HY,{children:[(0,K.BX)(ei.G,{css:h7.rightIconButtons,children:[_?null:(0,K.tZ)(hb.Z,{pathname:a.pathname,showCount:!1}),z]}),(0,K.tZ)(hg.Z,{currentUser:e.currentUser})]})]})]})}),mn=t(21557),mt=t(32148),mr=t(80431),mi={base:(0,$.iv)([eo.l0.position.absolute,eo.l0.borderRadius(8),{pointerEvents:"none",border:"1px solid",transitionProperty:"border, box-shadow",transitionDuration:e6.H.duration,transitionTimingFunction:e6.H.timingFunction}]),floating:(0,$.iv)([{borderColor:eo.TV.outlineDimmest},eo.l0.shadow(2)]),dragging:(0,$.iv)([{borderColor:eo.TV.outlineStronger},eo.l0.shadow(3)]),active:(0,$.iv)([{borderColor:eo.TV.outlineDimmer}])},mo=(0,en.memo)(function(e){var n=oN(e.paneId),t=(0,lC.Z)(n.isFloating),r=(0,lC.Z)(n.isActive),i=(0,lC.Z)(n.isBeingDragged),o=(0,lC.Z)(n.hasBorder),a=(0,lC.Z)(n.headerHeight);return o&&t?(0,K.tZ)(ei.G,{style:{width:"calc(100% + 2px)",left:-1,height:"calc(100% + ".concat(a,"px + 2px)"),top:-(a+1)},css:[mi.base,t&&mi.floating,r&&mi.active,i&&mi.dragging]}):null}),ma=ei.K.div,ml=(0,$.iv)([eo.l0.width("100%"),eo.l0.position.absolute,eo.l0.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),mc=(0,$.iv)([eo.l0.height("100%"),eo.l0.position.absolute,eo.l0.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),ms=(0,$.iv)([eo.l0.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function mu(e){return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat("topLeft"===e||"topRight"===e?"bottom":"top")}}var md={topLeft:(0,$.iv)([eo.l0.top(0),eo.l0.left(0),mu("topLeft")]),topRight:(0,$.iv)([eo.l0.top(0),eo.l0.right(0),mu("topRight")]),bottomLeft:(0,$.iv)([eo.l0.bottom(0),eo.l0.left(0),mu("bottomLeft")]),bottomRight:(0,$.iv)([eo.l0.bottom(0),eo.l0.right(0),mu("bottomRight")])};function mp(e){var n=e.edge,t=e.size,r=e.onPointerDown;return"top"===n||"bottom"===n?(0,K.tZ)(ma,{onPointerDown:r,style:(0,ea._)({height:t},n,-t),css:ml}):"right"===n||"left"===n?(0,K.tZ)(ma,{onPointerDown:r,style:(0,ea._)({width:t},n,-t),css:mc}):(0,K.tZ)(ma,{onPointerDown:r,style:{height:t,width:t,cursor:"topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize"},css:[ms,md[n]]})}var mf=["bottom","right","left","bottomRight","bottomLeft"],mh=(0,en.memo)(function(e){var n=ii(oo);return(0,K.tZ)(K.HY,{children:mf.map(function(t){return(0,K.tZ)(mp,{size:8,edge:t,onPointerDown:function(r){cq(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),mm=["top","right","left","topRight","topLeft"],mv=(0,en.memo)(function(e){var n=ii(oo);return(0,K.tZ)(K.HY,{children:mm.map(function(t){return(0,K.tZ)(mp,{size:8,edge:t,onPointerDown:function(r){cq(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),mg=(0,tA.$)(["fixedPositionOffsetX","fixedPositionOffsetY","transformX","transformY","scale","transformOriginX","width","height","transitionDuration","interactionBlanketDisplay","pointerEvents","userSelect"]),my=mg.cssVars,mb=mg.styleTokens,mx=(0,e4.X)({root:[eo.l0.position.absolute,eo.l0.top(0),eo.l0.left(0),eo.l0.borderRadius(0,0,4,4),eo.l0.container("pane"),{transitionProperty:"transform",transitionTimingFunction:"ease-out",transform:"translate(".concat(mb.transformX,", ").concat(mb.transformY,") scale(").concat(mb.scale,")"),transformOrigin:"".concat(mb.transformOriginX," top"),width:mb.width,height:mb.height,transitionDuration:mb.transitionDuration,"--fixed-position-offset-x":mb.fixedPositionOffsetX,"--fixed-position-offset-y":mb.fixedPositionOffsetY}],container:[eo.l0.position.relative,eo.l0.width("100%"),eo.l0.flex.growAndShrink(1),{overflow:"auto",zIndex:1,userSelect:mb.userSelect},!mn.gn&&{"& iframe":{pointerEvents:mb.pointerEvents}}],interactionBlanket:[eo.l0.coverContainer,{zIndex:1,display:mb.interactionBlanketDisplay}]}),mZ=(0,en.memo)(function(e){var n,t,r,i=e.paneId,o=(0,nw.Se)().Content,a=oN(i),l=(0,lC.Z)(a.isHidden),c=(0,lC.Z)(a.data),s=(0,lC.Z)(a.isActive),u=(0,lC.Z)(a.isCommitted);(0,rF.Np)(i,c);var d=(n=ul(),t=ii(tk),r=ii(tt),(0,nb.Z)(function(){return function(e){switch(e.operation){case"commit":r(i);return;case"open":n({pane:e.pane,activate:!0,placement:e.secondary?{type:"secondary",relativeTo:i}:{type:"after",paneId:i}});return;case"replace":t({paneId:i,pane:e.pane});return;default:(0,hI.Z)(e)}}},[i,n,t,r]));return(0,K.tZ)(o,{pane:c,options:{paneId:i,isHidden:l,performPaneOperation:d,isActive:s,isCommitted:u}})}),mw=(0,en.memo)(function(e){var n,t,r,i,o,a,l=e.paneId,c=(0,cK.T)(),s=oU(),u=(t=({paneId:l}).paneId,i=(r=(0,J._)((0,mt.L)({accept:[rN.Tv.File,uR.z.Pane,uR.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,n){var r=n.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:t})},drop:function(e,n){var r=n.getClientOffset();if(r){if(e.type===uR.z.Pane){a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:t});return}if("nodes"===e.type){var i=(0,nw.ME)(e.nodes);i.length>0&&a.drop({type:"newPaneGroup",panes:i,pageX:r.x,pageY:r.y,over:t})}if(e.type===uR.z.NewPane){var o=e.pane;a.drop({type:"newPaneGroup",panes:[o],pageX:r.x,pageY:r.y,over:t})}}}}),2))[0].isOver,o=r[1],a=(n=ii(il),(0,en.useEffect)(function(){i||n(null)},[i,n]),{drag:ii(iV),drop:ii(iH)}),o),d=oN(l),p=(0,lC.Z)(d.isActive),f=(0,lC.Z)(d.isFloating),h=(0,lC.Z)(d.paneType),m=(0,lk.Z)(),v=(0,hw.NJ)(),g=(0,hw.Cl)(),y=(v||g)&&m?et.Mz:0,b=(0,en.useRef)(null);(0,tU.j)(b,d.size,function(e){var n,t=e.width,r=e.height;return n={},(0,ea._)(n,my.width,t+"px"),(0,ea._)(n,my.height,r+"px"),n}),(0,tU.j)(b,d.transform,function(e){var n,t=e.x,r=e.y,i=e.scale;return n={},(0,ea._)(n,my.transformX,Math.round(t)+"px"),(0,ea._)(n,my.transformY,Math.round(r)+"px"),(0,ea._)(n,my.scale,i.toString()),n}),(0,tU.j)(b,d.transformOriginXAtom,function(e){return(0,ea._)({},my.transformOriginX,e)}),(0,tU.j)(b,d.viewportInset,function(e){var n,t=e.x,r=e.y;return n={},(0,ea._)(n,my.fixedPositionOffsetX,-t+"px"),(0,ea._)(n,my.fixedPositionOffsetY,-r-y+"px"),n}),(0,tU.j)(b,d.isHidden,function(e){return{opacity:e?"0":"1",visibility:e?"hidden":"visible"}}),(0,tU.j)(b,d.animate,function(e){return(0,ea._)({},my.transitionDuration,e&&c?"140ms":"0ms")}),(0,tU.j)(b,d.zIndex,function(e){return{"z-index":e.toString()}}),(0,tU.j)(b,d.disableInteractions,function(e){var n;return n={},(0,ea._)(n,my.interactionBlanketDisplay,e?"block":"none"),(0,ea._)(n,my.userSelect,e?"none":"auto"),(0,ea._)(n,my.pointerEvents,e?"none":"auto"),n});var x=p?void 0:function(){s(l,{commit:"codeEditor"!==h})},Z=(0,an.u1)();return(0,K.tZ)(an.Xq,{value:l,children:(0,K.tZ)(eS.Tg,{role:"tabpanel",id:l,"aria-labelledby":"tab-".concat(l),innerRef:(0,aQ.l)(b,f?void 0:u),css:mx.root,elevated:!0,children:(0,K.BX)(mr.Z,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,nb.Z)(function(){return{paneType:h}},[h]),children:[(0,K.tZ)(mo,{paneId:l}),(0,K.BX)(ei.G,{css:mx.container,onMouseDown:x,onContextMenu:x,innerRef:function(e){return Z(l,e)},children:[(0,K.tZ)(ei.G,{tabIndex:-1}),(0,K.tZ)(mZ,{paneId:l})]}),f?(0,K.tZ)(mh,{paneId:l}):null,(0,K.tZ)(ei.G,{css:mx.interactionBlanket})]},l)})})}),mk=t(87833),mC=t(46053),m_=t(25961),mS=(0,nT.cn)([]);function mE(e,n){var t=n.run,r=n.enabled,i=void 0===r||r,o=(0,tO.b9)(mS);(0,en.useEffect)(function(){if(i){var n=(Array.isArray(e)?e:[e]).map(function(e){return{shortcut:e,run:t}});return o(function(e){return(0,em._)(e).concat((0,em._)(n))}),function(){o(function(e){return e.filter(function(e){return!n.includes(e)})})}}},[e,t,o,i])}function mR(){var e=(0,tO.Dv)(mS);return(0,en.useEffect)(function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l,c=o.value,s=c.shortcut,u=c.run;!!s.cmdOrCtrlKey==!!(0,uK.jh)(n)&&!!s.altKey==!!n.altKey&&!!s.shiftKey==!!n.shiftKey&&(null===(l=s.key)||void 0===l?void 0:l.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),u(s))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}},[e]),null}var mI=t(77615),mT=t(12874),mG=t(41831),mD=(0,$.F4)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),mP=(0,e4.X)({root:[eo.l0.color.foregroundDimmest,eo.l0.position.relative,eo.l0.width("100%"),eo.l0.height("100%"),{overflow:"hidden"}],arrows:[eo.l0.position.absolute,eo.l0.top(0),eo.l0.left(0),eo.l0.flex.row,eo.l0.flex.wrap,eo.l0.width("200%"),eo.l0.height("200%"),{animationName:mD,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[eo.l0.width("50%"),eo.l0.height("50%"),eo.l0.center]});function mB(e){var n=e.delay,t=e.duration;return(0,K.tZ)(ei.G,{css:mP.root,children:(0,K.BX)(ei.G,{css:mP.arrows,style:{animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,K.tZ)(ei.G,{css:mP.arrow,children:(0,K.tZ)(mI.Z,{size:12})}),(0,K.tZ)(ei.G,{css:mP.arrow,children:(0,K.tZ)(cr.Z,{size:12})}),(0,K.tZ)(ei.G,{css:mP.arrow,children:(0,K.tZ)(mT.Z,{size:12})}),(0,K.tZ)(ei.G,{css:mP.arrow,children:(0,K.tZ)(mG.Z,{size:12})})]})})}var mU=t(93646),mA=(0,e4.X)({root:[eo.l0.position.relative],circle:[eo.l0.top(-6),eo.l0.right(-6),eo.l0.minWidth(12),eo.l0.borderRadius(8),eo.l0.position.absolute,eo.l0.backgroundColor.backgroundHighest,eo.l0.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:eo.TV.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function mL(e){var n=e.count,t=(0,aq._)(e,["count"]);return(0,K.BX)(ei.G,{css:mA.root,children:[(0,K.tZ)(lI.Z,(0,eL._)({},t)),(0,K.tZ)(ei.G,{css:[mA.circle,mA.count],children:n})]})}function mO(){return(0,K.BX)(ei.G,{css:mA.root,children:[(0,K.tZ)(lI.Z,{}),(0,K.tZ)(ei.G,{css:mA.circle,children:(0,K.tZ)(mT.Z,{size:6})})]})}function mX(e){var n=e.paneId,t=oN(n),r=(0,lC.Z)(t.isCommitted),i=ii(tt);if(!r)return{match:nC.pl,data:{type:"action",label:"Keep open",icon:(0,K.tZ)(mU.Z,{}),run:function(){i(n)}}}}function mM(e){var n=e.paneId,t=e.paneGroupId,r=(0,nw.Se)(),i=oB(n),o=ii(rT),a=ii(rD),l=ii(rG),c=it((0,nb.Z)(function(){return(0,nT.cn)(function(e){var t=nM(e(td),n);return t?t.paneGroup.panes.findIndex(function(e){return e===n}):null})},[n])),s=it((0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=nW(e(td),t);return n?n.panes.length:null})},[t]));return(0,nb.Z)(function(){var e=r.getTitle(i),t=[{match:nC.pl,data:{type:"action",label:"Close "+e,icon:(0,K.tZ)(lI.Z,{}),run:function(){o(n)}}}];return s&&s>1&&(null!==c&&c<s-1&&t.push({match:nC.pl,data:{type:"action",label:"Close to the right",icon:(0,K.tZ)(mO,{}),run:function(){a(n)}}}),t.push({match:nC.pl,data:{type:"action",label:"Close all other tabs",icon:(0,K.tZ)(mL,{count:s-1}),run:function(){l(n)}}})),t},[r,i,s,c,o,n,a,l])}var mz=function(e){return{data:e,match:nC.pl}},mW=t(35704),mN=new Map([["left",{label:"Move Left",icon:(0,K.tZ)(cr.Z,{})}],["right",{label:"Move Right",icon:(0,K.tZ)(mT.Z,{})}],["up",{label:"Move Up",icon:(0,K.tZ)(mG.Z,{})}],["down",{label:"Move Down",icon:(0,K.tZ)(mI.Z,{})}]]),mj=new Map([["leftOf",{label:"Move Left",icon:(0,K.tZ)(cr.Z,{})}],["rightOf",{label:"Move Right",icon:(0,K.tZ)(mT.Z,{})}],["above",{label:"Move Up",icon:(0,K.tZ)(mG.Z,{})}],["below",{label:"Move Down",icon:(0,K.tZ)(mI.Z,{})}]]),mF=t(84561),mV=t(19673),mH=t(47307),mY=t(96003),mq=new Map([["leftOf",{commandId:uc.insertPaneGroupUp.id,label:"Insert Left",icon:(0,K.tZ)(ox.Z,{})}],["rightOf",{commandId:uc.insertPaneGroupRight.id,label:"Insert Right",icon:(0,K.tZ)(oZ.Z,{})}],["above",{commandId:uc.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,K.tZ)(ow.Z,{})}],["below",{commandId:uc.insertPaneGroupDown.id,label:"Insert Down",icon:(0,K.tZ)(ob.Z,{})}]]),mJ=t(95528),mK=function(e){return{data:e,match:nC.pl}};function m$(e){var n,t,r,i,o,a,l,c,s=e.paneId,u=(n=(0,nw.Se)(),t=(0,ae.B)(),r=ii(r8),(0,nb.Z)(function(){return{data:{type:"context",label:"Tools",icon:(0,K.tZ)(oK.Z,{})},commands:function(){return t.map(function(e){return{match:nC.pl,data:{type:"action",label:n.getTitle(e),icon:n.Icon({pane:e}),run:function(){(0,ep.j)(ep.U3.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),r({paneId:s,pane:e})}}}})}}},[t,n,r,s])),d=(i=(0,ec.Bx)(),o=it(th),a=ii(r8),(0,nb.Z)(function(){var e=o.map(function(e){return e.filePath}),n=i.filter(function(n){return!e.includes(n)});return{data:{type:"context",label:"Recent",icon:(0,K.tZ)(nk.Z,{})},commands:function(e){var t=e.search;return(0,n_.w)({paths:n,search:t,run:function(e){a({paneId:s,pane:{type:(0,nw.Dp)({path:e}),data:{path:e}}})}})}}},[i,a,s,o])),p=(l=(0,el.Z)().fs,c=ii(r8),(0,nb.Z)(function(){return{match:nC.pl,data:{type:"context",label:"Files",icon:(0,K.tZ)(mU.Z,{})},commands:function(e){var n=e.search,t=e.active;return(0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:if(!n&&!t)return[2,[]];return[4,l.listFiles()];case 1:if((e=r.sent()).error)return[2,[]];if(!e.files)throw Error("Expected files");return[2,(0,n_.w)({paths:e.files,search:n,run:function(e){c({paneId:s,pane:{type:(0,nw.Dp)({path:e}),data:{path:e}}})}})]}})})()}}},[l,c,s]));return(0,nb.Z)(function(){return{match:nC.pl,data:{type:"context",label:"Change tab",icon:(0,K.tZ)(mJ.Z,{})},commands:function(e){var n=e.search,t=e.active;return n||t?[d,p,u]:[]}}},[d,u,p])}function mQ(e){var n,t=null!==(n=e.size)&&void 0!==n?n:20;return(0,K.tZ)(ei.G,{css:[eo.l0.center,{fontSize:eo.TV.fontSizeSmall,border:"1px solid",borderColor:eo.TV.outlineDefault},eo.l0.borderRadius(8)],style:{width:t,height:t},children:(0,K.tZ)(ei.G,{css:{lineHeight:1},children:e.count})})}var m0=(0,e4.X)({overlay:[eo.l0.align.end,eo.l0.p(16),eo.l0.position.absolute,eo.l0.overflow("hidden"),eo.l0.zIndex(ia.overlay)],surface:[eo.l0.position.relative,eo.l0.borderRadius(8),eo.l0.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:eo.TV.outlineDefault,opacity:0},eo.l0.shadow(3)],innerSurface:[eo.l0.flex.growAndShrink(1),eo.l0.borderRadius(8)]}),m1=(0,e4.X)({root:[eo.l0.colWithGap(8),eo.l0.p(8),{borderTop:"1px solid",borderColor:eo.TV.outlineDimmer}],row:[eo.l0.rowWithGap(2),eo.l0.align.center,eo.l0.justify.spaceBetween],hint:[eo.l0.rowWithGap(4)]});function m2(){return(0,K.BX)(ei.G,{css:m1.root,children:[(0,K.BX)(ei.G,{css:m1.row,children:[(0,K.tZ)(eE.xv,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,K.BX)(ei.G,{css:m1.hint,children:[(0,K.tZ)(ng.bM,{keyCombo:"".concat((0,ny.wM)()),small:!0}),(0,K.tZ)(m_.ir,{small:!0,text:(0,K.tZ)(mB,{duration:6e3,delay:6e3})})]})]}),(0,K.BX)(ei.G,{css:m1.row,children:[(0,K.tZ)(eE.xv,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,K.BX)(ei.G,{css:m1.hint,children:[(0,K.tZ)(ng.bM,{keyCombo:"".concat((0,ny.wM)(),"Shift-"),small:!0}),(0,K.tZ)(m_.ir,{small:!0,text:(0,K.tZ)(mB,{duration:6e3,delay:1500})})]})]})]})}var m4=(0,en.memo)(function(){var e=function(){var e=it(rx),n=it(i4);if(n){var t={width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")},r=t.width,i=t.height,o=t.transform,a={border:"1px solid",borderColor:eo.TV.accentPrimaryStronger,borderRadius:eo.TV.borderRadius6,boxShadow:eo.TV.shadow3,transitionProperty:"transform, height, width",transitionDuration:e6.H.duration,transitionTimingFunction:e6.H.timingFunction};return(0,eL._)({width:r,height:i,transform:o},e?void 0:a)}}(),n=ii(i7),t=(0,dW.Z)(n,[]);return(0,en.useEffect)(function(){var e=setTimeout(function(){(0,sN.A)(t,"opacity","1")});return function(){clearTimeout(e)}},[t]),(0,K.tZ)(mC.MT,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,K.tZ)(ei.G,{style:e,css:m0.overlay,children:(0,K.tZ)(eS.Tg,{innerRef:t,elevated:!0,css:m0.surface,children:(0,K.tZ)(eS.Tg,{css:m0.innerSurface,elevated:!0,children:(0,K.tZ)(m6,{})})})})})}),m3={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},m8={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},m5=Object.keys(m3),m6=(0,en.memo)(function(){var e=ii(i9),n=ii(oe),t=ii(i8),r=it(rx);mE({key:"Escape"},{run:function(){t()}}),mE(m5.map(function(e){return{key:e,cmdOrCtrlKey:!0}}),{run:function(n){e(m3[n.key])},enabled:!r}),mE(m5.map(function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}}),{run:function(e){n({direction:m8[e.key]})},enabled:!r});var i=it(i2);return i&&"sidebar"!==i.target?(0,K.tZ)(K.HY,{children:(0,K.tZ)(m7,{paneGroupId:i.paneGroupId,paneId:i.paneId})}):null});function m7(e){var n,t,r,i,o,a,l,c,s,u,d,p,f,h,m,v,g,y,b,x,Z,w,k,C,_,S,E,R,I,T,G,D,P,B,U,A,L,O,X,M,z,W,N,j,F,V,H,Y,q,$,Q,ee,en,et,er,ei,eo,ea,el,ec,es,eu,ed,ef,eh,ev,eg,ey=it(rx),eb=ii(i7),ex=ii(i8),eZ=(V=e.paneGroupId,q=(Y={paneId:H=e.paneId,paneGroupId:V}).paneId,$=Y.paneGroupId,Q=(0,nw.Se)(),ee=oB(q),en=(0,an.Y6)(q),et=mX({paneId:q}),er=mM({paneId:q,paneGroupId:$}),ei=(0,nb.Z)(function(){var e,n,t,r=Q.getTitle(ee),i=null!==(n=null==en?void 0:null===(e=en.actions)||void 0===e?void 0:e.map(mz))&&void 0!==n?n:[],o=null!==(t=null==en?void 0:en.commands)&&void 0!==t?t:[],a=(0,em._)(i).concat((0,em._)(o),[{data:{type:"group",key:"pane-close"},commands:function(){return[et].concat((0,em._)(er)).filter(Boolean)}}]);return{match:nC.pl,data:{type:"context",label:r,icon:(0,K.tZ)(Q.Icon,{pane:ee})},commands:function(e){var n=e.active,t=e.search;return n||t?a:[]}}},[ee,en,Q,et,er]),ea=(eo={paneId:H,paneGroupId:V}).paneGroupId,el=eo.paneId,ec=it((0,nb.Z)(function(){return(0,nT.cn)(function(e){var n=e(n4),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=s.panes.map(function(n){return[n,e(e(nQ(n)).data)]}),d="floating"===s.path[0];(d?t:r).push({activeIndex:s.activeIndex,paneGroupId:s.id,isFloating:d,panes:u})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{floating:t,tiling:r}})},[])),es=(0,nw.Se)(),eu=ii(iQ),ed=ii(rz),ef=m$({paneId:el}),eh=(0,nb.Z)(function(){var e=ec.tiling,n=ec.floating,t=e.reduce(function(e,n){return e+n.panes.length},0)+n.reduce(function(e,n){return e+n.panes.length},0),r={match:nC.pl,data:{type:"action",label:"New tab",icon:(0,K.tZ)(oq.Z,{}),run:function(){ed({paneGroupId:ea,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return t?[ef,{match:nC.pl,data:{type:"context",label:(0,aU.Z)("Tab",t),icon:(0,K.tZ)(mQ,{count:t})},commands:function(t){var i=t.active,o=t.search;if(!(i||o))return[];var a=(0,em._)(e).concat((0,em._)(n)).map(function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map(function(e){var n=(0,J._)(e,2),t=n[0],r=n[1];return{match:nC.pl,data:{type:"action",label:es.getTitle(r),icon:(0,K.tZ)(es.Icon,{pane:r}),run:function(){eu({paneId:t,activate:!0})}}}})}}});return a.unshift(r),a}}]:[ef,r]},[ec,es,eu,ed,ea,ef]),O=(n={paneGroupId:V,paneId:H}).paneGroupId,M=(o=(t={paneId:X=n.paneId,paneGroupId:O}).paneId,a=oj(t.paneGroupId),l=(0,lC.Z)(a.isMaximized),c=(0,lC.Z)(a.isFloating),s=!l&&!c,u=(r=(0,mY.xF)(),i=ii(rB),(0,nb.Z)(function(){return(0,em._)(mq.entries()).map(function(e){var n,t,a=(0,J._)(e,2),l=a[0],c=a[1],s=c.commandId,u=c.label,d=c.icon;return{match:nC.pl,data:{label:u,icon:d,type:"action",keyboardShortcut:null!==(t=null===(n=r.get(s))||void 0===n?void 0:n.shortcut)&&void 0!==t?t:void 0,run:function(){i({placement:l,paneId:o,autoFocus:!0}),(0,ep.j)(ep.U3.WS_SPLIT_USED,{action:"opened",placement:l})}}}})},[r,i,o])),(0,nb.Z)(function(){return s?[{match:nC.pl,data:{type:"context",label:"Add pane",icon:(0,K.tZ)(mH.Z,{})},commands:function(e){var n=e.active,t=e.search;return n||t?u:[]}}]:[]},[s,u])),z=(d=oN(X),p=it(rx),f=(0,lC.Z)(d.isFloating),h=!p&&!f,m=ii(rK),(0,nb.Z)(function(){var e=(0,em._)(mj.entries()).map(function(e){var n=(0,J._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:nC.pl,data:{label:i,icon:o,type:"action",run:function(){m(t)}}}});return h?[{match:nC.pl,data:{type:"context",label:"Move tab",icon:(0,K.tZ)(pz.Z,{})},commands:function(n){var t=n.active,r=n.search;return t||r?e:[]}}]:[]},[h,m])),W=(v=oj(O),g=(0,lC.Z)(v.isMaximized),y=(0,lC.Z)(v.isFloating),b=!g&&!y,x=ii(oe),(0,nb.Z)(function(){var e=(0,em._)(mN.entries()).map(function(e){var n=(0,J._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:nC.pl,data:{label:i,icon:o,type:"action",run:function(){x({direction:t})}}}});return b?[{match:nC.pl,data:{type:"context",label:"Move group",icon:(0,K.tZ)(mW.Z,{})},commands:function(n){var t=n.active,r=n.search;return t||r?e:[]}}]:[]},[b,x])),N=(w=(Z=oz()).maximizePaneGroup,k=Z.restoreMaximizedPaneGroup,C=oj(O),_=(0,lC.Z)(C.isMaximized),S=(0,ng.gf)(uc.toggleMaximizePaneGroup.id),(0,nb.Z)(function(){return _?[{match:nC.pl,data:{type:"action",label:"Restore",icon:(0,K.tZ)(mV.Z,{}),run:function(){return k()},keyboardShortcut:S}}]:[{match:nC.pl,data:{type:"action",label:"Maximize",icon:(0,K.tZ)(mF.Z,{}),run:function(){return w({paneGroupId:O})},keyboardShortcut:S}}]},[_,S,k,w,O])),j=(E=ii(rP),R=ii(i7),I=(0,ng.gf)(uc.removePaneGroup.id),(0,nb.Z)(function(){return[{match:nC.pl,data:{type:"action",label:"Close",icon:(0,K.tZ)(lI.Z,{}),run:function(){R(),E({paneGroupId:O})},keyboardShortcut:I}}]},[R,E,I,O])),F=(G=(T={paneId:X,paneGroupId:O}).paneId,D=T.paneGroupId,P=ii(oa),B=oj(D),U=(0,lC.Z)(B.isMaximized),A=(0,lC.Z)(B.isFloating),L=(0,ng.gf)(uc.toggleFloatPaneGroup.id),(0,nb.Z)(function(){return U?[]:[{match:nC.pl,data:{type:"action",label:A?"Unfloat":"Float",icon:A?(0,K.tZ)(ok.Z,{}):(0,K.tZ)(lc.Z,{}),keyboardShortcut:L,run:function(){P(G)}}}]},[G,P,L,A,U])),ev=(0,nb.Z)(function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,em._)(M).concat((0,em._)(z),(0,em._)(W),(0,em._)(N),(0,em._)(F),(0,em._)(j))}}]},[M,z,W,N,F,j]),(0,nb.Z)(function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[ei].concat((0,em._)(eh),(0,em._)(ev))}}},[ei,eh,ev])),ew=(0,nE.Gn)("fontSize").preferences;return(0,K.tZ)(nv.X,{iconBreadcrumbs:!0,command:eZ,onAction:function(){return eb()},onKeyDown:function(e,n){var t=n.inputValue,r=n.hasHighlightedItem;if("Enter"===e.key&&!t&&!r){e.preventDefault(),ex();return}(0,uK.jh)(e)&&e.preventDefault()},footer:ey?null:(0,K.tZ)(m2,{}),fontSize:null!==(eg=ew.fontSize)&&void 0!==eg?eg:14,compact:!0})}var m9={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,ny.l2)({cmdOrCtrl:!0,key:"j"})};function ve(){var e=ii(i5),n=it(i6);return((0,ng.Il)(function(){return[m9.id,function(){return e()}]},[e]),n)?(0,K.tZ)(m4,{}):null}var vn=t(71498),vt=t(73660);function vr(){var e=(0,el.Z)().presence,n=(0,J._)((0,en.useState)(e.getFollowingUsers()),2),t=n[0],r=n[1];return(0,en.useEffect)(function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged(function(e){r(e.followingUsers)})},[e]),t}function vi(){var e=(0,eO._)(["\n  query WorkspaceActiveUserImages($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return vi=function(){return e},e}var vo={},va=(0,eX.Ps)(vi());function vl(e){var n,t,r=(n={variables:{userIds:e.slice(0,sg.I)},skip:0===e.length},t=(0,eL._)({},vo,n),eM.a(va,t)).data;return r?new Map(r.usersByIds.map(function(e){return[e.id,e.image]})):null}var vc={root:(0,$.iv)([eo.l0.rowWithGap(4),eo.l0.align.center]),text:(0,$.iv)([eo.l0.flex.shrink(1),eo.l0.align.center]),username:(0,$.iv)([eo.l0.flex.shrink(2),eo.l0.maxWidth(140),eo.l0.truncate])};function vs(){var e=vr();return 0===e.length?null:1===e.length?(0,K.tZ)(vu,{user:e[0]}):(0,K.BX)(eE.xv,{variant:"small",color:"dimmest",css:vc.text,multiline:!1,children:[e.length," users are observing you"]})}function vu(e){var n=e.user,t=n.id,r=n.username,i=n.color,o=vl([t]),a={id:t,username:r,color:i,image:null==o?void 0:o.get(t)};return(0,K.BX)(ei.G,{css:vc.root,children:[(0,K.tZ)(e1.q,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,K.tZ)(eE.xv,{variant:"small",color:"dimmer",css:vc.username,multiline:!1,children:r}),(0,K.tZ)(eE.xv,{variant:"small",color:"dimmest",css:vc.text,multiline:!1,children:"is observing you"})]})}var vd={root:(0,$.iv)([eo.l0.rowWithGap(4),eo.l0.align.center]),text:(0,$.iv)([eo.l0.flex.shrink(1),eo.l0.align.center]),username:(0,$.iv)([eo.l0.flex.shrink(2),eo.l0.maxWidth(140),eo.l0.truncate])};function vp(e){var n=e.id,t=e.username,r=e.color,i=vl([n]),o=(0,el.Z)().presence,a={id:n,username:t,color:r,image:null==i?void 0:i.get(n)};return(0,K.BX)(ei.G,{css:vd.root,children:[(0,K.tZ)(e1.q,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,K.tZ)(eE.xv,{css:vd.text,variant:"small",color:"dimmest",multiline:!1,children:"Observing"}),(0,K.tZ)(eE.xv,{css:vd.username,variant:"small",color:"dimmer",multiline:!1,children:t}),(0,K.tZ)(ab.hU,{alt:"Stop observing",size:18,onClick:function(){o.unfollowUser()},children:(0,K.tZ)(lI.Z,{})})]})}var vf=(0,e4.X)({root:[eo.l0.px(4),eo.l0.rowWithGap(8),eo.l0.height("100%"),eo.l0.border({color:eo.TV.outlineDimmest,direction:"bottom"}),eo.l0.highRes({borderBottomWidth:.5}),eo.l0.align.center]});function vh(e){var n,t,r,i=e.paneId,o=oB(i),a=(n=(0,vt.Z)(),t=oA({paneId:i}),n&&t?n:null),l=(r=vr(),oA({paneId:i})&&r.length>0?r:null),c=(0,nw.Ur)(o)?o.data.path:null,s=null;return(a&&(s=(0,K.tZ)(vp,{id:a.id,username:a.username,color:a.color})),null!==s||l)?(0,K.BX)(ei.G,{css:vf.root,children:[l&&c?(0,K.tZ)(vs,{}):null,s]}):null}var vm=ei.K.div,vv=(0,$.iv)([eo.l0.flex.growAndShrink(1),eo.l0.minWidth(16),eo.l0.height("100%"),{borderBottom:"1px solid ".concat(eo.TV.outlineDimmest)},eo.l0.highRes({borderBottomWidth:.5})]);function vg(e){var n=e.paneGroupId,t=e.activeTabPaneId,r=oX({paneGroupId:n}),i=r.isDragging,o=r.dnd,a=oz().toggleMaximizedPaneGroup,l=oj(n),c=(0,lC.Z)(l.isMaximized),s=oU();return o?(0,K.tZ)(vm,{onDoubleClick:function(){a({paneGroupId:n})},css:vv,style:{cursor:c?void 0:i?"grabbing":"grab"},onPointerDown:function(e){s(t),c||0!==e.button||cq(e,{start:o.start,move:o.update,end:o.end})}}):null}var vy=t(34495),vb=ei.K.div;function vx(e){var n,t,r,i,o,a,l,c,s,u,d,p=e.paneId,f=e.paneGroupId,h=e.isActive,m=e.onClose,v=e.dragGroup,g=(0,aq._)(e,["paneId","paneGroupId","isActive","onClose","dragGroup"]),y=oN(p),b=(0,lC.Z)(y.hasMovedWhileDragging),x=(0,lC.Z)(y.isCommitted),Z=ii(tt),w=oB(p),k=(0,nw.Se)(),C=k.getTitle(w),_=k.Icon({pane:w,size:16}),S=(0,lC.Z)(y.isActivePane),E=(0,ec.b2)({paneType:w.type}),R=(0,rF.mz)();(0,nw.Ur)(w)&&w.data.path&&(u=null!==(d=R.get(w.data.path))&&void 0!==d?d:void 0);var I=(0,cK.T)(),T=(0,en.useRef)(null),G=(0,J._)((0,uI.c)({type:uR.z.Pane,item:function(){var e,n=(null===(e=T.current)||void 0===e?void 0:e.getBoundingClientRect().width)||80;return{type:uR.z.Pane,paneId:p,width:n}},collect:function(e){return{isDragging:e.isDragging()}}}),2),D=G[0].isDragging,P=G[1],B=ii(r$);(0,en.useEffect)(function(){return B(D)},[B,D]);var U=oX({paneGroupId:f}).dnd,A=(0,en.useRef)(!1);(0,en.useEffect)(function(){v&&b&&(A.current=!0,window.addEventListener("click",function(){A.current=!1}))},[b,v]);var L=U&&v?function(e){1!==e.button&&cq(e,{start:U.start,move:U.update,end:U.end})}:void 0;(0,en.useEffect)(function(){h&&T.current&&(0,vy.Z)(T.current,{behavior:I?"auto":"smooth",scrollMode:"if-needed"})},[h,I,T]);var O=(t=(n={paneGroupId:f,paneId:p}).paneId,r=n.paneGroupId,i=(0,an.Y6)(t),o=mX({paneId:t}),a=m$({paneId:t}),l=mM({paneId:t,paneGroupId:r}),c=(0,nw.Se)(),s=oB(t),(0,nb.Z)(function(){var e,n,t,r=null!==(n=null==i?void 0:null===(e=i.actions)||void 0===e?void 0:e.map(mK))&&void 0!==n?n:[],u=null!==(t=null==i?void 0:i.commands)&&void 0!==t?t:[];return{data:{type:"context",label:"Search actions",icon:(0,K.tZ)(c.Icon,{pane:s})},commands:function(){return(0,em._)(r).concat((0,em._)(u),[{data:{type:"group",key:"secondary"},commands:function(){return[o,a].concat((0,em._)(l)).filter(Boolean)}}])}}},[i,c,s,o,a,l])),X=(0,u0.av)(),M=X.onContextMenu,z=X.openContextMenu;return(0,K.tZ)(K.HY,{children:(0,K.tZ)(vb,{ref:T,css:D?[eo.l0.width(0),eo.l0.visibility.hidden]:{":not(:last-of-type)":[eo.l0.border({direction:"right",color:eo.TV.outlineDimmest}),eo.l0.highRes({borderRightWidth:.5})],":first-of-type > div":{borderTopLeftRadius:4,"[data-pane-tab-primary-button]":{borderTopLeftRadius:4},"[data-active-pane-line]":[{clipPath:"polygon(100% 0%, 100% 100%, 2.35px 100%, 3px 55%, 4px 13%, 5px 0%)"},eo.l0.highRes({clipPath:"polygon(100% 0%, 100% 100%, 1.85px 100%, 2.5px 55%, 3.5px 13%, 4.5px 0%)"})]},":last-of-type [data-active-pane-line]":[{width:"calc(100% + 1px)"},eo.l0.highRes({width:"calc(100% + 0.5px)"})]},onAuxClick:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation(),co.n_({category:"pane",message:"Tab closed: "+w.type,data:{reason:"middle click"}}),(0,ep.j)(ep.U3.WS_TAB_CLOSED,{paneType:w.type}),m())},onMouseUp:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation())},children:(0,K.tZ)(vO,{innerRef:L?void 0:P,uniquePath:u,title:C,icon:"commands"!==w.type?_:void 0,isActive:h,isActivePane:S,italicizeTitle:!!(0,nw.Ur)(w)&&!x,paneId:p,indicatorColor:E,onClick:h?function(e){!A.current&&h&&(z({target:e.currentTarget,command:O}),Z(p)),A.current=!1}:function(){},onContextMenu:function(e){return M(e,{command:O})},onMouseDown:function(){h||(A.current=!0,co.n_({category:"pane",message:"Tab clicked: "+w.type}),(0,ep.j)(ep.U3.WS_TAB_OPENED,{paneType:w.type}),g.onClick())},onPointerDown:L,onClose:function(){co.n_({category:"pane",message:"Tab closed: "+w.type}),(0,ep.j)(ep.U3.WS_TAB_CLOSED,{paneType:w.type}),m()}})})})}var vZ=ei.K.button,vw=(0,$.iv)([eo.l0.display.inlineFlex,eo.l0.height("100%"),eo.l0.flex.row,eo.l0.align.center,eo.l0.position.relative,eo.l0.minWidth(eo.TV.space96),{userSelect:"none","& > *":eo.l0.height("100%")}]),vk=(0,$.iv)([vw,eo.l0.color.foregroundDimmer,{backgroundColor:"transparent"}]),vC=(0,$.iv)([vw,eo.l0.color.foregroundDefault,{boxShadow:"0 1px 0 0 "+nt.vb.surfaceBackground,"data-pane-tab-primary-button":[eo.l0.transition.none,eo.l0.hover({boxShadow:"0 1px 0 0 "+nt.vb.interactiveBackground})]}]),v_=(0,e4.X)({notificationDot:[eo.l0.top(3),eo.l0.right(3)]}),vS=(0,$.iv)([eo.l0.rowWithGap(8),eo.l0.align.baseline,eo.l0.position.relative]),vE=(0,$.iv)([eo.l0.pr(16)]),vR=(0,tA.$)(["fontStyle"]),vI=vR.cssVars,vT=vR.styleTokens,vG=(0,$.iv)([eo.l0.truncate,eo.l0.maxWidth(180),eo.l0.display.inlineBlock,eo.l0.fontSize(13),{fontStyle:vT.fontStyle}]),vD=(0,$.iv)([eo.l0.truncate,eo.l0.maxWidth(180),eo.l0.display.inlineBlock,eo.l0.fontSize(12),eo.l0.color.foregroundDimmest,{fontStyle:vT.fontStyle}]),vP=(0,$.iv)([eo.l0.width(16),eo.l0.height(16),eo.l0.position.relative]),vB=(0,$.iv)([eo.l0.position.relative,eo.l0.cursor.pointer,eo.l0.align.center,eo.l0.rowWithGap(6),eo.l0.px(6),eo.l0.focusRing,nt.gU.listItem,eo.l0.flex.growAndShrink(1),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]),vU=(0,$.iv)([eo.l0.height(1),eo.l0.top(0),eo.l0.left(-1),{position:"absolute",pointerEvents:"none",width:"calc(100% + 2px)",backgroundColor:eo.TV.accentPrimaryDefault},eo.l0.highRes({left:-.5,width:"calc(100% + 1px)"})]),vA=(0,e4.X)({button:[eo.l0.reset.button,eo.l0.center,eo.l0.width(20),eo.l0.height("100%"),eo.l0.borderRadius(0),eo.l0.color.foregroundDimmest,eo.l0.hover(eo.l0.color.foregroundDefault)]});function vL(e){var n=e.onClick,t=e.tabIndex;return(0,K.tZ)(ab.hU,{onClick:n,alt:"Close tab",tabIndex:t,css:vA.button,size:12,children:(0,K.tZ)(lI.Z,{})})}function vO(e){var n=e.title,t=e.uniquePath,r=e.onClick,i=e.onContextMenu,o=e.onClose,a=e.isActive,l=e.isActivePane,c=e.italicizeTitle,s=e.innerRef,u=e.icon,d=e.onMouseDown,p=e.onPointerDown,f=e.paneId,h=e.indicatorColor,m=(0,en.useRef)(null),v=(0,J._)((0,uT.XZ)(m,!1),4),g=v[0],y=v[1],b=v[2],x=v[3];return(0,uT.Ym)(y,m),(0,K.BX)(eS.Tg,{elevated:a,innerRef:s,css:a?vC:vk,children:[(0,K.BX)(vZ,{role:"tab",ref:m,tabIndex:g,onKeyDown:b,onMouseDown:d,onClick:function(e){x(),r(e)},onPointerDown:p,onContextMenu:i,css:vB,"aria-selected":a,"aria-controls":f,id:"tab-".concat(f),"data-pane-tab-primary-button":!0,children:[u?(0,K.tZ)(ei.G,{css:[{opacity:a?1:.6},vP],children:u}):null,(0,K.BX)(ei.G,{css:[vS,h&&vE],children:[(0,K.tZ)(eE.xv,{multiline:!1,css:[vG],style:(0,ea._)({},vI.fontStyle,c?"italic":"inherit"),children:n}),t?(0,K.tZ)(eE.xv,{multiline:!1,css:vD,style:(0,ea._)({},vI.fontStyle,c?"italic":"inherit"),children:t}):null,h?(0,K.tZ)(o4,{css:v_.notificationDot,color:h}):null]})]}),(0,K.tZ)(vW,{paneId:f,isActive:a}),(0,K.tZ)(vL,{onClick:o,tabIndex:y?0:-1}),l?(0,K.tZ)(ei.G,{css:vU,"data-active-pane-line":!0}):null]})}var vX=(0,e4.X)({containerOuter:{display:"grid",transition:"grid-template-columns 120ms ease-out"}}),vM=(0,e4.X)({containerOuterHidden:[vX.containerOuter,{gridTemplateColumns:"0fr",visibility:"hidden"}],containerOuterVisible:[vX.containerOuter,{gridTemplateColumns:"1fr",visibility:"visible"}],root:[eo.l0.flex.row,eo.l0.overflow("hidden")],button:[eo.l0.height("100%"),eo.l0.center,eo.l0.borderRadius(0),eo.l0.width(20),eo.l0.color.foregroundDimmer,eo.l0.hover([eo.l0.color.foregroundDefault])]});function vz(e){var n=e.icon,t=e.run,r=e.label,i=e.dataCy;return(0,K.tZ)(ab.hU,{css:vM.button,onClick:function(){return t(null)},dataCy:i,alt:r,size:12,children:n})}function vW(e){var n=e.paneId,t=e.isActive,r=(0,an.Y6)(n),i=null==r?void 0:r.actions;return(null==i?void 0:i.length)?(0,K.tZ)(ei.G,{css:t?vM.containerOuterVisible:vM.containerOuterHidden,children:(0,K.tZ)(ei.G,{css:vM.root,children:i.map(function(e){var n=e.label,t=(0,aq._)(e,["label"]);return(0,K.tZ)(vz,(0,eL._)({label:n},t),n)})})}):null}var vN=(0,e4.X)({left:[eo.l0.flex.row,eo.l0.flex.growAndShrink(1),eo.l0.align.center,eo.l0.height("100%")],right:[eo.l0.flex.row],scrollbar:[eo.l0.flex.row,eo.l0.flex.shrink(1),eo.l0.align.center,eo.l0.height("100%"),{"& > .os-viewport":eo.l0.height("100%")}],newTabContainer:[{height:"100%",borderBottom:"1px solid "+eo.TV.outlineDimmest,borderLeft:"1px solid "+eo.TV.outlineDimmest,justifyContent:"stretch"},eo.l0.highRes({borderBottomWidth:.5,borderLeftWidth:.5})],newTab:[eo.l0.height(31),eo.l0.width(24),eo.l0.borderRadius(0),eo.l0.color.foregroundDimmer,eo.l0.highRes(eo.l0.height(31.5))],moreActionsContainer:[{height:"100%",borderBottom:"1px solid "+eo.TV.outlineDimmest,justifyContent:"stretch"},eo.l0.highRes({borderBottomWidth:.5})],moreActions:[eo.l0.height(31),eo.l0.width(24),eo.l0.borderRadius(0,4,0,0),eo.l0.color.foregroundDimmest,eo.l0.highRes(eo.l0.height(31.5))],tabContainer:[eo.l0.flex.row,eo.l0.height("100%"),{borderBottom:"1px solid "+eo.TV.outlineDimmest},eo.l0.highRes({borderBottomWidth:.5})],tabPreviewWrap:[eo.l0.p(4)],tabPreview:[eo.l0.borderRadius(4),eo.l0.height("100%"),eo.l0.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(eo.TV.accentPrimaryDimmer)}]}),vj=(0,en.memo)(function(e){var n,t,r,i,o,a,l,c,s,u,d,p,f,h,m,v,g,y,b,x=e.headerId,Z=ii(rV),w=ii(rz),k=ii(rJ),C=ii(rT),_=it(r$),S=oW(x),E=(0,lC.Z)(S.activeIndex),R=(0,lC.Z)(S.activeTabPaneId),I=(0,lC.Z)(S.panes),T=(n=(0,lL.F)().isDarkColorScheme,r=(t=(0,J._)((0,en.useState)(!1),2))[0],i=t[1],a=(o=(0,J._)((0,en.useState)(null),2))[0],l=o[1],s=(c=(0,J._)((0,mk.A)({options:{overflow:{y:"hidden",x:"scroll"},update:{debounce:[100,200]},scrollbars:{theme:n?"os-theme-light":"os-theme-dark",autoHide:"leave",visibility:_?"hidden":"auto"}},events:{initialized:function(){return i(!0)},destroyed:function(){return i(!1)}}}),2))[0],u=c[1],d=(0,en.useCallback)(function(e){e&&l(e)},[]),(0,en.useEffect)(function(){a&&!r&&(s(a),i(!0))},[a,s,r]),p=(0,en.useRef)(0),f=(0,en.useRef)(!1),{ref:d,initialized:r,handleWheel:function(e){var n=u();if(n&&0!==e.deltaY&&0===e.deltaX){var t=n.elements().viewport,r=t.scrollLeft,i=e.deltaY,o=t.scrollWidth;f.current=!0,p.current=Math.max(0,Math.min(o,r+i)),t.scrollLeft=p.current}}}),G=(0,J._)((0,mt.L)({accept:[rN.Tv.File,uR.z.Pane,uR.z.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&A({item:e,panes:I,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=(null==L?void 0:L.index)!==null?null==L?void 0:L.index:I.length;if("nodes"===e.type){var r=(0,nw.ME)(e.nodes);r.length>0&&w({activate:!0,commit:!0,paneGroupId:x,index:t,panes:r});return}if(e.type===uR.z.NewPane){w({activate:!0,paneGroupId:x,index:t,panes:[e.pane]});return}if("paneId"in e){var i=I.includes(e.paneId)?I.length-1:I.length;k({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupId:x})}}}}),2),D=G[0],P=G[1],B=(h=({isOver:D.isOver}).isOver,v=(m=(0,J._)((0,en.useState)(null),2))[0],g=m[1],y=(0,en.useRef)(null),b=(0,en.useRef)([]),(0,en.useEffect)(function(){if(!h){b.current=[],g(null);return}y.current&&(b.current=(0,em._)(y.current.children).map(function(e){var n=e.getBoundingClientRect();return n.x+n.width/2}))},[h]),{tabContainerRef:y,hover:(0,en.useCallback)(function(e){if(0!==b.current.length){var n=e.item.type===uR.z.Pane?e.item:null,t=(null==n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,i=(null==n?void 0:n.width)||80,o=b.current.map(function(e,n){return -1===r||r<n?e:e+i/2}).findIndex(function(n){return n>e.sourceClientOffset}),a=-1===r?e.panes.length:e.panes.length-1;g({index:-1===o?a:Math.min(o,a),paneId:t,width:i})}},[]),dropState:v}),U=B.tabContainerRef,A=B.hover,L=B.dropState,O=ii(i3),X=(0,ng.gf)(m9.id),M=L?L.index:null;if((null==L?void 0:L.paneId)&&null!==M){var z=I.indexOf(L.paneId);z>-1&&z<M&&M++}var W=L&&null!==M?(0,em._)(I.slice(0,M)).concat([L],(0,em._)(I.slice(M))):I;return(0,K.BX)(K.HY,{children:[(0,K.BX)(ei.G,{css:vN.left,innerRef:P,role:"tablist",children:[(0,K.BX)(uT.uP,{children:[(0,K.tZ)(ei.G,{onWheel:T.handleWheel,style:{opacity:T.initialized?1:0},innerRef:T.ref,css:vN.scrollbar,children:(0,K.tZ)(ei.G,{innerRef:U,css:vN.tabContainer,children:W.map(function(e,n){return"string"!=typeof e?(0,K.tZ)(ei.G,{css:vN.tabPreviewWrap,children:(0,K.tZ)(ei.G,{style:{width:e.width},css:vN.tabPreview})},"preview"):(0,K.tZ)(vx,{dragGroup:1===I.length,paneId:e,paneGroupId:x,isActive:E===n,onClick:function(){Z(e)},onClose:function(){C(e)}},e)})})}),(0,K.tZ)(ei.G,{css:vN.newTabContainer,children:(0,K.tZ)(ab.hU,{css:vN.newTab,alt:"New tab",tooltipHidden:!0,size:12,onClick:function(){w({paneGroupId:x,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,K.tZ)(oq.Z,{})})})]}),(0,K.tZ)(vg,{paneGroupId:x,activeTabPaneId:R})]}),(0,K.tZ)(vh,{paneId:R}),(0,K.tZ)(ei.G,{css:vN.right,children:(0,K.tZ)(ei.G,{css:vN.moreActionsContainer,children:(0,K.tZ)(ab.hU,{css:vN.moreActions,onClick:function(){return O(R)},alt:"Pane actions",tooltipHidden:void 0===X,tooltipPlacement:"left",tooltipContents:X?(0,K.tZ)(ng.bM,{keyCombo:X}):null,children:(0,K.tZ)(vn.Z,{color:eo.TV.foregroundDimmest})})})})]})}),vF=(0,tA.$)(["left","top","scale","transformOriginX","width","height","zIndex","transitionDuration"]),vV=vF.cssVars,vH=vF.styleTokens,vY="color-mix(in srgb, ".concat(nt.vb.interactiveBackground," 60%, ").concat(nt.vb.surfaceBackground,")"),vq=(0,$.iv)([eo.l0.borderRadius(4,4,0,0),eo.l0.position.absolute,eo.l0.flex.row,eo.l0.align.center],{transformOrigin:"".concat(vH.transformOriginX," bottom"),top:vH.top,left:vH.left,width:vH.width,height:vH.height,transform:"scale(".concat(vH.scale,")"),transitionDuration:vH.transitionDuration,transitionProperty:"top, left, width, height",transitionTimingFunction:"ease-out",backgroundColor:vY}),vJ=(0,en.memo)(function(e){var n=e.headerId,t=(0,cK.T)(),r=oW(n),i=(0,lC.Z)(r.activeTabPaneId),o=oj(n),a=(0,lC.Z)(o.isFloating),l=(0,en.useRef)(null);return(0,tU.j)(l,o.size,function(e){var n,t=e.width,r=e.height;return n={},(0,ea._)(n,vV.width,t+"px"),(0,ea._)(n,vV.height,r+"px"),n}),(0,tU.j)(l,o.position,function(e){var n,t=e.x,r=e.y;return n={},(0,ea._)(n,vV.left,Math.round(t)+"px"),(0,ea._)(n,vV.top,Math.round(r)+"px"),n}),(0,tU.j)(l,o.scale,function(e){return(0,ea._)({},vV.scale,e.toString())}),(0,tU.j)(l,o.transformOriginX,function(e){return(0,ea._)({},vV.transformOriginX,e)}),(0,tU.j)(l,o.animate,function(e){return(0,ea._)({},vV.transitionDuration,e&&t?"140ms":"0ms")}),(0,tU.j)(l,o.zIndex,function(e){return{"z-index":e.toString()}}),(0,K.BX)(eS.Tg,{innerRef:l,css:vq,children:[(0,K.tZ)(vj,{headerId:n}),a?(0,K.tZ)(mv,{paneId:i}):null]})}),vK=t(11570),v$=t(31577),vQ=t(75722),v0=t(93748),v1=t(50586),v2=t(46868),v4=t(29620),v3=t(11052),v8=[pU,am,m9].concat((0,em._)(us),(0,em._)(v0.Ic),(0,em._)(v2.bO),[v3.s,v1.x,v4.CH]);function v5(e){var n=(0,vQ.O)();return(0,K.tZ)(ng.GO,{commands:v8,onChange:n,keybindings:e.keybindings,children:e.children})}var v6=t(41185),v7=t(22894),v9=t(98372),ge=t(71071),gn=t(19418);function gt(e){var n=e.children,t=ak.Z.get("stateCache","string"),r=t?(0,vK._S)(t):(0,vK.Ny)(),i=(0,en.useRef)(r);return(0,K.tZ)(vK.ZP.Provider,{value:i,children:n})}function gr(e){var n,t=e.ui,r=e.repl,i=e.services,o=e.userKeybindings,a=e.children,l=(0,nb.Z)(function(){return{id:r.id,slug:r.slug,language:r.language,replConfigIsExtension:r.config.isExtension}},[r]);return(0,K.tZ)(v5,{keybindings:o,children:(0,K.tZ)(nw.kz,{value:t,children:(0,K.tZ)(gt,{children:(0,K.tZ)(v6.Z.Provider,{value:i,children:(0,K.tZ)(v7.Z.Provider,{value:l,children:(0,K.tZ)(v$.$,{replId:r.id,container:i.container,fs:i.fs,dotReplit:i.dotReplit,ports:i.ports,children:(0,K.tZ)(sJ.b,{repl:{id:r.id,title:r.title,description:r.description},forkParams:{trackingData:{forkSource:"replEnvironmentDesktop"}},teamContext:null===(n=r.user)||void 0===n?void 0:n.username,children:(0,K.tZ)(gn.Wv,{children:(0,K.tZ)(v9.S,{children:(0,K.tZ)(ge.Z,{children:a})})})})})})})})})})}var gi=t(9626),go=t(78392);function ga(){var e=(0,J._)((0,en.useState)(!1),2),n=e[0],t=e[1],r=ii(rH),i=oM(),o=(0,el.Z)().replspaceApi;return((0,en.useEffect)(function(){if(n)return o.onConfirmSendToken(function(e){e&&e(!0,!1)})},[n,o]),(0,go.F)({insertConfigPlugin:function(){return r("config")},setConfigScreenLockIsOpen:t,openFile:i}),n)?(0,K.tZ)(gi.Z,{}):null}var gl=(0,en.memo)(function(){var e=it(tZ),n=(0,vt.Z)();return e&&n?(0,K.tZ)("div",{css:[eo.l0.position.absolute,eo.l0.width(e.width),eo.l0.height(e.height),eo.l0.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null}),gc=t(42098),gs=t(14818),gu=t(77297),gd=t(56412),gp={modal:[eo.l0.overflow("hidden"),eo.l0.minHeight(540),eo.l0.flex.column,{"& > div:first-of-type > div:first-of-type > button":[eo.l0.zIndex(2)],"& > div:first-of-type":[eo.l0.flex.growAndShrink(1)]}],container:[eo.l0.flex.column,eo.l0.flex.growAndShrink(1),{gap:0}],imageContainer:[eo.l0.flex.growAndShrink(1),eo.l0.borderRadius(12),eo.l0.overflow("hidden"),{flexBasis:"100%"}],contentContainer:[eo.l0.p(16),eo.l0.colWithGap(16),eo.l0.flex.growAndShrink(1)]},gf=function(e){var n=e.announcement,t=e.showModal,r=e.onRequestClose,i=n.slides,o=n.date,a=new Date(o.valueOf()+6e4*o.getTimezoneOffset()),l=(0,gd.Z)(a,"MMMM d, yyyy"),c=(0,J._)((0,en.useState)(0),2),s=c[0],u=c[1],d=i[s];return(0,K.tZ)(eC.u,{centered:!0,isOpen:t,onRequestClose:r,noPadding:!0,maxWidth:420,css:gp.modal,children:(0,K.BX)(eS.Tg,{css:gp.container,children:[(0,K.BX)(eS.Tg,{elevated:!0,css:gp.contentContainer,children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4)],children:[(0,K.tZ)(eE.xv,{variant:"headerDefault",multiline:!1,children:"What's New"}),(0,K.tZ)(eE.xv,{variant:"small",color:"dimmer",multiline:!1,children:l})]}),(0,K.tZ)(ei.G,{css:[eo.l0.minHeight(300)],children:(0,K.tZ)(ei.G,{css:[gp.imageContainer,d.backgroundColor],style:{padding:function(){switch(d.position){case"left":return"12px 12px 0 0";case"right":return"12px 0 0 12px";case"center":return"12px 12px 0 12px"}}()},children:(0,K.tZ)(ei.G,{css:{"& > div":{position:"unset !important"}},style:{maxWidth:"100%",position:"relative",flexGrow:1,flexShrink:1,width:"100%",overflow:"hidden",borderRadius:function(){switch(d.position){case"left":return"0px 12px 0px 0px";case"right":return"12px 0px 0px 0px";case"center":return"12px 12px 0px 0px"}}()},children:(0,K.tZ)(nn.Z,{src:d.backgroundImage,layout:"fill",objectFit:"contain",objectPosition:function(){switch(d.position){case"left":return"bottom left";case"right":return"bottom right";case"center":return"bottom center"}}(),style:{pointerEvents:"none",userSelect:"none",width:"100% !important",position:"relative !important",height:"unset !important"},alt:""})})})}),(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(12)],children:(0,K.BX)(eE.xv,{variant:"subheadDefault",children:[d.title," ",(0,K.BX)(eE.xv,{variant:"subheadDefault",color:"dimmer",css:[eo.l0.fontWeight.normal],children:["— ",d.subtitle]})]})}),d.text?(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(12)],children:(0,K.tZ)(eE.xv,{color:"dimmer",css:[eo.l0.fontWeight.normal],children:d.text})}):null]}),(0,K.tZ)(eS.Tg,{css:[eo.l0.p(16)],children:(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.align.center,eo.l0.justify.spaceBetween,eo.l0.width("100%")],children:[i.length>1?(0,K.BX)(K.HY,{children:[(0,K.tZ)(e5.zx,{disabled:0===s,onClick:function(){0===s?u(i.length-1):u(s-1)},iconLeft:(0,K.tZ)(cr.Z,{}),text:"Previous"}),(0,K.BX)(eE.xv,{multiline:!1,variant:"small",color:"dimmer",css:{margin:"auto"},children:[s+1," of ",i.length]})]}):null,s===i.length-1?(0,K.tZ)(e5.zx,{text:"Got it",iconRight:(0,K.tZ)(aC.Z,{}),colorway:"primary",onClick:r,css:[1===i.length&&{marginLeft:"auto"}]}):(0,K.tZ)(e5.zx,{onClick:function(){s===i.length-1?u(0):u(s+1)},text:"Next",iconRight:(0,K.tZ)(mT.Z,{}),colorway:"primary"})]})})]})})},gh=new Date("2023-08-01"),gm=function(e){return(0,$.iv)({backgroundColor:e})},gv=function(e){var n=e.onRequestClose,t=e.onCTAClick,r=(0,en.useRef)(!1);(0,en.useEffect)(function(){r.current||((0,ep.j)(ep.U3.MODAL_VIEWED,{source:"always_on_user_reserved_deployments_announcement"}),r.current=!0)},[]);var i=[{title:"Introducing Replit Deployments",subtitle:"A more reliable, scalable, and secure way to deploy your projects.",backgroundImage:"/public/images/deployments/reserved-deployments-announcement-slide-1.png",backgroundColor:gm(gu.S.values.global.purpleStronger),position:"center"},{title:"Backed by Google Cloud",subtitle:"Deployed apps are hosted on Google Cloud VMs, giving them more speed and stability.",backgroundImage:"/public/images/deployments/reserved-deployments-announcement-slide-2.png",backgroundColor:gm(gu.S.values.global.yellowStrongest),position:"center"},{title:"Try it today",subtitle:"Share your Repl with the world.",backgroundImage:"/public/images/deployments/reserved-deployments-announcement-slide-3.png",backgroundColor:gm(gu.S.values.global.blueStronger),position:"center",text:(0,K.tZ)(e5.zx,{css:[eo.l0.width("100%"),{span:{color:eo.TV.foregroundDefault}}],colorway:"primary",onClick:t,text:"Deploy Now",iconLeft:(0,K.tZ)(hR.Z,{})})}];return(0,K.tZ)(gf,{announcement:{slides:i,date:gh},onRequestClose:n,showModal:!0})};function gg(e){var n=e.repl,t=(0,gs.X)(),r=t&&!t.isDone&&!t.isLoading,i=oL(),o=(0,h_.hn)(),a=(0,lu.Z)("workspace","workspace-always-on-user-reserved-deployments-announcement"),l=a.shouldDisplay,c=a.dismiss,s=a.register,u="string"!=typeof o&&!r&&n.isAlwaysOn;return((0,en.useEffect)(function(){u&&s()},[s,u]),u&&l)?(0,K.tZ)(gv,{onRequestClose:c,onCTAClick:function(){c(),(0,ep.j)(ep.U3.DEPLOY_PROJECT_SELECTED,{source:"always_on_user_reserved_deployments_announcement"}),i({pane:{type:"deployments",data:{view:hE.k.ReservedVMTierSelection}}})}}):null}function gy(){var e=(0,el.Z)().secrets,n=(0,J._)((0,en.useState)(!1),2),t=n[0],r=n[1];return(0,en.useEffect)(function(){return e.watchSecrets({onChange:function(e){r(e.some(function(e){return""===e.value}))}})},[e]),t}var gb=function(e){var n=e.replId,t=(0,er.P5)({controlName:"flag-secrets-copying",logFlagToAnalytics:!1}),r=(0,J._)((0,en.useState)(!1),2),i=r[0],o=r[1],a=(0,el.Z)().fs,l=oL(),c="configureSecretsModalShown/"+n,s=gy();(0,en.useEffect)(function(){t&&!0!==ak.Z.get(c)&&s&&o(!0)},[a,t,c,s]);var u=function(){o(!1),ak.Z.set(c,!0)};return(0,K.tZ)(eC.u,{preventClose:!0,isOpen:i,maxWidth:480,onRequestClose:u,children:(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.tZ)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:(0,K.tZ)(eE.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"Configure missing Secret values"})}),(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(8)],children:(0,K.tZ)(eE.xv,{children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."})}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.justify.end],children:[(0,K.tZ)(e5.zx,{text:"Dismiss",onClick:u}),(0,K.tZ)(e5.zx,{colorway:"primary",text:"Manage Secrets",onClick:function(){u(),l({pane:{type:"envEditor"}}),(0,ep.j)(ep.U3.ENV_EDITOR_USED,{action:"opened"})}})]})]})})},gx=t(48272),gZ=t(4281),gw=t(58626),gk=t(51279);function gC(){var e=ii(r0),n=(0,gk.Z)({moveOrDeleteFile:e}),t=n.isConverging,r=n.didContentsDiverge,i=n.showMoreDetail,o=n.failedFiles,a=n.failedFilesOptions,l=n.selectedFile,c=n.setSelectedFile,s=n.reviewingPrompt,u=n.onChoice,d=n.local,p=n.remote,f=[eo.l0.minHeight("7em"),eo.l0.maxHeight("50vh"),eo.l0.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,K.tZ)(eC.u,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:r,onRequestClose:function(){},children:(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(24)],children:[(0,K.tZ)(eE.h4,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,K.BX)(eE.xv,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",o.length>1?"these files":"this file"," you'd like to keep."," ",o.length>1?(0,K.BX)("strong",{children:["There are ",o.length," files impacted by this."]}):""]}),t?(0,K.tZ)(gZ.Z,{}):(0,K.BX)(K.HY,{children:[a.length?(0,K.tZ)(gx.P,{initialSelectedItem:a[0],selectedItem:a.find(function(e){return e.path===l}),items:a,onChange:function(e){c(e.path)}}):null,i?(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(16),eo.l0.justify.start,eo.l0.align.center,eo.l0.pt(16),eo.l0.p(8),eo.l0.backgroundColor.redDimmest,eo.l0.font.code],children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,K.BX)(eE.xv,{multiline:!1,children:["Divergence type: ",null==s?void 0:s.case]})]}):null,(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,K.tZ)(eS.Tg,{elevated:!0,css:[eo.l0.flex.growAndShrink(1),eo.l0.py(8)],children:(0,K.tZ)(ei.G,{css:f,children:(0,K.tZ)(gw.q,{diffViewer:d})})}),(0,K.BX)(ei.G,{css:[eo.l0.pt(16)],children:[(0,K.tZ)(eE.xv,{css:[eo.l0.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,K.tZ)(e5.zx,{onClick:function(){u("local")},text:"Reset to Mine"})]})]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,K.tZ)(eS.Tg,{elevated:!0,css:[eo.l0.flex.growAndShrink(1),eo.l0.py(8)],children:(0,K.tZ)(ei.G,{css:f,children:(0,K.tZ)(gw.q,{diffViewer:p})})}),(0,K.BX)(ei.G,{css:[eo.l0.pt(16),eo.l0.justify.end],children:[(0,K.tZ)(eE.xv,{css:[eo.l0.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,K.tZ)(e5.zx,{onClick:function(){u("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}function g_(){var e=(0,ec.ev)(),n=(0,ec._o)(),t=(0,el.Z)().fs,r=function(){n(null)};return(0,K.tZ)(eC.u,{isOpen:!!e,onRequestClose:r,children:e?(0,K.tZ)(c7.Z,{name:e,description:e,entityType:"file",hideModal:r,delete:function(){e&&(t.deleteFile(e),n(null))}}):null})}var gS=t(28079),gE=t(25491),gR=t(38213),gI=t(31850),gT=t(30845),gG=t(5542),gD=(0,e4.X)({content:[eo.l0.colWithGap(24)],header:[eo.l0.align.center],checkbox:[eo.l0.rowWithGap(8)],footer:[eo.l0.rowWithGap(16),eo.l0.justify.spaceBetween,eo.l0.align.center]});function gP(){var e,n,t,r=(0,el.Z)().fs,i=(0,J._)((0,en.useState)(null),2),o=i[0],a=i[1],l=(0,ed.Z)(),c=(0,J._)((0,en.useState)(!1),2),s=c[0],u=c[1],d=(0,J._)((0,en.useState)(!1),2),p=d[0],f=d[1],h=(0,J._)((0,en.useState)(!0),2),m=h[0],v=h[1],g=(0,J._)((0,en.useState)(!1),2),y=g[0],b=g[1],x=(0,cS.Pf)(),Z=x.data,w=x.loading,k=x.refetch,C=(null==Z?void 0:null===(e=Z.currentUser)||void 0===e?void 0:e.userSubscriptionType)===eT.HP.HackerPro,_=null==Z?void 0:null===(n=Z.currentUser)||void 0===n?void 0:n.username,S=_?(0,gG.Ru)(_):gS.$I,E=(0,en.useId)(),R=(0,gR.A)(),I=(0,er.P5)({controlName:"flag-areobotany-blues",logFlagToAnalytics:!1}),T=(0,en.useRef)(!1),G=lF(),D=G.dataAtom.disk,P=D.currentAtom,B=D.totalAtom,U=G.loading,A=(0,tO.Dv)(B),L=(0,tO.Dv)(P),O=L/A,X=(0,es.Z)(O),M=null==Z?void 0:null===(t=Z.currentUser)||void 0===t?void 0:t.id,z=(0,es.Z)(null),W=(0,en.useCallback)(function(e){"sampling"===e&&s||(X.current>.9999&&a(e),lX.kg.info("disk quota exceeded modal displayed",{replid:l,userid:M,currentReportedUtilization:1048576*L,totalReportedReplQuota:1048576*A}),(0,ep.j)(ep.U3.MODAL_VIEWED,{modalName:"disk_quota_exceeded_modal",cause:"storage",unsolicited:!0}))},[X,s,a,L,l,A,M]);(0,en.useEffect)(function(){var e=setTimeout(function(){v(!1)},6e4);return function(){return clearTimeout(e)}},[]),(0,en.useEffect)(function(){if(!p){var e=r.onDiskQuotaExceeded(function(){1024===A?z.current=setTimeout(function(){W("filesystem_service")},3e4):W("filesystem_service")});return function(){e()}}},[r,A,p,W,z]),(0,en.useEffect)(function(){return function(){z.current&&clearTimeout(z.current)}},[z]),(0,en.useEffect)(function(){var e;if(!o&&!T.current&&!p&&!s&&I&&!U)return O>.9999&&(T.current=!0,e=setTimeout(function(){T.current=!1,X.current>.9999&&W("sampling")},1e4)),function(){clearTimeout(e)}},[p,s,O,T,o,W,X,I,U]);var N=(0,en.useCallback)(function(){"sampling"===o&&u(!0),a(null)},[o]),j=(0,en.useCallback)(function(){k(),window.location.reload(),b(!1)},[k,b]);return m?null:(0,K.tZ)(eC.u,{isOpen:!!o,onRequestClose:N,children:(0,K.tZ)(ei.G,{css:gD.content,children:(0,K.BX)(ei.G,{css:gD.content,children:[(0,K.BX)(eE.h4,{css:gD.header,level:3,variant:"headerDefault",children:["Your account is out of storage ",(0,K.tZ)(gI.Z,{size:20})]}),(0,K.tZ)(eE.xv,{children:"To free up space remove files until it's under the limit, delete other Repls, or upgrade your account storage."}),!w&&Z?(0,K.tZ)(gT.l,{data:Z,hideAlerts:!0}):(0,K.tZ)(gT.M,{}),"filesystem_service"===o?(0,K.BX)(ei.G,{css:gD.checkbox,tag:"label",children:[(0,K.tZ)(aA.X,{id:E,checked:p,onChange:function(e){return f(!!e.currentTarget.value)}}),(0,K.tZ)(eE.xv,{variant:"small",children:"Do not show this message again for this session."})]}):null,R?(0,K.tZ)(ei.G,{children:(0,K.tZ)(fO.Z,{href:"/usage#storage",text:"View Usage"})}):(0,K.BX)(ei.G,{css:gD.footer,children:[(0,K.tZ)(fO.Z,(0,e0._)((0,eL._)({},S),{text:"Manage Repls"})),w?null:(0,K.tZ)(e5.zx,{colorway:"primary",text:C?"Change Storage":"Upgrade Storage",onClick:function(){return b(!0)}})]}),(0,K.tZ)(gE.Z,{isOpen:y,context:"workspace_info_modal",powerUp:"storage",uponPurchaseGoTo:"workspace",onCheckoutComplete:j,onRequestClose:function(){b(!1)}})]})})})}var gB=t(10454),gU=(0,e4.X)({content:[eo.l0.colWithGap(24)],header:[eo.l0.align.center],checkbox:[eo.l0.rowWithGap(8)]});function gA(){var e=(0,el.Z)().fs,n=(0,J._)((0,en.useState)(!1),2),t=n[0],r=n[1],i=(0,J._)((0,en.useState)(!1),2),o=i[0],a=i[1],l=(0,en.useId)();(0,en.useEffect)(function(){if(!o)return e.onDiskQuotaExceeded(function(){r(!0)})},[e,o]);var c=(0,en.useCallback)(function(){r(!1)},[r]);return(0,K.tZ)(eC.u,{isOpen:t,onRequestClose:c,children:(0,K.tZ)(ei.G,{css:gU.content,children:(0,K.BX)(ei.G,{css:gU.content,children:[(0,K.BX)(eE.h4,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,K.tZ)(gB.Z,{color:eo.TV.accentNegativeDefault,size:20})]}),(0,K.BX)(eE.xv,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,K.tZ)(mU.Z,{})," icon on the left."]}),(0,K.tZ)(eE.xv,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,K.BX)(ei.G,{css:gU.checkbox,tag:"label",children:[(0,K.tZ)(aA.X,{id:l,checked:o,onChange:function(e){return a(!!e.currentTarget.value)}}),(0,K.tZ)(eE.xv,{variant:"small",children:"Do not show this message again for this session."})]}),(0,K.tZ)(e5.zx,{onClick:c,text:"Close"})]})})})}function gL(){var e,n,t=(0,ed.Z)(),r=(0,cS.mE)({variables:{replId:t}}),i=r.data,o=r.loading,a=(null==i?void 0:null===(e=i.repl)||void 0===e?void 0:e.__typename)==="Repl"&&(null===(n=i.repl.owner)||void 0===n?void 0:n.__typename)==="Team";return o&&!i?null:a?(0,K.tZ)(gA,{}):(0,K.tZ)(gP,{})}var gO=t(36032),gX=t(63009),gM=t(27695);function gz(){var e=(0,eO._)(["\n  query DidMigrateToNix($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n        templateInfo {\n          replId\n        }\n      }\n    }\n  }\n"]);return gz=function(){return e},e}var gW={},gN=(0,eX.Ps)(gz()),gj=t(50699);function gF(){var e,n,t,r,i,o,a,l,c,s=(0,J._)((0,en.useState)(function(){return new URL(window.location.href).searchParams.get("didMigrateToNix")?1:0}),2),u=s[0],d=s[1],p=(0,eG.useRouter)();return(i=(n={variables:{replId:e=(0,ed.Z)()}},t=(0,eL._)({},gW,n),r=eM.a(gN,t)).data,o=r.loading,l=(a=(0,el.Z)()).container,c=a.fs,(0,en.useEffect)(function(){if(!o&&i){var n,t=!1,r=(n=(0,nx._)(function(){var n,o,a,s,u,p,f,h,m,v,g,y,b;return(0,nZ.Jh)(this,function(x){switch(x.label){case 0:if(t||"Repl"!==i.repl.__typename)return[2];if(!["nix","html"].includes(i.repl.language))return d(0),[2];return[4,(0,gj.D$)({templateId:null!==(n=i.repl.templateInfo.replId)&&void 0!==n?n:null,fs:c})];case 1:if(!(o=x.sent()).length)return d(function(e){return 1===e?2:e}),[2];if(t)return[2];d(1),a=!0,s=!1,u=void 0,x.label=2;case 2:x.trys.push([2,8,9,10]),p=o[Symbol.iterator](),x.label=3;case 3:if(a=(f=p.next()).done)return[3,7];return h=f.value,[4,l.exec("bash","-c","".concat(h,"/run-post-migration.sh"))];case 4:if(m=x.sent(),t)return[2];if("Channel closed"===m.error)return r(),[2];return m.error&&lX.kg.error("post nix migration script error: "+m.error,{replid:e,path:h}),[4,c.deleteFile(h)];case 5:if(v=x.sent(),t)return[2];v.error&&lX.kg.error("post nix migration delete path error: "+v.error,{replid:e,path:h}),x.label=6;case 6:return a=!0,[3,3];case 7:return[3,10];case 8:return g=x.sent(),s=!0,u=g,[3,10];case 9:try{a||null==p.return||p.return()}finally{if(s)throw u}return[7];case 10:return[4,c.deleteDir(gj.OH)];case 11:if(y=x.sent(),t)return[2];return y.error&&lX.kg.error("post nix migration delete dir error: "+y.error,{replid:e}),[4,c.flush()];case 12:if(x.sent(),t)return[2];return[4,c.persist({skipDebounce:!0})];case 13:if(b=x.sent(),t)return[2];return b.error&&lX.kg.error("post nix migration persist error: "+b.error,{replid:e}),d(2),[2]}})}),function(){return n.apply(this,arguments)});return r(),function(){t=!0}}},[l,i,c,o,d,e]),0===u)?null:1===u?(0,K.tZ)(gi.Z,{reason:"Finishing migration to the latest infrastructure",children:(0,K.tZ)(eE.xv,{multiline:!0,variant:"subheadDefault",children:"This may take a few minutes"})}):(0,K.tZ)(eC.u,{isOpen:2===u,onRequestClose:function(){var e=new URL(window.location.href);d(0),e.searchParams.delete("didMigrateToNix"),p.push({pathname:p.pathname,query:(0,e0._)((0,eL._)({},p.query),{didMigrateToNix:!1})},e.toString(),{shallow:!0})},centered:!0,children:(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.tZ)(eE.h4,{level:1,variant:"headerDefault",children:"We've upgraded your project!"}),(0,K.BX)(eE.xv,{children:["Your project is now using"," ",(0,K.tZ)(s9(),{legacyBehavior:!0,href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,K.BX)(ei.K.ul,{css:eo.l0.colWithGap(4),children:[(0,K.tZ)(ei.K.li,{children:(0,K.BX)(eE.xv,{children:["•"," ",(0,K.tZ)(s9(),{legacyBehavior:!0,href:"https://docs.replit.com/programming-ide/nix-on-replit",children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,K.tZ)(ei.K.li,{children:(0,K.BX)(eE.xv,{children:["•"," ",(0,K.tZ)(s9(),{legacyBehavior:!0,href:"https://docs.replit.com/programming-ide/configuring-repl",children:"Configure your Repl"})," ","with more capabilities."]})}),(0,K.tZ)(ei.K.li,{children:(0,K.BX)(eE.xv,{children:["•"," ",(0,K.tZ)(s9(),{legacyBehavior:!0,href:"https://docs.replit.com/tutorials/python/build-with-nix",children:"Check out this tutorial"})," ","for a deep dive."]})})]}),(0,K.BX)(eE.xv,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please use"," ",(0,K.tZ)(s9(),{legacyBehavior:!0,href:"https://ask.replit.com",children:"ask.replit.com"})," ","to get help."]}),(0,K.tZ)(eE.xv,{multiline:!1,children:"Thank you for your patience"})]})})}(a=G||(G={}))[a.NoNixMigration=0]="NoNixMigration",a[a.Running=1]="Running",a[a.Finished=2]="Finished";var gV=t(92854),gH=t(17137),gY=function(e){return(0,K.tZ)(eC.u,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(24)],children:[(0,K.tZ)(eE.h4,{variant:"headerDefault",level:2,css:eo.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,K.tZ)(eE.xv,{children:"Never miss messages from your collaborators if you’re in another tab or window."}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.justify.end],children:[(0,K.tZ)(e5.zx,{onClick:e.onCancel,text:"Deny",iconLeft:(0,K.tZ)(lI.Z,{})}),(0,K.tZ)(e5.zx,{text:"Allow notifications",colorway:"positive",iconLeft:(0,K.tZ)(aC.Z,{}),onClick:e.onConfirm})]})]})})},gq=(l=(0,nx._)(function(e){var n,t,r,i;return(0,nZ.Jh)(this,function(o){switch(o.label){case 0:if(!(0,dd.u9)())return[2,null];return[4,(0,dd.mv)(e)];case 1:if(t=(n=o.sent()).path,r=n.line,i=n.col,!t)return[2,null];return[2,{path:t,line:r,col:i}]}})}),function(e){return l.apply(this,arguments)});function gJ(){var e,n,t,r,i,o,a,l,c,s,u;return n=(e=(0,el.Z)()).fs,t=e.dotReplit,r=it(tr),i=(0,es.Z)(r),a=(o=(0,J._)((0,en.useState)(!1),2))[0],l=o[1],c=oM(),s=it(tC),u=(0,en.useRef)(!1),(0,en.useEffect)(function(){if(a&&!u.current){if(!r){if(!window.location.hash)return;var e=new URL(window.location.href);history.pushState((0,e0._)((0,eL._)({},history.state),{as:e.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search);return}var n=(0,dd.YM)({path:r}),t=window.location.hash;if(!(t.slice(1)===r||t.startsWith(n+":"))){var i=new URL(window.location.href);i.hash=n,window.history.pushState((0,e0._)((0,eL._)({},history.state),{as:i.pathname+i.hash}),"",i)}}},[a,r]),(0,en.useEffect)(function(){if(!a){var e=!1;return function(){r.apply(this,arguments)}(),function(){e=!0}}function r(){return(r=(0,nx._)(function(){var r,o;return(0,nZ.Jh)(this,function(a){switch(a.label){case 0:if(!s)return[2];if(i.current)return l(!0),[2];return[4,gq(n)];case 1:if(r=a.sent(),e)return[2];if(r)return c(r),l(!0),[2];if(i.current||"saved"===s)return l(!0),[2];return[4,(0,p1.W)({fs:n,dotReplit:t})];case 2:return o=a.sent().entrypoint,!e&&o&&c({path:o}),l(!0),[2]}})})).apply(this,arguments)}},[n,c,t,i,s,a]),(0,en.useEffect)(function(){if(s){var e,t=(e=(0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:return u.current=!0,[4,gq(n)];case 1:return(e=t.sent())&&c(e),u.current=!1,[2]}})}),function(){return e.apply(this,arguments)});return window.addEventListener("hashchange",t),function(){window.removeEventListener("hashchange",t)}}},[s,n,c]),null}var gK=t(76433),g$=t(78774),gQ=t(17491),g0=t(293);function g1(){var e=(0,eO._)(["\n  subscription ThreadUpdates($replId: String!) {\n    updatedThread: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return g1=function(){return e},e}var g2={},g4=(0,eX.Ps)(g1(),hK.j7),g3=t(68216),g8=t(45400),g5="video.json",g6=(0,g8.join)(si.V,g5);function g7(){return(g7=(0,nx._)(function(e,n){var t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:if(!n.find(function(e){return e.type===rN.Tv.File&&e.filename===g5}))return[2,null];return[4,e.readFile(g6)];case 1:if((t=r.sent()).error)return[2,null];return[2,t.content.toString()]}})})).apply(this,arguments)}var g9=t(28131),ye=t(51359),yn=t(6309);function yt(){var e=(0,eO._)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return yt=function(){return e},e}var yr={},yi=(0,eX.Ps)(yt()),yo=t(93702),ya=t(99672),yl=t(91039),yc=t(67795);function ys(){return(ys=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){return setTimeout(function(){return n()},e)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}var yu=t(82017),yd=t(10169),yp=t(71881),yf=t(61364),yh=t(81344),ym=t(30671),yv=t(58130),yg=t(47001),yy=t(84800);function yb(){var e=(0,eO._)(["\n  query ReplEnvironmentServicesConnector($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return yb=function(){return e},e}var yx=(0,eX.Ps)(yb(),fQ.C,fQ.D);function yZ(){return(yZ=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){return[2,yw(e)]})})).apply(this,arguments)}function yw(e){return yk.apply(this,arguments)}function yk(){return(yk=(0,nx._)(function(e){var n,t,r=arguments;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:n=r.length>1&&void 0!==r[1]?r[1]:1,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(e){return yC.apply(this,arguments)}(e)];case 2:return i.sent(),[3,4];case 3:if(t=i.sent(),n>5)throw t;return setTimeout(function(){yw(e,n+1)},(Math.pow(2,n)-1)*1e3),[3,4];case 4:return[2]}})})).apply(this,arguments)}function yC(){return(yC=(0,nx._)(function(e){var n,t,r,i,o,a;return(0,nZ.Jh)(this,function(l){switch(l.label){case 0:if(n=e.replId,t=e.expectedThreads,r=(0,yg.ZP)({onUnrecoverableError:function(e){throw Error("Failed to create temporary goval connection. Received error ".concat(e.message))}}),!tM.l)throw r.destroy(),Error("Expected Apollo Client");return[4,tM.l.query({query:yx,variables:{id:n}})];case 1:if("Repl"!==(i=l.sent().data).repl.__typename)throw r.destroy(),Error("Failed to query repl info when creating temporary connection");return o=i.currentUser,a=i.repl,[2,new Promise(function(e){r.onConnectionStateChanged(function(i){if(i===yg.em.CONNECTED){try{var o=null===(a=r.getConnectionMetadata())||void 0===a?void 0:a.token;if(null!=o){var a,l,c=(0,yv.he)(o),s=null!==(l=c.resourceLimits)&&void 0!==l?l:{},u=s.memory,d=s.threads;lX.kg.info("Temporary goval connection created",{label:"replResourcesChange",replid:n,cluster:c.cluster,memory:u,threads:d}),null!=t&&d!==t&&((null!=d?d:0<t)?lX.kg.error:lX.kg.warn)("Unexpected resource limits",{label:"replResourcesChange",replid:n,expectedThreads:t,actualMemory:u,actualShares:d})}}catch(e){}r.destroy(),e()}}),r.connect({getMinimumRetryDelayMs:function(){return 0},context:(0,yy.U)({repl:a,currentUser:o})})})]}})})).apply(this,arguments)}function y_(){var e=(0,eO._)(["\n  fragment BoostMetadata on Repl {\n    id\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        boost {\n          __typename\n          sku\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        userSubscriptionType\n      }\n      ... on Team {\n        id\n        isTeamsPro: subscriptionIsType(subscriptionType: PRO)\n      }\n    }\n  }\n"]);return y_=function(){return e},e}function yS(){var e=(0,eO._)(["\n  query ResourceUpdatingCurrentUser {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return yS=function(){return e},e}function yE(){var e=(0,eO._)(["\n  query ResourceUpdatingBoostMetadata($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...BoostMetadata\n      }\n    }\n  }\n  ","\n"]);return yE=function(){return e},e}var yR={},yI=(0,eX.Ps)(y_()),yT=(0,eX.Ps)(yS()),yG=(0,eX.Ps)(yE(),yI),yD=t(70078),yP={off:.5,boost_2cpu_2ram:2,boost_4cpu_4ram:4,boost_8cpu_8ram:8,boost_16cpu_16ram:16,boost_8cpu_16ram:8,boost_16cpu_32ram:16,boost_32cpu_64ram:32},yB={off:512,boost_2cpu_2ram:2048,boost_4cpu_4ram:4096,boost_8cpu_8ram:8192,boost_16cpu_16ram:16384,boost_8cpu_16ram:16384,boost_16cpu_32ram:32768,boost_32cpu_64ram:65536};function yU(e){if(!e||"Repl"!==e.__typename||"ReplPowerUpTypes"!==e.powerUps.__typename||!e.owner)return null;var n=function(e){if("Team"===e.__typename){if((0,yD.v4)(e.id))return eT.ri.Boost_16cpu_16ram;if(e.isTeamsPro)return eT.ri.Boost_2cpu_2ram}if("User"===e.__typename){if(e.userSubscriptionType===eT.HP.HackerPro)return eT.ri.Boost_4cpu_4ram;if(e.userSubscriptionType===eT.HP.Hacker)return eT.ri.Boost_2cpu_2ram}return eT.ri.Off}(e.owner),t=e.powerUps.boost.sku;return yP[t]>yP[n]?t:n}var yA=t(72875),yL=t(28470);function yO(){var e=(0,eO._)(["\n  query TrackResourcesBoostMetadata($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        ...BoostMetadata\n      }\n    }\n  }\n  ","\n"]);return yO=function(){return e},e}var yX={},yM=(0,eX.Ps)(yO(),yI),yz=t(30173),yW=!1,yN=t(30686);function yj(){var e=(0,eO._)(["\n  mutation HandlePortOpenedUpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return yj=function(){return e},e}var yF={},yV=(0,eX.Ps)(yj()),yH=t(17867);function yY(){var e=(0,eO._)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return yY=function(){return e},e}var yq={},yJ=(0,eX.Ps)(yY());function yK(){var e=(0,eO._)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return yK=function(){return e},e}var y$=(0,eX.Ps)(yK());function yQ(){return(yQ=(0,nx._)(function(e){var n,t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:if(null===tM.l)return[2];return[4,tM.l.query({query:y$,variables:{username:e}})];case 1:return[2,null==(t=r.sent().data)?void 0:null===(n=t.user)||void 0===n?void 0:n.image]}})})).apply(this,arguments)}function y0(){return"Notification"in window?"true"===ak.Z.get(y4,"string")?"dismissed":window.Notification.permission:"denied"}function y1(){return(y1=(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){try{window.Notification.requestPermission().then()}catch(e){return[2,new Promise(function(e){window.Notification.requestPermission(function(n){e(n)})})]}return[2,window.Notification.requestPermission()]})})).apply(this,arguments)}function y2(){return(y2=(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return[4,function(){return y1.apply(this,arguments)}()];case 1:return e.sent(),y3(!1),[2]}})})).apply(this,arguments)}var y4="notifications/dismissedModal";function y3(e){ak.Z.set(y4,String(e))}var y8={};function y5(){return(y5=(0,nx._)(function(e){var n,t,r,i,o,a,l,c,s,u,d;return(0,nZ.Jh)(this,function(p){switch(p.label){case 0:if(n=e.title,t=e.body,r=e.badge,i=e.icon,o=e.iconByUsername,a=e.tag,l=e.onClick,s=void 0===(c=e.cacheDuration)?0:c,!document.hidden&&document.hasFocus()||"granted"!==y0()||(u=Date.now(),a in y8&&y8[a]+s>u))return[2];if(!o)return[3,2];return[4,function(e){return yQ.apply(this,arguments)}(o)];case 1:i=p.sent(),p.label=2;case 2:return d=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:a}),setTimeout(function(){d.close()},1e4),d.addEventListener("click",function(){window.focus(),d.close()}),l&&d.addEventListener("click",l),y8[a]=u,[2]}})})).apply(this,arguments)}function y6(){var e=(0,eO._)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return y6=function(){return e},e}var y7=(0,eX.Ps)(y6());function y9(){return(y9=(0,nx._)(function(e){var n;return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:if(!tM.l)throw Error("Expected Apollo client");return[4,tM.l.query({query:y7,variables:{id:e}})];case 1:return[2,(null==(n=t.sent().data)?void 0:n.repl.__typename)==="Repl"?n.repl.title:null]}})})).apply(this,arguments)}function be(){var e=(0,eO._)(["\n  subscription ReplEnvironmentUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return be=function(){return e},e}var bn={},bt=(0,eX.Ps)(be()),br=t(5218);function bi(){var e=(0,eO._)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return bi=function(){return e},e}var bo={},ba=(0,eX.Ps)(bi());function bl(e,n){var t=it(tC),r=ii(rW),i=ii(iQ),o=io(tg);(0,ng.Il)(function(){if(t)return[e,function(){var e=o().find(function(e){return(0,J._)(e,2)[1].type===n.type});if(e){i({paneId:e[0],activate:!0});return}r({pane:n,activate:!0,placement:{type:"secondary"}})}]},[t,r,i])}function bc(e){var n,t,r,i,o,a,l,c,s,u,d,p,f,h,m,v,g,y,b,x,Z,w,k,C,_,S,E,R,I,T,G,D,P,B,U,A,L,O,X,M,z,W,N,j,F,V,H,Y,q,K,$,Q,ee,et,ei,eo,ea,eu,ef,eh,em,eg,ey,eb,ex,eZ,ew,ek,eC,e_,eS,eE,eR,eI,eT,eP,eB,eU,eA,eO,eX,eW,eN,ej,eF,eV,eH,eY,eq,eJ,eK,e$,eQ,e1,e2,e4,e3,e8,e5,e6,e7,e9,ne,nn,nt,nr,ni,no,na,nl,nc,ns,nu,nd,np,nf,nh,nm,nv,ny,nw,nk,nC,n_,nS,nT,nG,nP,nB,nU,nA,nL,nO,nX,nM,nz,nW,nN,nj,nF,nV,nH,nY,nq,nJ,nK,n$,nQ,n0,n1,n2,n4,n3,n8,n5,n6,n7,tn,tt,ti,to,ta=e.repl,tl=e.currentUser,tc=tl.id===(null===(to=ta.user)||void 0===to?void 0:to.id),td=(0,el.Z)().replspaceApi;n=(0,el.Z)().lspnix,t=(0,nE.Gn)("codeIntelligence").preferences.codeIntelligence,(0,en.useEffect)(function(){if(!t){n.disable();return}n.enable()},[n,t]),r=ii(rd),i=(0,nb.Z)(function(){return nD()(r,1e3)},[r]),o=(0,ed.Z)(),(0,en.useEffect)(function(){var e=function(){i({replId:o,force:!1}),i.flush()};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[i,o]),(0,en.useEffect)(function(){var e=function(){"hidden"===document.visibilityState&&i({replId:o,force:!1})};return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[i,o]),(0,en.useEffect)(function(){var e=null;return function n(){e=setTimeout(function(){i({replId:o,force:!1}),n()},6e4)}(),function(){e&&clearTimeout(e)}},[i,o]),(0,en.useEffect)(function(){return function(){i({replId:o,force:!1}),i.flush()}},[i,o]),(0,g$.Z)(),(0,yA.Z)(),(0,yo.Z)({workspaceType:"desktop"}),u=yU((null==(s=(l={variables:{replId:a=(0,ed.Z)()}},c=(0,eL._)({},yX,l),eM.a(yM,c)).data)?void 0:s.repl.__typename)==="Repl"?s.repl:void 0),p=(d=lF().dataAtom).cpu,f=d.ram,h=(0,tO.Dv)(p.cpuCountAtom),m=(0,tO.Dv)(f.totalAtom),v=(0,en.useRef)(0),(0,en.useEffect)(function(){var e=setInterval(function(){if(u){var e=yP[u],n=yB[u];h!==e||m!==n?(v.current++,2===v.current&&lX.kg.error("Repl Resources were less than expected for 1 minute",{replid:a,vCpusExpected:e,vCpusActual:h,ramExpected:n,ramActual:m})):(v.current>2&&lX.kg.info("Repl Resources resolved mismatch after ".concat(v.current," minutes"),{replid:a,vCpusExpected:e,vCpusActual:h,ramExpected:n,ramActual:m}),v.current=0)}},6e4);return function(){clearInterval(e)}},[a,u,h,m,v]),(0,en.useEffect)(function(){var e=function(e){"s"===e.key&&(0,uK.jh)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),y=(g=(0,el.Z)()).container,b=g.presence,(0,en.useEffect)(function(){var e=b.onUserJoin(function(n){var t,r=null===(t=y.getContext())||void 0===t?void 0:t.repl;if(r){var i=n.username;return(function(e){return y9.apply(this,arguments)})(r.id).then(function(e){e&&function(e){y5.apply(this,arguments)}({title:"",body:"".concat(i," joined ").concat(e),tag:"".concat(r.id,"-").concat(i,"-joined"),iconByUsername:i,cacheDuration:9e5})}),function(){e()}}})},[b,y]),x=(0,ed.Z)(),Z=(0,el.Z)().container,w={variables:{replId:x},skip:(0,yH.Z)(Z)!==yg.em.CONNECTED},k=(0,eL._)({},yq,w),g0.m(yJ,k),C=(0,el.Z)().presence,(0,en.useEffect)(function(){return C.onFollowingUsersChanged(function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,ep.j)(yc.U3.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,ep.j)(yc.U3.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})})},[C]),S=(_={isAnon:!1,isOwner:tc,ignoreUnloadPrompt:(0,gK.Z)()}).isAnon,E=_.isOwner,R=_.ignoreUnloadPrompt,I={skip:S||E,variables:{replId:(0,ed.Z)()},onData:function(e){var n=e.data.data;(null==n?void 0:n.currentUserCanWrite)===!1&&(R(!0),window.location.reload())}},T=(0,eL._)({},bn,I),g0.m(bt,T),D=(0,ed.Z)(),B=(P=(0,eL._)({},yR,void 0),eM.a(yT,P)).data,L=(U=(0,eL._)({},yR,{variables:{replId:D}}),A=eM.a(yG,U)).data,O=A.refetch,X=null==B?void 0:null===(G=B.currentUser)||void 0===G?void 0:G.userSubscriptionType,M=(0,en.useRef)(void 0),(0,en.useEffect)(function(){void 0!==X&&(void 0!==M.current&&M.current!==X&&O(),M.current=X)},[X,O,M]),z=yU((null==L?void 0:L.repl.__typename)==="Repl"?L.repl:void 0),W=(0,en.useRef)(null),(0,en.useEffect)(function(){null!==z&&(null!==W.current&&W.current!==z&&(lX.kg.info("Repl Resources expected value changed, creating temp goval connection",{replid:D,previousBoost:W.current,newBoost:z}),(function(e){return yZ.apply(this,arguments)})({replId:D,expectedThreads:yP[z]}).catch(function(e){co.Tb(e),lX.kg.error("Repl Resources failed to create temp goval connection",{replid:D})})),W.current=z)},[z,W,D]),N=(0,el.Z)().presence,j=it(tr),(0,en.useEffect)(function(){N.updateOpenFile(j)},[N,j]),V=(F=(0,ev.Z)()).showConfirm,H=F.showNotice,Y=F.hideMessage,q=F.showError,K=(0,el.Z)().container,(0,en.useEffect)(function(){var e=K.onToast(function(e){e.startsWith("PANIC")||H(e,Math.max(1e4,e.length/.025+1e3))}),n=null,t=!1,r=K.onConnectionStateChanged(function(e){if(n&&(Y(n),n=null),e===yg.em.CONNECTED){t=!0,n=V("Connected",1500);return}if(t){if(e===yg.em.CONNECTING){n=H("Reconnecting");return}if(e===yg.em.DISCONNECTED){n=q("Disconnected");return}}});return function(){n&&Y(n),e(),r()}},[K,V,H,q,Y]),(0,yf.ZP)(),$=(0,el.Z)().runner,Q=ul(),ee=ii(rq),et=(0,yf.Ln)(),ei=it(tC),eo=(0,nR.T)(),ea=ul(),eu=(0,nI.cR)(),ef=(0,en.useCallback)(function(){if(eu){if(eo)return;ea({pane:{type:"runnerOutput"},placement:{type:"secondary"},activate:!1});return}ea({pane:{type:eo?"webview":"runnerOutput"},placement:{type:"secondary"},activate:!1})},[eo,ea,eu]),eh=(0,aZ.e)(ay.y.Output),(0,en.useEffect)(function(){if(ei&&(null==eh?void 0:eh.isActive)){var e=setInterval(function(){ef()},200);return function(){clearInterval(e)}}},[null==eh?void 0:eh.isActive,ef,ei]),(0,en.useEffect)(function(){if(ei)return $.onLocalRun(function(){ef()})},[$,ef,ei]),(0,en.useEffect)(function(){if(ei){if(!et){ee({type:"instructions"});return}Q({pane:{type:"instructions"},activate:!1,placement:{type:"secondary"}})}},[et,Q,ee,ei]),bl(uc.showShell.id,{type:"shell"}),bl(uc.showDocs.id,{type:"docs"}),bl(uc.showGit.id,{type:"git"}),bl(uc.showSettings.id,{type:"preferences"}),bl(uc.showConsole.id,{type:"runnerOutput"}),bl(uc.showReplitAi.id,{type:"ghostwriterChat"}),(0,g9.Z)(),em=(0,el.Z)().presence,eg=oM(),(0,en.useEffect)(function(){return em.onUserOpenedFile(function(e){var n=e.user,t=e.file,r=em.getFollowedUser();r&&r.id===n.id&&t&&eg({path:t})})},[em,eg]),eb=(ey=(0,J._)((0,en.useState)(null),2))[0],ex=ey[1],(0,en.useEffect)(function(){return em.onFollowedUserChanged(ex)},[em]),(0,en.useEffect)(function(){if(eb){var e=setTimeout(function(){document.addEventListener("click",n)},0);return function(){clearTimeout(e),document.removeEventListener("click",n)}}function n(){em.unfollowUser()}},[eb]),eZ=(0,ec.OM)(),e_=(null==(eC=(ew={variables:{replId:(0,ed.Z)()}},ek=(0,eL._)({},yr,ew),eM.a(yi,ek)).data)?void 0:eC.repl.__typename)==="Repl"?eC.repl:null,(0,en.useEffect)(function(){var e;e_&&(null===(e=e_.templateInfo)||void 0===e?void 0:e.label.includes("Blank Repl"))&&eZ(!0)},[eZ,e_]),eS=ii(of),eE=(0,el.Z)().fs,eR=(0,si.Z)().isTutorial,eI=(0,es.Z)(eS),(0,en.useEffect)(function(){if(eR){var e=!1,n=eE.watchDir(si.V,{onChange:function(n){(function(e,n){return g7.apply(this,arguments)})(eE,n).then(function(n){if(!e){if(!n){eI.current(null);return}var t=null;try{t=g3.ku(n)}catch(e){}var r="object"==typeof t&&"string"==typeof t.embedUrl?t.embedUrl:null;eI.current(r?{embedUrl:r}:null)}})},onMoveOrDelete:function(){eI.current(null)},onError:function(){eI.current(null)}});return function(){e=!0,n()}}},[eE,eR,eI]),eT=(0,br.T)(),eP=oL(),(0,en.useEffect)(function(){eT&&eP({pane:{type:"education"}})},[eT,eP]),eB=(0,si.Z)().isTutorial,eU=ii(ov),(0,en.useEffect)(function(){eB&&eU()},[eU,eB]),eO=h0(eA=(0,ed.Z)()),eX=h1(eA),eW=gy(),eN=(0,ec.Cp)(),(0,en.useEffect)(function(){eN({paneType:"chat",indicatorType:eO>0?eD.TV.redStronger:void 0})},[eN,eO]),(0,en.useEffect)(function(){eN({paneType:"threadInbox",indicatorType:eX>0?eD.TV.redStronger:void 0})},[eN,eX]),(0,en.useEffect)(function(){eN({paneType:"envEditor",indicatorType:eW?eD.TV.redStronger:void 0})},[eN,eW]),eF={variables:{replId:ej=ta.id},onData:function(e){var n,t,r=null===(t=e.data)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.updatedThread;r&&"AnnotationAnchor"===r.__typename&&(e.client.cache.updateQuery({query:hK.yi,variables:{replId:ej}},function(e){return(0,n9.Uy)(e,function(e){null===e||"Repl"!==e.repl.__typename||e.repl.annotationAnchors.find(function(e){return e.id===r.id})||e.repl.annotationAnchors.push(r)})}),e.client.cache.updateQuery({query:gQ.Jq,variables:{replId:ej,path:r.path}},function(e){return(0,n9.Uy)(e,function(e){var n;e&&(null===(n=e.threadsByFile)||void 0===n?void 0:n.__typename)==="ThreadsByFileResult"&&(e.threadsByFile.threads.find(function(e){return e.id===r.id})||e.threadsByFile.threads.push((0,e0._)((0,eL._)({},r),{messageCount:r.messages.length,unreadCount:r.messages.filter(function(e){return!e.seen}).length,participants:r.messages.filter(function(e){return!!e.user}).map(function(e){return e.user})})))})}))}},eV=(0,eL._)({},g2,eF),g0.m(g4,eV),eH=it(tr),eY=(0,ec.zo)(),eq=(0,ec.VX)(),(0,en.useEffect)(function(){eq(eH),eH&&eY(eH)},[eH,eq,eY]),eJ=it(te),eK=(0,rF.Xo)(),e$=(0,rF.jY)(),(0,en.useEffect)(function(){eJ?eK(eJ):e$()},[eK,e$,eJ]),eQ=(0,an.bS)(),e1=ir(oy),e2=io(te),e4=(0,es.Z)(eQ),(0,en.useEffect)(function(){var e=function(e){e&&(null!==n&&clearTimeout(n),n=setTimeout(function(){var e=e2();e&&e4.current(e)}))},n=null;e(e1.current);var t=e1.subscribe(e);return function(){null!==n&&clearTimeout(n),t()}},[e1,e4,e2]),e3=it(r$),e8=ii(oO),(0,en.useEffect)(function(){var e=function(){e8()};if(e3)return document.addEventListener("dragend",e),function(){document.removeEventListener("dragend",e)}},[e3,e8]),(0,ye.Z)(),e5=h0((0,ed.Z)()),e6=(0,en.useRef)(0),e7=(0,nE.Gn)("chatAudioNotification").preferences,e9=(0,er.P5)({controlName:"flag-chat-audio-notification"}),(0,en.useEffect)(function(){e9&&e7.chatAudioNotification&&e5>e6.current&&new Audio("/public/sounds/pop.mp3").play(),e6.current=e5},[e9,e5,e6,e7]),ne=it(tC),nn=(0,an.dr)(),nt=io(tm),(0,ng.Il)(function(){if(ne)return[uc.webviewRefresh.id,function(){var e=nt().filter(function(e){return"webview"===(0,J._)(e,2)[1].type}),n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,J._)(i.value,1)[0],l=nn(a);l&&"webview"===l.type&&l.refresh()}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}]},[ne,nn,nt]),(0,yp.Z)();var tp=ul();no=(ni={debuggest:(nr=(0,el.Z)()).debuggest,toolchain:nr.toolchain}).toolchain,na=ni.debuggest,(0,en.useEffect)(function(){function e(e){(null==e?void 0:e.debuggers)&&(null==e?void 0:e.debuggers.length)>0&&na.connect()}e(no.configs.current),no.configs.subscribe(function(n){e(n)})},[no,na]),nc=nl=(0,lC.Z)(na.mainClient),(0,en.useEffect)(function(){if(nc){var e=nc.onStarted(function(e){(0,ep.j)(ep.U3.DEBUGGER_USED,{action:"started",joined:e})}),n=nc.onPaused(function(e){(0,ep.j)(ep.U3.DEBUGGER_USED,{action:"paused",reason:e})}),t=nc.onBreakpoint(function(e){(0,ep.j)(ep.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:e,state:nc.state.current})});return function(){e(),n(),t()}}},[nc]),nu=(0,es.Z)(function(e){tp({pane:{type:"codeEditor",data:e},placement:{type:"secondary"},activate:!1})}),nf=null==(np=null==(nd=(0,lC.Z)(nl?nl.stackFrames:null))?void 0:nd[0])?void 0:null===(ns=np.source)||void 0===ns?void 0:ns.path,nh=null==np?void 0:np.line,(0,en.useEffect)(function(){if(nf&&nh&&nl){var e=(0,yl.om)(nf);e?nu.current({path:e,line:nh}):nl.stepOut()}},[nl,nf,nh,nu]),(0,en.useEffect)(function(){return co.YA("replId",ta.id),function(){co.YA("replId",void 0)}},[ta.id]),nv=(nm={repl:ta,currentUser:tl}).repl,ny=nm.currentUser,nw=(0,el.Z)().container,nk=(0,eG.useRouter)(),nC=(0,yz.S)(),n_=(0,yy.b)({repl:nv,currentUser:ny}),(0,en.useEffect)(function(){var e;if(n_)return yW||(yW=!0,e=nk.query.initialConnectionMetadata),nw.connect({customConnectionMetadata:e,context:n_,getMinimumRetryDelayMs:nC}),function(){nw.close()}},[n_,nw]),(0,en.useRef)(!1),(0,en.useEffect)(function(){return function(){nw.destroy()}},[nw]),nS=(0,ed.Z)(),nT=(0,el.Z)().container,nG=ii(rH),nB=(0,J._)((nP=(0,eL._)({},yF,void 0),ez.D(yV,nP)),1)[0],nU=(0,nE.Gn)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,nA=(0,J._)((0,yN.e)(),1)[0],nL=(0,nI.cR)(),(0,en.useEffect)(function(){return nT.onPortOpened(nD()(function(e){var n=e.isVnc;e.isForwarded&&((n||nU&&!nA)&&!nL&&nG(n?"vnc":"webview"),nB({variables:{input:(0,eL._)({id:nS},n?{isVnc:!0}:{isServer:!0})}}))},500,{leading:!0}))},[nT,nG,nB,nS,nU,nA,nL]),(0,yn.Z)(),(0,yL.Z)(),nO=(0,er.P5)({controlName:"flag-open-telemetry-tracing"}),nq=(nM=(nX=(0,J._)((0,en.useState)(!1),2))[0],nz=nX[1],nN=(nW=(0,J._)((0,en.useState)(Date.now()),2))[0],nj=nW[1],nV=(nF=(0,J._)((0,en.useState)(Date.now()),2))[0],nH=nF[1],(0,en.useEffect)(function(){var e=function(){nz(!document.hidden),document.hidden?nH(Date.now()):nj(Date.now())};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),nY={visibility:nM,visibleTime:nN,hiddenTime:nV}).visibility,nJ=nY.visibleTime,nK=nY.hiddenTime,(0,en.useEffect)(function(){nO&&nq&&(nJ-nK)/1e3>60&&(0,yh.KQ)(ym.T0)},[nO,nq,nK,nJ]),(0,ya.Z)(ta,tl);var tf=ii(ts),th=(0,cK.T)();(0,en.useEffect)(function(){tf(!th)},[th,tf]);var tv=(0,er.P5)({controlName:o7.wK,logFlagToAnalytics:!1}),tg=ii(tu);tv&&tg(tv),nQ=(0,el.Z)().presence,n0=(0,ed.Z)(),n1=(0,en.useRef)(!1),n3=(n2=(0,eL._)({},bo,{variables:{replId:n0}}),n4=eM.a(ba,n2)).data,n8=n4.loading,n5=0,(null==n3?void 0:n3.repl.__typename)==="Repl"&&(n5=n3.repl.multiplayers.length,(null===(n$=n3.repl.owner)||void 0===n$?void 0:n$.__typename)==="User"&&(n5+=1)),(0,en.useEffect)(function(){if(!n8&&!n1.current){var e=nQ.onActiveUsersChange(function(){n1.current=!0,e(),(0,ep.j)(ep.U3.MULTIPLAYER_REPL_OPENED,{replId:n0,participantsCount:n5,usersOnlineCount:nQ.getActiveUsers().length})});return e}},[n0,n8,n5,nQ]),(0,yd.B)(),(0,yu.b)();var ty=(0,rF.fg)();(0,en.useEffect)(function(){td.setWaitForFileClose(ty)},[td,ty]);var tb=(0,gX.uV)(),tZ=it(tx);return(0,en.useEffect)(function(){tZ&&tb(tZ)},[tb,tZ]),n7=(n6=(0,el.Z)()).packager,tn=n6.toolchain,(0,en.useEffect)(function(){var e=setTimeout(function(){!function(){n.apply(this,arguments)}()},(10+5*Math.random())*1e3);function n(){return(n=(0,nx._)(function(){var e,n,t,r,i,o,a,l,c,s;return(0,nZ.Jh)(this,function(u){switch(u.label){case 0:if(!tn.configs.current||!n7)return[2];e=tn.configs.current.packagers,n=!0,t=!1,r=void 0,u.label=1;case 1:u.trys.push([1,7,8,9]),i=e[Symbol.iterator](),u.label=2;case 2:if(n=(o=i.next()).done)return[3,6];return a=o.value,[4,n7.listSpecfile(a.id)];case 3:return(l=u.sent()).packages&&l.packages.length>0&&(c=l.packages.map(function(e){return e.name||""})||[],lX.kg.info("packager installed packages",{packagerId:a.id,language:a.language,packages:c}),(0,ep.j)(yc.U3.PACKAGER_PACKAGES_INSTALLED,{packages:c})),[4,function(e){return ys.apply(this,arguments)}((5+5*Math.random())*1e3)];case 4:u.sent(),u.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return s=u.sent(),t=!0,r=s,[3,9];case 8:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 9:return[2]}})})).apply(this,arguments)}return function(){clearTimeout(e)}},[n7,tn.configs.current]),tt=(0,rF.WU)(),ti=(0,an.bS)(),(0,en.useEffect)(function(){var e=function(){var e=tt();e&&ti(e)},n=function(){"visible"===document.visibilityState&&document.activeElement===document.body&&e()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",n),function(){window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",n)}},[ti,tt]),null}var bs=t(45726),bu=t(15542);function bd(){var e,n=oM(),t=(0,rF.Xo)(),r=(0,ec.QH)(),i=(0,ec.pV)(),o=(0,ev.Z)(),a=ii(rW),l=ul(),c=(0,rF.WU)(),s=(0,an.c4)(),u=io(ra),d=ii(rp),p=(0,en.useCallback)((e=(0,nx._)(function(e){var n;return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:return[4,s(a({pane:{type:"shell"},activate:!0,placement:{type:"secondary"}}))];case 1:if("shell"!==(n=t.sent()).type)throw Error("Expected shell pane binding");return n.exec(e),[2]}})}),function(n){return e.apply(this,arguments)}),[a,s]),f=(0,en.useCallback)(function(e){l({pane:{type:"extension",data:{extensionId:e.extensionId,installationId:e.installationId,baseUrl:e.baseUrl,path:e.path,name:e.name}},activate:!0,placement:{type:"secondary",relativeTo:c()}})},[l,c]);return(0,nb.Z)(function(){return{openFile:n,watchActiveFile:r,getActiveFile:i,activatePane:t,toasts:o,execInShell:p,revealOrInsertTool:f,getLayoutState:u,setLayoutState:d}},[n,r,i,t,o,p,f,u,d])}var bp=t(70504),bf=t(57407),bh=t(62582),bm=t(71554);(c=D||(D={})).RAW="RAW",c.PROXY="PROXY",c.THROW="THROW",c.HANDLER="HANDLER",(s=P||(P={})).GET="GET",s.SET="SET",s.APPLY="APPLY",s.CONSTRUCT="CONSTRUCT",s.ENDPOINT="ENDPOINT",s.RELEASE="RELEASE";var bv=Symbol("Comlink.proxy"),bg=Symbol("Comlink.endpoint"),by=Symbol("Comlink.releaseProxy"),bb=Symbol("Comlink.thrown"),bx=function(e){return"object"==typeof e&&null!==e||"function"==typeof e},bZ=new Map([["proxy",{canHandle:function(e){return bx(e)&&e[bv]},serialize:function(e){var n=new MessageChannel,t=n.port1,r=n.port2;return bw(e,t),[r,[r]]},deserialize:function(e){return e.start(),function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o=new Proxy(r,{get:function(r,a){if(bC(i),a===by)return function(){return bT(n,{type:P.RELEASE,path:t.map(function(e){return e.toString()})}).then(function(){bk(n),i=!0})};if("then"===a){if(0===t.length)return{then:function(){return o}};var l=bT(n,{type:P.GET,path:t.map(function(e){return e.toString()})}).then(bI);return l.then.bind(l)}return e(n,(0,em._)(t).concat([a]))},set:function(e,r,o){bC(i);var a=(0,J._)(bR(o),2),l=a[0],c=a[1];return bT(n,{type:P.SET,path:(0,em._)(t).concat([r]).map(function(e){return e.toString()}),value:l},c).then(bI)},apply:function(r,o,a){bC(i);var l=t[t.length-1];if(l===bg)return bT(n,{type:P.ENDPOINT}).then(bI);if("bind"===l)return e(n,t.slice(0,-1));var c=(0,J._)(b_(a),2),s=c[0],u=c[1];return bT(n,{type:P.APPLY,path:t.map(function(e){return e.toString()}),argumentList:s},u).then(bI)},construct:function(e,r){bC(i);var o=(0,J._)(b_(r),2),a=o[0],l=o[1];return bT(n,{type:P.CONSTRUCT,path:t.map(function(e){return e.toString()}),argumentList:a},l).then(bI)}});return o}(e,[],void 0)}}],["throw",{canHandle:function(e){return bx(e)&&bb in e},serialize:function(e){var n=e.value;return[n instanceof Error?{isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:{isError:!1,value:n},[]]},deserialize:function(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function bw(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!t||i.origin===t.origin&&i.source===t.source)){var o,a=(0,eL._)({path:[]},i.data),l=a.id,c=a.type,s=a.path,u=(i.data.argumentList||[]).map(bI);try{var d=s.slice(0,-1).reduce(function(e,n){return e[n]},e),p=s.reduce(function(e,n){return e[n]},e);switch(c){case P.GET:o=p;break;case P.SET:d[s.slice(-1)[0]]=bI(i.data.value),o=!0;break;case P.APPLY:o=p.apply(d,u);break;case P.CONSTRUCT:var f=(0,bm._)(p,(0,em._)(u));o=bE(f);break;case P.ENDPOINT:var h,m=new MessageChannel,v=m.port1,g=m.port2;bw(e,g),h=[v],bS.set(v,h),o=v;break;case P.RELEASE:o=void 0;break;default:return}}catch(e){o=(0,ea._)({value:e},bb,0)}Promise.resolve(o).catch(function(e){return(0,ea._)({value:e},bb,0)}).then(function(e){var t=(0,J._)(bR(e),2),i=t[0],o=t[1];n.postMessage((0,e0._)((0,eL._)({},i),{id:l}),o),c===P.RELEASE&&(n.removeEventListener("message",r),bk(n))})}}return n.addEventListener("message",r),n.start&&n.start(),function(){n.removeEventListener("message",r),bk(n)}}function bk(e){"MessagePort"===e.constructor.name&&e.close()}function bC(e){if(e)throw Error("Proxy has been released and is not useable")}function b_(e){var n,t=e.map(bR);return[t.map(function(e){return e[0]}),(n=t.map(function(e){return e[1]}),Array.prototype.concat.apply([],n))]}var bS=new WeakMap;function bE(e){return Object.assign(e,(0,ea._)({},bv,!0))}function bR(e){var n=!0,t=!1,r=void 0;try{for(var i,o=bZ[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,J._)(i.value,2),l=a[0],c=a[1];if(c.canHandle(e)){var s=(0,J._)(c.serialize(e),2),u=s[0],d=s[1];return[{type:D.HANDLER,name:l,value:u},d]}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return[{type:D.RAW,value:e},bS.get(e)||[]]}function bI(e){switch(e.type){case D.HANDLER:return bZ.get(e.name).deserialize(e.value);case D.RAW:return e.value}}function bT(e,n,t){return new Promise(function(r){var i=[,,,,].fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.addEventListener("message",function n(t){t.data&&t.data.id&&t.data.id===i&&(e.removeEventListener("message",n),r(t.data))}),e.start&&e.start(),e.postMessage((0,eL._)({id:i},n),t)})}var bG=Symbol("timeout");function bD(e,n){var t={};for(var r in n)"function"==typeof n[r]&&(t[r]=function(e,n){return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=!0,a=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0)(0,c.value)()}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return n.apply(void 0,(0,em._)(r))}}(e,n[r]));return t}function bP(e,n){return function(){var t=e.store.get(e.extensionStateAtom),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(!t.scopes.has(c)){var s="Scope not declared in extension.json: ".concat(c);if(e.flagEnforceScopes)throw e.logger.error(s),Error(s);e.logger.warn("".concat(s,". In the future this will throw an error"))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}}var bB=lO.Dy.Record(lO.Dy.String(),lO.Dy.String({minLength:1}));function bU(){var e=(0,eO._)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return bU=function(){return e},e}function bA(){var e=(0,eO._)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return bA=function(){return e},e}function bL(){var e=(0,eO._)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return bL=function(){return e},e}function bO(){var e=(0,eO._)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return bO=function(){return e},e}function bX(){var e=(0,eO._)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return bX=function(){return e},e}function bM(){var e=(0,eO._)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return bM=function(){return e},e}function bz(){var e=(0,eO._)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return bz=function(){return e},e}function bW(){var e=(0,eO._)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return bW=function(){return e},e}function bN(){var e=(0,eO._)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    runCount\n    commentCount\n    iconUrl\n    imageUrl\n    tags {\n      id\n      isOfficial\n    }\n  }\n"]);return bN=function(){return e},e}function bj(){var e=(0,eO._)(["\n  fragment CommentsReplData on Repl {\n    comments {\n      items {\n        id\n        body\n        user {\n          id\n          username\n          image\n        }\n      }\n    }\n  }\n"]);return bj=function(){return e},e}function bF(){var e=(0,eO._)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return bF=function(){return e},e}function bV(){var e=(0,eO._)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return bV=function(){return e},e}function bH(){var e=(0,eO._)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return bH=function(){return e},e}function bY(){var e=(0,eO._)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return bY=function(){return e},e}function bq(){var e=(0,eO._)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return bq=function(){return e},e}function bJ(){var e=(0,eO._)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return bJ=function(){return e},e}function bK(){var e=(0,eO._)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      editorPreferences {\n        fontSize\n        indentIsSpaces\n        indentSize\n        keyboardHandler\n        wrapping\n        codeIntelligence\n        codeSuggestion\n        multiselectModifierKey\n        minimapDisplay\n      }\n    }\n  }\n"]);return bK=function(){return e},e}function b$(){var e=(0,eO._)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeComments: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...CommentsReplData @include(if: $includeComments)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        isOwner\n        replId\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return b$=function(){return e},e}function bQ(){var e=(0,eO._)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeComments: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...CommentsReplData @include(if: $includeComments)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return bQ=function(){return e},e}var b0=(0,eX.Ps)(bU()),b1=(0,eX.Ps)(bA()),b2=(0,eX.Ps)(bL()),b4=(0,eX.Ps)(bO()),b3=(0,eX.Ps)(bX()),b8=(0,eX.Ps)(bM()),b5=(0,eX.Ps)(bz()),b6=(0,eX.Ps)(bW()),b7=(0,eX.Ps)(bN()),b9=(0,eX.Ps)(bj()),xe=(0,eX.Ps)(bF()),xn=(0,eX.Ps)(bV(),xe),xt=(0,eX.Ps)(bH(),xe),xr=(0,eX.Ps)(bY(),b0,b1,b2,b4),xi=(0,eX.Ps)(bq(),xe,b3,b8,b5),xo=(0,eX.Ps)(bJ(),xe,b3,b8,b5),xa=(0,eX.Ps)(bK()),xl=(0,eX.Ps)(b$(),b6,b7,b9,xn,xt),xc=(0,eX.Ps)(bQ(),b6,b7,b9,xn,xt);function xs(){var e=(0,eO._)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return xs=function(){return e},e}var xu=(0,eX.Ps)(xs());function xd(e){var n,t;return{registerCommand:(n=(0,nx._)(function(n,t){var r,i,o;return(0,nZ.Jh)(this,function(a){switch(a.label){case 0:if(t)return[3,5];e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=n,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,su.V)(r,e)];case 2:return o=a.sent(),[3,4];case 3:throw a.sent();case 4:if(!o.data.id)throw Error("Command: expected id to be defined");return(i={commandId:o.data.id,contributions:o.data.contributions}).contributions||(e.logger.warn("Command: '".concat(o.data.id,"' has no contributions")),i.contributions=[]),[3,9];case 5:i=n,r=t,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,(0,su.V)(r,e)];case 7:return o=a.sent(),[3,9];case 8:throw a.sent();case 9:return e.store.set(sd._K,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:i.commandId,contributions:i.contributions,create:(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){return[2,o]})})}}),[2]}})}),function(e,t){return n.apply(this,arguments)}),registerCreateCommand:(t=(0,nx._)(function(n,t){var r;return(0,nZ.Jh)(this,function(i){var o;return r={id:n.commandId,contributions:n.contributions,create:(o=(0,nx._)(function(n){var r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(null)},50)})])];case 1:if(null===(r=i.sent()))return[2,null];return[2,(0,su.V)(r,e)]}})}),function(e){return o.apply(this,arguments)})},e.store.set(sd._K,{extensionStateAtom:e.extensionStateAtom,createCommand:r}),[2]})}),function(e,n){return t.apply(this,arguments)})}}function xp(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}var xf=t(30249),xh=t(78037);function xm(e){var n;return n=(0,nx._)(function(n){var t,r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:return[4,null===tM.l||void 0===tM.l?void 0:tM.l.query({query:e,variables:n||void 0})];case 1:if(null==(t=i.sent())?void 0:t.data)return[2,t.data];throw Error(null==t?void 0:null===(r=t.error)||void 0===r?void 0:r.message)}})}),function(e){return n.apply(this,arguments)}}var xv=t(97778);function xg(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var xy=function(e){var n=e.showMessage;return{showConfirm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,r=arguments.length>2?arguments[2]:void 0;return n({content:e,type:"confirm",time:t>1e4?1e3:t,style:r})},showError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,r=arguments.length>2?arguments[2]:void 0;return n({content:e,type:"error",time:t>1e4?1e3:t,style:r})},showNotice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,r=arguments.length>2?arguments[2]:void 0;return n({content:e,type:"notice",time:t>1e4?1e3:t,style:r})},showWarning:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,r=arguments.length>2?arguments[2]:void 0;return n({content:e,type:"warning",time:t>1e4?1e3:t,style:r})},hideMessage:e.hideMessage,hideAllMessages:e.hideAllMessages}};function xb(e){var n=e.extension,t=e.sandboxUrl,r=e.sandboxTitle,i=e.paneId,o=e.environmentAPIs,a=e.filePath,l=(0,en.useRef)(null),c=(0,ed.Z)(),s=(0,bu.d)(),u=(0,el.Z)(),d=(0,en.useRef)(),p=(0,er.P5)({controlName:"flag-extensions-enforce-scopes",default:!1,type:"boolean",logFlagToAnalytics:!1}),f=(0,gn.Ld)(),h=(0,bp.r9)(null==n?void 0:n.installationId),m=(0,lL.F)(),v=(0,en.useRef)(m),g=(0,en.useRef)([]);v.current=m;var y=(0,nb.Z)(function(){return{}},[]),b=(0,yH.Z)(u.container),x=(0,J._)((0,en.useState)(!1),2),Z=x[0],w=x[1];(0,en.useEffect)(function(){b===bf.em.CONNECTED&&w(!0)},[b]),(0,en.useEffect)(function(){g.current.forEach(function(e){return e(m.theme)})},[m.theme]),(0,en.useEffect)(function(){return function(){d.current&&d.current()}},[]);var k=(0,en.useCallback)(function(){try{var e=new URL(t);if("https:"===e.protocol)return!0;return!1}catch(e){return!1}},[t]),C=(0,en.useCallback)(function(){if(l.current&&k()&&n&&h&&s){d.current&&d.current();var e={extension:n,extensionIframe:l.current,services:u,paneId:i,replId:c,flagEnforceScopes:p,getThemeContext:function(){return v.current},onThemeChange:function(e){return g.current.push(e),function(){g.current.splice(g.current.indexOf(e),1)}},store:f,extensionStateAtom:h,environmentAPIs:o,filePath:a,logger:n.logger.createLogger({sandboxUrl:t,sandboxTitle:r}),userId:s,ghostwriter:y};d.current=function(e){var n=e.extensionIframe,t=new URL(n.src).origin,r=function(e){var n,t,r,i,o,a,l,c,s,u,d,p,f,h,m=e.filePath,v=e.replId,g=e.environmentAPIs,y=e.logger.createLogger({api:"debug"});function b(){return(b=(0,nx._)(function(n){var t,r,i,o;return(0,nZ.Jh)(this,function(a){switch(a.label){case 0:return[4,null==n?void 0:n.clientName];case 1:return r=null!==(t=a.sent())&&void 0!==t?t:"(unset)",[4,null==n?void 0:n.clientVersion];case 2:return o=null!==(i=a.sent())&&void 0!==i?i:"(unset)",(0,ep.j)(ep.U3.EXTENSION_SANDBOX_INITIALIZED,{clientName:r,clientVersion:o,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,nx._)(function(){var n,t,i;return(0,nZ.Jh)(this,function(a){switch(a.label){case 0:if(!e.extension.isLocal||"@replit/extensions"!==r)return[2];return[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")];case 1:if((t=a.sent()).error)throw t.error;if(!t.output)throw Error("No output from npm");if((i=JSON.parse(null===(n=t.output)||void 0===n?void 0:n.trim()))===o)return[2];return e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(o,", but the latest version is ").concat(i),{clientVersion:o,latestVersion:i}),[2]}})})(),[2,{success:!0}]}})})).apply(this,arguments)}return(0,e0._)((0,eL._)({filePath:m},function(e){var n=e.services.fs,t=e.logger.createLogger({api:"fs"});function r(){return(r=(0,nx._)(function(e,t){var r,i,o;return(0,nZ.Jh)(this,function(a){switch(a.label){case 0:if(r=(0,xv.AH)(e),"string"!=typeof t)return[3,1];return i=t,[3,4];case 1:if(!(t instanceof Blob))return[3,3];return o=at.Z.from,[4,t.arrayBuffer()];case 2:return i=o.apply(at.Z,[a.sent()]),[3,4];case 3:i=at.Z.from(t),a.label=4;case 4:return[4,n.writeFile(r,i)];case 5:return[2,xg(a.sent())]}})})).apply(this,arguments)}function i(){return(i=(0,nx._)(function(e){var t,r,i,o=arguments;return(0,nZ.Jh)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"utf8",r=(0,xv.AH)(e),[4,n.readFile(r)];case 1:var l,c;if((i=a.sent()).error)return[2,{error:i.error,content:null}];return[2,{error:null,content:(l=i.content,"utf8"===(c=t)?l.toString():"binary"===c?l.toBuffer():l)}]}})})).apply(this,arguments)}function o(){return(o=(0,nx._)(function(e){var t,r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:return t=(0,xv.AH)(e),[4,n.readDir(t)];case 1:if((r=i.sent()).error)return[2,{error:r.error,children:null}];return[2,{error:null,children:r.children}]}})})).apply(this,arguments)}function a(){return(a=(0,nx._)(function(e){var t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return t=(0,xv.AH)(e),[4,n.createDir(t)];case 1:return[2,xg(r.sent())]}})})).apply(this,arguments)}function l(){return(l=(0,nx._)(function(e){var t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return t=(0,xv.AH)(e),[4,n.deleteDir(t)];case 1:return[2,xg(r.sent())]}})})).apply(this,arguments)}function c(){return(c=(0,nx._)(function(e){var t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return t=(0,xv.AH)(e),[4,n.deleteFile(t)];case 1:return[2,xg(r.sent())]}})})).apply(this,arguments)}function s(){return(s=(0,nx._)(function(e,t){var r,i,o;return(0,nZ.Jh)(this,function(a){switch(a.label){case 0:return r=(0,xv.AH)(e),[4,n.stat(r)];case 1:if(!(i=a.sent()).exists)return[2,{error:"File or directory does not exist",success:!1}];if(i.type!==rN.Tv.File)return[3,3];return[4,n.moveFile(r,t)];case 2:return o=a.sent(),[3,5];case 3:return[4,n.moveDir(r,t)];case 4:o=a.sent(),a.label=5;case 5:return[2,xg(o)]}})})).apply(this,arguments)}function u(){return(u=(0,nx._)(function(e,t){var r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:return r=(0,xv.AH)(e),[4,n.copyFile(r,t)];case 1:return[2,xg(i.sent())]}})})).apply(this,arguments)}return bD([bP(e,["read"])],(0,eL._)({readFile:function(e){return i.apply(this,arguments)},readDir:function(e){return o.apply(this,arguments)},watchFile:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",o=(0,xv.AH)(e);(0,aS.Mb)(o)&&t.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=n.watchFile(o,{onChange:function(e){if("utf8"===i){r.onChange(e.toString("utf8"));return}r.onChange(e.asBuffer)},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return bE(function(){a()})},watchDir:function(e,t){var r=(0,xv.AH)(e),i=n.watchDir(r,{onChange:function(n){t.onChange(n.map(function(n){return{path:(0,xv.Oh)(e)+n.filename,type:n.type}}))},onError:function(e){t.onError(e)},onMoveOrDelete:function(e){t.onMoveOrDelete(e)}});return bE(function(){i()})}},bD([bP(e,["write-exec"])],{createDir:function(e){return a.apply(this,arguments)},deleteDir:function(e){return l.apply(this,arguments)},writeFile:function(e,n){return r.apply(this,arguments)},deleteFile:function(e){return c.apply(this,arguments)},copyFile:function(e,n){return u.apply(this,arguments)},move:function(e,n){return s.apply(this,arguments)},watchTextFile:function(e,r){(0,aS.Mb)(e)||t.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var i,o=n.watchTextFile(e,{onReady:function(e){var n=e.fetchChanges,t=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,l=e.writeChange;r.onReady(bE({writeChange:l,fetchChanges:n,initialContent:t,version:a,transformSelection:i,updateSelections:o}))},onChange:(i=(0,nx._)(function(e){var n,t,i,o;return(0,nZ.Jh)(this,function(a){return n=e.latestContent,t=e.changeSource,i=e.changes,o=e.version,r.onChange({latestContent:n.toString(),version:o,changeSource:t,changes:i.toJSON()}),[2]})}),function(e){return i.apply(this,arguments)}),onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return bE(function(){o()})}})))}(e),function(e){var n=e.services.container,t=null;function r(){return i.apply(this,arguments)}function i(){return(i=(0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:if(t)return[2];return[4,n.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw Error("unable to find REPLIT_DB_URL");return t=e.output.trim(),[2]}})})).apply(this,arguments)}function o(){return(o=(0,nx._)(function(e,i){return(0,nZ.Jh)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl",t,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}})})).apply(this,arguments)}function a(){return(a=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","".concat(t,"/").concat(e))];case 2:return[2,i.sent().output]}})})).apply(this,arguments)}function l(){return(l=(0,nx._)(function(e){var i;return(0,nZ.Jh)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","".concat(t,"?prefix=").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})).apply(this,arguments)}function c(){return(c=(0,nx._)(function(e){var i;return(0,nZ.Jh)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","-XDELETE","".concat(t,"/").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})).apply(this,arguments)}return bD([bP(e,["repldb:read"])],(0,eL._)({getReplDbValue:function(e){return a.apply(this,arguments)},listReplDbKeys:function(e){return l.apply(this,arguments)}},bD([bP(e,["repldb:write"])],{setReplDbValue:function(e,n){return o.apply(this,arguments)},deleteReplDbKey:function(e){return c.apply(this,arguments)}})))}(e),{watchActiveFile:function(e){return bE(a.environmentAPIs.watchActiveFile(e))},openFile:(a=e).environmentAPIs.openFile,getActiveFile:function(){return a.environmentAPIs.getActiveFile()}},(l=e.getThemeContext,c=e.onThemeChange,{getCurrentTheme:function(){return l().theme},getCurrentThemeValues:function(){return l().theme.values.global},onThemeChange:function(e){var n=c(e);return bE(function(){n()})},onThemeChangeValues:function(e){var n=c(function(n){return e(n.values.global)});return bE(function(){n()})}}),xy(g.toasts),{currentUser:xm(xr),userById:xm(xo),userByUsername:xm(xi),currentRepl:function(e){return xm(xl)((0,eL._)({id:v},e))},replById:xm(xl),replByUrl:xm(xc)},function(e){var n=e.services.container.client(),t=e.logger.createLogger({api:"exec"});function r(){return(r=(0,nx._)(function(e){var r,i,o,a;return(0,nZ.Jh)(this,function(l){switch(l.label){case 0:return[4,e.args];case 1:return r=l.sent(),[4,e.env];case 2:if(i=l.sent(),t.info("exec: [".concat(r.join(", "),"]"),{environmentVariables:i}),!lz.B4.Check(bB,i))throw Error("Invalid environment variables");return[4,e.splitStderr];case 3:return o=l.sent(),a=function(){},[2,bE({dispose:function(){a()},promise:new Promise(function(l){a=n.openChannel({service:"exec"},function(n){var c=n.channel;c.onCommand(function(n){o?n.output?e.onOutput(n.output):n.stderr&&e.onStdErr(n.stderr):n.output&&e.onOutput(n.output)}),c.request({exec:{args:r,env:i,splitStderr:!!o}}).then(function(n){if(n.ok){l({exitCode:0,error:null});return}if(n.channelClosed){var t="Channel closed before command's execution finished";e.onError(t),l({exitCode:null,error:t});return}if("open"===c.status&&a(),n.error){var r,i,o=Number(null===(i=n.error)||void 0===i?void 0:null===(r=i.match(/-?[0-9]+/g))||void 0===r?void 0:r[0]);l({exitCode:"number"==typeof o?o:null,error:n.error});return}throw Error("Unknown error")}).catch(function(n){t.error("exec: threw crosis error:\n".concat(String(n||"")));var r="exec() failed due to internal error. See console for details.";e.onError(r),l({error:r,exitCode:null})})})})})]}})})).apply(this,arguments)}return(0,eL._)({},bD([bP(e,["write-exec"])],{exec:function(e){return r.apply(this,arguments)}}))}(e),(s=e.extension,u=e.paneId,d=e.environmentAPIs,p=!1,{activatePane:function(){u&&(d.activatePane(u),p||(p=!0,(0,ep.j)(ep.U3.EXTENSION_USED,{extensionId:s.extensionId,extensionName:s.manifest.name})))}})),{commands:{registerCommand:(f=(0,nx._)(function(n,t){var r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,su.V)(t,e)];case 1:return r=i.sent(),[3,3];case 2:throw i.sent();case 3:return e.store.set(sd._K,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:n.commandId,contributions:n.contributions,create:(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){return[2,r]})})}}),[2]}})}),function(e,n){return f.apply(this,arguments)}),registerCreateCommand:(h=(0,nx._)(function(n,t){var r;return(0,nZ.Jh)(this,function(i){var o;return r={id:n.commandId,contributions:n.contributions,create:(o=(0,nx._)(function(n){var r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(bG)},50)})])];case 1:if(null===(r=i.sent()))return[2,null];if(r===bG)return e.logger.warn("Command took too long to create. When using registerCreateCommand, you must return a command within ".concat(50,"ms")),[2,null];return[2,(0,su.V)(r,e)]}})}),function(e){return o.apply(this,arguments)})},e.store.set(sd._K,{extensionStateAtom:e.extensionStateAtom,createCommand:r}),[2]})}),function(e,n){return h.apply(this,arguments)})},experimental:(0,e0._)((0,eL._)({},bD([xp(e)],{hasExperimentalApi:function(){return!0}})),{editor:bD([xp(e)],(0,eL._)({},function(){function e(){return(e=(0,nx._)(function(){var e,n,t,r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:return[4,null===tM.l||void 0===tM.l?void 0:tM.l.query({query:xa})];case 1:if(null==(t=i.sent())?void 0:null===(n=t.data)||void 0===n?void 0:null===(e=n.currentUser)||void 0===e?void 0:e.editorPreferences)return[2,t.data.currentUser.editorPreferences];throw Error(null==t?void 0:null===(r=t.error)||void 0===r?void 0:r.message)}})})).apply(this,arguments)}return{getPreferences:function(){return e.apply(this,arguments)}}}())),commands:bD([xp(e)],(0,eL._)({},xd(e))),auth:bD([xp(e)],(0,eL._)({},{getAuthToken:function(){return(0,nx._)(function(){var n,t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:if(e.extension.isLocal)return[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:e.extension.installationId,extensionId:e.extension.extensionId,userId:e.userId,origin:"https://staging.replit.com"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")];return[4,null===tM.l||void 0===tM.l?void 0:tM.l.query({query:xu,variables:{installationId:e.extension.installationId}})];case 1:if(!(null==(n=r.sent())?void 0:n.data))throw Error("Failed to authenticate: something went wrong");if("NotFoundError"===(t=n.data.extensionInstallationById).__typename)throw Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==t.__typename||!t.token)throw Error("Failed to authenticate: something went wrong");return[2,t.token]}})})()}})),internal:bD([xp(e)],(0,eL._)({},xd(e))),execInShell:e.environmentAPIs.execInShell}),internal:(n=e).store.get(n.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:{},execInShell:n.environmentAPIs.execInShell,runner:(t=n.services.runner,{getRunState:function(){return t.getRunState()},onStateChanged:function(e){var n=t.onStateChanged(e);return bE(function(){n()})}}),container:(r=n.services.container,{getConnectionState:function(){return r.getConnectionState()},onConnectionStateChanged:function(e){var n=r.onConnectionStateChanged(e);return bE(function(){n()})}}),layout:{revealOrInsertTool:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=n.logger.createLogger({api:"revealOrInsertTool"});if(!n.extension.manifest.tools){t.warn("No tools defined in extension manifest");return}if(n.extension.manifest.tools.length<e+1){t.warn("Tool index out of bounds");return}var r=n.extension.manifest.tools[e],i=r.name||n.extension.manifest.name,o=r.handler;n.environmentAPIs.revealOrInsertTool({extensionId:n.extension.extensionId,installationId:n.extension.installationId,baseUrl:n.extension.baseUrl,path:o,name:i})},getLayoutState:function(){return n.environmentAPIs.getLayoutState()},setLayoutState:function(e){return n.environmentAPIs.setLayoutState(e)}},secrets:(i=n.services.secrets,{setSecret:function(e){var n=e.key,t=e.value;return(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return[4,i.writeSecret({key:n,value:t})];case 1:return e.sent(),[2,(0,xh.Ok)(!0)]}})})()},getSecret:function(e){return(0,nx._)(function(){var n,t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,i.readSecret(e.key)];case 1:return[2,xh.Ok.apply(void 0,[null===(n=r.sent())||void 0===n?void 0:n.value])];case 2:return t=r.sent(),[2,(0,xh.UG)(t)];case 3:return[2]}})})()},getReferenceCode:function(e){return(0,nx._)(function(){return(0,nZ.Jh)(this,function(n){return[2,(0,xf.e)(e.filePath,e.key)]})})()}}),dotReplit:{getConfig:(o=n.services.dotReplit).getConfig,update:o.updateDotReplit},commands:xd(n)}:null,debug:{info:function(e,n){return y.info(e,n)},warn:function(e,n){return y.warn(e,n)},error:function(e,n){return y.error(e,n)}},handshake:function(e){return b.apply(this,arguments)}})}(e);if(!n.contentWindow)throw Error("No contentWindow");var i=bw(r,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(n,r){e.postMessage(n,t,r)},addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}(n.contentWindow,self,t),{origin:t,source:n.contentWindow}),o=function(r){if(r.origin===t&&n.contentWindow===r.source){var i=r.data;i.payload&&e.logger.warn("Extension sent deprecated postMessage",i)}};return window.addEventListener("message",o),function(){i(),window.removeEventListener("message",o)}}(e)}},[s,v,u,k,i,p,f,h,o,c,a,n,t,r,y]);return{isValidExtensionPaneUrl:k,didConnectOnce:Z,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,e0._)((0,eL._)({title:r,src:t},bh.Z,e),{ref:(0,aQ.l)(l,e.ref),onLoad:function(n){C(),e.onLoad&&e.onLoad(n)}})},reloadSandbox:(0,en.useCallback)(function(){if(l.current){var e=l.current.src;l.current.src=e}},[])}}function xx(e){var n=e.extension,t=e.environmentAPIs;if(!n.manifest.background)throw Error("ExtensionBackground loaded without a background script defined in manifest");var r=(0,bp.r9)(n.installationId),i=xb({extension:n,sandboxUrl:(0,df.Vh)(n.baseUrl,n.manifest.background.page),sandboxTitle:"Extension Background: "+n.manifest.name,environmentAPIs:t,paneId:null,filePath:null}),o=i.didConnectOnce,a=i.isValidExtensionPaneUrl,l=i.getIframeProps;return a()&&o&&r?(0,K.tZ)("iframe",(0,eL._)({},l({css:{width:"0px",height:"0px",border:"none"}}))):null}var xZ=t(1831),xw=t(46565),xk=t(65169);function xC(){var e=(0,eO._)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return xC=function(){return e},e}var x_=(0,eX.Ps)(xC(),xk.R9,xk.gp);function xS(e){var n=e.hostedUrl,t=(0,ed.Z)(),r=(0,bu.d)(),i=(0,nI.cR)(),o=(0,bp.WF)(),a=oL(),l=(0,xZ.Kf)(),c=(0,bp.ot)(),s=(0,xZ.dI)();(0,nI.Sp)();var u=(0,bp.Mu)(),d=bd(),p=(0,J._)((0,en.useState)(!1),2),f=p[0],h=p[1];(0,en.useEffect)(function(){t&&r&&s({replId:t,userId:r})},[t,r,s]);var m=function(e){var n,i=e.filterUser;return n=(0,nx._)(function(e){var n,a;return(0,nZ.Jh)(this,function(l){switch(l.label){case 0:if(!e.active)return[2,[]];return[4,null===tM.l||void 0===tM.l?void 0:tM.l.query({query:x_,variables:{replId:t,userId:i?r:void 0}})];case 1:if(!(n=l.sent())||n.error||!(a=n.data.extensionList))return[2,[]];return[2,a.map(function(e){var n;return{match:nC.pl,data:{type:"action",label:e.name,icon:(0,K.tZ)(hC.Z,{}),description:null!==(n=e.description)&&void 0!==n?n:"",run:function(){e.url&&(e.installation?c({installationId:(0,xw.Ad)(e.installation.id)}):o({replId:t,extensionId:(0,xw.T8)(e.id)}))}}}})]}})}),function(e){return n.apply(this,arguments)}},v=(0,sd.s6)(sp.Y.CommandBar);return av({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:(0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{}}],[4,Promise.all(v.map((t=(0,nx._)(function(n){var t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,su.C)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})},{enabled:!0}),av({match:nC.pl,commands:function(e){return e.active||""!==e.search?[{match:nC.pl,data:{type:"action",label:"Extension Devtools",icon:(0,K.tZ)(oq.Z,{}),description:"Manage and deploy this Repl as an extension",run:function(){a({pane:{type:"extensionDevtools"}})}}},{match:nC.pl,data:{type:"action",label:"URL",icon:(0,K.tZ)(oq.Z,{}),description:"Add an extension by URL",run:function(){h(!0)}}},{match:nC.pl,data:{type:"action",label:"From this Repl",icon:(0,K.tZ)(oq.Z,{}),description:"Load this Repl as an extension",run:function(){l(n)}}},{match:nC.pl,data:{type:"context",label:"My Extensions",icon:(0,K.tZ)(hC.Z,{}),description:"Browse extensions you have created"},commands:m({filterUser:!0})},{match:nC.pl,data:{type:"action",label:"Docs",icon:(0,K.tZ)(d5.Z,{}),description:"Read the Extensions docs",run:function(){a({pane:{type:"docs",data:{url:nP.TT.EXTENSIONS}}})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,K.tZ)(hC.Z,{}),description:"Manage extensions"}},{enabled:i}),(0,K.BX)(K.HY,{children:[(0,K.tZ)(eC.u,{isOpen:f,onRequestClose:function(){return h(!1)},children:(0,K.tZ)(bs.Z,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.replit.app",type:"text",onCancel:function(){return h(!1)},onConfirm:function(e){l(e)}})}),u.map(function(e){return e.manifest.background?(0,K.tZ)(xx,{environmentAPIs:d,extension:e},e.installationId):null})]})}var xE=t(4662),xR=t(51305),xI=t(13498),xT=t(56511),xG=t(13001),xD=t(19403),xP=t(761),xB=t(31105),xU=t(31593),xA=t(907),xL=t(36098),xO=t(38371),xX=t(43704),xM=t(54237),xz=en.forwardRef(function(e,n){var t,r,i,o=e.label,a=e.id,l=e.description,c=e.onChange,s=e.fontFamily,u=void 0===s?"sans-serif":s,d=e.fontSize,p=void 0===d?"medium":d,f=e.fontWeight,h=void 0===f?"regular":f,m=e.foreground,v=void 0===m?1:m,g=e.placeholder,y=e.validationResults,b=e.value,x=(0,aq._)(e,["label","id","description","onChange","fontFamily","fontSize","fontWeight","foreground","placeholder","validationResults","value"]),Z=(0,xX.Z)().ref,w=(0,aO.U)(),k=a||w("input"),C=l?w("input-description"):void 0,_=(0,J._)((0,en.useState)(!1),2),S=_[0],E=_[1];(null==y?void 0:y.some(function(e){return"loading"===e.state}))?t="loading":(null==y?void 0:y.some(function(e){return"error"===e.state}))?(t="error",i="var(--accent-negative-default)",r=(0,K.tZ)(lD.Z,{})):(null==y?void 0:y.every(function(e){return"success"===e.state}))?(t="success",i="var(--accent-positive-default)",r=(0,K.tZ)(aC.Z,{})):t="default";var R=dV.P3[t],I=(x.className?x.className+" ":"")+R;return(0,K.BX)("div",{className:eb().dynamic([["eff5a248a6706777",[i,xM.Z.fontSize[p],xM.Z.fontFamily[u],xM.Z.fontWeight[h],xM.Z.foreground[v],xM.Z.lineHeight[p]]]])+" container",children:[o?(0,K.BX)(K.HY,{children:[x.required?(0,K.BX)(dM.Ug,{spacing:"2px",children:[(0,K.tZ)(ew.Z,{tag:"label",foreground:S?1:2,size:"large"===p?"small":"xsmall",htmlFor:k,children:o}),(0,K.tZ)("span",{className:eb().dynamic([["eff5a248a6706777",[i,xM.Z.fontSize[p],xM.Z.fontFamily[u],xM.Z.fontWeight[h],xM.Z.foreground[v],xM.Z.lineHeight[p]]]])+" required",children:"*"})]}):(0,K.tZ)(ew.Z,{tag:"label",foreground:S?1:2,size:"large"===p?"small":"xsmall",htmlFor:k,children:o}),(0,K.tZ)(dH.Z,{height:"4px"})]}):null,(0,K.BX)("div",{className:eb().dynamic([["eff5a248a6706777",[i,xM.Z.fontSize[p],xM.Z.fontFamily[u],xM.Z.fontWeight[h],xM.Z.foreground[v],xM.Z.lineHeight[p]]]])+" textarea-container",children:[(0,K.tZ)("textarea",(0,e0._)((0,eL._)({id:k,placeholder:void 0===g?"":g,value:b,onChange:c,"aria-busy":"loading"===t,"aria-invalid":"error"===t,"aria-describedby":C},x),{ref:function(e){if(Z(e),n){if("function"==typeof n){n(e);return}n.current=e}},onFocus:function(e){E(!0),x.onFocus&&x.onFocus(e)},onBlur:function(e){E(!1),x.onBlur&&x.onBlur(e)},className:eb().dynamic([["eff5a248a6706777",[i,xM.Z.fontSize[p],xM.Z.fontFamily[u],xM.Z.fontWeight[h],xM.Z.foreground[v],xM.Z.lineHeight[p]]]])+" "+(I||"")})),r?(0,K.tZ)("div",{onMouseEnter:function(){return E(!0)},onMouseLeave:function(){return E(!1)},className:eb().dynamic([["eff5a248a6706777",[i,xM.Z.fontSize[p],xM.Z.fontFamily[u],xM.Z.fontWeight[h],xM.Z.foreground[v],xM.Z.lineHeight[p]]]])+" icon-container right",children:r}):null]}),l?(0,K.BX)(K.HY,{children:[(0,K.tZ)(dH.Z,{height:"4px"}),(0,K.tZ)(ew.Z,{id:C,tag:"span",foreground:3,size:p,children:l})]}):null,y&&S?(0,K.tZ)(dV.QE,{validationResults:y}):null,(0,K.tZ)(eb(),{id:"eff5a248a6706777",dynamic:[i,xM.Z.fontSize[p],xM.Z.fontFamily[u],xM.Z.fontWeight[h],xM.Z.foreground[v],xM.Z.lineHeight[p]],children:".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.textarea-container.__jsx-style-dynamic-selector{position:relative}.required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:var(--space-8);right:var(--space-8);background-color:var(--background-default);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;padding:var(--space-4)}.icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(i,"}textarea.__jsx-style-dynamic-selector{resize:none;font-size:").concat(xM.Z.fontSize[p],";font-family:").concat(xM.Z.fontFamily[u],";font-weight:").concat(xM.Z.fontWeight[h],";color:").concat(xM.Z.foreground[v],";line-height:").concat(xM.Z.lineHeight[p],";background-color:transparent;padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);outline:none;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;transition:.1s;line-height:1.4}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-default)}textarea.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer)}textarea.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default)}textarea.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}")})]})}),xW=t(12285),xN=t(4955),xj=t(14105),xF=t(9670);function xV(e){switch(e){case eT.Fl.Match:return"The test passes if the expected output is in the actual output.";case eT.Fl.Exact:return"The test passes if the expected output is equal to the actual output.";case eT.Fl.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case eT.Fl.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var xH=function(e){(0,xN._)(t,e);var n=(0,xF._)(t);function t(){for(var e,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return(0,xW._)(this,t),(e=n.call.apply(n,[this].concat((0,em._)(i)))).name=e.constructor.name,e}return t}((0,xj._)(Error));function xY(e){var n={id:e.id},t={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":n.output={compatibility:{expected:e.output}};break;case"match":n.output={match:{expected:e.output,ignoreTrailingWhitespace:!0}};break;case"exact":n.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":n.output={regex:{expression:e.output}}}return{id:e.id,instructions:[t,n]}}function xq(e){return xJ.apply(this,arguments)}function xJ(){return(xJ=(0,nx._)(function(e){var n,t,r,i,o,a,l,c,s,u;return(0,nZ.Jh)(this,function(d){switch(d.label){case 0:return[4,e.getRunConfig()];case 1:if(!(t=d.sent()))throw new xH("unable to fetch dotreplit run config");if(t.interp){if((null==(i=null===(r=t.interp)||void 0===r?void 0:r.command)?void 0:i.args[0])==="stderred"&&("--"===i.args[1]?i.args.splice(0,2):i.args.shift()),!i||i.args.length<1)throw o=new xH("received interp without command"),co.Tb(o,function(e){return e.setExtra("runInfo",u)}),o;if(i.args[0].match(/(^|\/)prybar/i)){var p,f,h,m,v;return[2,{execCommand:(p=i.args,f=i.env,h=p.indexOf("--ps1"),m=p.indexOf("--ps2"),v=p.indexOf("-i"),-1!==h&&null!=p[h+1]&&(p[h+1]=""),-1!==m&&null!=p[m+1]&&(p[m+1]=""),-1!==v&&p.splice(v,1),p.includes("-q")||p.unshift(p.shift(),"-q"),f.PS1="",f.PS2="",{args:p,env:f})}]}return[2,{execCommand:{args:i.args,env:i.env}}]}if(!(null===(n=t.run)||void 0===n?void 0:n.run))throw a=new xH("Bad repl run config received"),co.Tb(a,function(e){return e.setExtra("runConfig",t)}),a;return c=(l=t.run).run,s=l.compile,c.env.PS1="",c.env.PS2="",u={execCommand:{args:c.args,env:c.env}},s&&(s.env.PS1="",s.env.PS2="",u.buildCommand={args:s.args,env:s.env}),[2,u]}})})).apply(this,arguments)}var xK=function(e){var n=e.test,t=e.onSubmit,r=e.onCancel,i=e.isOpen,o=e.onRequestClose,a=(0,J._)((0,en.useState)({}),2),l=a[0],c=a[1],s=function(e){return{name:(null==e?void 0:e.name)||"",type:(null==e?void 0:e.type)||eT.Fl.Match,input:(null==e?void 0:e.input)||"",output:(null==e?void 0:e.output)||""}},u=(0,ev.Z)().showError,d=(0,J._)((0,en.useState)(s(n)),2),p=d[0],f=d[1];(0,en.useEffect)(function(){f(s(n)),c({})},[n,f]);var h=function(e,n){c(function(t){return(0,e0._)((0,eL._)({},t),(0,ea._)({},e,n?void 0:[{message:e+" expected but not provided.",state:"error"}]))})};return(0,K.tZ)(eC.u,{isOpen:i,onRequestClose:o,children:(0,K.BX)("div",{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-tests-view",children:[(0,K.tZ)("div",{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]])+" header-row",children:(0,K.tZ)(eZ.Z,{level:4,align:"center",children:n?"Edit test: ":"Create test"})}),(0,K.tZ)("div",{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,K.tZ)(dV.ZP,{label:"Test name",placeholder:"The name of the test",value:(null==p?void 0:p.name)||"",validationResults:l.name,onChange:function(e){var n;e.persist(),f(function(n){var t;return(0,e0._)((0,eL._)({},n),{name:(null===(t=e.target)||void 0===t?void 0:t.value)||""})}),h("name",null===(n=e.target)||void 0===n?void 0:n.value)},maxLength:20})}),(0,K.tZ)("div",{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,K.tZ)(xz,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:p.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),f(function(n){return(0,e0._)((0,eL._)({},n),{input:e.target.value})})}})}),(0,K.tZ)("div",{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,K.tZ)(xz,{style:{height:"150px"},label:"Expected output",validationResults:l.output,placeholder:"The expected output for the test",value:p.output,fontFamily:"monospace",translate:"no",onChange:function(e){var n;e.persist(),f(function(n){return(0,e0._)((0,eL._)({},n),{output:e.target.value})}),h("output",null===(n=e.target)||void 0===n?void 0:n.value)}})}),(0,K.tZ)("div",{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,K.tZ)("div",{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-container",children:(0,K.tZ)(xO.Z,{items:[eT.Fl.Match,eT.Fl.Exact,eT.Fl.Regex,eT.Fl.Compatibility],renderItemChildComponent:function(e){return(0,K.BX)("a",{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]]),children:[e,(0,K.tZ)("br",{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]])}),(0,K.tZ)(ew.Z,{size:"xsmall",children:xV(e)})]})},renderAnchorComponent:function(e){var n=e.innerRef,t=(0,aq._)(e,["innerRef"]);return(0,K.BX)("a",(0,e0._)((0,eL._)({ref:n},t),{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-view dropdown-anchor",children:[(0,K.tZ)(ew.Z,{children:p.type}),(0,K.tZ)(ew.Z,{children:(0,K.tZ)(c$.Z,{})})]}))},onClick:function(e){f(function(n){return(0,e0._)((0,eL._)({},n),{type:e})})}})})}),(0,K.BX)("div",{className:eb().dynamic([["17fbe82d60e1c74",[""===p.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row align-end",children:[(0,K.tZ)(ex.Z,{onClick:r,children:"Cancel"}),(0,K.tZ)(ex.Z,{color:"primary",filled:!0,onClick:function(){if(!p.name||!p.output){u("Test name and expected output must be provided."),p.name||h("name"),p.output||h("output");return}if(!p.type){u("A test type must be provided");return}t({testId:null==n?void 0:n.id,name:p.name,input:p.input||"",type:p.type,output:p.output}),f(s(void 0))},children:"Save"})]}),(0,K.tZ)(eb(),{id:"17fbe82d60e1c74",dynamic:[""===p.type?"--foreground-dimmer":"--foreground-default"],children:".dropdown-container.__jsx-style-dynamic-selector{border:1px solid var(--outline-dimmest);width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.dropdown-anchor.__jsx-style-dynamic-selector{padding:var(--space-8)}.dropdown-container.__jsx-style-dynamic-selector .anchor{z-index:1}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;text-align:right}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view .text{color:var(".concat(""===p.type?"--foreground-dimmer":"--foreground-default",")}.manage-tests-view.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:var(--space-16)}.manage-test-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-top:var(--space-16)}.align-end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.manage-test-row.__jsx-style-dynamic-selector>button{margin-left:var(--space-8)}.manage-test-row-section.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:0 var(--space-16);width:100%}")})]})})},x$=function(e){var n=e.test,t=e.onEdit,r=e.onDelete,i=e.onView,o=e.isTeacherView,a=e.status,l=e.isRunning,c=e.onShowFailed,s=e.disableButtons,u="";return a?u=a:l&&(u="Running"),(0,K.BX)("div",{onClick:function(){return i()},className:"jsx-d0055d2df6a917c5 test",children:[(0,K.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,K.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,K.tZ)(ew.Z,{size:"large",children:n.name})}),o?(0,K.tZ)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-d0055d2df6a917c5 test-row",children:(0,K.BX)(K.HY,{children:[(0,K.tZ)(ex.Z,{color:"primary",onClick:t,Icon:lU.Z,disabled:s}),(0,K.tZ)(dH.Z,{width:"var(--space-4)"}),(0,K.tZ)(ex.Z,{onClick:r,color:"negative",Icon:ds.Z,disabled:s})]})}):null]}),a||l?(0,K.BX)(K.HY,{children:[(0,K.tZ)(dH.Z,{height:2}),(0,K.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,K.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,K.tZ)(ew.Z,{className:dq()([{"status-passed":"Passed"===a},{"status-failed":"Failed"===a}]),children:u})}),(0,K.tZ)(ex.Z,{onClick:function(e){return e.stopPropagation(),c(e)},disabled:l,children:"Results"})]})]}):null,(0,K.tZ)(eb(),{id:"d0055d2df6a917c5",children:".test.jsx-d0055d2df6a917c5{background-color:var(--background-higher);margin-top:var(--space-8);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);cursor:pointer}.test-row.jsx-d0055d2df6a917c5 .status-passed{color:var(--accent-positive-default)}.test-row.jsx-d0055d2df6a917c5 .status-failed{color:var(--accent-negative-default)}.test-text.jsx-d0055d2df6a917c5{width:100%;padding:var(--space-4)0;padding-right:var(--space-8);word-break:break-all}.test.jsx-d0055d2df6a917c5:hover{background-color:var(--background-higher)}.test-row.jsx-d0055d2df6a917c5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}"})]})},xQ=function(e){var n=e.text;if(!n)return null;var t=n.split("\n").map(function(e,n){return[e,"".concat(n+1)]});return""===t[t.length-1][0]&&t.pop(),(0,K.BX)(dM.Ug,{children:[(0,K.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,K.tZ)("pre",{className:"jsx-6ac664c130469a42",children:t.map(function(e){var n=(0,J._)(e,2);return n[0],n[1]}).join("\n")})}),(0,K.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,K.tZ)("pre",{className:"jsx-6ac664c130469a42",children:n})}),(0,K.tZ)(eb(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},x0=t(47899),x1=function(e){var n=e.expected,t=e.actual;if(!n||!t)return null;for(var r=t.split("\n"),i=n.split("\n"),o=[],a=Math.max(i.length,r.length),l=0;l<a;l++)!function(e){var n,t,a=null!==(n=r[e])&&void 0!==n?n:"",l=null!==(t=i[e])&&void 0!==t?t:"",c=0;o.push((0,x0.Hg)(l,a).flatMap(function(e){var n=e.fromA,t=e.fromB,r=e.toA,i=e.toB,o=[];return n>c&&o.push({chars:l.slice(c,n)}),t!==i&&o.push({chars:a.slice(t,i),style:{backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}}),n!==r&&o.push({chars:l.slice(n,r),style:{backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}}),c=r,o}).map(function(e,n){var t=e.chars,r=e.style;return(0,K.tZ)("span",{style:r,children:t},n)}))}(l);return(0,K.BX)(dM.Ug,{children:[(0,K.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,K.tZ)("pre",{className:"jsx-6ac664c130469a42",children:Array.from({length:a},function(e,n){return n+1}).join("\n")})}),(0,K.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,K.tZ)("pre",{"data-testid":"TestTextDiffText",className:"jsx-6ac664c130469a42",children:o.map(function(e,n){return(0,K.tZ)(en.Fragment,{children:e},n)})})}),(0,K.tZ)(eb(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},x2=function(e){var n=e.test,t=e.actualOutput,r=e.isOpen,i=e.isResults,o=e.onRequestClose,a=e.didFail,l=e.error,c=n?xV(n.type):"",s=null==t?void 0:t.split("\n"),u=null==n?void 0:n.output.split("\n"),d=null==n?void 0:n.output;return a=null!=a?a:(null==n?void 0:n.status)==="Failed",(0,K.BX)(eC.u,{onRequestClose:o,isOpen:r&&void 0!==n,children:[(0,K.BX)("div",{className:"jsx-c7ed87540f6ec33d test-info",children:[(0,K.BX)(dM.gC,{align:"center",spacing:1,children:[(0,K.BX)(eZ.Z,{level:4,children:[i?"Test results: ":null,null==n?void 0:n.name]}),(0,K.BX)(dM.Ug,{spacing:1,children:[(0,K.tZ)("div",{role:"tooltip","data-microtip-position":"top","aria-label":c,className:"jsx-c7ed87540f6ec33d test-type",children:(0,K.tZ)(ew.Z,{align:"center",size:"small",children:null==n?void 0:n.type})}),i&&(null==n?void 0:n.status)?(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d "+"test-status ".concat(null==n?void 0:n.status),children:(0,K.tZ)(ew.Z,{align:"center",size:"small",children:null==n?void 0:n.status})}):null]})]}),(0,K.tZ)(dH.Z,{height:6}),(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,K.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:i?(0,K.BX)(dM.Ug,{spacing:1,align:"center",children:[(0,K.tZ)(ew.Z,{size:"medium",children:"Expected output"}),(0,K.tZ)(ew.Z,{size:"xsmall",children:(0,K.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,K.tZ)(ew.Z,{size:"medium",children:"Output"})}),(0,K.tZ)(dH.Z,{height:"var(--space-8)"}),(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,K.tZ)(xQ,{text:null==n?void 0:n.output})})]})}),(0,K.tZ)(dH.Z,{height:2}),(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,K.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:i?(0,K.BX)(dM.Ug,{spacing:1,align:"center",children:[(0,K.tZ)(ew.Z,{size:"medium",children:"Actual output"}),(0,K.tZ)(ew.Z,{size:"xsmall",children:(0,K.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,K.tZ)(ew.Z,{size:"medium",children:"Input"})}),(0,K.tZ)(dH.Z,{height:"var(--space-8)"}),(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,K.tZ)(xQ,{text:i?t:null==n?void 0:n.input})})]})}),i&&a?(0,K.tZ)(K.HY,{children:l?(0,K.BX)(K.HY,{children:[(0,K.tZ)(dH.Z,{height:2}),(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,K.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,K.tZ)(ew.Z,{size:"medium",children:"Error(s)"})}),(0,K.tZ)(dH.Z,{height:"var(--space-8)"}),(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,K.tZ)(xQ,{text:l.stderr||l.message})})]})})]}):(null==n?void 0:n.type)!==eT.Fl.Regex&&u&&s&&(0,K.BX)(K.HY,{children:[(0,K.tZ)(dH.Z,{height:2}),(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,K.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,K.BX)(dM.Ug,{spacing:1,align:"center",children:[(0,K.tZ)(ew.Z,{size:"medium",children:"Difference"}),(0,K.tZ)(ew.Z,{size:"xsmall",children:(0,K.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]})}),(0,K.tZ)(dH.Z,{height:"var(--space-8)"}),(0,K.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,K.tZ)(x1,{expected:d,actual:t})})]})})]})}):null]}),(0,K.tZ)(eb(),{id:"c7ed87540f6ec33d",children:".test-info.jsx-c7ed87540f6ec33d{padding:var(--space-24);display:relative}.test-io-line-spacing.jsx-c7ed87540f6ec33d{width:var(--space-8);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.test-io-row.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.test-io-line-number.jsx-c7ed87540f6ec33d{display:inline-block;min-width:1.5em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-line.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;font-family:var(--font-family-code)}.test-io-line-content.jsx-c7ed87540f6ec33d{display:inline-block}.test-io-label.jsx-c7ed87540f6ec33d{padding-bottom:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-label.jsx-c7ed87540f6ec33d .text{color:var(--foreground-dimmer)}.test-io-section.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;width:100%}.test-io-box.jsx-c7ed87540f6ec33d{height:100%;border:1px solid var(--outline-dimmest);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:auto}.test-io-box.jsx-c7ed87540f6ec33d .text{white-space:nowrap}.test-type.jsx-c7ed87540f6ec33d,.test-status.jsx-c7ed87540f6ec33d{background-color:var(--background-highest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:inline-block;spacing:1;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-status.jsx-c7ed87540f6ec33d .text{color:var(--white)}.test-status.Passed.jsx-c7ed87540f6ec33d{background-color:var(--accent-positive-default)}.test-status.Failed.jsx-c7ed87540f6ec33d{background-color:var(--accent-negative-default)}.help.jsx-c7ed87540f6ec33d{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})},x4=function(){var e,n,t,r,i,o,a,l,c=(0,el.Z)(),s=c.iotester,u=c.dotReplit,d=c.container,p=(0,ev.Z)(),f=p.showError,h=p.showConfirm,m=(0,J._)((0,en.useState)([]),2),v=m[0],g=m[1],y=(0,J._)((0,en.useState)(),2),b=y[0],x=y[1],Z=(0,J._)((0,en.useState)(d.getConnectionState()),2),w=Z[0],k=Z[1],C=(0,J._)((0,en.useState)(s.state),2),_=C[0],S=C[1],E=(0,J._)((0,en.useState)(),2),R=E[0],I=E[1],T=(0,xA.x)();(0,en.useEffect)(function(){return d.onConnectionStateChanged(k)},[k,d]);var G=(0,ed.Z)(),D=(0,aE.CH)({variables:{replId:G}}),P=(null===(n=D.data)||void 0===n?void 0:null===(e=n.repl)||void 0===e?void 0:e.__typename)==="Repl"?D.data.repl:null,B=(null==P?void 0:null===(t=P.owner)||void 0===t?void 0:t.__typename)==="Team"&&P.owner.id||null,U=(0,J._)((0,aE.vk)({onCompleted:function(e){e&&e.saveIOTestResults&&f(e.saveIOTestResults.message)}}),1)[0];(0,en.useEffect)(function(){var e=[s.onStateChanged(function(e){S(e),B&&e===xL.Z.Idle&&g(function(e){return U({variables:{replId:G,results:Object.values(e).map(function(e){var n,t;return{testId:e.testId,status:e.status,output:(null===(n=e.error)||void 0===n?void 0:n.stderr)?(null!==(t=e.output)&&void 0!==t?t:"")+e.error:e.output}}),teamId:B}}).catch(function(n){co.Tb(n,function(n){return n.setExtras({results:e,payload:R})})}),e})}),s.onError(function(e){f(e.message)}),s.onTestResult(function(e){g(function(n){var t=(0,e0._)((0,eL._)({},n[e.testId]),{testId:e.testId,status:"passed"===e.body?eT.kQ.Passed:eT.kQ.Failed});return"error"===e.body&&(t.error=e.error),(0,e0._)((0,eL._)({},n),(0,ea._)({},e.testId,t))})}),s.onInstructionResult(function(e){g(function(n){var t,r,i,o,a,l=Math.abs(e.instructionId),c="";switch(e.body){case"passed":c+=null!==(r=e.passed.output)&&void 0!==r?r:"";break;case"failed":c+=null!==(i=e.failed.output)&&void 0!==i?i:"";break;case"timeout":c+=null!==(o=e.timeout.output)&&void 0!==o?o:"";break;case"error":c+=e.error.message}return(0,e0._)((0,eL._)({},n),(0,ea._)({},l,(0,e0._)((0,eL._)({},n[l]),{testId:l,output:(null!==(a=null===(t=v[l])||void 0===t?void 0:t.output)&&void 0!==a?a:"")+c})))})})];return function(){return e.forEach(function(e){return e()})}},[v,f,S,s,G,B,R,U]),(0,en.useEffect)(function(){var e=function(e){e instanceof Error&&f(e.message),co.Tb(e)};return xq(u).then(x).catch(e),u.watch(function(){return xq(u).then(x).catch(e)})},[u,x,f]);var A=null==P?void 0:P.ioTests,L=(0,J._)((0,aE.Ne)({onError:function(e){return f(e.message)},onCompleted:function(e){var n;(null===(n=e.deleteTemplateTest)||void 0===n?void 0:n.__typename)==="UserError"?f(e.deleteTemplateTest.message):(h("Test deleted!"),D.refetch())}}),2),O=L[0],X=L[1],M=(0,J._)((0,aE.AA)({onError:function(e){return f(e.message)},onCompleted:function(e){var n;(null===(n=e.updateTemplateTest)||void 0===n?void 0:n.__typename)==="UserError"?f(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(h("Test updated!"),T.writeFragment({fragment:aE.Gg,data:e.updateTemplateTest}))}}),2),z=M[0],W=M[1],N=(0,J._)((0,aE.pV)({onError:function(e){return f(e.message)},onCompleted:function(e){var n;(null===(n=e.createTemplateTest)||void 0===n?void 0:n.__typename)==="UserError"?f(e.createTemplateTest.message):(h("Test created!"),D.refetch())}}),2),j=N[0],F=N[1],V=D.loading||X.called&&X.loading||W.called&&W.loading||F.called&&F.loading;(0,en.useEffect)(function(){V||I(b&&A&&A.length>0?{runInfo:b,tests:A.map(xY)}:void 0)},[A,b,I,V]);var H=(0,J._)((0,en.useState)(!1),2),Y=H[0],q=H[1],$=(0,J._)((0,en.useState)(!1),2),Q=$[0],ee=$[1],et=(0,J._)((0,en.useState)(!1),2),er=et[0],ei=et[1],eo=(0,J._)((0,en.useState)(),2),ec=eo[0],es=eo[1],eu=void 0!==ec&&(null===(r=D.data)||void 0===r?void 0:r.repl.__typename)==="Repl"&&D.data.repl.ioTests[ec]||void 0,ep=(null===(i=D.data)||void 0===i?void 0:i.repl.__typename)==="Repl"&&D.data.repl.isProject;if(D.error)return(0,K.BX)("div",{className:"jsx-fb1466c53ace89ca wrapper",children:[(0,K.tZ)(ew.Z,{align:"center",children:"Unable to fetch tests"}),(0,K.tZ)(eb(),{id:"fb1466c53ace89ca",children:".wrapper.jsx-fb1466c53ace89ca{padding:var(--deprecated-spacing-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]});var ef=function(e){var n;if((null===(n=v[e])||void 0===n?void 0:n.status)!==void 0)return v[e].status===eT.kQ.Passed?"Passed":"Failed"};return(0,K.BX)("div",{className:"jsx-69bed4444090144f tests-panel",children:[(0,K.tZ)("div",{className:"jsx-69bed4444090144f tests-header",children:(0,K.tZ)(eZ.Z,{level:4,children:"Input/Output Tests"})}),D.loading?(0,K.tZ)("div",{className:"jsx-69bed4444090144f spinner",children:(0,K.tZ)(eR.Z,{})}):(0,K.BX)("div",{className:"jsx-69bed4444090144f tests",children:[(0,K.BX)("div",{className:"jsx-69bed4444090144f button-bar",children:[ep?(0,K.tZ)(ex.Z,{color:"green",Icon:oq.Z,className:"create-test-button",disabled:V||_!==xL.Z.Idle,onClick:function(){es(void 0),q(!0)},children:"Create test"}):null,!ep&&A&&0===A.length?(0,K.tZ)(ew.Z,{children:"This project has no tests "}):(0,K.tZ)(ex.Z,{color:"positive",Icon:sY.Z,onClick:function(){if(!R||(null==P?void 0:P.__typename)!=="Repl"||(null===(e=P.owner)||void 0===e?void 0:e.__typename)!=="Team"||s.state!==xL.Z.Idle){var e,n=Error("no tests or run info");throw co.Tb(n,function(e){return e.setExtra("payload",R)}),n}g({}),s.run(R).catch(function(e){co.Tb(e,function(e){return e.setExtra("payload",R)}),f(e.message)})},disabled:V||_!==xL.Z.Idle||!R||w!==yg.em.CONNECTED,children:"Run tests"})]}),null==A?void 0:A.map(function(e,n){return(0,K.tZ)(x$,{test:e,onEdit:function(){es(n),q(!0)},onDelete:function(){O({variables:{testId:e.id}})},onView:function(){es(n),ee(!0),ei(!1)},onShowFailed:function(){es(n),ee(!0),ei(!0)},isRunning:_!==xL.Z.Idle&&void 0!==v[e.id]&&void 0===v[e.id].status,isTeacherView:ep,status:ef(e.id),disableButtons:V||_!==xL.Z.Idle},e.id)}),(0,K.tZ)(xK,{test:eu,isOpen:Y,readOnly:!ep,onRequestClose:function(){q(!1),es(void 0)},onCancel:function(){q(!1),es(void 0)},onSubmit:function(e){var n,t,r,i;void 0!==e.testId?(z({variables:{input:e}}),es(void 0)):(null===(t=D.data)||void 0===t?void 0:null===(n=t.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(i=D.data)||void 0===i?void 0:null===(r=i.repl)||void 0===r?void 0:r.template)&&j({variables:{input:(0,e0._)((0,eL._)({},e),{templateId:D.data.repl.template.id})}}),q(!1)}}),(0,K.tZ)(x2,{test:eu,isOpen:Q,actualOutput:void 0!==eu?null===(o=v[eu.id])||void 0===o?void 0:o.output:void 0,error:eu&&(null===(a=v[eu.id])||void 0===a?void 0:a.error),didFail:eu&&(null===(l=v[eu.id])||void 0===l?void 0:l.status)===eT.kQ.Failed,isResults:er,onRequestClose:function(){ee(!1),es(void 0)}})]}),(0,K.tZ)(eb(),{id:"69bed4444090144f",children:".flex-grow.jsx-69bed4444090144f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.spacer-1.jsx-69bed4444090144f{padding:var(--space-4)}.tests-header.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;padding:var(--space-4)0 var(--space-8)0;margin-bottom:var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.button-bar.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.button-bar.jsx-69bed4444090144f>button{margin-right:var(--space-8);margin-bottom:var(--space-8)}.spinner.jsx-69bed4444090144f{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tests-panel.jsx-69bed4444090144f{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow-x:hidden;overflow-y:auto;overflow:hidden auto}.section.jsx-69bed4444090144f{height:-webkit-calc(100% - 50px);height:-moz-calc(100% - 50px);height:calc(100% - 50px)}"})]})};function x3(e){var n=(0,J._)((0,en.useState)(null),2),t=n[0],r=n[1],i=(0,en.useRef)(0),o=(0,ed.Z)(),a=(0,xU.Z)(),l=a.language,c=a.isLoading,s=(0,aE.CH)({variables:{replId:o}}),u=s.loading;return((0,en.useEffect)(function(){var e,n,t=null===(e=s.data)||void 0===e?void 0:e.repl;if((null==t?void 0:t.__typename)==="Repl"){var o=t.unitTests;r(t.ioTests.length>0?3:(null==o?void 0:o.tests)&&(null===(n=o.tests)||void 0===n?void 0:n.length)>0||(null==o?void 0:o.meta)?2:t.currentUserPermissions.writeTests?0!==i.current?i.current:1:0)}},[s.data]),u||c)?(0,K.BX)("div",{className:"jsx-1652fb32f8a812d3",children:[(0,K.tZ)(eR.Z,{size:32}),(0,K.tZ)(eb(),{id:"1652fb32f8a812d3",children:"div.jsx-1652fb32f8a812d3{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}):(0,K.BX)("div",{className:"jsx-ba2c7540ad19d138 testing-controller",children:[0===t&&(0,K.tZ)("div",{className:"jsx-ba2c7540ad19d138 empty",children:(0,K.tZ)(ew.Z,{children:"No tests found"})}),1===t&&(0,K.BX)(dM.gC,{align:"center",spacing:2,children:[(0,K.tZ)(eZ.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,K.BX)("div",{onClick:function(){r(2),i.current=2},className:"jsx-ba2c7540ad19d138 "+(dq()("panel",{"is-disabled":!l})||""),children:[(0,K.tZ)(eZ.Z,{level:4,children:"Unit tests"}),(0,K.tZ)(ew.Z,{align:"center",children:l?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,K.tZ)("div",{onClick:function(){r(3),i.current=3},className:"jsx-ba2c7540ad19d138 panel",children:(0,K.BX)(dM.gC,{spacing:1,align:"center",children:[(0,K.tZ)(eZ.Z,{level:4,children:"Input output tests"}),(0,K.tZ)(ew.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),3===t&&(0,K.tZ)(x4,{}),2===t&&(0,K.tZ)(xB.Z,{onBack:function(){return r(1)},getRunnerOutput:e.getRunnerOutput}),(0,K.tZ)(eb(),{id:"ba2c7540ad19d138",children:".empty.jsx-ba2c7540ad19d138{padding:var(--space-16);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.testing-controller.jsx-ba2c7540ad19d138{overflow-y:auto;padding:var(--space-8);height:100%;width:100%;background-color:var(--background-default);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1)}.panel.jsx-ba2c7540ad19d138{width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--background-higher);max-width:200px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding:var(--space-8)}.panel.jsx-ba2c7540ad19d138:hover{background-color:var(--background-root)}.panel.is-disabled.jsx-ba2c7540ad19d138{opacity:.5;pointer-events:none}"})]})}(u=B||(B={}))[u.None=0]="None",u[u.Choose=1]="Choose",u[u.Unit=2]="Unit",u[u.IO=3]="IO";var x8=lO.Dy.Object({type:lO.Dy.Literal("autograder")}),x5={Content:function(e){var n=e.options,t=(0,rF.nC)(),r=(0,an.dr)();function i(){var e=t().find(function(e){var n=(0,J._)(e,2);return"runnerOutput"===(n[0],n[1].type)});if(e)return e[0]}return(0,K.tZ)(x3,{getRunnerOutput:function(){var e=i();if(e||n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=i()){var t=r(e);if((null==t?void 0:t.type)==="runnerOutput")return t}}})},Icon:function(e){var n=e.size;return(0,K.tZ)(aC.Z,{size:n})},getTitle:function(){return"Tests"},decode:function(e){return lz.B4.Decode(x8,e)}},x6=t(52878),x7=t(30456),x9=t(66959),Ze=t(39327),Zn=function(){return(0,K.BX)("svg",{width:"100%",height:"100%",viewBox:"0 0 691 691",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,K.BX)("g",{clipPath:"url(#clip0_954_4340)",children:[(0,K.tZ)("path",{d:"M636.55 403.04H44.91C26.7564 403.04 12.04 417.756 12.04 435.91V643.79C12.04 661.944 26.7564 676.66 44.91 676.66H636.55C654.704 676.66 669.42 661.944 669.42 643.79V435.91C669.42 417.756 654.704 403.04 636.55 403.04Z",fill:"url(#paint0_linear_954_4340)"}),(0,K.tZ)("path",{opacity:"0.71",d:"M526.02 663.9L545.86 602.08C559.46 568.34 534.62 531.54 498.24 531.54H186.98C149.55 531.54 124.7 570.3 140.32 604.31L159.12 663.89H526.02V663.9Z",fill:"url(#paint1_linear_954_4340)"}),(0,K.tZ)("path",{d:"M217.38 314.61C290.392 314.61 349.58 255.422 349.58 182.41C349.58 109.398 290.392 50.21 217.38 50.21C144.368 50.21 85.1802 109.398 85.1802 182.41C85.1802 255.422 144.368 314.61 217.38 314.61Z",fill:"url(#paint2_linear_954_4340)"}),(0,K.tZ)("path",{d:"M120.75 510.55C123.39 538.19 143.97 556.13 170.18 561.75C176.42 563.19 182.79 563.92 189.17 564.39L195.57 564.67C178.54 565.03 160.79 562.34 146.09 553.2C131.43 544.2 121.34 527.81 120.75 510.55Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M225.69 564.67C308.15 564.06 400.65 564.05 483.1 564.67C400.64 565.29 308.14 565.28 225.69 564.67Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M531.57 560.9C546.58 551.84 559.07 537.22 562.44 519.7C563.59 513.9 563.68 507.95 563.1 502.07C564.1 507.91 564.19 513.95 563.19 519.84C560.19 537.61 547.3 552.72 531.57 560.9Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M571.57 554.78C560.27 579.78 532.93 594.05 506.36 595.88C502.53 596.17 498.69 596.24 494.86 596.19C502.52 595.98 510.16 595.18 517.62 593.54C539.86 588.88 561.06 575.34 571.57 554.78Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M448.75 600.43C417.61 601.09 382.98 601.08 351.81 600.43C382.98 599.78 417.6 599.77 448.75 600.43Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M125.93 579.25C113.2 574.83 101.21 564.64 98.6401 550.91C99.2401 552.44 99.6901 554.2 100.47 555.66C105.36 566.51 115.41 574.21 125.94 579.25H125.93Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M122.63 550.92C108.27 541.02 104.78 521.86 109.84 505.93C110.54 503.67 111.36 501.44 112.27 499.26C111.63 501.28 110.78 504.03 110.31 506.06C106.06 522.06 109.3 540.13 122.62 550.92H122.63Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M122.63 485.44C124.51 481.11 128.99 478.25 133.45 477.14C129.54 479.57 125.68 481.91 122.63 485.44Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M576.75 531.49C580.41 516.24 580.52 498.93 571.57 485.44C572.81 487 573.96 488.66 574.93 490.42C581.64 502.91 581.19 518.32 576.74 531.49H576.75Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M579.54 579.25C588.53 567.19 594.92 552.91 596.84 537.95C597.2 535.85 597.23 533.61 597.45 531.49C597.99 548.88 590.98 566.28 579.54 579.25Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M543.81 611.25C558.06 608.69 572.57 604.12 583.9 594.81C585.59 593.57 586.95 591.97 588.5 590.55C577.81 603.74 560.26 609.73 543.81 611.26V611.25Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M85.9304 495.96C90.9804 479.18 105.88 466.78 121.97 460.96L125.73 459.62C127.97 458.93 131.16 458.23 133.45 457.63C130.93 458.48 128.38 459.19 125.88 460.08C108.67 466.24 92.5304 478.4 85.9204 495.95L85.9304 495.96Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M547.63 445.61C564.65 447.41 582.07 454.4 593.27 467.75C594.84 469.66 596.22 471.72 597.46 473.85C586.24 457.4 566.67 449.06 547.63 445.61Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M620.51 510.55C624.76 522.88 625.03 536.26 623.91 549.15C622.85 558.77 620.66 568.49 617.6 577.67C616.52 580.73 615.33 583.76 614.16 586.78C615.59 582.33 617.26 577.4 618.43 572.84C623.74 552.84 625.91 530.74 620.51 510.54V510.55Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M563.68 629.84C552.03 637.13 538.71 642.29 524.93 643.51C509.26 644.08 485.5 643.54 469.79 643.5L456.01 643.25L469.79 643C485.45 642.69 509.25 642.98 524.86 642.6C538.55 641.45 551.78 636.6 563.68 629.83V629.84Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M324.24 653.84C278.39 654.5 227.42 654.49 181.53 653.84C227.42 653.19 278.38 653.18 324.24 653.84Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M240.04 611.25C231.6 611.93 223.06 611.93 214.63 611.25C223.07 610.57 231.61 610.57 240.04 611.25Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M125.93 619.96C101.27 616.41 77.6502 599.76 69.9302 575.49C71.1602 578.36 72.3902 581.22 73.9702 583.91C84.5302 603.14 104.8 615.53 125.93 619.96Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M130.16 565.09C144.25 571.77 159.29 576.91 174.84 578.69C177.05 579.04 179.29 579.04 181.53 579.26C163.55 579.7 145.67 573.97 130.16 565.09Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M200.28 579.25C206.55 578.57 212.83 578.56 219.1 579.25C212.83 579.94 206.55 579.93 200.28 579.25Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M304.75 579.25C349.87 578.59 400.02 578.6 445.17 579.25C400.01 579.9 349.88 579.91 304.75 579.25Z",fill:"#8A98FF"}),(0,K.tZ)("path",{d:"M545.86 480.38C559.46 514.12 534.62 550.92 498.24 550.92H186.98C149.55 550.92 124.7 512.16 140.32 478.15L182.03 345.94L182.32 346C177.45 369.9 195.61 393.77 221.52 393.77H463.7C488.78 393.77 506.81 371.3 503.23 347.91L503.33 347.89L545.86 480.38Z",fill:"#A88C5A"}),(0,K.tZ)("path",{d:"M503.23 347.91C506.81 371.3 488.78 393.77 463.7 393.77H221.52C195.61 393.77 177.45 369.9 182.32 346C182.91 343.04 183.87 340.07 185.21 337.15L218.53 264.59L222.63 255.66L225 250.51C231.51 236.33 245.69 227.23 261.3 227.23H418.49C418.49 227.23 438.63 226.14 449.92 233.29C456.92 237.72 462.6 244.22 465.83 252.25L500.75 338.89C501.95 341.88 502.77 344.9 503.23 347.91ZM336.66 258.5L338.12 253.56C336.37 252.69 333.03 251.74 329.25 251.74C317.76 251.74 310.35 259.59 310.35 270.42C310.35 281.25 317.25 288.38 327.87 288.38C332.59 288.38 336.3 287.22 337.97 286.34L336.88 281.55C335.06 282.35 332.66 283.29 329.03 283.29C322.05 283.29 316.82 278.28 316.82 270.13C316.82 262.79 321.18 256.83 329.25 256.83C332.74 256.83 335.14 257.63 336.66 258.5ZM301.84 258.5L303.44 253.85C301.48 252.69 298.35 251.67 294.79 251.67C287.23 251.67 282.65 256.32 282.65 261.99C282.65 266.21 285.63 269.7 291.96 271.95C296.68 273.7 298.5 275.37 298.5 278.42C298.5 281.47 296.32 283.66 291.67 283.66C288.47 283.66 285.12 282.35 283.23 281.11L281.63 285.98C284.11 287.44 287.67 288.38 291.52 288.38C299.88 288.38 304.68 284.02 304.68 277.84C304.68 272.61 301.55 269.55 295.45 267.23C290.87 265.48 288.76 264.17 288.76 261.27C288.76 258.65 290.87 256.47 294.65 256.47C297.92 256.47 300.46 257.63 301.84 258.5ZM275.97 271.22C276.04 270.57 276.18 269.55 276.18 268.24C276.18 261.77 273.13 251.67 261.65 251.67C251.4 251.67 245.14 260.03 245.14 270.64C245.14 281.25 251.61 288.38 262.45 288.38C268.04 288.38 271.89 287.22 274.15 286.2L273.06 281.62C270.66 282.64 267.9 283.44 263.32 283.44C256.92 283.44 251.4 279.87 251.25 271.22H275.97Z",fill:"#E5CF98"}),(0,K.tZ)("path",{d:"M338.12 253.56L336.66 258.5C335.14 257.63 332.74 256.83 329.25 256.83C321.18 256.83 316.82 262.79 316.82 270.13C316.82 278.28 322.05 283.29 329.03 283.29C332.66 283.29 335.06 282.35 336.88 281.55L337.97 286.34C336.3 287.22 332.59 288.38 327.87 288.38C317.25 288.38 310.35 281.18 310.35 270.42C310.35 259.66 317.76 251.74 329.25 251.74C333.03 251.74 336.37 252.69 338.12 253.56Z",fill:"#1B2332"}),(0,K.tZ)("path",{d:"M303.44 253.85L301.84 258.5C300.46 257.63 297.92 256.47 294.65 256.47C290.87 256.47 288.76 258.65 288.76 261.27C288.76 264.17 290.87 265.48 295.45 267.23C301.55 269.55 304.68 272.61 304.68 277.84C304.68 284.02 299.88 288.38 291.52 288.38C287.67 288.38 284.11 287.44 281.63 285.98L283.23 281.11C285.12 282.35 288.47 283.66 291.67 283.66C296.32 283.66 298.5 281.33 298.5 278.42C298.5 275.51 296.68 273.7 291.96 271.95C285.63 269.7 282.65 266.21 282.65 261.99C282.65 256.32 287.23 251.67 294.79 251.67C298.35 251.67 301.48 252.69 303.44 253.85Z",fill:"#1B2332"}),(0,K.tZ)("path",{d:"M276.18 268.24C276.18 269.55 276.04 270.57 275.97 271.22H251.25C251.4 279.87 256.92 283.44 263.32 283.44C267.9 283.44 270.66 282.64 273.06 281.62L274.15 286.2C271.89 287.22 268.04 288.38 262.45 288.38C251.61 288.38 245.14 281.26 245.14 270.64C245.14 260.02 251.4 251.67 261.65 251.67C273.13 251.67 276.18 261.77 276.18 268.24ZM270 266.65C270.08 262.57 268.33 256.25 261.14 256.25C254.67 256.25 251.83 262.21 251.32 266.65H270Z",fill:"#1B2332"}),(0,K.tZ)("path",{d:"M261.14 256.25C268.33 256.25 270.08 262.57 270 266.65H251.32C251.83 262.21 254.67 256.25 261.14 256.25Z",fill:"#E5CF98"}),(0,K.tZ)("path",{d:"M182.32 346C182.91 343.04 183.87 340.07 185.21 337.15L218.53 264.59L222.63 255.66L225 250.51C231.51 236.33 245.69 227.23 261.3 227.23H418.49C418.49 227.23 438.63 226.14 449.92 233.29C456.92 237.72 462.6 244.22 465.83 252.25L500.75 338.89C501.95 341.88 502.77 344.9 503.23 347.91C506.81 371.3 488.78 393.77 463.7 393.77H221.52C195.61 393.77 177.45 369.9 182.32 346Z",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M503.33 347.89L545.86 480.38C559.46 514.12 534.62 550.92 498.24 550.92H186.98C149.55 550.92 124.7 512.16 140.32 478.15L182.03 345.94",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M532.22 117.06C568.71 135.84 566.03 170.99 566.03 170.99C566.03 170.99 520.16 155.31 503.35 152.12C502.3 151.93 501.36 151.78 500.56 151.68L491.44 151L491.14 151.08C489.53 145.31 484.24 141.08 477.96 141.08C477.57 141.08 477.18 141.09 476.8 141.13C476.71 141.03 476.61 140.93 476.51 140.84L469.81 134.72C469.37 134.31 468.87 134 468.34 133.78H468.23C468.03 131.83 467.45 129.99 466.55 128.33L466.79 128.2C467.59 126.89 471.05 121.89 471.05 121.89C471.05 121.89 474.48 118.6 480.68 115.46C491.1 110.18 509.34 105.28 532.22 117.06Z",fill:"#029831"}),(0,K.tZ)("path",{d:"M516.66 20.2C516.66 20.2 516.77 36.8799 514.97 53.32L500.7 58.3699L513.33 64.8C512.46 69.56 511.35 73.9199 509.95 77.3499C505.71 87.7999 491.29 104.17 480.64 115.38L480.68 115.46C474.48 118.6 471.05 121.89 471.05 121.89C471.05 121.89 467.59 126.89 466.79 128.2L466.55 128.33C464.1 123.82 459.31 120.75 453.81 120.75C452.89 120.75 452 120.83 451.13 121L451.09 120.75C451.09 120.75 449.58 90.2299 458.71 68.5C467.83 46.77 516.66 20.2 516.66 20.2Z",fill:"#029831"}),(0,K.tZ)("path",{d:"M503.35 152.12L503.31 152.35C503.31 152.35 511.56 177.9 499.49 209.9C486.01 203.46 471.92 180.52 471.32 167.44L471.62 166.88C473.51 167.88 475.67 168.44 477.96 168.44C485.51 168.44 491.64 162.32 491.64 154.76C491.64 153.48 491.47 152.25 491.14 151.08L491.44 151L500.56 151.68C501.36 151.78 502.3 151.93 503.35 152.12Z",fill:"#029831"}),(0,K.tZ)("path",{d:"M491.14 151.08C491.47 152.25 491.64 153.48 491.64 154.76C491.64 162.32 485.51 168.44 477.96 168.44C475.67 168.44 473.51 167.88 471.62 166.88C469.84 165.96 468.28 164.64 467.07 163.05L466.89 162.92C467.01 162.78 467.12 162.64 467.22 162.49L477.3 147.3C478.58 145.36 478.36 142.81 476.8 141.13C477.18 141.09 477.57 141.08 477.96 141.08C484.24 141.08 489.53 145.31 491.14 151.08Z",fill:"#685128"}),(0,K.tZ)("path",{d:"M476.8 141.13C478.36 142.81 478.58 145.36 477.3 147.3L467.22 162.49C467.12 162.64 467.01 162.78 466.89 162.92C465.75 164.3 464.01 164.9 462.33 164.65C460.29 164.68 458.04 162.21 458.04 162.21L456.02 161C450.39 158.08 447.1 151.11 447.1 151.11C446.74 150.11 446.71 149.04 446.99 148.03C449.03 149.12 451.35 149.73 453.81 149.73C461.81 149.73 468.3 143.24 468.3 135.24C468.3 134.75 468.28 134.27 468.23 133.79H468.34C468.87 134 469.37 134.31 469.81 134.72L476.51 140.84C476.61 140.93 476.71 141.03 476.8 141.13Z",fill:"#685128"}),(0,K.tZ)("path",{d:"M468.23 133.79C468.28 134.27 468.3 134.75 468.3 135.24C468.3 143.24 461.81 149.73 453.81 149.73C451.35 149.73 449.03 149.12 446.99 148.03C442.43 145.59 439.32 140.78 439.32 135.24C439.32 128.47 443.96 122.78 450.24 121.2C450.53 121.12 450.83 121.05 451.13 121C452 120.83 452.89 120.75 453.81 120.75C459.31 120.75 464.1 123.82 466.55 128.33C467.45 129.99 468.03 131.83 468.23 133.79Z",fill:"#685128"}),(0,K.tZ)("path",{d:"M458.04 162.21C458.04 162.21 460.29 164.68 462.33 164.65C462.23 165.05 462.1 165.44 461.91 165.81L452.32 185.18C451.48 186.87 449.96 187.95 448.27 188.32C445.25 188.58 442.24 186.45 442.24 186.45L439.82 185.55C435.9 184.24 428.23 176.44 428.23 176.44C425.77 174.18 425.62 170.26 428.09 167.85L437.54 158.68L443.68 152.72C444.64 151.79 445.85 151.26 447.1 151.11C447.1 151.11 450.39 158.08 456.02 161L458.04 162.21Z",fill:"#685128"}),(0,K.tZ)("path",{d:"M447.55 120.06C448.48 120.4 449.37 120.76 450.22 121.13L450.24 121.2C443.96 122.78 439.32 128.47 439.32 135.24C439.32 140.78 442.43 145.59 446.99 148.03C446.71 149.04 446.74 150.11 447.1 151.11C445.85 151.26 444.64 151.79 443.68 152.72L437.54 158.68L437.38 158.52C423.69 160.13 367.64 177.97 367.64 177.97C367.64 177.97 364.96 142.82 401.45 124.04C405 122.22 408.44 120.79 411.75 119.7C426.47 114.88 438.74 116.77 447.55 120.06Z",fill:"#029831"}),(0,K.tZ)("path",{d:"M448.27 188.32C448.39 189.38 448.3 190.48 447.9 191.54L439.06 215.11C438.07 217.74 435.69 219.37 433.12 219.57C431.54 219.48 428.86 218.55 428.86 218.55L426.74 217.54C421.31 216.84 410.15 207.9 410.15 207.9C406.97 205.58 406.34 200.98 408.94 197.88L425.23 178.51C426.05 177.53 427.1 176.84 428.23 176.44C428.23 176.44 435.9 184.24 439.82 185.55L442.24 186.45C442.24 186.45 445.25 188.58 448.27 188.32Z",fill:"#685128"}),(0,K.tZ)("path",{d:"M377.41 34.96C431.47 55.96 446.9 117.38 447.55 120.06C438.74 116.77 426.47 114.88 411.75 119.7L411.69 119.51C378.14 87.88 377.41 34.96 377.41 34.96Z",fill:"#029831"}),(0,K.tZ)("path",{d:"M379.56 289.59C376.08 287.46 374.5 282.98 376.25 279L388.72 250.7C389.72 248.43 391.63 246.8 393.87 246.08C389.59 244.14 387.99 238.83 390.57 234.84L405.98 211.06C406.99 209.51 408.48 208.42 410.15 207.9C410.15 207.9 421.31 216.84 426.74 217.54L428.86 218.55C428.86 218.55 431.54 219.48 433.12 219.57C433.24 220.49 433.21 221.45 432.98 222.4L426.42 249.82C425.62 253.19 422.75 255.44 419.56 255.72C419.74 256.52 419.84 257.36 419.77 258.22L417.48 288.9C417.2 292.65 414.53 295.56 411.16 296.43L414.65 318.75V318.94C401.28 318.01 391.44 322.04 391.44 322.04C383.19 317.7 374.4 318.07 366.89 320.06L366.78 319.63L378.59 292.2C378.77 291.26 379.1 290.39 379.56 289.59Z",fill:"#685128"}),(0,K.tZ)("path",{d:"M414.65 318.75L411.16 296.43C414.53 295.56 417.2 292.65 417.48 288.9L419.77 258.22C419.84 257.36 419.74 256.52 419.56 255.72C422.75 255.44 425.62 253.19 426.42 249.82L432.98 222.4C433.21 221.45 433.24 220.49 433.12 219.57C435.69 219.37 438.07 217.74 439.06 215.11L447.9 191.54C448.3 190.48 448.39 189.38 448.27 188.32C449.96 187.95 451.48 186.87 452.32 185.18L461.91 165.81C462.1 165.44 462.23 165.05 462.33 164.65C464.01 164.9 465.75 164.3 466.89 162.92C467.01 162.78 467.12 162.64 467.22 162.49L477.3 147.3C478.58 145.36 478.36 142.81 476.8 141.13C476.71 141.03 476.61 140.93 476.51 140.84L469.81 134.72C469.37 134.31 468.87 134 468.34 133.78",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M446.99 148.03C446.71 149.04 446.74 150.11 447.1 151.11C445.85 151.26 444.64 151.79 443.68 152.72L437.54 158.68L428.09 167.85C425.62 170.26 425.77 174.18 428.23 176.44C427.1 176.84 426.05 177.53 425.23 178.51L408.94 197.88C406.34 200.98 406.97 205.58 410.15 207.9C408.48 208.42 406.99 209.51 405.98 211.06L390.57 234.84C387.99 238.83 389.59 244.14 393.87 246.08C391.63 246.8 389.72 248.43 388.72 250.7L376.25 279C374.5 282.98 376.08 287.46 379.56 289.59C379.1 290.39 378.77 291.26 378.59 292.2L366.78 319.63",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M393.18 245.42C393.18 245.42 402.04 251.33 409.43 252.81",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M410.15 207.9C410.15 207.9 421.31 216.84 426.74 217.54",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M428.23 176.44C428.23 176.44 435.9 184.24 439.82 185.55",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M447.1 151.11C447.1 151.11 450.39 158.08 456.02 161",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M379.56 289.59C379.56 289.59 386.2 296.23 400.68 295.62",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M413.06 254.27C413.06 254.27 416.7 255.46 419.56 255.72",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M428.86 218.55C428.86 218.55 431.54 219.48 433.12 219.57",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M442.24 186.45C442.24 186.45 445.25 188.58 448.27 188.32",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M458.04 162.21C458.04 162.21 460.29 164.68 462.33 164.65",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M404.99 295.66C405.48 295.66 408.99 297.7 411.16 296.43",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M468.23 133.79C468.28 134.27 468.3 134.75 468.3 135.24C468.3 143.24 461.81 149.73 453.81 149.73C451.35 149.73 449.03 149.12 446.99 148.03C442.43 145.59 439.32 140.78 439.32 135.24C439.32 128.47 443.96 122.78 450.24 121.2C450.53 121.12 450.83 121.05 451.13 121C452 120.83 452.89 120.75 453.81 120.75C459.31 120.75 464.1 123.82 466.55 128.33C467.45 129.99 468.03 131.83 468.23 133.79V133.79Z",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M476.54 141.15C476.63 141.14 476.71 141.13 476.8 141.13C477.18 141.09 477.57 141.08 477.96 141.08C484.24 141.08 489.53 145.31 491.14 151.08C491.47 152.25 491.64 153.48 491.64 154.76C491.64 162.32 485.51 168.44 477.96 168.44C475.67 168.44 473.51 167.88 471.62 166.88C469.84 165.96 468.28 164.64 467.07 163.05",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M451.09 120.75C451.09 120.75 449.58 90.2299 458.71 68.5C467.83 46.77 516.66 20.2 516.66 20.2C516.66 20.2 516.77 36.8799 514.97 53.32L500.7 58.3699L513.33 64.8C512.46 69.56 511.35 73.9199 509.95 77.3499C505.71 87.7999 491.29 104.17 480.64 115.38",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M466.79 128.2C467.59 126.89 471.05 121.89 471.05 121.89C471.05 121.89 474.48 118.6 480.68 115.46C491.1 110.18 509.34 105.28 532.22 117.06C568.71 135.84 566.03 170.99 566.03 170.99C566.03 170.99 520.16 155.31 503.35 152.12C502.3 151.93 501.36 151.78 500.56 151.68L491.44 151",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M450.22 121.13C449.37 120.76 448.48 120.4 447.55 120.06C438.74 116.77 426.47 114.88 411.75 119.7C408.44 120.79 405 122.22 401.45 124.04C364.96 142.82 367.64 177.97 367.64 177.97C367.64 177.97 423.69 160.13 437.38 158.52",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M447.57 120.15C447.57 120.15 447.56 120.12 447.55 120.06C446.9 117.38 431.47 55.96 377.41 34.96C377.41 34.96 378.14 87.88 411.69 119.51",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M503.31 152.35C503.31 152.35 511.56 177.9 499.49 209.9C486.01 203.46 471.92 180.52 471.32 167.44",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M347.6 329.26C347.6 329.26 355.89 322.95 366.89 320.06C374.4 318.07 383.19 317.7 391.44 322.04C391.44 322.04 401.28 318.01 414.64 318.94C423.84 319.58 434.7 322.58 445.17 330.86",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,K.tZ)("path",{d:"M414.16 207.9C414.16 207.9 410.04 203.49 411.16 200.9C411.98 199 420.75 189.21 425.39 184.1C425.97 183.46 427 184.11 426.68 184.91L419.47 203.21C418.8 204.92 418.64 206.79 419.03 208.58L419.6 211.24L414.16 207.88V207.9Z",fill:"#A88C5A"}),(0,K.tZ)("path",{d:"M433.66 175.75C433.61 175.71 433.56 175.67 433.52 175.63C433.06 175.09 430.27 171.7 431.24 169.74C432.01 168.19 439.85 160.38 444.05 156.26C444.59 155.73 445.47 156.33 445.16 157L438.42 171.79C437.73 173.31 437.51 175 437.8 176.65L437.89 177.16C437.99 177.74 437.33 178.15 436.83 177.82L433.67 175.74L433.66 175.75Z",fill:"#A88C5A"}),(0,K.tZ)("path",{d:"M396.92 244.43C396.85 244.38 396.79 244.32 396.74 244.24C396.14 243.42 392.45 238.19 393.57 235.02C394.45 232.5 403.89 219.55 408.94 212.71C409.58 211.84 410.73 212.72 410.38 213.82L402.69 237.82C401.9 240.29 401.72 243 402.17 245.6L402.31 246.41C402.47 247.32 401.66 248.02 401.01 247.53L396.93 244.43H396.92Z",fill:"#A88C5A"}),(0,K.tZ)("path",{d:"M383.51 287.24C383.44 287.18 383.38 287.1 383.33 287.01C382.73 286.03 379.04 279.8 380.16 276.01C381.04 273.01 390.48 257.56 395.53 249.4C396.17 248.36 397.32 249.42 396.97 250.72L389.28 279.34C388.49 282.29 388.31 285.52 388.76 288.61L388.9 289.57C389.06 290.66 388.25 291.5 387.6 290.91L383.52 287.22L383.51 287.24Z",fill:"#A88C5A"}),(0,K.tZ)("path",{d:"M371.16 171.08C371.45 170.56 378.51 139.82 405.63 126.99C393.15 143.74 385.12 165.49 385.12 165.49L371.16 171.08Z",fill:"#51FF53"}),(0,K.tZ)("path",{d:"M410.97 113.84C410.97 113.84 389.61 99.02 379.94 39.72C397.81 75.72 404.21 98.85 422.51 113.84C417.92 113.84 409.31 112.43 410.97 113.84Z",fill:"#51FF53"}),(0,K.tZ)("path",{d:"M456.02 113.84C456.02 113.84 456.71 81.3099 466.79 66.9199C476.87 52.5299 507.71 29.5699 507.71 29.5699C507.71 29.5699 474.47 57.3299 468.3 89.1899C464.53 114.55 463.85 120.75 463.85 120.75L456.03 113.84H456.02Z",fill:"#51FF53"}),(0,K.tZ)("path",{d:"M449.34 124.58C447.22 130.96 444.74 136.08 450.22 145.43C445.46 141.72 438.14 133.78 449.34 124.58Z",fill:"#A88C5A"}),(0,K.tZ)("path",{d:"M471.31 126.55C471.31 126.55 485.49 111.02 506.06 113.84C492.04 118.78 474.04 133.78 474.04 133.78L471.31 126.55Z",fill:"#51FF53"})]}),(0,K.BX)("defs",{children:[(0,K.BX)("linearGradient",{id:"paint0_linear_954_4340",x1:"340.73",y1:"676.66",x2:"340.73",y2:"403.04",gradientUnits:"userSpaceOnUse",children:[(0,K.tZ)("stop",{offset:"0.3",stopColor:"#1B2332",stopOpacity:"0"}),(0,K.tZ)("stop",{offset:"0.37",stopColor:"#1C2437",stopOpacity:"0.03"}),(0,K.tZ)("stop",{offset:"0.45",stopColor:"#202845",stopOpacity:"0.1"}),(0,K.tZ)("stop",{offset:"0.56",stopColor:"#262F5E",stopOpacity:"0.22"}),(0,K.tZ)("stop",{offset:"0.67",stopColor:"#2E397F",stopOpacity:"0.38"}),(0,K.tZ)("stop",{offset:"0.8",stopColor:"#3946AB",stopOpacity:"0.59"}),(0,K.tZ)("stop",{offset:"0.93",stopColor:"#4655DE",stopOpacity:"0.84"}),(0,K.tZ)("stop",{offset:"1",stopColor:"#4F5FFF"})]}),(0,K.BX)("linearGradient",{id:"paint1_linear_954_4340",x1:"342.61",y1:"663.9",x2:"342.61",y2:"531.55",gradientUnits:"userSpaceOnUse",children:[(0,K.tZ)("stop",{stopColor:"#1B2332",stopOpacity:"0"}),(0,K.tZ)("stop",{offset:"0.15",stopColor:"#2F333A",stopOpacity:"0.12"}),(0,K.tZ)("stop",{offset:"0.47",stopColor:"#635D4F",stopOpacity:"0.43"}),(0,K.tZ)("stop",{offset:"0.93",stopColor:"#B6A070",stopOpacity:"0.92"}),(0,K.tZ)("stop",{offset:"1",stopColor:"#C4AB76"})]}),(0,K.BX)("linearGradient",{id:"paint2_linear_954_4340",x1:"217.38",y1:"314.6",x2:"217.38",y2:"50.21",gradientUnits:"userSpaceOnUse",children:[(0,K.tZ)("stop",{stopColor:"#1B2332",stopOpacity:"0"}),(0,K.tZ)("stop",{offset:"0.19",stopColor:"#4B4A35",stopOpacity:"0.22"}),(0,K.tZ)("stop",{offset:"0.48",stopColor:"#92843B",stopOpacity:"0.55"}),(0,K.tZ)("stop",{offset:"0.73",stopColor:"#C7AE3F",stopOpacity:"0.79"}),(0,K.tZ)("stop",{offset:"0.91",stopColor:"#E7C942",stopOpacity:"0.94"}),(0,K.tZ)("stop",{offset:"1",stopColor:"#F4D343"})]}),(0,K.tZ)("clipPath",{id:"clip0_954_4340",children:(0,K.tZ)("rect",{width:"690.9",height:"690.9",fill:"white"})})]})]})};function Zt(){var e=(0,eO._)(["\n  query Threads2Inbox {\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n"]);return Zt=function(){return e},e}var Zr={},Zi=(0,eX.Ps)(Zt()),Zo=t(21158),Za=t(82104),Zl=t(2182),Zc=t(67910),Zs={title:"Threads",filters:{inbox:{key:"toggle-inbox",label:"Inbox",icon:(0,K.tZ)(Za.Z,{})},unread:{key:"toggle-unread",label:"Unread",icon:(0,K.tZ)(Zo.Z,{})},participating:{key:"toggle-participating",label:"Participating",icon:(0,K.tZ)(Zc.Z,{})},resolved:{key:"toggle-resolved",label:"Resolved",icon:(0,K.tZ)(aC.Z,{})}},sorts:{chronological:{key:"toggle-chronological",label:"Chronological",icon:(0,K.tZ)(nk.Z,{})},codeOrder:{key:"toggle-codeOrder",label:"Code order",icon:(0,K.tZ)(Zl.Z,{})}},search:{placeholder:"Search threads…"},markAsRead:"Mark as read",empty:{image:{alt:"an illustration of an escape key that resembles a sunny beach, with an umbrella and palm tree"},noThreadsCreated:{text:{primary:"You haven’t started any threads yet.",secondary:function(e){return(0,K.BX)(K.HY,{children:["Select code and press ",(0,K.tZ)(ng.bM,{keyCombo:e,small:!0})," ","to get started."]})}}},noThreadsFound:{text:{primary:"No threads found.",secondary:"Try adjusting your search or filters."}}}},Zu=t(20597),Zd=t(46056);function Zp(e){var n=e.message,t=(0,en.useMemo)(function(){var e=n.timeCreated;return e?(0,gd.Z)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,K.tZ)("div",{className:"resolved-message",children:(0,K.BX)(dM.Ug,{align:"center",spacing:1,children:[r?(0,K.tZ)(Zd.Z,{url:r.image,size:"m",username:r.username,fullName:r.fullName}):null,(0,K.tZ)(aC.Z,{color:"var(--foreground-default)",size:24}),(0,K.BX)(ew.Z,{size:"xsmall",children:["Resolved ",t]})]})})}function Zf(e){var n=e.message,t=e.messageStyle,r=(0,en.useMemo)(function(){return"TextMessageContentType"===n.content.__typename?(0,x9.kW)(n.content.text,{}):"PreviewMessageContentType"===n.content.__typename&&"string"==typeof n.content.preview?(0,x9.kW)(n.content.preview,{}):null},[n.content]),i="PreviewMessageContentType"===n.content.__typename&&"string"!=typeof n.content.preview;return n.user&&(r||i)?(0,K.BX)("div",{className:"jsx-e1dab5bcce309da6 "+(t||""),children:[(0,K.BX)("div",{className:"jsx-e1dab5bcce309da6 message",children:[r?(0,K.tZ)(x9.YI,{message:r,codeStyles:{color:"var(--accent-orange-stronger)",background:"var(--background-highest)"}}):null,i?(0,K.BX)("span",{className:"jsx-e1dab5bcce309da6 typing-indicator",children:[(0,K.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,K.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"}),(0,K.tZ)("span",{className:"jsx-e1dab5bcce309da6 dot"})]}):null]}),(0,K.tZ)(eb(),{id:"e1dab5bcce309da6",children:".message.jsx-e1dab5bcce309da6{background:var(--background-higher);padding:var(--space-4)var(--space-8);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);font-size:var(--font-size-default);word-wrap:break-word;overflow-wrap:break-word;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:100%;white-space:pre-wrap}.userhighlight.jsx-e1dab5bcce309da6 .message.jsx-e1dab5bcce309da6{background:transparent}.typing-indicator.jsx-e1dab5bcce309da6{min-height:1em;display:grid;grid-auto-flow:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8)}.dot.jsx-e1dab5bcce309da6{width:6px;height:6px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;display:inline-block;background-color:var(--foreground-dimmest);-webkit-animation:pulse.6s infinite;-moz-animation:pulse.6s infinite;-o-animation:pulse.6s infinite;animation:pulse.6s infinite}.dot.jsx-e1dab5bcce309da6:nth-child(1){-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.dot.jsx-e1dab5bcce309da6:nth-child(2){-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}.dot.jsx-e1dab5bcce309da6:nth-child(3){-webkit-animation-delay:.4s;-moz-animation-delay:.4s;-o-animation-delay:.4s;animation-delay:.4s}@-webkit-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@-moz-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@-o-keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}@keyframes pulse{0%{background-color:var(--foreground-dimmest)}50%{background-color:var(--foreground-dimmest)}100%{background-color:var(--foreground-dimmest)}}"})]}):null}function Zh(e){var n=e.message,t=(0,en.useMemo)(function(){var e=n.timeCreated;return e?(0,gd.Z)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,K.tZ)("div",{className:"resolved-message",children:(0,K.BX)(dM.Ug,{align:"center",spacing:1,children:[r?(0,K.tZ)(Zd.Z,{url:r.image,username:r.username,fullName:r.fullName,size:"m"}):null,(0,K.tZ)(aC.Z,{size:24,color:"var(--foreground-dimmest)"}),(0,K.BX)(ew.Z,{size:"xsmall",children:["Unresolved ",t]})]})})}var Zm=function(e){var n=new Date(e),t=new Date;return 60>(0,Zu.Z)(t,n)?"now":(0,s8.F)(n,!0)};function Zv(e){var n=e.messageGroup,t=n.messages,r=n.user,i=n.timeCreated;return r?(0,K.BX)("div",{className:"jsx-3469fc8bae278840 message-group",children:[(0,K.BX)("div",{className:"jsx-3469fc8bae278840 message-info",children:[(0,K.tZ)("div",{className:"jsx-3469fc8bae278840 avatar",children:(0,K.tZ)(Zd.Z,{username:r.username,fullName:r.fullName,url:r.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,K.tZ)("div",{className:"jsx-3469fc8bae278840 username",children:r.username}),(0,K.tZ)("div",{className:"jsx-3469fc8bae278840 time",children:Zm(i)})]}),(0,K.tZ)("div",{className:"jsx-3469fc8bae278840 messages",children:t.map(function(e){return(0,K.tZ)(Zf,{message:e},e.id)})}),(0,K.tZ)(eb(),{id:"3469fc8bae278840",children:".message-group.jsx-3469fc8bae278840{background-color:var(--background-default);color:var(--foreground-default);display:grid;position:relative;grid-template-rows:auto auto;grid-row-gap:var(--space-8);grid-template-columns:minmax(0,1fr)}.message-info.jsx-3469fc8bae278840{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:var(--font-size-small)}.messages.jsx-3469fc8bae278840{display:grid;grid-row-gap:var(--space-4);grid-template-columns:minmax(0,1fr)}.avatar.jsx-3469fc8bae278840{margin-right:5px}.username.jsx-3469fc8bae278840{color:var(--foreground-dimmer);font-weight:var(--font-weight-medium);margin-right:3px}.time.jsx-3469fc8bae278840{color:var(--foreground-dimmest)}"})]}):null}function Zg(e){var n=e.messageGroup;if("TextMessageContentType"===n.messageType||"PreviewMessageContentType"===n.messageType)return(0,K.tZ)(Zv,{messageGroup:n});if("StatusMessageContentType"===n.messageType){var t=n.messages[0];if("StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status)return(0,K.tZ)(Zp,{message:t});if("StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status)return(0,K.tZ)(Zh,{message:t})}return null}var Zy=t(21371),Zb=function(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,a=e.messages[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.user&&(n[l.user.id]=l.user)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return Object.values(n)};function Zx(){var e=(0,eO._)(["\n  query AnnotationThreadInput {\n    currentUser {\n      id\n    }\n  }\n"]);return Zx=function(){return e},e}var ZZ={},Zw=(0,eX.Ps)(Zx()),Zk=t(12435),ZC=t(39511),Z_=en.forwardRef(function(e,n){var t,r,i,o,a=e.annote,l=e.placeholder,c=e.onChangeMessage,s=e.onFinalizeMessage,u=function(){""!==f.trim()&&(s({messageId:x||tW()(),message:f.trim()}),Z(null),h(""),setTimeout(_))},d=null===(o=(t=(0,eL._)({},ZZ,void 0),eM.a(Zw,t)).data)||void 0===o?void 0:null===(i=o.currentUser)||void 0===i?void 0:i.id,p=(0,J._)((0,en.useState)(""),2),f=p[0],h=p[1],m=(0,J._)((0,en.useState)(!1),2),v=m[0],g=m[1],y=(0,en.useRef)(null),b=(0,J._)((0,en.useState)(null),2),x=b[0],Z=b[1],w=(0,x7.Z)(),k=(0,xX.Z)(),C=k.ref,_=k.update,S=(0,J._)((0,Zk.Z)({"@":(r=(0,nx._)(function(e){var n,t;return(0,nZ.Jh)(this,function(r){return n=w.filter(function(e){return e.id!==d}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,K.tZ)(Zd.Z,{fullName:e.fullName,username:e.username,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return r.apply(this,arguments)})}),2),E=S[0].suggestions,R=S[1],I=(0,Zy.Kb)({items:(null==E?void 0:E.results)||[],defaultHighlightedIndex:0,isOpen:!!(null==E?void 0:E.results.length),onSelectedItemChange:function(e){var n=e.selectedItem;if(E&&n){var t=E.applySuggestion({targetValue:f,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;h(r),setTimeout(function(){y.current&&(y.current.setSelectionRange(i,i),y.current.focus(),_())})}}}),T=I.isOpen,G=I.getInputProps,D=I.getMenuProps,P=I.getItemProps,B=I.highlightedIndex,U=I.getComboboxProps;(0,en.useEffect)(function(){var e="threads/drafts/".concat(a.id),n=ak.Z.get(e,"string");n&&h(n);var t=y.current;return function(){if(t){var n=t.value;if(0===n.length){ak.Z.remove(e);return}ak.Z.set(e,n)}}},[]),(0,en.useEffect)(function(){setTimeout(function(){y.current&&y.current.focus()})},[y]);var A=Zb(a).filter(function(e){return e.id!==d}),L="Add a comment";return 1===A.length?L="Reply to @".concat(A[0].username):A.length>1&&(L="Reply"),a.isResolved&&(L="Reply to unresolve this thread"),l&&(L=l),(0,K.BX)("div",{className:"jsx-83fb19ea8f375c79",children:[(0,K.BX)("div",(0,e0._)((0,eL._)({},U()),{className:"jsx-83fb19ea8f375c79 input-group",children:[(0,K.tZ)("textarea",(0,e0._)((0,eL._)({},G({autoFocus:!0,placeholder:L,value:f,onCompositionStart:function(){return g(!0)},onCompositionEnd:function(){return g(!1)},onChange:function(e){var n=e.target.value,t=x||tW()();x||Z(t),h(n),c({messageId:t,message:n})},onKeyDown:function(e){e.stopPropagation(),!T&&(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||v||(e.preventDefault(),u()))},rows:1,ref:function(e){y.current=e,n&&"object"==typeof n&&(n.current=e),R(e),C(e)}})),{className:"jsx-83fb19ea8f375c79 "+(dq()("inputbox",{hasContent:f.length>0})||"")})),(0,K.tZ)(ab.hU,{alt:"Send message",onClick:u,disabled:0===f.length,children:(0,K.tZ)(ZC.Z,{})})]})),(0,K.tZ)("div",(0,e0._)((0,eL._)({},D({})),{className:"jsx-83fb19ea8f375c79",children:T&&E?(0,K.tZ)("div",{className:"jsx-83fb19ea8f375c79 mention-suggestions-container",children:E.results.map(function(e,n){return(0,$.az)("div",(0,e0._)((0,eL._)({},P({item:e,index:n})),{key:e.value,className:"jsx-83fb19ea8f375c79 "+(dq()("mention-suggestion",{selected:B===n})||""),children:[e.icon,(0,K.tZ)("div",{className:"jsx-83fb19ea8f375c79",children:e.value})]}))})}):null})),(0,K.tZ)(eb(),{id:"83fb19ea8f375c79",children:'.input-group.jsx-83fb19ea8f375c79{display:grid;grid-template-columns:1fr -webkit-min-content;grid-template-columns:1fr min-content;grid-gap:10px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}.inputbox.jsx-83fb19ea8f375c79{background:var(--background-higher);color:var(--foreground-default);border:none;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);padding:var(--space-8);outline:none;resize:none;font-family:"IBM Plex Sans",sans-serif;font-size:var(--font-size-default);line-height:16px;overflow-y:auto;max-height:-webkit-calc(var(--font-size-default)*18);max-height:-moz-calc(var(--font-size-default)*18);max-height:calc(var(--font-size-default)*18)}.inputbox.jsx-83fb19ea8f375c79::-webkit-input-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79:-moz-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79::-moz-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79:-ms-input-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79::-ms-input-placeholder{white-space:pre}.inputbox.jsx-83fb19ea8f375c79::placeholder{white-space:pre}.inputbox.hasContent.jsx-83fb19ea8f375c79{-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.mention-suggestions-container.jsx-83fb19ea8f375c79{padding-top:1em;display:grid;grid-row-gap:var(--space-4);overflow:hidden}.mention-suggestion.jsx-83fb19ea8f375c79{display:grid;grid-template-columns:-webkit-min-content -webkit-max-content;grid-template-columns:min-content max-content;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-column-gap:var(--space-8);padding:var(--space-8)0;cursor:pointer;color:var(--foreground-default)}.mention-suggestion.selected.jsx-83fb19ea8f375c79{background-color:var(--background-root)}.mention-suggestion.selected.jsx-83fb19ea8f375c79>*.jsx-83fb19ea8f375c79{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}'})]})});Z_.displayName="ThreadInputForwarded";var ZS=["TextMessageContentType","PreviewMessageContentType"],ZE=t(59725);function ZR(e){var n=e.generalThreadsOpen,t=e.setGeneralThreadsOpen,r=e.generalThread,i=e.handleChangeMessage,o=void 0===i?function(){}:i,a=e.handleFinalizeMessage,l=void 0===a?function(){}:a,c=e.createAnnotationAnchorPlaceholder,s=void 0===c?function(){}:c,u=(0,ed.Z)(),d=(0,en.useMemo)(function(){return r?function(e){var n=[],t=null,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,s,u,d,p=a.value;!t||(null==p?void 0:null===(c=p.user)||void 0===c?void 0:c.id)!==(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.id)||(null==p?void 0:null===(u=p.anchor)||void 0===u?void 0:u.id)!==(null==t?void 0:t.anchorId)||!ZS.includes(t.messageType)||!ZS.includes(p.content.__typename)||new Date(p.timeCreated).getTime()-new Date(t.timeCreated).getTime()>6e5?(t&&n.push(t),t={user:p.user,timeCreated:p.timeCreated,anchorId:null==p?void 0:null===(d=p.anchor)||void 0===d?void 0:d.id,messages:[p],messageType:p.content.__typename}):t.messages.push(p)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t&&n.push(t),n}((0,em._)(r.messages).sort(function(e,n){return new Date(e.timeCreated).getTime()-new Date(n.timeCreated).getTime()})):[]},[r]);(0,en.useEffect)(function(){r||s({annotationAnchor:{id:nU()(),replId:u,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,u,s]),(0,en.useEffect)(function(){r||s({annotationAnchor:{id:nU()(),replId:u,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,u,s]);var p=(0,en.useRef)(null);(0,ZE.Z)(n&&r||null);var f=function(){p.current&&(p.current.scrollTop=p.current.scrollHeight)};return((0,en.useEffect)(function(){f()},[p,r]),r)?(0,K.BX)("div",{onClick:function(){return t(!0)},className:"jsx-571d11d33063a57f "+(dq()("general-thread")||""),children:[(0,K.tZ)("div",{css:eo.l0.scrollbar.thin,className:"jsx-571d11d33063a57f message-group-container-container",children:(0,K.tZ)("div",{ref:p,className:"jsx-571d11d33063a57f message-group-container",children:d.map(function(e){return(0,K.tZ)(Zg,{messageGroup:e},e.messages[0].id)})})}),(0,K.tZ)("div",{className:"jsx-571d11d33063a57f thread-input-container",children:(0,K.tZ)(Z_,{placeholder:"Send message",annote:r,onChangeMessage:function(e){o({anchor:r,message:e.message,messageId:e.messageId}),t(!0)},onFinalizeMessage:function(e){l({anchor:r,message:e.message,messageId:e.messageId}),t(!0),(0,ep.j)(ep.U3.MESSAGE_SENT,{replId:u,source:"chat",newThread:0===r.messages.length})}})}),(0,K.tZ)(eb(),{id:"571d11d33063a57f",children:'.general-thread.jsx-571d11d33063a57f{padding-top:0,\n          border-radius: var(--border-radius-8) var(--border-radius-8) 0 0;background:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 0;-moz-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;grid-template-rows:-webkit-min-content 1fr -webkit-min-content;grid-template-rows:min-content 1fr min-content;grid-gap:var(--space-8);height:"100%"}.message-group-container-container.jsx-571d11d33063a57f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:0;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.message-group-container.jsx-571d11d33063a57f{padding:var(--space-12);display:grid;grid-row-gap:var(--space-16);overflow-y:auto}.thread-input-container.jsx-571d11d33063a57f{width:100%;border-top:1px solid var(--outline-dimmer);padding:var(--space-8)var(--space-12)}'})]}):null}var ZI=t(75246),ZT=t(11134),ZG=t(8482),ZD=t(81031),ZP=t(66610),ZB=function(e){var n=(0,ZP.Z)(e,null,null).updateThread;return{handleToggleResolved:function(e){return n({changes:{isResolved:e}})}}},ZU=t(2158),ZA=t(24837),ZL=t(61657),ZO=function(e){var n,t=e.thread,r=e.onClick,i=t.messages.filter(function(e){return!e.seen}).length,o=null===(n=(0,ZG.Vy)(t.path?t:null))||void 0===n?void 0:n.snippet,a=(0,ZP.Z)(t.id,null,null).thread,l=(0,Ze.kM)(),c=ZB(t.id).handleToggleResolved,s={jumpToCode:"Jump to code",resolveThread:"Resolve this thread",unresolveThread:"Re-open",replyCount:function(e,n){var t=function(e){return 1===e?"reply":"replies"};return e<=1?"View ".concat(1===n?"unread":""," thread"):n?"View ".concat(n," unread ").concat(t(n)):"View ".concat(e-1," ").concat(t(e-1))},threadOpened:function(e,n){return"Opened ".concat(e," by ").concat(n)}},u=t.messages[0],d=(0,en.useMemo)(function(){return(null==u?void 0:u.timeCreated)?(0,ZL.Y)(u.timeCreated):"some time ago"},[u]);return t.user?(0,K.BX)(eS.Tg,{css:[nt.gU.filled,eo.l0.overflow("hidden"),l===t.id&&{borderColor:eo.TV.accentPrimaryDefault}],onClick:function(){r(t)},children:[(0,K.BX)(eS.Tg,{elevated:!0,css:[eo.l0.flex.row,eo.l0.align.center,eo.l0.justify.spaceBetween,eo.l0.flex.grow(1),eo.l0.px(8),eo.l0.py(8)],children:[(0,K.tZ)(ei.G,{css:[eo.l0.flex.row,eo.l0.align.center,eo.l0.rowWithGap(4)],children:(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",multiline:!1,children:s.threadOpened(d,t.user.username)})}),(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.align.center,eo.l0.rowWithGap(4)],children:[o&&t.path?(0,K.tZ)(ab.hU,{alt:s.jumpToCode,onClick:function(){return r(t)},children:(0,K.tZ)(ZU.Z,{})}):null,t.isResolved?(0,K.tZ)(e5.zx,{text:s.unresolveThread,size:"small",colorway:"primary",onClick:function(){c(!1)}}):(0,K.tZ)(ab.hU,{alt:s.resolveThread,onClick:function(){c(!0)},children:(0,K.tZ)(aC.Z,{})})]})]}),o&&t.path?(0,K.tZ)(ZD.F,{elevation:"root",path:t.path,initialDoc:o.lines.join("\n"),startLineNumber:o.startLineNumber,fontSize:12,maxHeight:"42px",minHeight:"42px",allowScroll:!1}):null,u?(0,K.tZ)(ei.G,{css:[eo.l0.p(8),eo.l0.py(12)],children:(0,K.tZ)(ZA.Z,{thread:a,message:u},u.id)}):null,t.messages.length>1&&(0,K.BX)(ei.G,{css:[eo.l0.pb(12),eo.l0.px(8),eo.l0.flex.row,eo.l0.align.center,eo.l0.rowWithGap(4),eo.l0.color.foregroundDimmer],children:[(0,K.tZ)(ei.G,{css:[eo.l0.position.relative],children:(0,K.tZ)(ZT.Z,{unreadDot:i>0})}),(0,K.tZ)(eE.xv,{variant:"small",multiline:!1,children:s.replyCount(t.messages.length,i)})]})]}):null},ZX=function(e){var n=e.path,t=e.threads,r=e.onThreadClick,i=t.some(function(e){return e.messages.some(function(e){return!e.seen})});return(0,K.tZ)(ei.G,{css:[eo.l0.pb(8)],children:(0,K.tZ)(ZI.Q,{css:[eo.TV.singleLine,eo.l0.px(8)],headerContent:(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.align.center,eo.l0.justify.spaceBetween,eo.l0.flex.growAndShrink(1),eo.l0.mr(8)],children:[(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.align.center,eo.l0.rowWithGap(8),eo.l0.flex.growAndShrink(1)],children:[(0,K.tZ)(oY.Z,{path:n,size:20}),(0,K.tZ)(eE.xv,{css:[eo.l0.flex.shrink(1)],multiline:!1,children:n})]}),i?(0,K.tZ)("div",{css:[eo.l0.flex.shrink(0),eo.l0.width(8),eo.l0.height(8),eo.l0.backgroundColor.redStronger,eo.l0.borderRadius("full")]}):null]}),children:(0,K.tZ)("div",{css:[eo.l0.mt(8),eo.l0.colWithGap(8)],children:t.map(function(e){return(0,K.tZ)(ZO,{thread:e,onClick:r},e.id)})})})})};function ZM(e){var n=e.primary,t=e.secondary;return(0,K.tZ)(ei.G,{css:[eo.l0.align.center,eo.l0.justify.center,eo.l0.flex.grow(1)],children:(0,K.BX)(ei.G,{css:[eo.l0.align.center,eo.l0.justify.center,eo.l0.flex.grow(1)],children:[(0,K.tZ)(ei.G,{css:[eo.l0.maxWidth(140),eo.l0.maxHeight(140),eo.l0.position.relative,eo.l0.align.center,eo.l0.justify.center,{pointerEvents:"none"}],children:(0,K.tZ)(Zn,{})}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",css:eo.l0.mt(32),multiline:!1,children:n}),t?(0,K.tZ)("div",{css:[eo.l0.color.foregroundDimmest],children:(0,K.tZ)(eE.xv,{variant:"text",css:eo.l0.mt(8),multiline:!1,children:t})}):null]})})}(d=U||(U={})).CHRONOLOGICAL="chronological",d.CODE_ORDER="codeOrder",(p=A||(A={})).PARTICIPATING="participating",p.RESOLVED="resolved",p.UNREAD="unread",p.INBOX="inbox";var Zz=function(e){var n,t,r,i=e.isChatOnly,o=e.openFile,a=(0,ed.Z)(),l=hQ(a,{onReceiveAnnotationUpdate:function(){}}),c=l.annotations,s=l.loading,u=l.generalThread,d=l.createAnnotationAnchorPlaceholder,p=l.createAnnotationMessage,f=l.updateThreadPreview,h=(n=(0,eL._)({},Zr,void 0),eM.a(Zi,n)),m=h.data,v=h.loading,g=s||v,y=(0,J._)((0,en.useState)(!1),2),b=y[0],x=y[1],Z=(0,Ze.a9)(),w=(0,J._)((0,en.useState)(""),2),k=w[0],C=w[1],_=(0,J._)((0,en.useState)("INBOX"),2),S=_[0],E=_[1],R=(0,J._)((0,en.useState)("CHRONOLOGICAL"),2),I=R[0],T=R[1],G=(0,en.useMemo)(function(){var e,n=null==m?void 0:null===(e=m.currentUser)||void 0===e?void 0:e.id;return c.filter(function(e){if("INBOX"===S)return!e.isResolved;if("RESOLVED"===S)return e.isResolved;if("PARTICIPATING"===S){var t;return!n||(null===(t=e.user)||void 0===t?void 0:t.id)===n||e.messages.some(function(e){var t=e.user;return(null==t?void 0:t.id)===n})}return"UNREAD"!==S||e.messages.some(function(e){return!e.seen})})},[m,c,S]),D=(0,en.useMemo)(function(){return G.filter(function(e){var n,t;return 0===k.length||null!==(t=null===(n=e.path)||void 0===n?void 0:n.toLowerCase().includes(k.toLowerCase()))&&void 0!==t&&t})},[k,G]),P=(0,en.useMemo)(function(){return(0,em._)(D).sort(function(e,n){if("CHRONOLOGICAL"===I){var t,r,i=new Date(null===(t=e.messages[0])||void 0===t?void 0:t.timeCreated),o=new Date(null===(r=n.messages[0])||void 0===r?void 0:r.timeCreated);return i&&o?i<o?1:-1:0}return"CODE_ORDER"===I?(0,aS.IV)(e.path,n.path):0}).reduce(function(e,n){var t=n.path;return t&&void 0!==t&&(e[t]=e[t]||[],e[t].push(n)),e},{})},[D,I]),B=(0,en.useMemo)(function(){return Object.values((0,eL._)({},P)).map(function(e){return(0,em._)(e).sort(function(e,n){if("CHRONOLOGICAL"===I){var t,r,i,o,a,l,c=new Date(null===(a=e.messages[0])||void 0===a?void 0:a.timeCreated),s=new Date(null===(l=n.messages[0])||void 0===l?void 0:l.timeCreated);if(c&&s)return c<s?1:-1}else if("CODE_ORDER"===I)return(null!==(r=null!==(t=e.indexStart)&&void 0!==t?t:e.indexEnd)&&void 0!==r?r:0)<(null!==(o=null!==(i=n.indexStart)&&void 0!==i?i:n.indexEnd)&&void 0!==o?o:0)?-1:1;return 0})}).reduce(function(e,n,t){return e[Object.keys(P)[t]]=n,e},{})},[P,I]),L=(0,x7.Z)().map(function(e){return e.username}),O=(t=(0,J._)((0,h$.n)(),1)[0],function(){t({variables:{replId:a}})}),X=(r=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){return e.path&&(o(e.path),Z(e.id)),[2]})}),function(e){return r.apply(this,arguments)}),M=(0,ng.gf)("editor.action.startThread");return i?(0,K.tZ)(ZR,{generalThreadsOpen:b,setGeneralThreadsOpen:x,generalThread:u,handleChangeMessage:function(e){var n=e.anchor,t=e.messageId;f({threadId:n.id,messageId:t})},handleFinalizeMessage:function(e){var n=e.anchor,t=e.message,r=e.messageId,i=(0,x9.kW)(t,{users:(0,em._)(L).concat(["everyone"])});p({anchor:n,annotationMessage:{id:r,text:t,mentions:i.mentions}})},createAnnotationAnchorPlaceholder:d}):(0,K.tZ)(eS.Tg,{className:"threads-inbox",css:[eo.l0.height("100%"),eo.l0.width("100%"),eo.l0.overflow("hidden"),eo.l0.position.relative],"aria-busy":g,children:g?(0,K.tZ)(ei.G,{css:[eo.l0.display.flex,eo.l0.align.center,eo.l0.justify.center,eo.l0.height("100%")],children:(0,K.tZ)(eR.Z,{size:24})}):(0,K.BX)(K.HY,{children:[(0,K.tZ)(ei.G,{className:"threads-inbox-header",css:[eo.l0.py(12),eo.l0.px(8),eo.l0.position.sticky,eo.l0.top(0),eo.l0.backgroundColor.backgroundDefault,{zIndex:10}],children:(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.align.center,eo.l0.flex.wrap,{gap:8}],children:[(0,K.tZ)(pf.II,{placeholder:Zs.search.placeholder,value:k,onChange:function(e){return C(e.target.value)},css:[eo.l0.flex.grow(1)]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.maxWidth("100%"),{gap:8}],children:[(0,K.tZ)(ei.G,{css:[eo.l0.flex.shrink(1)],children:(0,K.tZ)(hz.ZE,{cssProps:[eo.l0.flex.shrink(1),{span:eo.l0.flex.shrink(1)}],icon:Zs.filters[A[S]].icon,suffix:(0,K.tZ)(a3.Z,{}),label:Zs.filters[A[S]].label,onAction:function(e){switch(e){case"toggle-inbox":E("INBOX");break;case"toggle-unread":E("UNREAD");break;case"toggle-participating":E("PARTICIPATING");break;case"toggle-resolved":E("RESOLVED")}},children:Object.entries(Zs.filters).map(function(e){var n=(0,J._)(e,2),t=(n[0],n[1]);return(0,K.tZ)(x6.ck,{"aria-label":t.label,children:(0,K.BX)(ei.G,{css:eo.l0.rowWithGap(8),children:[t.icon,(0,K.tZ)(eE.xv,{multiline:!1,children:t.label})]})},t.key)})})}),(0,K.tZ)(ei.G,{css:[eo.l0.flex.shrink(1)],children:(0,K.tZ)(hz.ZE,{cssProps:[eo.l0.flex.shrink(1),{span:eo.l0.flex.shrink(1)}],icon:Zs.sorts[U[I]].icon,suffix:(0,K.tZ)(a3.Z,{}),label:Zs.sorts[U[I]].label,onAction:function(e){switch(e){case Zs.sorts.chronological.key:T("CHRONOLOGICAL");break;case Zs.sorts.codeOrder.key:T("CODE_ORDER")}},children:Object.entries(Zs.sorts).map(function(e){var n=(0,J._)(e,2),t=(n[0],n[1]);return(0,K.tZ)(x6.ck,{"aria-label":t.label,children:(0,K.BX)(ei.G,{css:eo.l0.rowWithGap(8),children:[t.icon,(0,K.tZ)(eE.xv,{multiline:!1,children:t.label})]})},t.key)})})}),(0,K.tZ)(ei.G,{css:[eo.l0.flex.shrink(1)],children:(0,K.tZ)(e5.zx,{iconLeft:(0,K.tZ)(aC.Z,{}),text:Zs.markAsRead,onClick:O,css:{span:eo.l0.flex.shrink(1)}})})]})]})}),0===c.length?(0,K.tZ)(ZM,{primary:Zs.empty.noThreadsCreated.text.primary,secondary:M?Zs.empty.noThreadsCreated.text.secondary(M):void 0}):(0,K.tZ)(K.HY,{children:Object.keys(B).length>0?(0,K.tZ)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.overflowY("auto"),eo.l0.scrollbar.thin],children:Object.keys(B).map(function(e,n){return(0,K.tZ)(ZX,{path:e||"-",threads:Object.values(B)[n],onThreadClick:function(e){var n=window.getSelection();(null==n?void 0:n.type)!=="Range"&&X(e)}},e)})}):(0,K.tZ)(ZM,{primary:Zs.empty.noThreadsFound.text.primary,secondary:Zs.empty.noThreadsFound.text.secondary})})]})})},ZW=lO.Dy.Object({type:lO.Dy.Literal("chat")}),ZN={Content:function(e){var n=e.options;return(0,K.tZ)(eS.Tg,{background:"default",css:eo.l0.flex.growAndShrink(1),children:(0,K.tZ)(Zz,{isChatOnly:!0,openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})})},Icon:function(e){var n=e.size;return(0,K.tZ)(h2.Z,{size:n})},getTitle:function(){return"Chat"},decode:function(e){return lz.B4.Decode(ZW,e)}},Zj={Content:function(e){var n=e.options,t=n.performPaneOperation,r=n.paneId,i=e.pane.data.autoFocus,o=ii(tt),a=(0,en.useRef)(null);(0,an.Wk)(function(){return{focus:function(){var e;return null===(e=a.current)||void 0===e?void 0:e.call(a)}}},[]);var l=(0,en.useCallback)(function(e){t({operation:"replace",pane:e.pane}),o(r),(0,ep.j)(ep.U3.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})},[t,r,o]),c=ac({currentPaneId:r,openPane:l});return(0,K.tZ)(nv.X,{autoFocus:i,command:c,focusRef:a})},Icon:function(){return null},getTitle:function(){return"New tab"},decode:t(94255).J},ZF=t(41062),ZV=t(15011),ZH=lO.Dy.Object({type:lO.Dy.Literal("config")}),ZY={Content:function(e){var n=e.options.paneId,t=ii(rT);return(0,K.tZ)(ZV.Z,{closeConfigPane:function(){return t(n)},useReadFile:ZF.Z})},Icon:function(){return null},getTitle:function(){return"Configure Repl"},decode:function(e){return lz.B4.Decode(ZH,e)}};function Zq(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e.breakpoints[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,J._)(o.value,2),c=l[0],s=l[1],u=!0,d=!1,p=void 0;try{for(var f,h=s[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var m=f.value;n.push((0,K.tZ)(ZJ,{breakpoint:m,file:c,line:m.line,verified:m.verified,onClick:e.onBreakpointClick,onRemove:e.onRemove},"".concat(c,":").concat(m.line,":").concat(m.pid1Id,":").concat(m.dapId)))}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return(0,K.BX)(K.HY,{children:[(0,K.tZ)(eZ.Z,{truncate:!0,level:5,children:"Breakpoints"}),n.length>0?(0,K.tZ)(dM.gC,{align:"stretch",constrainWidth:!0,children:n}):(0,K.BX)(ew.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,K.tZ)("span",{className:"jsx-223474dbb82a953c breakpoint"})," by clicking on the line number.",(0,K.tZ)(eb(),{id:"223474dbb82a953c",children:".breakpoint.jsx-223474dbb82a953c{display:inline-block;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:8px;height:8px}"})]})]})}function ZJ(e){var n=e.breakpoint,t=e.file,r=e.line,i=e.verified,o=e.onClick,a=e.onRemove,l=(0,yl.om)(t);return(0,K.BX)(K.HY,{children:[(0,K.tZ)(dM.gC,{spacing:1,align:"stretch",children:(0,K.tZ)("div",{className:"jsx-3743f20b19d8f08d breakpoint",children:(0,K.BX)("div",{css:[{"&:hover":{backgroundColor:eo.TV.backgroundHigher,color:eo.TV.foregroundDefault},"&:focus-within":{color:eo.TV.foregroundDefault},"&:hover .frameButton":{background:eo.TV.backgroundHigher,backgroundColor:eo.TV.backgroundHigher,opacity:1},"&:focus-within .frameButton":{opacity:1},"&:hover .frameButton:hover":{backgroundColor:eo.TV.backgroundHighest}}],onClick:function(){o(t,r)},className:"jsx-3743f20b19d8f08d frame",children:[(0,K.tZ)("div",{className:"jsx-3743f20b19d8f08d "+(dq()("circle",{verified:i})||"")}),(0,K.tZ)("div",{className:"jsx-3743f20b19d8f08d line",children:r}),(0,K.tZ)("div",{className:"jsx-3743f20b19d8f08d location",children:(0,K.tZ)("span",{className:"jsx-3743f20b19d8f08d path",children:l||t})}),(0,K.tZ)(ab.hU,{className:"frameButton",alt:"Remove breakpoint",css:[{opacity:0}],onClick:function(){a({breakpoint:n})},children:(0,K.tZ)(lI.Z,{})})]})})}),(0,K.tZ)(eb(),{id:"3743f20b19d8f08d",children:".breakpoint.jsx-3743f20b19d8f08d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;max-width:100%;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.frame.jsx-3743f20b19d8f08d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default)}.circle.jsx-3743f20b19d8f08d{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:11px;height:11px;margin-left:var(--space-8);margin-right:var(--space-8);opacity:.5}.verified.jsx-3743f20b19d8f08d{opacity:1}.line.jsx-3743f20b19d8f08d{font-family:var(--font-family-code);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.location.jsx-3743f20b19d8f08d{font-family:var(--font-family-code);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8)}.path.jsx-3743f20b19d8f08d{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"})]})}var ZK=t(78419),Z$=t(13871),ZQ=t(4995),Z0=t(30256),Z1=t(27187),Z2=t(25753);function Z4(e){var n=e.client,t=e.debugConfig,r=(0,lC.Z)(null==n?void 0:n.state),i=(0,lC.Z)(null==n?void 0:n.supportsStepBack);return(0,K.BX)(ei.G,{css:eo.l0.rowWithGap(2),children:[i?(0,K.BX)(K.HY,{children:[(0,K.tZ)(ab.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,ep.j)(ep.U3.DEBUGGER_USED,{action:"lastBreakpoint"}),null==n||n.reverseContinue()},alt:"Last Breakpoint",tooltipContents:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,K.tZ)(ZK.Z,{})}),(0,K.tZ)(ab.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,ep.j)(ep.U3.DEBUGGER_USED,{action:"stepBack"}),null==n||n.back()},alt:"Step Back",tooltipContents:"Step Back",tooltipPlacement:"bottom",children:(0,K.tZ)(ZQ.Z,{})})]}):null,(0,K.tZ)(Z8,{stop:function(){(0,ep.j)(ep.U3.DEBUGGER_USED,{action:"stop"}),null==n||n.stop()},start:function(){(0,ep.j)(ep.U3.DEBUGGER_USED,{action:"start"}),null==n||n.start(t)},state:r}),(0,K.tZ)(ab.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,ep.j)(ep.U3.DEBUGGER_USED,{action:"nextStep"}),null==n||n.next()},alt:"Next Step",tooltipContents:"Next Step",tooltipPlacement:"bottom",children:(0,K.tZ)(sZ.Z,{})}),(0,K.tZ)(ab.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,ep.j)(ep.U3.DEBUGGER_USED,{action:"skipStep"}),null==n||n.skip()},alt:"Skip Step",tooltipContents:"Skip Step",tooltipPlacement:"bottom",children:(0,K.tZ)(Z0.Z,{rotate:90})}),(0,K.tZ)(ab.hU,{size:40,disabled:!n||"paused"!==r,onClick:function(){(0,ep.j)(ep.U3.DEBUGGER_USED,{action:"nextBreakpoint"}),null==n||n.continue()},alt:"Next Breakpoint",tooltipContents:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,K.tZ)(Z$.Z,{})})]})}var Z3=(0,$.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function Z8(e){var n=e.state,t=e.start,r=e.stop;return"terminated"===n?(0,K.tZ)(ab.hU,{css:eo.l0.color.accentPrimaryDefault,size:40,onClick:t,alt:"Run",tooltipContents:"Run",tooltipPlacement:"bottom",children:(0,K.tZ)(Z1.Z,{})}):"stopping"===n||null===n?(0,K.tZ)(ab.hU,{size:40,disabled:!0,alt:"Loading",tooltipContents:"Loading",tooltipPlacement:"bottom",children:(0,K.tZ)(eR.Z,{})}):(0,K.tZ)(ab.hU,{css:"initializing"===n||"preinitializing"===n?[eo.l0.color.foregroundDimmer,{animationName:Z3.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:eo.l0.color.accentPrimaryDefault,size:40,onClick:r,alt:"Stop",tooltipContents:"Stop",tooltipPlacement:"bottom",children:(0,K.tZ)(Z2.Z,{})})}function Z5(e){return(0,K.BX)(K.HY,{children:[(0,K.tZ)(eZ.Z,{truncate:!0,level:5,children:"Call stack"}),(0,K.tZ)(dM.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map(function(n){return(0,K.tZ)(Z7,{frame:n,onClick:e.onFrameClick},n.id)})})]})}var Z6=(0,$.iv)({"&":{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:"100%",height:"var(--space-32)",cursor:"pointer",color:"var(--foreground-dimmer)",borderRadius:"var(--border-radius-4)",fontSize:"var(--font-size-small)",fontFamily:"var(--font-family-code)"},"&:hover":{backgroundColor:"var(--background-higher)",color:"var(--foreground-default)"},".label":{fontSize:"var(--font-size-default)",paddingLeft:"var(--space-8)",paddingRight:"var(--space-8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".name":{flex:"0 0 auto",backgroundColor:"var(--background-higher)",padding:"1px 2px",borderRadius:"2px"},".path":{flex:"0 1 auto"},".line":{display:"inline-block",marginRight:"var(--space-8)",backgroundColor:"var(--background-higher)",padding:"1px 2px",borderRadius:"2px"}});function Z7(e){var n,t,r=e.frame,i=e.onClick,o=null===(n=r.source)||void 0===n?void 0:n.name,a=null===(t=r.source)||void 0===t?void 0:t.path,l=o&&(0,yl.om)(o),c=a&&(0,yl.om)(a),s=a&&(0,yl.IT)(a);return(0,K.tZ)(K.HY,{children:(0,K.BX)("div",{className:"frame",onClick:function(){return s&&i(s,r.line)},css:Z6,children:[(0,K.tZ)("div",{className:"label name",children:r.name}),(0,K.BX)("div",{className:"label path",children:[(0,K.tZ)("span",{className:"line",children:r.line}),l||c||o||a]})]})})}var Z9=t(30609),we=t(73164),wn=t(40728),wt=(0,$.iv)({a:{fontSize:eo.TV.fontSizeDefault,color:eo.TV.accentPrimaryDefault,fontWeight:eo.TV.fontWeightMedium}});function wr(e){var n=e.children;return(0,K.tZ)(eS.Tg,{background:"default",css:[eo.l0.height("100%"),eo.l0.width("100%"),eo.l0.p(8),eo.l0.overflow("auto"),{borderTopRightRadius:eo.TV.borderRadius4,paddingBottom:"44px"},wt],children:(0,K.BX)(dM.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,K.tZ)(dM.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:(0,K.tZ)(eZ.Z,{truncate:!0,level:4,children:"Debugger"})}),n]})})}function wi(e){var n=(0,aO.U)(),t=(0,el.Z)().debuggest,r=(0,lC.Z)(t.mainClient),i=(0,lC.Z)(r?r.state:null),o=(0,lC.Z)(r?r.stackFrames:null),a=(0,lC.Z)(r?r.variables:null),l=(0,lC.Z)(r?r.breakpoints:null),c=(0,ec.R3)(),s=it(th),u=(0,hM.T)(),d=null!=u&&!!u.debuggers&&u.debuggers.length>0,p=(0,J._)((0,en.useState)(null),2),f=p[0],h=p[1],m=(0,en.useMemo)(function(){return function(e,n,t,r){if(!(null==e?void 0:e.debuggers))return[];var i=[];if(n=n.slice(),r&&-1===n.indexOf(r)&&n.splice(0,0,r),t){var o=n.indexOf(t);-1!==o&&(n.splice(o,1),n.splice(0,0,t))}var a=!0,l=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if(d.match(/(\.[a-z0-9]+)$/)){var p=!0,f=!1,h=void 0;try{for(var m,v=e.debuggers[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var g=m.value;if(g.fileParam){var y=(0,we.rF)(g.fileTypeAttrs);null===y&&g.language&&(y=we.$R.from(g.language)),y&&(0,wn.JW)(d,y)&&i.push({debuggerOption:g,filePath:d,title:"Debug ".concat(d," (").concat(g.name,")")})}}}catch(e){f=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw h}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}var b=!0,x=!1,Z=void 0;try{for(var w,k=e.debuggers[Symbol.iterator]();!(b=(w=k.next()).done);b=!0){var C=w.value;C.fileParam||i.push({debuggerOption:C,title:"Debug (".concat(C.name,")")})}}catch(e){x=!0,Z=e}finally{try{b||null==k.return||k.return()}finally{if(x)throw Z}}return i}(u||null,s.map(function(e){return e.filePath||""}),c,(null==u?void 0:u.entrypoint)||"")},[c,s,u]);(0,en.useEffect)(function(){(m.length>0&&!f||f&&!m.find(function(e){return e.debuggerOption.id===f.debuggerOption.id&&e.filePath===f.filePath}))&&h(m[0])},[m]);var v=function(n,t){var r=(0,yl.om)(n);r&&e.onOpenFile({path:r,line:t})};return d?(0,K.BX)(wr,{children:[m.length>0&&(0,K.tZ)(gx.P,{id:n("debug-config"),items:m,selectedItem:f,onChange:function(e){h(e)},"aria-label":"Select a debugging configuration"}),(0,K.tZ)(Z4,{client:r,debugConfig:f||void 0}),l?(0,K.tZ)(Zq,{breakpoints:l,onBreakpointClick:v,onRemove:function(e){var n=e.breakpoint;r&&n.pid1Id&&r.removeBreakpoint(n.pid1Id)}}):null,a&&r&&"paused"===i?(0,K.tZ)(Z9.Z,{client:r,variables:a}):null,o&&"paused"===i?(0,K.tZ)(Z5,{frames:o,onFrameClick:v}):null,r?(0,K.tZ)(ei.G,{css:[eo.l0.flex.row,eo.l0.justify.end,eo.l0.position.absolute,eo.l0.bottom(0),eo.l0.right(0),eo.l0.p(8),eo.l0.backgroundColor.backgroundDefault,eo.l0.borderRadius(0,0,8,8),{width:"100%"}],children:(0,K.tZ)(e5.zx,{size:"small",variant:"outlined",onClick:function(){return function(e){if("undefined"!=typeof Blob){var n=new Blob([e],{type:"text/plain"}),t=document.createElement("a");t.download="debugger-logs.txt",t.href=URL.createObjectURL(n),t.dataset.downloadurl=["text/plain",t.download,t.href].join(":"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(function(){URL.revokeObjectURL(t.href)},1500)}}(r.getDebugLogs())},text:"Download Logs",iconLeft:(0,K.tZ)(db.Z,{})})}):null]}):(0,K.BX)(wr,{children:[(0,K.tZ)(eE.h4,{level:2,variant:"subheadBig",children:"Sorry, debugger is not configured for this Repl."}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"We are working on making more features configurable and the debugger available for more languages, check back again in the future."})]})}var wo=t(18357),wa=lO.Dy.Object({type:lO.Dy.Literal("debugger")}),wl={Content:function(e){var n=e.options;return(0,K.tZ)(wi,{onOpenFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})}})},Icon:function(e){var n=e.size;return(0,K.tZ)(wo.Z,{size:n})},getTitle:function(){return"Debugger"},decode:function(e){return lz.B4.Decode(wa,e)}},wc={Content:function(e){var n,t=e.pane;return(0,K.tZ)(eS.Tg,{css:{width:"100%",height:"100%",borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",overflow:"hidden"},children:(0,K.tZ)("iframe",{title:"Replit Docs",src:(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.url)||nP.TT.HOME,width:"100%",height:"100%",frameBorder:"0"})})},Icon:function(e){var n=e.size;return(0,K.tZ)(d5.Z,{size:n})},getTitle:function(){return"Docs"},decode:t(22111).J},ws=t(54254),wu=t(82993),wd=t(22699),wp=function(){return(0,K.BX)(ei.G,{title:"late",css:[eo.l0.fontSize("small"),eo.l0.px(4),eo.l0.borderRadius(4),eo.l0.color.accentNegativeDefault,{border:"1px solid",borderColor:eo.TV.accentNegativeDefault}],children:["late",(0,K.tZ)(eb(),{id:"4b00beb7f87eecca",children:"span.jsx-4b00beb7f87eecca{color:var(--accent-negative-default)}"})]})},wf=ei.K.a,wh=ei.K.div;function wm(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?"submitted":!e.timeSubmitted&&e.timeLastReviewed?"reviewed":e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?"submitted":"reviewed":void 0:"started":"not-started"}(f=L||(L={})).NotStarted="not-started",f.Started="started",f.Submitted="submitted",f.Reviewed="reviewed";var wv=function(e,n){var t=e.indexOf("?"),r=new URLSearchParams(-1===t?"":e.slice(t));r.append("submissionReview","true");var i=-1===t?e:e.slice(0,t);return n?"".concat(i,"?").concat(r.toString(),"#").concat(n):"".concat(i,"?").concat(r.toString())},wg=(O={},(0,ea._)(O,"started",eo.TV.blueDefault),(0,ea._)(O,"not-started",eo.TV.foregroundDimmest),(0,ea._)(O,"reviewed",eo.TV.greenDefault),(0,ea._)(O,"submitted",eo.TV.yellowDefault),O);function wy(e){var n=e.status,t=e.highlighted?eo.TV.foregroundDefault:wg[n];return(0,K.tZ)(e2.u,{tooltip:function(e){var n=L.NotStarted,t=L.Started,r=L.Submitted,i=L.Reviewed;switch(e){case n:return"Not Started";case t:return"Not submitted yet";case r:return"Submitted (waiting for review)";case i:return"Reviewed";default:return""}}(n),placement:"right",children:(0,K.BX)(ei.G,{children:["submitted"===n?(0,K.tZ)(wd.Z,{color:t}):null,"reviewed"===n?(0,K.tZ)(aC.Z,{color:t}):null,"started"===n?(0,K.tZ)(nk.Z,{color:t}):null,"not-started"===n?(0,K.tZ)(da.Z,{color:t}):null]})})}function wb(e){var n=e.result,t=e.highlighted,r=e.current,i=e.isLate,o=(0,ec.R3)(),a=!r&&n.url?wv(n.url,o):"",l=(0,K.BX)(ei.G,{css:[eo.l0.p(8),eo.l0.rowWithGap(8),eo.l0.justify.spaceBetween,eo.l0.align.center,"not-started"===n.status&&{opacity:t?1:.4},t&&{backgroundColor:nt.gU.listItem["@media (hover: hover)"][":not([disabled])"][":not(textarea):active"].backgroundColor},r&&{backgroundColor:eo.TV.accentPrimaryDimmer,color:eo.TV.foregroundDefault}],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center,eo.l0.flex.growAndShrink(1)],children:[(0,K.tZ)(e1.q,{size:24,username:n.name,src:n.image}),(0,K.tZ)(eE.xv,{css:eo.l0.flex.growAndShrink(1),multiline:!1,children:n.name}),i?(0,K.tZ)(wp,{}):null]}),n.status?(0,K.tZ)(wy,{status:n.status,highlighted:t||r}):null]});return a?(0,K.tZ)(wf,{href:a,style:{color:"inherit"},children:l}):l}var wx=function(e){var n=e.team,t=e.submission,r=e.submissionList,i=e.template,o=(0,J._)((0,en.useState)([]),2),a=o[0],l=o[1],c=(0,J._)((0,en.useState)(""),2),s=c[0],u=c[1],d=(0,Zy.Kb)({items:a,defaultHighlightedIndex:0}),p=d.isOpen,f=d.getComboboxProps,h=d.getInputProps,m=d.getMenuProps,v=d.getItemProps,g=d.getToggleButtonProps,y=d.highlightedIndex,b=d.openMenu,x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t.isGroupSubmission){var i=r;0!==e.length&&(i=i.filter(function(n){var t;return null===(t=n.submissionGroup)||void 0===t?void 0:t.users.some(function(n){var t;return null===(t=(null==n?void 0:n.fullName)||(null==n?void 0:n.username))||void 0===t?void 0:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())})}));var o=i.map(function(e){var n,t,r,i,o=(null==e?void 0:null===(n=e.submissionGroup)||void 0===n?void 0:n.users.map(function(e){return(null==e?void 0:e.fullName)||(null==e?void 0:e.username)||""}).join(", "))||"";return{image:(null==e?void 0:null===(r=e.submissionGroup)||void 0===r?void 0:null===(t=r.users[0])||void 0===t?void 0:t.image)||"",name:o,url:null===(i=e.repl)||void 0===i?void 0:i.url,status:wm(e),submissionId:e.id,timeSubmitted:null==e?void 0:e.timeSubmitted}});l((0,em._)(o))}else{var a=n.students,c=(a=0===e.length?a.filter(function(e){return e.user}).sort(function(e,n){var t,r,i,o;return(e.nickname||(null===(t=e.user)||void 0===t?void 0:t.fullName)||(null===(r=e.user)||void 0===r?void 0:r.username)||"").localeCompare(n.nickname||(null===(i=n.user)||void 0===i?void 0:i.fullName)||(null===(o=n.user)||void 0===o?void 0:o.username)||"")}):a.filter(function(n){var t,r,i;return null===(t=n.nickname||(null===(r=n.user)||void 0===r?void 0:r.fullName)||(null===(i=n.user)||void 0===i?void 0:i.username))||void 0===t?void 0:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())})).map(function(e){var n,t,i,o,a=r.find(function(n){var t,r;return(null===(t=n.author)||void 0===t?void 0:t.id)===(null===(r=e.user)||void 0===r?void 0:r.id)});return{image:(null===(n=e.user)||void 0===n?void 0:n.image)||"",name:e.nickname||(null===(t=e.user)||void 0===t?void 0:t.fullName)||(null===(i=e.user)||void 0===i?void 0:i.username)||"",url:null==a?void 0:null===(o=a.repl)||void 0===o?void 0:o.url,status:wm(a),submissionId:null==a?void 0:a.id,timeSubmitted:null==a?void 0:a.timeSubmitted}});l((0,em._)(c))}};return(0,K.BX)(ei.G,{css:[eo.l0.position.relative,{zIndex:2}],children:[(0,K.BX)(wh,(0,e0._)((0,eL._)({css:[eo.l0.position.relative]},f()),{children:[(0,K.tZ)(pf.II,(0,eL._)({},h({value:s,placeholder:"Switch submission",onKeyDown:function(e){"Escape"===e.key&&l([])},onChange:function(e){var n=e.target.value;x(n),u(n)},onFocus:function(){x(),b()}}))),(0,K.tZ)(ei.G,{css:[eo.l0.position.absolute,eo.l0.top(0),eo.l0.right(0),eo.l0.height("100%"),eo.l0.center],children:s?(0,K.tZ)(ei.G,{css:[eo.l0.reset.button,eo.l0.cursor.pointer,eo.l0.px(8)],onClick:function(){return u("")},tag:"button",children:(0,K.tZ)(lI.Z,{})}):(0,K.tZ)(ei.G,(0,e0._)((0,eL._)({css:[eo.l0.reset.button,eo.l0.cursor.pointer,eo.l0.px(8)]},g({refKey:"innerRef"})),{tag:"button",children:(0,K.tZ)(a3.Z,{})}))})]})),(0,K.tZ)(eS.Tg,(0,e0._)((0,eL._)({tag:"ul",elevated:!0,css:[{zIndex:1,position:"absolute",overflowY:"auto",width:"100%",left:0,top:"calc(100% + ".concat(eo.TV.space8,")"),border:"1px solid",borderColor:eo.TV.outlineDimmest,listStyle:"none"},!p&&{visibility:"hidden"},eo.l0.borderRadius(8),eo.l0.maxHeight(400)]},m({refKey:"innerRef"})),{children:a.map(function(e,n){var r=e.submissionId===t.id,o=!e.url;return(0,K.tZ)(ei.G,(0,e0._)((0,eL._)({tag:"li",css:[!o&&eo.l0.cursor.pointer]},v({index:n,item:e,refKey:"innerRef",disabled:o,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}})),{children:(0,K.tZ)(wb,{result:e,highlighted:y===n,current:r,isLate:i.dueDate&&e.timeSubmitted&&new Date(i.dueDate)<new Date(e.timeSubmitted)||!1})}),e.name)})}))]})},wZ=t(24890);function ww(){var e=(0,eO._)(["\n  fragment EducationPaneRepl on Repl {\n    id\n    title\n    url\n    timeCreated\n    slug\n  }\n"]);return ww=function(){return e},e}function wk(){var e=(0,eO._)(["\n  fragment EducationPaneTemplate on ReplTemplate {\n    id\n    dueDate\n    repl {\n      id\n      ...EducationPaneRepl\n    }\n  }\n  ","\n"]);return wk=function(){return e},e}function wC(){var e=(0,eO._)(["\n  fragment EducationPaneUser on User {\n    id\n    username\n    firstName\n    lastName\n    fullName\n    image\n  }\n"]);return wC=function(){return e},e}function w_(){var e=(0,eO._)(["\n  fragment EducationPaneReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...EducationPaneUser\n    }\n    repl {\n      id\n      ...EducationPaneRepl\n    }\n    isGroupSubmission\n    submissionGroup {\n      users {\n        id\n        ...EducationPaneUser\n      }\n    }\n  }\n  ","\n  ","\n"]);return w_=function(){return e},e}function wS(){var e=(0,eO._)(["\n  fragment EducationPaneTemplateWithSubmissions on ReplTemplate {\n    id\n    ...EducationPaneTemplate\n    submissions {\n      id\n      ...EducationPaneReplSubmission\n    }\n  }\n  ","\n  ","\n"]);return wS=function(){return e},e}function wE(){var e=(0,eO._)(['\n  fragment EducationPaneTeam on Team {\n    id\n    templates {\n      id\n      ...EducationPaneTemplate\n    }\n    username\n    displayName\n    image\n    students: members(permissions: "member") {\n      id\n      permissions\n      nickname\n      user {\n        id\n        ...EducationPaneUser\n      }\n    }\n  }\n  ',"\n  ","\n"]);return wE=function(){return e},e}function wR(){var e=(0,eO._)(["\n  query EducationPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        ...EducationPaneRepl\n        owner {\n          ... on Team {\n            id\n            ...EducationPaneTeam\n          }\n        }\n        template {\n          id\n          ...EducationPaneTemplateWithSubmissions\n        }\n        submission {\n          id\n          ...EducationPaneReplSubmission\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return wR=function(){return e},e}function wI(){var e=(0,eO._)(["\n  mutation MarkSubmissionReviewed($replId: String!, $status: Boolean!) {\n    reviewRepl(replId: $replId, status: $status) {\n      ... on UserError {\n        message\n      }\n      ... on Repl {\n        id\n        submission {\n          id\n          timeLastReviewed\n        }\n      }\n    }\n  }\n"]);return wI=function(){return e},e}function wT(){var e=(0,eO._)(["\n  mutation UnsubmitSubmission($replId: String!) {\n    unsubmitRepl(replId: $replId) {\n      ... on UserError {\n        message\n      }\n      ... on Repl {\n        id\n        submission {\n          id\n          timeSubmitted\n          timeLastReviewed\n        }\n      }\n    }\n  }\n"]);return wT=function(){return e},e}var wG={},wD=(0,eX.Ps)(ww()),wP=(0,eX.Ps)(wk(),wD),wB=(0,eX.Ps)(wC()),wU=(0,eX.Ps)(w_(),wB,wD),wA=(0,eX.Ps)(wS(),wP,wU),wL=(0,eX.Ps)(wE(),wP,wB),wO=(0,eX.Ps)(wR(),wD,wL,wA,wU),wX=(0,eX.Ps)(wI()),wM=(0,eX.Ps)(wT()),wz=function(e){return{short:(0,gd.Z)(e,"do MMM"),long:(0,gd.Z)(e,"do MMM, hh:mm a")}},wW=function(e,n){var t=e.students.find(function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===(null==n?void 0:n.id)});return(null==t?void 0:t.nickname)||(null==n?void 0:n.fullName)||"@".concat(null==n?void 0:n.username)};function wN(e){var n=e.submission,t=e.submissionList,r=(0,ec.R3)(),i=t.findIndex(function(e){return e.id===n.id}),o=t[i-1],a=t[i+1],l=t.filter(function(e){return e.timeLastReviewed}).length;return(0,K.BX)(ei.G,{css:eo.l0.rowWithGap(8),children:[t.length===l?(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.flex.growAndShrink(1)],children:[(0,K.tZ)(aC.Z,{color:eo.TV.greenDefault}),(0,K.BX)(eE.xv,{color:"dimmer",css:[eo.l0.flex.growAndShrink(1)],multiline:!1,children:["All ",l," submissions reviewed"]})]}):(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.flex.growAndShrink(1),eo.l0.align.center],children:[(0,K.tZ)(e2.u,{tooltip:"Reviewed",children:(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(aC.Z,{color:eo.TV.greenDefault}),(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:l})]})}),(0,K.tZ)(e2.u,{tooltip:"Waiting for review",children:(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(wd.Z,{size:12,color:eo.TV.yellowDefault}),(0,K.tZ)(eE.xv,{variant:"small",color:"dimmer",multiline:!1,children:t.length-l})]})})]}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4)],children:[(null==o?void 0:o.repl)?(0,K.tZ)(fO.Z,{size:"small",variant:"outlined",href:wv(o.repl.url,r),text:"",iconLeft:(0,K.tZ)(ZQ.Z,{})}):(0,K.tZ)(e5.zx,{size:"small",variant:"outlined",text:"",disabled:!0,iconLeft:(0,K.tZ)(ZQ.Z,{})}),(null==a?void 0:a.repl)?(0,K.tZ)(fO.Z,{size:"small",variant:"outlined",href:wv(a.repl.url,r),text:"",iconRight:(0,K.tZ)(sZ.Z,{})}):(0,K.tZ)(e5.zx,{size:"small",variant:"outlined",text:"",disabled:!0,iconRight:(0,K.tZ)(sZ.Z,{})})]})]})}function wj(e){var n,t=e.submission,r=e.dueDate,i=e.team,o=!!(r&&new Date(r)<new Date(t.timeSubmitted));return(0,K.BX)(eS.Tg,{css:[eo.l0.colWithGap(16),eo.l0.p(16),eo.l0.borderRadius(8)],elevated:!0,children:[t.isGroupSubmission&&t.submissionGroup?(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(8),eo.l0.maxHeight(400),eo.l0.overflow("auto")],children:t.submissionGroup.users.map(function(e){return(0,K.tZ)(ei.G,{children:(0,K.tZ)(ws.n,{src:(null==e?void 0:e.image)||null,username:wW(i,e)})},null==e?void 0:e.id)})}):(0,K.tZ)(K.HY,{children:(0,K.tZ)(ws.n,{src:(null===(n=t.author)||void 0===n?void 0:n.image)||null,username:wW(i,t.author)})}),t.timeSubmitted?(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8)],children:[(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(4)],children:(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(aC.Z,{}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(eE.xv,{css:[eo.l0.flex.growAndShrink(1)],multiline:!1,children:"Submitted"}),o?(0,K.tZ)(wp,{}):null,t.timeLastReviewed?null:(0,K.tZ)(eE.xv,{multiline:!1,variant:"small",color:"dimmer",css:[eo.l0.flex.growAndShrink(1)],children:"(waiting for review)"})]})]})}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4)],children:[(0,K.tZ)(nk.Z,{}),(0,K.tZ)(eE.xv,{multiline:!1,children:wz(new Date(t.timeSubmitted)).long})]})]}):(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(nk.Z,{}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(eE.xv,{css:[eo.l0.flex.growAndShrink(1)],multiline:!1,children:"In progress"}),(0,K.tZ)(eE.xv,{multiline:!1,variant:"small",color:"dimmer",css:[eo.l0.flex.growAndShrink(1)],children:"(not submitted)"})]})]}),t.repl?(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4)],children:[(0,K.tZ)(wu.Z,{}),(0,K.BX)(eE.xv,{multiline:!1,children:["Forked"," ",wz(new Date(t.repl.timeCreated)).short]})]}):(0,K.tZ)(eE.xv,{multiline:!1,children:"Submission repl missing"})]})]})}function wF(e){var n,t,r=e.repl,i=e.submission,o=(0,aO.U)(),a=(0,ev.Z)().showError,l=(0,J._)((n=(0,eL._)({},wG,{onError:function(e){return a(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&a(e.reviewRepl.message)}}),ez.D(wX,n)),2),c=l[0],s=l[1].loading,u=(0,J._)((t=(0,eL._)({},wG,void 0),ez.D(wM,t)),1)[0],d=function(e){c({variables:{replId:r.id,status:e},optimisticResponse:{__typename:"RootMutationType",reviewRepl:(0,e0._)((0,eL._)({},r),{__typename:"Repl",submission:(0,e0._)((0,eL._)({},i),{timeLastReviewed:e?new Date().toJSON():null})})}})},p=!!i.timeLastReviewed;return(0,K.BX)(ei.G,{css:eo.l0.colWithGap(16),children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(aA.X,{id:o("reviewed-status"),disabled:s,checked:p,onChange:function(){return d(!p)}}),(0,K.tZ)("label",{htmlFor:o("reviewed-status"),children:p?"Reviewed":"Mark as reviewed"})]}),i.timeSubmitted?(0,K.tZ)(e5.zx,{css:{alignSelf:"start"},iconLeft:(0,K.tZ)(wZ.Z,{}),onClick:function(){u({variables:{replId:r.id},optimisticResponse:{__typename:"RootMutationType",unsubmitRepl:(0,e0._)((0,eL._)({},r),{__typename:"Repl",submission:(0,e0._)((0,eL._)({},i),{timeLastReviewed:null})})}})},text:"Unsubmit",size:"small"}):null]})}function wV(e){var n=e.repl,t=e.submission,r=e.team,i=e.template,o=i.submissions;return(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16),eo.l0.flex.growAndShrink(1)],children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16),eo.l0.flex.grow(1)],children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8)],children:[(0,K.tZ)(wN,{submission:t,submissionList:o}),(0,K.tZ)(wx,{team:r,template:i,submission:t,submissionList:o})]}),(0,K.tZ)(wj,{team:r,submission:t,dueDate:i.dueDate}),(0,K.tZ)(wF,{repl:n,submission:t})]}),(0,K.tZ)(fO.Z,{css:[{alignSelf:"start"}],size:"small",href:"/team/".concat(r.username,"/templates/").concat(i.repl.slug),iconLeft:(0,K.tZ)(ZQ.Z,{}),text:"Return to submissions"})]})}function wH(){var e,n,t,r=(n={variables:{replId:(0,ed.Z)()}},t=(0,eL._)({},wG,n),eM.a(wO,t)),i=r.data,o=r.loading,a=r.error;if(o)return(0,K.tZ)(ei.G,{css:[eo.l0.center,eo.l0.flex.growAndShrink(1)],children:(0,K.tZ)(eR.Z,{size:24})});if(a)return(0,K.tZ)(ei.G,{css:eo.l0.center,children:(0,K.tZ)(eE.xv,{multiline:!1,children:"Something went wrong"})});var l=(null==i?void 0:i.repl.__typename)==="Repl"?i.repl:null,c=(null==l?void 0:null===(e=l.owner)||void 0===e?void 0:e.__typename)==="Team"?l.owner:null,s=null==l?void 0:l.template;return l&&c&&s&&l.submission?(0,K.BX)(ei.G,{css:[eo.l0.height("100%")],children:[(0,K.tZ)(eE.xv,{css:[eo.l0.p(8)],variant:"subheadBig",multiline:!1,children:"Submissions"}),(0,K.tZ)(ei.G,{css:[eo.l0.px(8),eo.l0.pb(8),eo.l0.flex.growAndShrink(1),eo.l0.overflowY("auto")],children:(0,K.tZ)(wV,{repl:l,team:c,template:s,submission:l.submission})})]}):(0,K.tZ)(ei.G,{css:eo.l0.center,children:(0,K.tZ)(eE.xv,{multiline:!1,children:"Something went wrong"})})}var wY=lO.Dy.Object({type:lO.Dy.Literal("education")}),wq={Content:function(){return(0,K.tZ)(wH,{})},Icon:function(e){var n=e.size;return(0,K.tZ)(d6.Z,{size:n})},getTitle:function(){return"Submissions"},decode:function(e){return lz.B4.Decode(wY,e)}},wJ=t(24463),wK=(0,$.iv)([eo.l0.backgroundColor.backgroundDefault,eo.l0.height("100%"),eo.l0.borderRadius(4),{overflow:"hidden"}]),w$=(0,$.iv)([eo.l0.width("100%"),eo.l0.height("100%"),eo.l0.justify.center,eo.l0.align.center,eo.l0.display.flex]);function wQ(e){var n=e.paneId,t=e.extensionPaneData,r=e.environmentAPIs,i=(0,bp.jx)(t.installationId),o=(0,bp.r9)(t.installationId),a=xb({extension:i,environmentAPIs:r,sandboxTitle:t.name,sandboxUrl:(0,df.Vh)(t.baseUrl,t.path),paneId:n,filePath:t.filePath||null}),l=a.didConnectOnce,c=a.isValidExtensionPaneUrl,s=a.getIframeProps,u=a.reloadSandbox;return(0,an.L5)(function(){return{actions:[{icon:(0,K.tZ)(s1.Z,{}),label:"Refresh",run:function(){u()},type:"action",description:"Refresh the extension pane",key:"refresh"}]}},[]),(0,K.tZ)(ei.G,{className:"extension-pane",css:wK,children:o&&l?(0,K.tZ)(K.HY,{children:c()?(0,K.tZ)("iframe",(0,eL._)({},s({css:{width:"100%",height:"100%",border:"none"}}))):(0,K.tZ)(ei.G,{css:[eo.l0.p(12)],children:(0,K.BX)(eE.xv,{children:["Invalid url:"," ",(0,K.tZ)(wJ.Z,{children:t.baseUrl+t.path}),". Please contact the extension author, or Replit support."]})})}):(0,K.tZ)(ei.G,{css:w$,children:(0,K.tZ)(eR.Z,{})})})}var w0=lO.Dy.Object({extensionId:lO.Dy.Unsafe(lO.Dy.String()),installationId:lO.Dy.Unsafe(lO.Dy.String()),baseUrl:lO.Dy.String(),path:lO.Dy.String(),name:lO.Dy.String(),filePath:lO.Dy.Optional(lO.Dy.Union([lO.Dy.String(),lO.Dy.Null(),lO.Dy.Undefined()])),icon:lO.Dy.Optional(lO.Dy.Union([lO.Dy.String(),lO.Dy.Null(),lO.Dy.Undefined()]))}),w1=lO.Dy.Object({type:lO.Dy.Literal("extension"),data:w0}),w2={Content:function(e){var n=e.pane,t=e.options,r=bd();return(0,K.tZ)(wQ,{extensionPaneData:n.data,paneId:t.paneId,environmentAPIs:r})},Icon:function(e){var n=e.pane,t=e.size;return n.data.icon?(0,K.tZ)(nn.Z,{src:(0,df.Vh)(n.data.baseUrl,n.data.icon),layout:"fill",alt:""}):(0,K.tZ)(hC.Z,{size:t})},getTitle:function(e){return e.data.filePath?e.data.filePath+" — "+e.data.name:e.data.name},decode:function(e){return lz.B4.Decode(w1,e)}},w4=t(83447),w3=t(87279),w8=t(66663),w5=t(79361),w6=t(90093),w7=t(27488),w9=t(26397),ke=t(97615),kn=t(31498),kt=t(94282),kr=t(66061),ki=(0,e4.X)({codeBlock:[eo.l0.p(8),eo.l0.borderRadius(8),eo.l0.position.relative],codeBlockCopyButton:[eo.l0.position.absolute,eo.l0.top(4),eo.l0.right(4)],selectionContainer:[eo.l0.colWithGap(16),eo.l0.maxHeight(400),eo.l0.overflowY("scroll")],fsNode:[eo.l0.flex.row,eo.l0.rowWithGap(8),eo.l0.align.center,eo.l0.px(4),eo.l0.py(2),eo.l0.borderRadius(8),eo.l0.cursor.pointer],fsNodeActive:[eo.l0.backgroundColor.backgroundHigher],noResultsContainer:[eo.l0.p(8),eo.l0.flex.row,eo.l0.center]});function ko(e){var n=e.content,t=(0,ev.Z)().showConfirm;return(0,K.BX)(eS.Tg,{tag:"code",elevated:!0,css:ki.codeBlock,children:[n,(0,K.tZ)(ab.hU,{alt:"Copy",tooltipHidden:!0,css:ki.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(n).then(function(){return t("Copied")})},children:(0,K.tZ)(dr.Z,{})})]})}function ka(e){var n,t=e.glob,r=e.openFile,i=e.children,o=(0,J._)((0,en.useState)([]),2),a=o[0],l=o[1],c=(0,J._)((0,en.useState)(""),2),s=c[0],u=c[1],d=(0,aO.U)(),p=(0,el.Z)().fs,f=(0,nI.gI)(),h=(0,en.useMemo)(function(){return(0,de.Z)(t)},[t]);return((0,en.useEffect)(function(){h&&p.listFiles().then(function(e){e.files&&l(e.files.filter(function(e){return e.match(h)}).map(function(e){var n=e.split("/");return{path:e,dir:n.slice(0,n.length-1).join("/"),filename:n[n.length-1]||""}}))})},[h,f]),h)?(0,K.BX)(ei.G,{css:ki.selectionContainer,children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(12)],children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Choose an image"}),f?(0,K.tZ)(aL.E,{icon:(0,K.tZ)(ke.Z,{}),colorway:"primary",text:(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(2)],children:[(0,K.BX)(eE.xv,{children:["Images must be served from"," ",(0,K.tZ)("span",{css:[eo.l0.font.code,eo.l0.backgroundColor.accentPrimaryDimmer,eo.l0.borderRadius(4),eo.l0.px(4),eo.l0.py(2),eo.l0.mr(2),eo.l0.border({color:eo.TV.accentPrimaryDefault})],children:f.path}),"."]}),(0,K.tZ)(eE.xv,{css:[eo.l0.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,K.BX)(eE.xv,{css:[eo.l0.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,K.tZ)("span",{css:[eo.l0.font.code,eo.l0.fontSize("small"),eo.l0.backgroundColor.backgroundHigher,eo.l0.borderRadius(4),eo.l0.px(4),eo.l0.py(2),eo.l0.mr(2),eo.l0.border({color:eo.TV.outlineDefault})],children:null===(n=t.match(/\{(.*)\}/))||void 0===n?void 0:n[1].split(",").map(function(e){return e.replace(".","")}).join(", ")})]})]})}),i,(0,K.tZ)(Zy.ZP,{onChange:function(e){return r(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null==e?void 0:e.path)||""},children:function(e){var n=e.getInputProps,r=e.getItemProps,i=e.highlightedIndex,o=e.getRootProps,l=e.getMenuProps;return(0,K.BX)(ei.G,(0,e0._)((0,eL._)({},o({refKey:"innerRef"})),{css:[eo.l0.colWithGap(16)],children:[(0,K.tZ)(ei.G,{css:[eo.l0.position.relative],children:(0,K.tZ)(pf.II,(0,eL._)({id:d("file-search")},n({ref:null,value:s,onChange:function(e){return u(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,K.tZ)(ei.G,{children:a&&a.length?(0,K.tZ)(ei.G,(0,e0._)((0,eL._)({elevated:!0,tag:"ul",css:(eo.l0.pt(8),eo.l0.colWithGap(8))},l({refKey:"innerRef"})),{children:a.filter(function(e){return e.path.includes(s)}).filter(function(e){return!f||e.path.startsWith(f.relativePath)||e.path.startsWith("public")}).map(function(e,n){return(0,K.BX)(ei.G,(0,e0._)((0,eL._)({tag:"li",css:[ki.fsNode,n===i&&ki.fsNodeActive]},r({item:e,index:n,disabled:!!f&&!e.path.startsWith(f.relativePath)})),{children:[(0,K.tZ)(oY.Z,{path:e.path,size:16}),(0,K.tZ)(eE.xv,{children:e.filename}),(0,K.tZ)(eE.xv,{variant:"small",color:"dimmest",children:e.dir})]}),n)})})):(0,K.tZ)(ei.G,{css:[eo.l0.pt(8)],children:(0,K.tZ)(eE.xv,{color:"dimmer",children:(0,K.BX)("em",{children:["No files found matching ",(0,K.tZ)("code",{children:t})]})})})})]}))}})]}):(0,K.BX)(ei.G,{css:[eo.l0.flex.column,eo.l0.colWithGap(16)],children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,K.BX)(eE.xv,{children:["The glob pattern ",(0,K.tZ)("code",{children:t})," could not be parsed."]}),(0,K.tZ)(ei.G,{css:eo.l0.border({direction:"bottom",color:eo.TV.backgroundHigher})}),(0,K.BX)(ei.G,{css:eo.l0.colWithGap(8),children:[(0,K.tZ)(eE.xv,{children:(0,K.tZ)("strong",{children:"Match all Javascript Files"})}),(0,K.tZ)(ko,{content:"**/*.js"})]}),(0,K.BX)(ei.G,{css:eo.l0.colWithGap(8),children:[(0,K.tZ)(eE.xv,{children:(0,K.tZ)("strong",{children:"Match JSON files at root level"})}),(0,K.tZ)(ko,{content:"*.json"})]}),(0,K.BX)(ei.G,{css:eo.l0.colWithGap(8),children:[(0,K.tZ)(eE.xv,{children:(0,K.tZ)("strong",{children:"Match specified file extensions"})}),(0,K.tZ)(ko,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}(h=X||(X={})).Installing="Installing",h.Loading="Loading",h.Failed="Failed",h.Success="Success";var kl={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function kc(e){var n,t=e.isOpen,r=e.close,i=e.onSubmit,o=e.hostedUrl,a=(0,xZ.I1)(),l=(0,xZ.zm)(),c=(0,J._)((0,en.useState)(null),2),s=c[0],u=c[1],d=(0,J._)((0,en.useState)(!0),2),p=d[0],f=d[1],h=(0,J._)((0,en.useState)(null),2),m=h[0],v=h[1],g=(0,J._)((0,en.useState)(null),2),y=g[0],b=g[1],x=(0,en.useRef)(null),Z=(0,J._)((0,en.useState)(null),2),w=Z[0],k=Z[1],C=(0,J._)((0,en.useState)(null),2),_=C[0],S=C[1],E=(y||_||"").startsWith("/")?y||_:"/"+(y||_),R=(0,J._)((0,en.useState)(null),2),I=R[0],T=R[1],G=function(){S(null),u(null),b(null),k(null),T(null),v(null)},D=function(){f(!0),u(null)};(0,en.useEffect)(function(){b(_)},[_]);var P=(0,en.useCallback)((n=(0,nx._)(function(e){var n,t,r,i;return(0,nZ.Jh)(this,function(c){switch(c.label){case 0:var d;if(!E||!p||"Success"===s||"Failed"===s)return[2];if(d=(0,nx._)(function(e,n){var t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return u("Loading"),v(t=(0,df.Vh)(o||e.baseUrl,n)),[4,fetch(t)];case 1:if(r.sent().ok)return T(n),u("Success"),f(!1),[2,!0];return[2,!1]}})}),n=function(e,n){return d.apply(this,arguments)},t=e||l)return[3,8];u("Installing"),c.label=1;case 1:return c.trys.push([1,5,,8]),[4,a()];case 2:if(!(r=c.sent()))return[3,4];return[4,P(r)];case 3:case 6:return c.sent(),[2];case 4:case 7:return[3,8];case 5:if(c.sent(),!l)return[3,7];return[4,P(l)];case 8:if(!t)return[3,11];return i=E.replace(/^(\/public|\/static)/,""),[4,n(t,i.slice(1))];case 9:if(c.sent())return[3,11];return[4,n(t,E)];case 10:c.sent(),c.label=11;case 11:return[2]}})}),function(e){return n.apply(this,arguments)}),[l,E,a,s,p,o]);(0,en.useEffect)(function(){if(w){var e=w.split("/"),n=e.pop(),t=e.findIndex(function(e){return["public","static"].includes(e)});S((-1!==t?"/".concat(w):"/".concat(e.slice(t+1).join("/"),"/").concat(n))||w),f(!0),P()}},[P,w]);var B=w?w.split("/"):[],U=B[B.length-1];return(0,K.tZ)(eC.u,{isOpen:t,onRequestClose:r,children:w?(0,K.BX)(ei.G,{css:[eo.l0.flex.column,eo.l0.colWithGap(16)],children:[(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(e5.zx,{text:"Back",size:"small",iconLeft:(0,K.tZ)(ZQ.Z,{}),onClick:function(){k(null),G()}}),(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(kr.Z,{}),(0,K.tZ)(eE.xv,{color:"dimmer",children:U||""})]})]}),(0,K.tZ)(eE.xv,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4)],children:[(0,K.tZ)(pf.II,{defaultValue:y||"",ref:x,placeholder:"/icon.png",onChange:function(e){return b(e.target.value)},autoFocus:!0,disabled:"Loading"===s||"Installing"===s||"Success"===s}),m&&("Loading"===s||"Success"===s||"Failed"===s)?(0,K.tZ)("a",{href:m,target:"_blank",children:(0,K.BX)(eE.xv,{color:"dimmer",variant:"small",css:[eo.l0.rowWithGap(4),eo.l0.display.flex,{fontStyle:"italic"}],children:[(0,K.BX)("span",{css:[eo.l0.truncate],children:["Loading"===s?"Checking ":null,"Success"===s?"Found at ":null,"Failed"===s?"Failed to load ":null,m]}),(0,K.tZ)(ei.G,{css:[eo.l0.display.inlineBlock],children:(0,K.tZ)(s$.Z,{})})]})}):null]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.justify.spaceBetween,eo.l0.align.center],children:[(0,K.tZ)(ei.G,{css:[eo.l0.flex.row,eo.l0.rowWithGap(4),eo.l0.align.center],children:s?(0,K.tZ)(K.HY,{children:"Loading"===s?(0,K.tZ)(eR.Z,{}):(0,K.tZ)(aL.E,{text:kl[s],colorway:"Failed"===s?"negative":"positive",icon:"Failed"===s?(0,K.tZ)(lD.Z,{}):(0,K.tZ)(aC.Z,{})})}):null}),"Failed"===s?(0,K.BX)(ei.G,{css:eo.l0.rowWithGap(8),children:[(0,K.tZ)(e5.zx,{text:"Add Anyways",onClick:function(){var e=_||w;null!==e&&i(e),G(),r()},size:"small"}),(0,K.tZ)(e5.zx,{text:"Try Again",onClick:function(){D()},size:"small"})]}):null,I&&"Success"===s?(0,K.tZ)(e5.zx,{text:"Continue",iconLeft:(0,K.tZ)(aC.Z,{}),colorway:"primary",onClick:function(){i(I),G(),r()}}):null]})]}):(0,K.tZ)(ka,{openFile:k,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var ks=t(18514),ku=(0,e4.X)({centerRowGap8:[eo.l0.rowWithGap(8),eo.l0.align.center],featureContainer:[eo.l0.flex.column,eo.l0.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[eo.l0.border({style:"dashed"}),eo.l0.borderRadius(8),eo.l0.p(16),eo.l0.colWithGap(8),eo.l0.center],featureDetails:[eo.l0.flex.column,eo.l0.colWithGap(4),eo.l0.flex.growAndShrink(1)],featureOptionsRow:[eo.l0.flex.row,eo.l0.rowWithGap(8),eo.l0.align.center,eo.l0.justify.spaceBetween],newFeatureFieldWrapper:[eo.l0.p(8),eo.l0.flex.row,eo.l0.rowWithGap(8),eo.l0.align.center,eo.l0.justify.spaceBetween,eo.l0.border({direction:"bottom",color:eo.TV.backgroundHighest})],inputCounterFlex:[eo.l0.flex.row,eo.l0.justify.spaceBetween,eo.l0.align.center]});function kd(e){var n=e.features,t=e.onCreate,r=e.onUpdate,i=e.onDelete,o=(0,J._)((0,en.useState)([]),2),a=o[0],l=o[1],c=(0,J._)((0,en.useState)(!1),2),s=c[0],u=c[1];return(0,K.BX)(ei.G,{children:[(0,K.BX)(ei.G,{css:eo.l0.pb(12),children:[(0,K.BX)(ei.G,{css:ku.centerRowGap8,children:[(0,K.BX)(ei.G,{css:ku.centerRowGap8,children:[(0,K.tZ)(ks.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,K.tZ)(ab.hU,{onClick:function(){u(!s)},alt:"Add a new Feature",tooltipHidden:s,disabled:s,children:(0,K.tZ)(oq.Z,{})})]}),(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,K.BX)(ei.G,{css:eo.l0.colWithGap(8),children:[s?(0,K.tZ)(kf,{onSubmit:function(e){t(e),u(!1)},onCancel:function(){return u(!1)}}):null,(0,K.tZ)(ei.G,{css:ku.featureContainer,children:n.length>0?n.map(function(e,t){return a.includes(t)?(0,K.tZ)(kf,{feature:e,isLast:t===n.length-1,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){return l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,K.tZ)(kp,{isLast:t===n.length-1,feature:e,onEdit:function(){return l(function(e){return(0,em._)(e).concat([t])})},onDelete:function(){i(t)}},t)}):(0,K.tZ)(K.HY,{children:s?null:(0,K.BX)(ei.G,{css:ku.noFeaturesPlaceholder,children:[(0,K.tZ)(eE.xv,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,K.tZ)(e5.zx,{variant:"outlined",text:"New Feature",iconLeft:(0,K.tZ)(oq.Z,{}),onClick:function(){return u(!0)}})]})})})]})]})}function kp(e){var n=e.feature,t=e.onEdit,r=e.onDelete,i=e.isLast;return(0,K.BX)(eS.Tg,{elevated:!0,css:[eo.l0.flex.row,eo.l0.rowWithGap(8),eo.l0.align.center,eo.l0.p(8),i?null:eo.l0.border({direction:"bottom",color:eo.TV.backgroundHighest})],children:[(0,K.tZ)(kh,{size:64,icon:n.image}),(0,K.BX)(ei.G,{css:ku.featureDetails,children:[(0,K.BX)(ei.G,{css:ku.featureOptionsRow,children:[(0,K.tZ)(eE.xv,{children:n.title}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.tZ)(ab.hU,{alt:"Delete",tooltipHidden:!0,onClick:r,children:(0,K.tZ)(ds.Z,{color:eo.TV.accentNegativeStronger})}),(0,K.tZ)(ab.hU,{alt:"Edit",tooltipHidden:!0,onClick:t,children:(0,K.tZ)(lU.Z,{})})]})]}),(0,K.tZ)(eE.xv,{color:"dimmest",multiline:!0,maxLines:1,children:n.body})]})]})}function kf(e){var n=e.onSubmit,t=e.onCancel,r=e.feature,i=e.isLast,o=(0,J._)((0,en.useState)((null==r?void 0:r.title)||""),2),a=o[0],l=o[1],c=(0,J._)((0,en.useState)((null==r?void 0:r.body)||""),2),s=c[0],u=c[1],d=(0,J._)((0,en.useState)((null==r?void 0:r.image)||null),2),p=d[0],f=d[1],h=a.length>=3&&s.length>=16;return(0,K.BX)(eS.Tg,{css:[eo.l0.flex.column,i||r?null:eo.l0.borderRadius(8),r?eo.l0.border({color:eo.TV.outlineDefault}):[i?null:eo.l0.border({direction:"bottom",color:eo.TV.backgroundHighest})]],elevated:!0,children:[(0,K.BX)(ei.G,{css:ku.newFeatureFieldWrapper,children:[(0,K.tZ)(eE.xv,{children:a||"New Feature"}),(0,K.BX)(ei.G,{css:eo.l0.rowWithGap(8),children:[(0,K.tZ)(e5.zx,{text:"Cancel",onClick:t}),(0,K.tZ)(e5.zx,{text:r?"Save":"Create",colorway:"primary",onClick:function(){return n({title:a,body:s,image:p})},disabled:!h})]})]}),(0,K.BX)(ei.G,{css:[eo.l0.p(8),eo.l0.colWithGap(8)],children:[(0,K.BX)(ei.G,{css:eo.l0.colWithGap(4),children:[(0,K.BX)(ei.G,{css:ku.inputCounterFlex,children:[(0,K.tZ)(eE.xv,{color:"dimmer",children:"Title"}),(0,K.tZ)(km,{value:a.length,min:3})]}),(0,K.tZ)(pf.II,{value:a,onChange:function(e){return l(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4)],children:[(0,K.BX)(ei.G,{css:ku.inputCounterFlex,children:[(0,K.tZ)(eE.xv,{color:"dimmer",children:"Body"}),(0,K.tZ)(km,{value:s.length,min:16})]}),(0,K.tZ)(pf.B,{value:s,onChange:function(e){return u(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,K.BX)(ei.G,{css:eo.l0.rowWithGap(8),children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4),eo.l0.flex.growAndShrink(1)],children:[(0,K.tZ)(eE.xv,{color:"dimmer",children:"Image (Recommended)"}),(0,K.tZ)(eE.xv,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your Repl. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,K.tZ)(kh,{size:100,icon:p,editable:!0,onSubmit:function(e){f(e)}})]})]})]})}function kh(e){var n=e.size,t=e.icon,r=e.editable,i=void 0!==r&&r,o=e.onSubmit,a=(0,nI.oo)(),l=a&&t?(0,df.Vh)(a,t):null,c=(0,J._)((0,en.useState)(!1),2),s=c[0],u=c[1];return(0,K.BX)(K.HY,{children:[(0,K.tZ)(eS.Tg,{background:"default",css:[i?nt.gU.filledAndOutlined:null,eo.l0.flex.row,eo.l0.center,eo.l0.width(n),eo.l0.height(.75*n),eo.l0.maxWidth(n),eo.l0.maxHeight(.75*n),eo.l0.borderRadius(4),eo.l0.border({color:eo.TV.backgroundHighest}),eo.l0.flex.grow(1),{background:l?"".concat(eo.TV.backgroundDefault," url(").concat(l,") no-repeat center center / cover"):eo.TV.backgroundDefault}],onClick:function(){return u(!0)},children:l?null:(0,K.tZ)(kr.Z,{color:eo.TV.foregroundDimmest,size:24})}),i?(0,K.tZ)(kc,{isOpen:s,close:function(){return u(!1)},onSubmit:function(e){null==o||o(e)}}):null]})}function km(e){var n=e.value,t=e.min;return(0,K.BX)(eE.xv,{css:{color:n>=t?eo.TV.accentPositiveStronger:eo.TV.foregroundDimmest},children:[n,"/",t]})}var kv=function(){return(0,K.tZ)(ei.G,{css:[eo.l0.justify.center,eo.l0.align.center,eo.l0.display.flex,eo.l0.width("100%"),eo.l0.height("100%")],children:(0,K.tZ)(eR.Z,{})})};function kg(e){var n=e.children;return(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(12),eo.l0.p(16)],children:(0,K.tZ)(eS.Tg,{elevated:!0,css:[eo.l0.p(16),eo.l0.borderRadius(8),eo.l0.colWithGap(8)],children:n})})}var ky=t(34471),kb=function(e){var n=e.error,t=e.performPaneOperation,r=e.manifestPath;return(0,K.tZ)(kg,{children:(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16),eo.l0.p(8)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.display.flex,eo.l0.align.center],children:[(0,K.tZ)(lD.Z,{}),(0,K.tZ)(eE.xv,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Details:"}),(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(8)],children:n instanceof ky.Jg?n.issues.map(function(e,n){var t=e.path,r=e.message;return(0,K.BX)(ei.G,{css:[eo.l0.display.flex,eo.l0.flex.row,eo.l0.rowWithGap(4)],children:[(0,K.tZ)(eE.xv,{css:[eo.l0.font.code,eo.l0.color.orangeStrongest,eo.l0.backgroundColor.orangeDimmest],children:t}),(0,K.tZ)(eE.xv,{children:r})]},n)}):(0,K.tZ)(ei.G,{tag:"pre",children:n.message})}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.tZ)(e5.zx,{colorway:"primary",text:"Open extension.json",onClick:function(){t({operation:"open",secondary:!0,pane:(0,du.$E)(r)})}}),(0,K.tZ)(e5.zx,{iconLeft:(0,K.tZ)(d6.Z,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},kx=t(15843),kZ=t(30087),kw=(m=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return[4,e.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return n.sent(),[2]}})}),function(e){return m.apply(this,arguments)}),kk={readFile:"Failed to read manifest file, please try again",noManifest:"No extension.json found",parseManifest:"Failed to parse manifest file",removedManifest:"extension.json was moved or deleted, please re-create it in your static directory",stateUndefined:"State should be defined"},kC=function(){var e=(0,J._)((0,en.useState)(null),2),n=e[0],t=e[1],r=(0,en.useCallback)(function(e){t(function(n){if(!n)throw Error(kk.stateUndefined);return(0,e0._)((0,eL._)({},n),{manifestStr:e})})},[]);return{state:n,setState:t,updateString:r}},k_=function(){var e=(0,el.Z)(),n=e.fs,t=e.dotReplit,r=kC(),i=r.state,o=r.setState,a=r.updateString,l=(0,J._)((0,en.useState)(0),2),c=l[0],s=l[1],u=(0,J._)((0,en.useState)(!1),2),d=u[0],p=u[1],f=(0,en.useCallback)((0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return[4,kw(n)];case 1:return e.sent(),[2]}})}),[n]);(0,en.useEffect)(function(){o(null);var e=!1,r=function(){};function i(){return(i=(0,nx._)(function(){var i,l,c,s,u,d,p;return(0,nZ.Jh)(this,function(f){switch(f.label){case 0:return[4,Promise.all([n.listFiles(),t.getConfig()])];case 1:if(c=(l=J._.apply(void 0,[f.sent(),2]))[0],s=l[1],e)return[2];if(!c.files||s.error)return o({fileReadError:kk.readFile}),[2];if(d=(0,xv.Oh)((0,kx.AH)(null!==(u=null===(i=s.config.extension)||void 0===i?void 0:i.outputDirectory)&&void 0!==u?u:"dist")),!(p=function(e){var n,t=e.filePaths,r=e.outputDir,i=[],o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if("extension.json"===u)return u;u.endsWith("/extension.json")&&i.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}var d=!0,p=!1,f=void 0;try{for(var h,m=i[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value;if(!v.startsWith(r))return v}}catch(e){p=!0,f=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw f}}return null!==(n=i[0])&&void 0!==n?n:null}({filePaths:c.files,outputDir:d})))return o({fileReadError:kk.noManifest}),[2];return r=n.watchTextFile(p,{onReady:function(e){o({fileReadError:null,writeChange:e.writeChange,manifestStr:e.initialContent,manifestPath:p})},onChange:function(e){a(e.latestContent)},onMoveOrDelete:function(){o({fileReadError:kk.removedManifest})},onError:function(){o({fileReadError:kk.readFile})}}),[2]}})})).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){r(),e=!0}},[n,a,t,c,o]);var h=(0,en.useMemo)(function(){if(!i||null!==i.fileReadError)return null;try{var e=g3.ku(i.manifestStr);return(0,df.U4)(e)}catch(e){return{error:e,manifest:null}}},[i]),m=(0,en.useCallback)(function(e){if(!i||(null==h?void 0:h.error)||null!==i.fileReadError)throw Error(kk.parseManifest);var n=g3.r$(i.manifestStr,e);i.writeChange((0,kZ.F)(i.manifestStr,n)),a(n)},[i,h,a]),v={retry:function(){s(function(e){return e+1})},creatingExtensionJson:d,setCreatingExtensionJson:p,createExtensionJson:f,updateString:a,updateManifest:m};return i?"string"==typeof i.fileReadError?(0,e0._)((0,eL._)({},v),{__status:"fileReadError",state:{fileReadError:i.fileReadError},parsed:null}):h?h.manifest?(0,e0._)((0,eL._)({},v),{__status:"success",state:{fileReadError:null,writeChange:i.writeChange,manifestStr:i.manifestStr,manifestPath:i.manifestPath},parsed:h}):(0,e0._)((0,eL._)({},v),{__status:"fileParseError",state:i,parsed:{manifest:null,error:h.error}}):(0,e0._)((0,eL._)({},v),{__status:"fileReadError",state:{fileReadError:kk.noManifest},parsed:null}):(0,e0._)((0,eL._)({},v),{__status:"loading",state:null,parsed:null})};(v=M||(M={})).loading="loading",v.fileReadError="fileReadError",v.fileParseError="fileParseError",v.success="success";var kS=function(e){var n=e.message,t=k_(),r=t.createExtensionJson,i=t.creatingExtensionJson,o=t.retry,a=t.setCreatingExtensionJson;return(0,K.BX)(kg,{children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.display.flex,eo.l0.align.center],children:[(0,K.tZ)(lD.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:n})]}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.tZ)(e5.zx,{colorway:"primary",text:"Create extension.json",loading:i,iconLeft:i?(0,K.tZ)(eR.Z,{}):(0,K.tZ)(oq.Z,{}),onClick:(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return a(!0),[4,r()];case 1:return e.sent(),o(),a(!1),[2]}})})}),(0,K.tZ)(e5.zx,{text:"Retry",iconLeft:(0,K.tZ)(s1.Z,{}),onClick:function(){o()}})]})]})};function kE(){var e=(0,eO._)(["\n  query DevtoolsHomeHostedUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostedUrl\n        title\n        user {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return kE=function(){return e},e}function kR(){var e=(0,eO._)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return kR=function(){return e},e}function kI(){var e=(0,eO._)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return kI=function(){return e},e}var kT={},kG=(0,eX.Ps)(kE());function kD(e){var n=(0,eL._)({},kT,e);return eM.a(kG,n)}kR();var kP=(0,eX.Ps)(kI()),kB=(0,e4.X)({iconContainer:[eo.l0.position.relative,eo.l0.width(64),eo.l0.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[eo.l0.flex.column,eo.l0.position.absolute,eo.l0.top(0),eo.l0.left(0)],iconOverlay:[eo.l0.flex.column,eo.l0.colWithGap(4),eo.l0.center,eo.l0.position.absolute,eo.l0.top(0),eo.l0.left(0),eo.l0.width("100%"),eo.l0.height("100%"),eo.l0.backgroundColor.backgroundOverlay,eo.l0.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}],metadataContainer:[eo.l0.flex.row,eo.l0.rowWithGap(8),eo.l0.width("100%")],metadataWrapper:[eo.l0.flex.column,eo.l0.colWithGap(8),eo.l0.align.start,eo.l0.flex.grow(1)],listingLabel:[eo.l0.flex.row,eo.l0.align.center,eo.l0.rowWithGap(8)],metadataOptionsContainer:[eo.l0.rowWithGap(8),eo.l0.justify.spaceBetween,eo.l0.width("100%")]});function kU(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,xZ.zm)(),i=(0,xZ.I1)(),o=(0,xZ.EO)(),a=(0,xZ.bN)(),l=(0,nI.nP)(),c=(0,J._)((0,en.useState)(!1),2),s=c[0],u=c[1],d=(0,J._)((0,en.useState)(!1),2),p=d[0],f=d[1];return(0,K.tZ)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.flex.wrap,{rowGap:8}],children:(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[r||p?(0,K.BX)(K.HY,{children:[(0,K.tZ)(e5.zx,{size:"small",text:"Reload",iconLeft:p?(0,K.tZ)(eR.Z,{}):(0,K.tZ)(s1.Z,{}),disabled:p,onClick:(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:if(!r)return[2];return f(!0),[4,o(r.installationId)];case 1:return e.sent(),f(!1),[2]}})})}),(0,K.tZ)(e5.zx,{size:"small",text:"Unload",iconLeft:(0,K.tZ)(kn.Z,{}),disabled:!r,onClick:function(){r&&a(r.installationId)}})]}):(0,K.tZ)(e5.zx,{size:"small",text:"Load locally",colorway:"primary",iconLeft:s?(0,K.tZ)(eR.Z,{}):(0,K.tZ)(db.Z,{}),loading:s,onClick:(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return u(!0),[4,i()];case 1:return e.sent(),u(!1),[2]}})})}),l?(0,K.tZ)(e5.zx,{size:"small",text:"View on Store",iconLeft:(0,K.tZ)(kt.Z,{}),onClick:function(){return n({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:l}}})}}):null,(0,K.tZ)(e5.zx,{size:"small",text:"Edit Store Listing",onClick:function(){t(1)},iconLeft:(0,K.tZ)(lU.Z,{})})]})})}function kA(e){var n,t=e.performPaneOperation,r=e.setSelectedTab,i=kD({variables:{replId:(0,ed.Z)()}}).data,o=k_(),a=o.parsed,l=o.state,c=o.__status,s=(null==i?void 0:null===(n=i.repl)||void 0===n?void 0:n.__typename)==="Repl"?i.repl.hostedUrl:null;if(c===M.loading)return(0,K.tZ)(kv,{});if(c===M.fileReadError)return(0,K.tZ)(kS,{message:l.fileReadError});var u=a.manifest,d=a.error;return d?(0,K.tZ)(kb,{performPaneOperation:t,manifestPath:l.manifestPath,error:d}):(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(16),eo.l0.width("100%")],children:(0,K.BX)(eS.Tg,{elevated:!0,css:[eo.l0.p(12),eo.l0.borderRadius(8),eo.l0.colWithGap(8)],children:[(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.rowWithGap(16),eo.l0.align.center],children:[(0,K.tZ)(ei.G,{css:[eo.l0.flex.grow(0),eo.l0.display.flex,eo.l0.flex.row],children:(0,K.tZ)(w7.I,{size:64,baseUrl:s,icon:u.icon})}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1)],children:[(0,K.tZ)(dM.Ug,{align:"center",justify:"space-between",children:(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:u.name})}),(0,K.tZ)(eE.xv,{variant:"text",color:"dimmest",children:u.description})]})]}),(0,K.tZ)(kU,{setSelectedTab:r,performPaneOperation:t})]})})}function kL(e){var n,t,r,i,o,a,l,c,s,u,d,p=e.manifest,f=e.onSubmit,h=e.updateManifest,m=(0,nI.nP)(),v=(0,bu.d)(),g=(0,ed.Z)(),y=(0,aO.U)(),b=(0,J._)((0,en.useState)(null!==(c=p.name)&&void 0!==c?c:""),2),x=b[0],Z=b[1],w=(0,J._)((0,en.useState)(null!==(s=p.description)&&void 0!==s?s:""),2),k=w[0],C=w[1],_=(0,J._)((0,en.useState)(null!==(u=p.longDescription)&&void 0!==u?u:void 0),2),S=_[0],E=_[1],R=(0,J._)((0,en.useState)(!1),2),I=R[0],T=R[1],G=kD({variables:{replId:g}}).data,D=(n=(0,eL._)({},kT,{variables:{id:m||""},skip:!m}),eM.a(kP,n)),P=D.data,B=D.loading,U=D.refetch,A=(0,J._)((0,w6.Ne)(),2),L=A[0],O=A[1].loading,X=(null==P?void 0:null===(t=P.extension)||void 0===t?void 0:t.__typename)==="Extension"&&(null==P?void 0:null===(r=P.extension)||void 0===r?void 0:r.user.id)===v,M=(null==P?void 0:null===(i=P.extension)||void 0===i?void 0:i.__typename)==="Extension"&&(null==P?void 0:null===(o=P.extension)||void 0===o?void 0:o.isListed),z=(null==G?void 0:null===(a=G.repl)||void 0===a?void 0:a.__typename)==="Repl"?G.repl.hostedUrl:null;return(null==G?void 0:null===(l=G.repl)||void 0===l?void 0:l.__typename)==="Repl"?(0,K.BX)(ei.G,{tag:"form",css:[eo.l0.colWithGap(16)],onSubmit:function(e){e.preventDefault(),f({name:x,description:k,longDescription:S})},children:[(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(4)],children:[(0,K.tZ)(eE.xv,{css:[eo.l0.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),B||O?(0,K.tZ)(eR.Z,{}):(0,K.BX)(ca.E,{css:eo.l0.colWithGap(8),name:"extensionListingStatus",value:M?"listed":"unlisted",disabled:!X,onChange:function(e){L({variables:{extensionId:m||"",isListed:"listed"===e.target.value}}).then(function(){return U()})},children:[X?null:(0,K.tZ)(ei.G,{css:[eo.l0.width("fit-content")],children:(0,K.tZ)(aL.E,{text:"You need to release this extension before listing it.",icon:(0,K.tZ)(ke.Z,{}),colorway:"yellow"})}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.tZ)(ca.Y,{id:y("listed"),value:"listed"}),(0,K.tZ)("label",{htmlFor:y("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.tZ)(ca.Y,{id:y("unlisted"),value:"unlisted"}),(0,K.tZ)("label",{htmlFor:y("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,K.tZ)(lB.R,{}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(4)],tag:"label",htmlFor:y("name"),children:[(0,K.tZ)(eE.xv,{children:"Extension Name"}),(0,K.tZ)(pf.II,{id:y("name"),placeholder:"Give your extension a name",value:x,onChange:function(e){Z(e.currentTarget.value)},required:!0})]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(4)],children:[(0,K.tZ)(eE.xv,{children:"Extension Icon"}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.align.center],children:[(0,K.BX)(ei.G,{css:kB.iconContainer,children:[(0,K.tZ)(ei.G,{css:kB.iconWrapper,children:(0,K.tZ)(w7.I,{size:64,baseUrl:z,icon:p.icon})}),(0,K.BX)(ei.G,{css:kB.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return T(!0)},children:[(0,K.tZ)(lU.Z,{}),(0,K.tZ)(eE.xv,{variant:"small",children:"Edit"})]})]}),(0,K.tZ)(e5.zx,{text:"Choose from file system",iconLeft:(0,K.tZ)(w9.Z,{}),onClick:function(){return T(!0)}})]})]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(4)],tag:"label",htmlFor:y("tagline"),children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(0)],children:[(0,K.tZ)(eE.xv,{children:"Tagline"}),(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,K.tZ)(pf.II,{id:y("tagline"),placeholder:"Give your extension a short tagline",value:k,onChange:function(e){C(e.currentTarget.value)},required:!0})]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(4)],tag:"label",htmlFor:y("longDescription"),children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(0)],children:[(0,K.tZ)(eE.xv,{children:"Description"}),(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,K.tZ)(pf.B,{id:y("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!=S?S:"",onChange:function(e){E(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,K.tZ)(lB.R,{}),(0,K.tZ)(kd,{features:null!==(d=p.features)&&void 0!==d?d:[],onDelete:function(e){if((null===(n=p.features)||void 0===n?void 0:n.length)===1&&0===e){var n,t,r=(0,eL._)({},p);delete r.features,h(r)}else h((0,e0._)((0,eL._)({},p),{features:null===(t=p.features)||void 0===t?void 0:t.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;h((0,e0._)((0,eL._)({},p),{features:(0,em._)(null!==(i=null===(t=p.features)||void 0===t?void 0:t.slice(0,n))&&void 0!==i?i:[]).concat([e],(0,em._)(null!==(o=null===(r=p.features)||void 0===r?void 0:r.slice(n+1))&&void 0!==o?o:[]))}))},onCreate:function(e){var n;h((0,e0._)((0,eL._)({},p),{features:(0,em._)(null!==(n=p.features)&&void 0!==n?n:[]).concat([e])}))}}),(0,K.tZ)(ei.G,{css:[eo.l0.rowWithGap(12),{alignSelf:"end"},eo.l0.pt(8)],children:(0,K.tZ)(e5.zx,{text:"Continue",iconRight:(0,K.tZ)(mT.Z,{}),colorway:"primary",type:"submit",disabled:!x||!k||!S})}),(0,K.tZ)(kc,{isOpen:I,close:function(){return T(!1)},onSubmit:function(e){h((0,e0._)((0,eL._)({},p),{icon:e}))}})]}):null}function kO(e){var n=e.fileHandlers,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,J._)((0,en.useState)([]),2),l=a[0],c=a[1],s=(0,J._)((0,en.useState)(!1),2),u=s[0],d=s[1];return(0,K.BX)(ei.G,{children:[(0,K.BX)(ei.G,{css:[eo.l0.pb(12)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(mU.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,K.tZ)(ab.hU,{onClick:function(){return d(!u)},alt:"Add a new File Handler",tooltipHidden:u,disabled:u,children:(0,K.tZ)(oq.Z,{})})]}),(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8)],children:[u?(0,K.tZ)(kX,{onSubmit:function(e){t(e),d(!1)},onCancel:function(){d(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,K.tZ)(kX,{initialFileHandler:e,onSubmit:function(e){r(e,n),c(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){c(function(e){return e.filter(function(e){return e!==n})})}},n):(0,K.BX)(eS.Tg,{css:[eo.l0.flex.row,eo.l0.justify.spaceBetween,eo.l0.align.center,eo.l0.p(8),eo.l0.borderRadius(8),eo.l0.flex.wrap,{rowGap:8}],elevated:!0,children:[(0,K.tZ)(eE.xv,{multiline:!1,children:null!==(t=e.name)&&void 0!==t?t:"Unnamed"}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.align.center],children:[(0,K.tZ)(ab.hU,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){o(n)},children:(0,K.tZ)(ds.Z,{})}),(0,K.tZ)(ab.hU,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){c(function(e){return(0,em._)(e).concat([n])})},children:(0,K.tZ)(lU.Z,{})}),(0,K.tZ)(e5.zx,{iconLeft:(0,K.tZ)(w9.Z,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,K.tZ)(K.HY,{children:u?null:(0,K.BX)(ei.G,{css:[eo.l0.border({style:"dashed"}),eo.l0.borderRadius(8),eo.l0.p(16),eo.l0.colWithGap(8),eo.l0.center],children:[(0,K.tZ)(eE.xv,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,K.tZ)(e5.zx,{variant:"outlined",text:"New File Handler",iconLeft:(0,K.tZ)(oq.Z,{}),onClick:function(){return d(!0)}})]})})]})]})}function kX(e){var n,t,r,i,o=e.onSubmit,a=e.onCancel,l=e.initialFileHandler,c=(0,J._)((0,en.useState)(null!==(n=null==l?void 0:l.name)&&void 0!==n?n:""),2),s=c[0],u=c[1],d=(0,J._)((0,en.useState)(null!==(t=null==l?void 0:l.icon)&&void 0!==t?t:""),2),p=d[0],f=d[1],h=(0,J._)((0,en.useState)(null!==(r=null==l?void 0:l.handler)&&void 0!==r?r:""),2),m=h[0],v=h[1],g=(0,J._)((0,en.useState)(null!==(i=null==l?void 0:l.glob)&&void 0!==i?i:""),2),y=g[0],b=g[1],x=(0,aO.U)();return(0,K.BX)(eS.Tg,{css:[eo.l0.borderRadius(8),eo.l0.border({color:eo.TV.outlineDimmest}),eo.l0.p(8),eo.l0.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),o({name:s,icon:p,handler:m,glob:y})},elevated:!0,children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(2),eo.l0.justify.spaceBetween,eo.l0.border({color:eo.TV.outlineDimmest,direction:"bottom"}),eo.l0.align.center,eo.l0.flex.wrap,{rowGap:8}],children:[(0,K.tZ)(eE.xv,{multiline:!1,children:s||"New File Viewer"}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.tZ)(e5.zx,{text:"Cancel",onClick:function(){a()}}),(0,K.tZ)(e5.zx,{colorway:"primary",iconLeft:(0,K.tZ)(aC.Z,{}),text:"Save Changes",type:"submit"})]})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8)],children:[(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(2)],tag:"label",htmlFor:x("name"),children:[(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"Name"}),(0,K.tZ)(pf.II,{id:x("name"),placeholder:"SVG Editor",value:s,onChange:function(e){u(e.currentTarget.value)},required:!0})]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(2)],tag:"label",htmlFor:x("handler"),children:[(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,K.tZ)(pf.II,{id:x("handler"),placeholder:"/svg-editor",value:m,onChange:function(e){v(e.currentTarget.value)},required:!0})]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(2)],tag:"label",htmlFor:x("glob"),children:[(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,K.tZ)(pf.II,{id:x("glob"),placeholder:"*.svg",value:y,onChange:function(e){b(e.currentTarget.value)},required:!0})]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(2)],tag:"label",htmlFor:x("icon"),children:[(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,K.tZ)(pf.II,{id:x("icon"),placeholder:"/svg-editor-logo.png",value:p,onChange:function(e){f(e.currentTarget.value)},required:!0})]})]})]})}function kM(e){var n=e.tools,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,J._)((0,en.useState)([]),2),l=a[0],c=a[1],s=(0,J._)((0,en.useState)(!1),2),u=s[0],d=s[1];return(0,K.BX)(ei.G,{children:[(0,K.BX)(ei.G,{css:[eo.l0.pb(12)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(oK.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,K.tZ)(ab.hU,{onClick:function(){return d(!u)},alt:"Add a new tool",disabled:u,tooltipHidden:u,children:(0,K.tZ)(oq.Z,{})})]}),(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8)],children:[u?(0,K.tZ)(kz,{onSubmit:function(e){t(e),d(!1)},onCancel:function(){d(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,K.tZ)(kz,{initialTool:e,onSubmit:function(e){r(e,n),c(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){c(function(e){return e.filter(function(e){return e!==n})})}},n):(0,K.BX)(eS.Tg,{css:[eo.l0.flex.row,eo.l0.justify.spaceBetween,eo.l0.align.center,eo.l0.p(8),eo.l0.borderRadius(8),eo.l0.flex.wrap,{rowGap:8}],elevated:!0,children:[(0,K.tZ)(eE.xv,{multiline:!1,children:null!==(t=e.name)&&void 0!==t?t:"Unnamed"}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.align.center],children:[(0,K.tZ)(ab.hU,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){o(n)},children:(0,K.tZ)(ds.Z,{})}),(0,K.tZ)(ab.hU,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){c(function(e){return(0,em._)(e).concat([n])})},children:(0,K.tZ)(lU.Z,{})}),(0,K.tZ)(e5.zx,{iconLeft:(0,K.tZ)(pz.Z,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,K.tZ)(K.HY,{children:u?null:(0,K.BX)(ei.G,{css:[eo.l0.border({style:"dashed"}),eo.l0.borderRadius(8),eo.l0.p(16),eo.l0.colWithGap(8),eo.l0.center],children:[(0,K.tZ)(eE.xv,{color:"dimmest",children:"You haven't added any tools"}),(0,K.tZ)(e5.zx,{variant:"outlined",text:"New Tool",iconLeft:(0,K.tZ)(oq.Z,{}),onClick:function(){return d(!0)}})]})})]})]})}function kz(e){var n,t,r,i=e.onSubmit,o=e.onCancel,a=e.initialTool,l=(0,J._)((0,en.useState)(null!==(n=null==a?void 0:a.name)&&void 0!==n?n:""),2),c=l[0],s=l[1],u=(0,J._)((0,en.useState)(null!==(t=null==a?void 0:a.icon)&&void 0!==t?t:null),2),d=u[0],p=u[1],f=(0,J._)((0,en.useState)(null!==(r=null==a?void 0:a.handler)&&void 0!==r?r:""),2),h=f[0],m=f[1],v=(0,aO.U)();return(0,K.BX)(eS.Tg,{tag:"form",css:[eo.l0.borderRadius(8),eo.l0.border({color:eo.TV.outlineDimmest}),eo.l0.p(8)],elevated:!0,onSubmit:function(e){e.preventDefault(),i({name:c,icon:d,handler:h})},children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(2),eo.l0.justify.spaceBetween,eo.l0.border({color:eo.TV.outlineDimmest,direction:"bottom"}),eo.l0.align.center,eo.l0.flex.wrap,{rowGap:8}],children:[(0,K.tZ)(eE.xv,{multiline:!1,children:c||"New Tool"}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8)],children:[(0,K.tZ)(e5.zx,{text:"Cancel",onClick:function(){o()}}),(0,K.tZ)(e5.zx,{colorway:"primary",iconLeft:(0,K.tZ)(aC.Z,{}),text:"Save Changes",type:"submit"})]})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8)],children:[(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(2)],tag:"label",htmlFor:v("name"),children:[(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"Name"}),(0,K.tZ)(pf.II,{id:v("name"),placeholder:"SQL Viewer",value:c,onChange:function(e){s(e.currentTarget.value)},required:!0})]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(2)],tag:"label",htmlFor:v("handler"),children:[(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,K.tZ)(pf.II,{id:v("handler"),placeholder:"/sql",value:h,onChange:function(e){m(e.currentTarget.value)},required:!0})]}),(0,K.BX)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(2)],tag:"label",htmlFor:v("icon"),children:[(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,K.tZ)(pf.II,{id:v("icon"),placeholder:"/sql-logo.png",value:null!=d?d:"",onChange:function(e){p(e.currentTarget.value||null)},required:!0})]})]})]})}function kW(e){var n,t,r,i,o,a=e.manifest,l=e.performPaneOperation,c=e.update,s=(0,xZ.zm)(),u=(0,xZ.I1)(),d=(0,J._)((0,en.useState)(null),2),p=d[0],f=d[1];return(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(24),eo.l0.width("100%")],children:[(0,K.tZ)(kO,{onOpen:(n=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){return f(e),[2]})}),function(e){return n.apply(this,arguments)}),onDelete:function(e){var n;c((0,e0._)((0,eL._)({},a),{fileHandlers:null===(n=a.fileHandlers)||void 0===n?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;c((0,e0._)((0,eL._)({},a),{fileHandlers:(0,em._)(null!==(i=null===(t=a.fileHandlers)||void 0===t?void 0:t.slice(0,n))&&void 0!==i?i:[]).concat([e],(0,em._)(null!==(o=null===(r=a.fileHandlers)||void 0===r?void 0:r.slice(n+1))&&void 0!==o?o:[]))}))},onCreate:function(e){var n;c((0,e0._)((0,eL._)({},a),{fileHandlers:(0,em._)(null!==(n=a.fileHandlers)&&void 0!==n?n:[]).concat([e])}))},fileHandlers:null!==(i=a.fileHandlers)&&void 0!==i?i:[]}),(0,K.tZ)(kM,{onOpen:(t=(0,nx._)(function(e){var n,t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:if(n=s)return[3,2];return[4,u()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!==(t=e.name)&&void 0!==t?t:n.manifest.name,baseUrl:n.baseUrl,icon:e.icon,path:e.handler}}}),[2]}})}),function(e){return t.apply(this,arguments)}),onDelete:function(e){var n;c((0,e0._)((0,eL._)({},a),{tools:null===(n=a.tools)||void 0===n?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;c((0,e0._)((0,eL._)({},a),{tools:(0,em._)(null!==(i=null===(t=a.tools)||void 0===t?void 0:t.slice(0,n))&&void 0!==i?i:[]).concat([e],(0,em._)(null!==(o=null===(r=a.tools)||void 0===r?void 0:r.slice(n+1))&&void 0!==o?o:[]))}))},onCreate:function(e){var n;c((0,e0._)((0,eL._)({},a),{tools:(0,em._)(null!==(n=a.tools)&&void 0!==n?n:[]).concat([e])}))},tools:null!==(o=a.tools)&&void 0!==o?o:[]}),(0,K.tZ)(eC.u,{isOpen:!!p,onRequestClose:function(){return f(null)},children:p?(0,K.tZ)(ka,{glob:p.glob,openFile:(r=(0,nx._)(function(e){var n,t;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:if(!p)throw Error("Expected pending file handler");if(n=s)return[3,2];return[4,u()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!==(t=p.name)&&void 0!==t?t:n.manifest.name,baseUrl:n.baseUrl,path:(0,df.Vh)(n.baseUrl,p.handler),filePath:e}}}),f(null),[2]}})}),function(e){return r.apply(this,arguments)})}):null})]})}var kN=t(32781),kj=t(81799);function kF(e){return(0,sn.o)("extensions-onboarding-checklist-".concat(e)).setAsDone}var kV=function(e){var n=e.complete,t=e.onClick,r=e.description,i=e.title,o=e.icon;return(0,K.BX)(ei.G,{tag:"li",css:[nt.gU.filled,eo.l0.position.relative,eo.l0.p(4),n?eo.l0.backgroundColor.backgroundDefault:eo.l0.backgroundColor.backgroundHigher,{border:"1px solid ".concat(eo.TV.outlineDimmer)},n&&{pointerEvents:"none"}],children:[(0,K.BX)(ei.G,{css:[eo.l0.p(4)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(6),eo.l0.align.center],children:[n?(0,K.tZ)(aC.Z,{color:eo.TV.accentPositiveStrongest,size:16,css:[eo.l0.mr(4)]}):null!=o?o:null,(0,K.tZ)(eE.xv,{variant:"small",color:n?"dimmer":"default",css:[eo.l0.fontWeight.medium],children:i})]}),r?(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",children:r}):null,(0,K.tZ)(ei.G,{children:(0,K.tZ)("button",{onClick:function(){t&&"function"==typeof t&&t()},type:"button",className:"jsx-6c599e90d55a1346",children:"Start"})})]}),(0,K.tZ)(eb(),{id:"6c599e90d55a1346",children:'button.jsx-6c599e90d55a1346{overflow:hidden;margin:-1px;border-width:0;padding:0;width:1px;height:1px;background:none;clip:rect(0,0,0,0);white-space:nowrap;cursor:pointer}button.jsx-6c599e90d55a1346::after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;display:block;cursor:pointer;z-index:1}'})]})},kH=function(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,sn.o)("extensions-onboarding-checklist"),i=r.isDone,o=r.setAsDone,a=(0,sn.o)("extensions-onboarding-checklist-create"),l=a.isDone,c=a.setAsDone,s=(0,sn.o)("extensions-onboarding-checklist-concepts"),u=s.isDone,d=s.setAsDone,p=(0,sn.o)("extensions-onboarding-checklist-api"),f=p.isDone,h=p.setAsDone,m=(0,sn.o)("extensions-onboarding-checklist-publish").isDone;if((0,en.useEffect)(function(){c()},[]),void 0===i||!0===i)return null;var v=[l,u,f,m].filter(Boolean).length,g=[{name:"create",title:"Create an Extension",complete:!!l,icon:(0,K.tZ)(hC.Z,{})},{name:"concepts",title:"Learn key concepts",complete:!!u,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:nP.TT.EXTENSIONS}}}),(0,ep.j)(ep.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"concepts"}),d()},icon:(0,K.tZ)(kN.Z,{})},{name:"learn",title:"Use the API",complete:!!f,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:nP.TT.EXTENSIONS}}}),(0,ep.j)(ep.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"learn"}),h()},icon:(0,K.tZ)(ZU.Z,{})},{name:"publish",title:"Publish your Extension",complete:!!m,onClick:function(){t(1)},icon:(0,K.tZ)(kj.Z,{})}];return(0,K.tZ)("section",{css:[eo.l0.width("100%")],children:(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(12)],children:[(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(2)],children:(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.align.center,eo.l0.flex.wrap],children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.align.center],children:[(0,K.tZ)(ei.G,{css:[eo.l0.rowWithGap(2),eo.l0.align.center,eo.l0.justify.center],children:Array.from({length:g.length}).map(function(e,n){return(0,K.tZ)(ei.G,{css:[eo.l0.borderRadius(8),eo.l0.width(12),eo.l0.height(4),n<v?eo.l0.backgroundColor.accentPositiveDefault:eo.l0.backgroundColor.backgroundHighest]},n)})}),(0,K.tZ)(eE.xv,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(v,"/").concat(g.length)}),(0,K.tZ)(ab.hU,{alt:"Hide section",onClick:o,children:(0,K.tZ)(lI.Z,{})})]})]})}),(0,K.tZ)(ei.G,{tag:"ul",css:[eo.l0.flex.row,eo.l0.flex.wrap,{listStyleType:"none",gap:eo.TV.space8}],children:g.map(function(e,n){return(0,K.tZ)(kV,(0,eL._)({},e),n)})})]})})},kY=t(94998);function kq(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=k_(),i=r.__status,o=r.parsed,a=r.state,l=r.updateString;if("loading"===i)return(0,K.tZ)(kv,{});if("fileReadError"===i)return(0,K.tZ)(kS,{message:(null==a?void 0:a.fileReadError)||"Unknown error"});if("fileParseError"===i){var c=o.error;return(0,K.tZ)(kb,{performPaneOperation:n,manifestPath:a.manifestPath,error:c})}var s=o.manifest;return"success"===i&&s?(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(24),eo.l0.align.center,eo.l0.pt(12),eo.l0.width("100%")],children:[(0,K.tZ)(kA,{performPaneOperation:n,setSelectedTab:t}),(0,K.tZ)(kH,{performPaneOperation:n,setSelectedTab:t}),(0,K.tZ)(ei.G,{css:[eo.l0.border({direction:"bottom",width:4,color:eo.TV.outlineDimmest}),eo.l0.width("100%")]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8),eo.l0.width("100%")],children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(2)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(lA.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,K.BX)(eE.xv,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,K.tZ)("a",{onClick:function(){return n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:nP.TT.EXTENSIONS+"/api/manifest#scopetype"}}})},children:"read the docs"}),"."]})]}),(0,K.tZ)(ei.G,{css:[eo.l0.borderRadius(4),eo.l0.border({color:eo.TV.outlineDimmest,width:1}),eo.l0.flex.row,eo.l0.align.center,eo.l0.p(8),eo.l0.flex.wrap,{gap:12},eo.l0.width("fit-content")],children:kY.k.map(function(e){var n;return(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(6),eo.l0.align.center],children:[(0,K.tZ)(aA.X,{id:e.key,checked:null===(n=s.scopes)||void 0===n?void 0:n.some(function(n){return n.name===e.key}),onChange:function(n){var t,r,i,o=(null===(t=s.scopes)||void 0===t?void 0:t.some(function(n){return n.name===e.key}))&&!n.target.checked?g3.r$(a.manifestStr,(0,e0._)((0,eL._)({},s),{scopes:null===(r=s.scopes)||void 0===r?void 0:r.filter(function(n){return n.name!==e.key})})):g3.r$(a.manifestStr,(0,e0._)((0,eL._)({},s),{scopes:(0,em._)(null!==(i=s.scopes)&&void 0!==i?i:[]).concat([{name:e.key,reason:e.description}])}));a.writeChange((0,kZ.F)(a.manifestStr,o)),l(o)}}),(0,K.tZ)("label",{htmlFor:e.key,css:[eo.l0.fontSize(12),eo.l0.cursor.pointer],children:(0,K.tZ)("abbr",{title:e.description,css:[{textDecorationColor:eo.TV.foregroundDimmest}],children:e.friendlyName})})]},e.key)})})]}),(0,K.tZ)(kW,{performPaneOperation:n,manifest:s,update:function(e){var n=g3.r$(a.manifestStr,e);a.writeChange((0,kZ.F)(a.manifestStr,n)),l(n)}})]}):(0,K.tZ)("div",{children:"unknown state"})}var kJ=t(2636),kK=t(20142),k$=t(81013),kQ=t(11398),k0=t(70226),k1=(0,e4.X)({logViewerTopLevel:[eo.l0.height("100%")],logsContainer:[eo.l0.scrollbar.thin,eo.l0.backgroundColor.backgroundDefault,eo.l0.overflowY("scroll"),eo.l0.flex.growAndShrink(1)],logViewerHeader:[eo.l0.p(8),eo.l0.border({direction:"bottom",width:eo.TV.borderWidthDefault}),eo.l0.display.flex,eo.l0.flex.row,eo.l0.rowWithGap(8),eo.l0.align.center],logViewerHeaderControl:[eo.l0.flex.row,eo.l0.rowWithGap(4),eo.l0.align.center],logLine:[eo.l0.p(2),eo.l0.font.code,nt.gU.listItem,eo.l0.rowWithGap(2),eo.l0.align.center],logLineIcon:[eo.l0.p(4),{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function k2(e){var n=e.log,t=e.prevLevel,r=e.isLast,i=e.isFirst,o=(0,J._)((0,en.useState)(!1),2),a=o[0],l=o[1],c=(0,k$.Z)().ref;return(0,K.BX)(ei.G,{css:[eo.l0.flex.column,function(e){if(e===k0.i.warn)return{color:eo.TV.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:i?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:r?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===k0.i.error)return{color:eo.TV.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:i?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:r?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var n=eo.TV.backgroundHigher;return t===k0.i.warn?n="rgba(150, 125, 0, 0.5)":t===k0.i.error&&(n="rgba(229, 34, 34, 0.5)"),{color:eo.TV.foregroundDefault,borderTop:i?void 0:"1px solid ".concat(n),borderBottom:r?"1px solid ".concat(n):void 0}}(n.logLevel)],children:[(0,K.BX)(ei.G,{css:k1.logLine,onClick:function(){return l(function(e){return!e})},children:[(0,K.tZ)(ei.G,{css:k1.logLineIcon,children:(0,K.tZ)(function(){return n.logLevel===k0.i.warn?(0,K.tZ)(lD.Z,{size:16}):n.logLevel===k0.i.error?(0,K.tZ)(w3.Z,{size:16}):(0,K.tZ)(ke.Z,{size:16,css:{opacity:0}})},{})}),(0,K.tZ)(eE.xv,{maxLines:10,css:k1.logMessage,variant:"small",children:n.message}),a?(0,K.tZ)(a3.Z,{size:16}):(0,K.tZ)(sZ.Z,{size:16})]}),a?(0,K.tZ)(ei.G,{children:(0,K.tZ)(kK.ZP,{ref:c,css:kQ.Mp,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(n,null,2)})}):null]})}var k4=function(){var e=(0,gn.ZC)(sd.ep),n=(0,gn.E4)(sd.UB),t=(0,J._)((0,gn.OA)(sd.UT),2),r=t[0],i=t[1],o=(0,en.useRef)(null);return(0,en.useEffect)(function(){var e,n=o.current;n&&(null===(e=n.children[n.children.length-1])||void 0===e||e.scrollIntoView({behavior:"smooth"}))},[e]),(0,K.BX)(ei.G,{css:k1.logViewerTopLevel,children:[(0,K.BX)(ei.G,{className:"log-viewer-header",css:k1.logViewerHeader,children:[(0,K.tZ)(ei.G,{css:k1.logViewerHeaderControl,style:{flexGrow:1},children:(0,K.tZ)(pf.II,{type:"search",placeholder:"Filter logs",value:null!=r?r:"",onChange:function(e){return i(e.target.value)}})}),(0,K.BX)(ei.G,{css:k1.logViewerHeaderControl,children:[(0,K.tZ)(ab.hU,{alt:"Clear logs",onClick:function(){return n()},children:(0,K.tZ)(lI.Z,{id:"clear-logs"})}),(0,K.tZ)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,K.tZ)(ei.G,{css:k1.logsContainer,innerRef:o,children:e.map(function(n,t){var r;return(0,K.tZ)(k2,{log:n,prevLevel:null===(r=e[t-1])||void 0===r?void 0:r.logLevel,isFirst:0===t,isLast:t===e.length-1},n.index)})})]})},k3=t(35321),k8=t(72310),k5=t(81),k6=t(31270);function k7(){var e=(0,eO._)(["\n  query ExtensionOwner($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return k7=function(){return e},e}function k9(){var e=(0,eO._)(["\n  mutation DeployExtension(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n  ) {\n    deployExtension(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return k9=function(){return e},e}function Ce(){var e=(0,eO._)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Ce=function(){return e},e}var Cn={},Ct=(0,eX.Ps)(k7());function Cr(e){var n=(0,eL._)({},Cn,e);return sf.t(Ct,n)}var Ci=(0,eX.Ps)(k9(),xk.R9),Co=(0,eX.Ps)(Ce());function Ca(e){var n=(0,eL._)({},Cn,e);return ez.D(Co,n)}var Cl=t(71042),Cc=t(80502),Cs=t(58200),Cu=ei.K.button;(g=z||(z={})).Pending="pending",g.Active="active",g.Complete="complete",g.Error="error";var Cd=function(){return(0,K.tZ)(ei.G,{css:[eo.l0.flex.row,eo.l0.flex.grow(1),eo.l0.border({color:eo.TV.outlineDimmest,direction:"top"})]})},Cp=function(e){var n=e.text,t=e.size,r=void 0===t?"default":t,i=e.state,o=e.onClick,a=e.disabled,l=e.hideLoadingIcon,c=(0,e5.TS)(r),s=(0,e5.m2)(r);return(0,K.tZ)(Cu,{type:"button",css:[eo.l0.reset.button,eo.l0.position.relative,o&&nt.gU.nofill,eo.l0.px(8),eo.l0.py(2),eo.l0.borderRadius(4),eo.l0.rowWithGap(4),eo.l0.align.center,{borderRadius:eo.TV.borderRadiusRound}].concat((0,em._)("error"===i?[eo.l0.color.accentNegativeStronger]:"active"===i?[eo.l0.backgroundColor.accentPrimaryDimmer,eo.l0.color.accentPrimaryStrongest]:"complete"===i?[eo.l0.color.accentPositiveStronger]:[eo.l0.color.foregroundDimmest])),onClick:o,disabled:a,children:(0,K.tZ)(e5.BQ,{text:n,iconSize:s,textVariant:c,iconRight:function(){if("error"===i)return(0,K.tZ)(lD.Z,{});if("active"===i){if(l)return;return(0,K.tZ)(eR.Z,{})}return"complete"===i?(0,K.tZ)(aC.Z,{}):(0,K.tZ)(lA.Z,{})}()})})};(y=W||(W={})).Details="Details",y.Init="Init",y.Building="Building",y.BuildError="BuildError",y.Validating="Validating",y.ValidationError="ValidationError",y.CreatingExtension="CreatingExtension",y.CreatingExtensionError="CreatingExtensionError",y.Deploying="Deploying",y.DeployError="DeployError",y.Success="Success";var Cf=["Building","Validating","CreatingExtension","Deploying"];(b=N||(N={})).Details="Details",b.Init="Configure",b.Build="Build",b.Validate="Validate",b.Create="Create",b.Deploy="Deploy";var Ch=["Details","Configure","Build","Validate","Deploy"];function Cm(e){var n,t,r,i,o,a=e.performPaneOperation,l=(0,el.Z)(),c=l.container,s=l.fs,u=l.dotReplit,d=(0,J._)(Cr(),1)[0],p=kF("publish"),f=(0,bu.d)(),h=(0,J._)((0,en.useState)(null),2),m=h[0],v=h[1],g=(0,J._)((0,en.useState)("Details"),2),y=g[0],b=g[1],x=(0,J._)((0,en.useState)(null),2),Z=x[0],w=x[1],k=k_(),C=k.__status,_=k.parsed,S=k.state,E=k.updateManifest,R=(0,k8.Y)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),I=R.value,T=R.setValue,G=R.error,D=R.validate,P=(0,J._)((0,en.useState)([]),2),B=P[0],U=P[1],A=(0,en.useCallback)(function(e){return a({operation:"open",secondary:!0,pane:{type:(0,nw.Dp)(e),data:e}})},[a]),L=(0,J._)((0,Cc.Z)({openFile:A,listFiles:s.listFiles}),2),O=L[0],X=L[1],W=(0,Cs.f)();(0,en.useEffect)(function(){O&&(O.clear(),B.forEach(function(e){O.write(e.replaceAll("\n","\r\n"))}))},[B,O]);var N=(0,en.useCallback)(function(e){if(null==e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension){v(null),w(null),T(null);return}n.buildCommand&&w(n.buildCommand),n.outputDirectory&&T(n.outputDirectory),n.extensionID&&v(n.extensionID)}},[T]);(0,en.useEffect)(function(){var e=!1;return(0,nx._)(function(){var n;return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:return[4,u.getConfig()];case 1:if(n=t.sent(),e)return[2];return N(n),[2]}})})(),function(){e=!0}},[u,N]);var j=(0,en.useCallback)((n=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return v(e),[4,u.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return n.apply(this,arguments)}),[u]),F=(0,en.useCallback)((t=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return w(e),[4,u.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),[u]),V=(0,J._)((0,en.useState)(null),2),H=V[0],Y=V[1],q=(0,J._)((0,en.useState)(null),2),$=q[0],Q=q[1],ee=(0,J._)((0,en.useState)(null),2),et=ee[0],er=ee[1],ea=(0,J._)((0,en.useState)(null),2),ec=ea[0],es=ea[1],eu=(0,J._)((0,en.useState)(null),2),ef=eu[0],eh=eu[1],ev=(0,J._)((r=(0,eL._)({},Cn,void 0),ez.D(Ci,r)),1)[0],eg=(0,ed.Z)(),ey=(0,J._)(Ca(),1)[0],eb=(0,J._)((0,en.useState)(null),2),ex=eb[0],eZ=eb[1],ew=(0,en.useCallback)((i=(0,nx._)(function(e){var n,t,r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:return[4,ey({variables:{name:e.name,description:e.description}})];case 1:if((t=i.sent()).errors)return[2,{error:t.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(r=null===(n=t.data)||void 0===n?void 0:n.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===r.__typename||"UserError"===r.__typename||"UnauthorizedError"===r.__typename)return[2,{error:"Failed to create extension: "+r.message,result:null}];if("Extension"===r.__typename)return[2,{error:null,result:r}];throw Error("Unexpected response from createExtension mutation")}})}),function(e){return i.apply(this,arguments)}),[ey]),ek=(0,en.useCallback)((o=(0,nx._)(function(e,n){var t;return(0,nZ.Jh)(this,function(r){return t=c.client(),[2,new Promise(function(r){var i=t.openChannel({service:"exec"},function(t){var o=t.channel,a="";o.onCommand(function(e){e.output&&(a+=e.output,n(e.output))}),o.request({exec:{args:["bash","-c",e],env:null}}).then(function(e){if(e.channelClosed){r({error:"Channel closed",output:a||null});return}if("open"===o.status&&i(),e.error){r({error:e.error,output:a||null});return}r({output:a,error:null})})})})]})}),function(e,n){return o.apply(this,arguments)}),[c]),eC=(0,en.useCallback)((0,nx._)(function(){var e,n,t,r,i,o,a,l,u,h,v,g,y,x,w;return(0,nZ.Jh)(this,function(k){switch(k.label){case 0:return e=m,[4,D()];case 1:if(null==(n=k.sent())?void 0:n.message)return er(null==n?void 0:n.message),[2];if(!I)throw Error("expected output folder");return t=(0,xv.AH)(I),(r=function(){b("Init"),U([]),eh(null),er(null),Q(null),Y(null)})(),b("Building"),[4,s.flush()];case 2:if(k.sent(),!Z)return[3,4];return[4,ek(Z,function(e){U(function(n){return n?(0,em._)(n).concat([e]):[e]})})];case 3:if((i=k.sent()).error)return b("BuildError"),Q(i.error+" "+(i.output||" ")),[2];k.label=4;case 4:return b("Validating"),[4,c.exec("test","-d",t)];case 5:if(k.sent().error)return b("ValidationError"),er("The output folder ".concat(t," does not exist. Please create it and ensure the path is relative to your project's root directory.")),[2];return[4,s.readFile("".concat(t,"/extension.json"),{fromDisk:!0})];case 6:if((o=k.sent()).error)return b("ValidationError"),er("The output folder ".concat(t," does not have an extension.json file. Please make sure you have an extension.json file in your output folder.")),[2];a=o.content.toString("utf8");try{l=g3.ku(a)}catch(e){return b("ValidationError"),er("The extension.json file in the output folder ".concat(t," is not a valid JSON file: ").concat(e)),[2]}if((u=(0,df.U4)(l)).error)return b("ValidationError"),er("The extension.json file in the output folder ".concat(t," is not a valid manifest: ").concat(u.error.issues.map(function(e){return"".concat(e.path,": ").concat(e.message)}))),[2];if(!e)return[3,12];return[4,d({variables:{extensionId:e}})];case 7:if((h=k.sent()).error||!h.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(v=h.data.extension)?void 0:v.__typename)!=="NotFoundError")return[3,9];return[4,new Promise(function(n){eZ({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){eZ(null),n(e)}})})];case 8:if(!k.sent())return r(),[2];return e=null,[3,12];case 9:if(!((null==v?void 0:v.__typename)==="Extension"&&v.user.id!==f))return[3,11];return[4,new Promise(function(n){eZ({message:"The extension referenced in .replit (".concat(e,") belongs to another user. Would you like to create a new extension?"),callback:function(e){eZ(null),n(e)}})})];case 10:return k.sent()&&(e=null),[3,12];case 11:if((null==v?void 0:v.__typename)==="Extension"&&v.user.id===f);else throw Error("Encountered an unknown error. Please contact support.");k.label=12;case 12:if(e)return[3,14];return b("CreatingExtension"),[4,ew({description:u.manifest.description,name:u.manifest.name})];case 13:if(null!==(g=k.sent()).error)return b("CreatingExtensionError"),es(g.error),[2];j(e=g.result.id),k.label=14;case 14:if(!e)throw Error("expected extension id to be set");return[4,(0,Cl.r)(c,t)];case 15:k.sent(),b("Deploying"),k.label=16;case 16:return k.trys.push([16,18,,19]),[4,ev({variables:{extensionId:e,replId:eg,outputDirectory:t}})];case 17:return y=k.sent(),[3,19];case 18:if(x=k.sent(),b("DeployError"),x.message.includes("received message larger than max"))return eh("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return eh(x.message),[2];case 19:if(y.errors)return b("DeployError"),eh("Internal error. Please contact support: "+y.errors.map(function(e){return e.message}).join(", ")),[2];if(!y.data)return b("DeployError"),eh("Encountered an unknown error. Please contact support."),[2];if("Extension"===(w=y.data.deployExtension).__typename){if(!w.url)return b("DeployError"),eh("Encountered an unknown error. Please contact support."),[2];return p(),(0,ep.j)(ep.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),b("Success"),Y(w),[2]}if("message"in w)return b("DeployError"),eh(w.message),[2];return b("DeployError"),eh("Encountered an unknown error. Please contact support."),[2]}})}),[ek,Z,c,I,D,eg,s,b,ev,f,d,m,ew,j,p]),e_=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"Building":case"BuildError":return"Build";case"Validating":case"ValidationError":return"Validate";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Deploying":case"DeployError":return"Deploy"}}(y),eI=Ch.indexOf(e_);function eT(){return $?"Build error: ".concat($):et?"Validation error: ".concat(et):et?"Create extension error: ".concat(ec):ef?"Deploy error: ".concat(ef):void 0}var eG=(0,bp.Mu)().find(function(e){return e.extensionId===m}),eD=(0,J._)((0,en.useState)(!1),2),eP=eD[0],eB=eD[1],eU=(0,bp.WF)(),eA=(0,en.useMemo)(function(){return eP?(0,K.tZ)(eR.Z,{}):eG?(0,K.tZ)(aC.Z,{}):(0,K.tZ)(db.Z,{})},[eP,eG]),eO=(0,lL.F)().values.global,eX=(0,fP.$0)().fireBurst,eM=(0,J._)((0,en.useState)(!1),2),eW=eM[0],eN=eM[1],ej=(0,en.useRef)(null);if((0,en.useEffect)(function(){ej.current&&!eW&&"Success"===y&&(eX({x:ej.current.getBoundingClientRect().left,y:ej.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,fP.hd)(300,5e3)},size:function(){return{width:(0,fP.hd)(8,16),height:(0,fP.hd)(8,16)}},color:[eO.tealStronger,eO.blurpleStronger,eO.yellowStronger]}),eX({x:ej.current.getBoundingClientRect().right,y:ej.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,fP.hd)(300,5e3)},size:function(){return{width:(0,fP.hd)(8,16),height:(0,fP.hd)(8,16)}},color:[eO.blueStronger,eO.greenStronger,eO.pinkStronger]}),eN(!0))},[y,eO,eX,eW]),C===M.loading)return(0,K.tZ)(kv,{});if(C===M.fileReadError)return(0,K.tZ)(kS,{message:S.fileReadError});var eF=_.manifest,eV=_.error;return eV?(0,K.tZ)(kb,{performPaneOperation:a,manifestPath:S.manifestPath,error:eV}):(0,K.BX)(ei.G,{css:[eo.l0.flex.column,eo.l0.display.flex,eo.l0.height("100%"),eo.l0.justify.center,eo.l0.align.center,eo.l0.position.relative],children:[(0,K.tZ)(ei.G,{css:[eo.l0.position.absolute,eo.l0.top(0),eo.l0.left(0),eo.l0.right(0)],className:"Confetti",innerRef:ej}),(0,K.BX)(ei.G,{css:[eo.l0.p(12),eo.l0.pt(16),eo.l0.colWithGap(24),eo.l0.flex.growAndShrink(1),eo.l0.width("100%"),eo.l0.maxWidth(kJ.Y)],children:["Success"!==y?(0,K.BX)(K.HY,{children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.tZ)(eE.xv,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,K.tZ)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center],children:Ch.map(function(e,n){return(0,K.BX)(en.Fragment,{children:[0!==n&&(0,K.tZ)(Cd,{}),(0,K.tZ)(Cp,{state:n<eI?z.Complete:n!==eI?z.Pending:["BuildError","ValidationError","CreatingExtensionError","DeployError"].includes(y)?z.Error:z.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===y?(0,K.tZ)(ei.G,{css:[eo.l0.flex.column,eo.l0.colWithGap(8),eo.l0.width("100%")],children:(0,K.tZ)(kL,{manifest:eF,updateManifest:E,onSubmit:function(e){E((0,eL._)({},eF,e)),b("Init")}})}):null,"Details"!==y?(0,K.BX)(K.HY,{children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(k6.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Build settings"}),(0,K.tZ)(ei.G,{css:[eo.l0.flex.grow(1),eo.l0.border({color:eo.TV.backgroundHighest,direction:"y"})]})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4)],children:[(0,K.BX)("label",{htmlFor:"buildCommand",css:[eo.l0.display.flex,eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,K.tZ)(e2.u,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,K.tZ)(ke.Z,{size:12})})]}),(0,K.tZ)(pf.II,{value:null!=Z?Z:"",onChange:function(e){return F(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==y&&Cf.includes(y)})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4)],children:[(0,K.BX)("label",{htmlFor:"outputFolder",css:[eo.l0.display.flex,eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",children:"Output folder"}),(0,K.tZ)(e2.u,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,K.tZ)(ke.Z,{size:12})})]}),(0,K.tZ)(pf.II,{id:"outputFolder",value:null!=I?I:"",disabled:"Init"!==y&&Cf.includes(y),onChange:function(e){T(e.currentTarget.value),u.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),G?(0,K.tZ)(eE.xv,{css:[eo.l0.color.accentNegativeStronger],children:G.message}):null]}),(0,K.tZ)(e5.zx,{text:"Init"===y||y.endsWith("Error")?"Deploy and Release":"Deploying…",iconLeft:"Init"===y||y.endsWith("Error")?(0,K.tZ)(hR.Z,{}):(0,K.tZ)(eR.Z,{}),onClick:eC,disabled:"Init"!==y&&Cf.includes(y),colorway:"primary"}),(0,K.BX)(eE.xv,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,K.tZ)("a",{href:nP.Gu.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),B.length>0?(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(k5.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Build logs"}),(0,K.tZ)(ei.G,{css:[eo.l0.flex.grow(1),eo.l0.border({color:eo.TV.backgroundHighest,direction:"y"})]})]}),eT()?(0,K.tZ)(aL.E,{text:eT(),colorway:"red",icon:(0,K.tZ)(w3.Z,{})}):null,(0,K.tZ)(ei.G,{css:[eo.l0.display.flex,eo.l0.py(12),eo.l0.pl(16),eo.l0.borderRadius(8),eo.l0.overflow("hidden"),{border:"1px solid var(--outline-dimmest)",backgroundColor:null==W?void 0:W.background}],children:(0,K.tZ)(ei.K.div,{css:[eo.l0.width("100%"),eo.l0.maxWidth("100%")],ref:X})})]}):null,ex?(0,K.BX)(eS.Tg,{elevated:!0,css:[eo.l0.colWithGap(8),eo.l0.p(8),eo.l0.borderRadius(8)],children:[(0,K.tZ)(eE.xv,{variant:"text",multiline:!0,maxLines:3,children:ex.message}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(e5.zx,{text:"No",css:[eo.l0.flex.grow(1)],onClick:function(){return ex.callback(!1)}}),(0,K.tZ)(e5.zx,{text:"Yes",colorway:"primary",css:[eo.l0.flex.grow(1)],onClick:function(){return ex.callback(!0)}})]})]}):null]}):null]}):null,H?(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4)],children:[(0,K.tZ)(eE.xv,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,K.tZ)(ei.G,{css:[eo.l0.py(8)],children:(0,K.tZ)(k3.m,{showMetadata:!1,extension:H,onClick:function(){a({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,xw.T8)(H.id)}}})}})}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(kN.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,K.tZ)(ei.G,{css:[eo.l0.flex.grow(1),eo.l0.border({color:eo.TV.backgroundHighest,direction:"y"})]})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8),eo.l0.p(12),eo.l0.border({color:eo.TV.outlineDimmest}),eo.l0.borderRadius(8)],children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Install your Extension"}),(0,K.tZ)(eE.xv,{color:"dimmer",children:"Once installed, you can use the extension in any of your Repls."}),(0,K.tZ)(e5.zx,{text:eG?"Already installed":"Install Extension",colorway:eG?"green":"primary",disabled:eP||!!eG,iconLeft:eA,loading:eP,onClick:(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return eB(!0),[4,eU({extensionId:(0,xw.T8)(H.id),replId:null})];case 1:return e.sent(),eB(!1),[2]}})})})]})]}):null]})]})}function Cv(){var e=(0,eO._)(["\n  subscription ExtensionBuildLogs($extensionId: String!) {\n    extensionBuildDeployActionUpdates(input: { extensionId: $extensionId }) {\n      ... on ExtensionBuildDeployLogAction {\n        log\n      }\n      ... on ExtensionBuildDeployStatusAction {\n        status\n        message\n        build {\n          id\n        }\n      }\n    }\n  }\n"]);return Cv=function(){return e},e}function Cg(){var e=(0,eO._)(["\n  mutation DeployExtension2(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n    $buildCommand: String!\n  ) {\n    deployExtension2(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n      buildCommand: $buildCommand\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Cg=function(){return e},e}var Cy={},Cb=(0,eX.Ps)(Cv()),Cx=(0,eX.Ps)(Cg(),xk.R9);(x=j||(j={})).Details="Details",x.Init="Init",x.CreatingExtension="CreatingExtension",x.CreatingExtensionError="CreatingExtensionError",x.Queued="Queued",x.Deploying="Deploying",x.DeployError="DeployError",x.Success="Success";var CZ=["CreatingExtension","Deploying"];(Z=F||(F={})).Details="Details",Z.Init="Configure",Z.Create="Create",Z.Deploy="Deploy";var Cw=["Details","Configure","Deploy"];function Ck(e){var n,t,r,i,o,a=e.performPaneOperation,l=(0,el.Z)(),c=l.container,s=l.fs,u=l.dotReplit,d=(0,J._)(Cr(),1)[0],p=kF("publish"),f=(0,bu.d)(),h=(0,J._)((0,en.useState)(null),2),m=h[0],v=h[1],g=(0,J._)((0,en.useState)("Details"),2),y=g[0],b=g[1],x=(0,J._)((0,en.useState)(null),2),Z=x[0],w=x[1],k=k_(),C=k.__status,_=k.parsed,S=k.state,E=k.updateManifest,R=(0,k8.Y)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),I=R.value,T=R.setValue,G=R.error,D=R.validate,P=(0,J._)((0,en.useState)([]),2),B=P[0],U=P[1],A=(0,en.useCallback)(function(e){return a({operation:"open",secondary:!0,pane:{type:(0,nw.Dp)(e),data:e}})},[a]),L=(0,J._)((0,Cc.Z)({openFile:A,listFiles:s.listFiles}),2),O=L[0],X=L[1],W=(0,Cs.f)();n=(0,eL._)({},Cy,{variables:{extensionId:null!=m?m:""},onData:function(e){var n=e.data;if(n.data&&!n.error){var t=n.data.extensionBuildDeployActionUpdates;"ExtensionBuildDeployLogAction"===t.__typename&&U(function(e){return(0,em._)(e).concat((0,em._)(t.log))}),"ExtensionBuildDeployStatusAction"===t.__typename&&(t.status===eT.Fe.Success?b("Success"):t.status===eT.Fe.Failed&&b("DeployError"))}},skip:"Deploying"!==y||!m}),g0.m(Cb,n),(0,en.useEffect)(function(){O&&(O.clear(),B.forEach(function(e){O.write(e.replaceAll("\n","\r\n"))}))},[B,O]);var N=(0,en.useCallback)(function(e){if(null==e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension){v(null),w(null),T(null);return}n.buildCommand&&w(n.buildCommand),n.outputDirectory&&T(n.outputDirectory),n.extensionID&&v(n.extensionID)}},[T]);(0,en.useEffect)(function(){var e=!1;return(0,nx._)(function(){var n;return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:return[4,u.getConfig()];case 1:if(n=t.sent(),e)return[2];return N(n),[2]}})})(),function(){e=!0}},[u,N]);var j=(0,en.useCallback)((t=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return v(e),[4,u.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),[u]),F=(0,en.useCallback)((r=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return w(e),[4,u.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return r.apply(this,arguments)}),[u]),V=(0,J._)((0,en.useState)(null),2),H=V[0],Y=V[1],q=(0,J._)((0,en.useState)(null),2),$=q[0],Q=q[1],ee=(0,J._)((0,en.useState)(null),2),et=ee[0],er=ee[1],ea=(0,J._)((0,en.useState)(null),2),ec=ea[0],es=ea[1],eu=(0,J._)((0,en.useState)(null),2),ef=eu[0],eh=eu[1],ev=(0,J._)((i=(0,eL._)({},Cy,void 0),ez.D(Cx,i)),1)[0],eg=(0,ed.Z)(),ey=(0,J._)(Ca(),1)[0],eb=(0,J._)((0,en.useState)(null),2),ex=eb[0],eZ=eb[1],ew=(0,en.useCallback)((o=(0,nx._)(function(e){var n,t,r;return(0,nZ.Jh)(this,function(i){switch(i.label){case 0:return[4,ey({variables:{name:e.name,description:e.description}})];case 1:if((t=i.sent()).errors)return[2,{error:t.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(r=null===(n=t.data)||void 0===n?void 0:n.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===r.__typename||"UserError"===r.__typename||"UnauthorizedError"===r.__typename)return[2,{error:"Failed to create extension: "+r.message,result:null}];if("Extension"===r.__typename)return[2,{error:null,result:r}];throw Error("Unexpected response from createExtension mutation")}})}),function(e){return o.apply(this,arguments)}),[ey]),ek=(0,en.useCallback)((0,nx._)(function(){var e,n,t,r,i,o,a,l,u,h;return(0,nZ.Jh)(this,function(v){switch(v.label){case 0:return e=m,[4,D()];case 1:if(null==(n=v.sent())?void 0:n.message)return er(null==n?void 0:n.message),[2];if(!I)throw Error("expected output folder");return t=(0,xv.AH)(I),(r=function(){b("Init"),U([]),eh(null),er(null),Q(null),Y(null)})(),[4,s.flush()];case 2:if(v.sent(),!e)return[3,8];return[4,d({variables:{extensionId:e}})];case 3:if((i=v.sent()).error||!i.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(o=i.data.extension)?void 0:o.__typename)!=="NotFoundError")return[3,5];return[4,new Promise(function(n){eZ({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){eZ(null),n(e)}})})];case 4:case 6:if(!v.sent())return r(),[2];return e=null,[3,8];case 5:if(!((null==o?void 0:o.__typename)==="Extension"&&o.user.id!==f))return[3,7];return[4,new Promise(function(n){eZ({message:"The extension referenced in .replit (".concat(e,") belongs to another user. Would you like to create a new extension?"),callback:function(e){eZ(null),n(e)}})})];case 7:if((null==o?void 0:o.__typename)==="Extension"&&o.user.id===f);else throw Error("Encountered an unknown error. Please contact support.");v.label=8;case 8:if(e)return[3,10];return b("CreatingExtension"),[4,ew({description:"My Extension's description",name:"My Extension"})];case 9:if(null!==(a=v.sent()).error)return b("CreatingExtensionError"),es(a.error),[2];j(e=a.result.id),v.label=10;case 10:if(!e)throw Error("expected extension id to be set");return[4,(0,Cl.r)(c,t)];case 11:v.sent(),b("Queued"),v.label=12;case 12:return v.trys.push([12,14,,15]),[4,ev({variables:{extensionId:e,replId:eg,outputDirectory:t,buildCommand:null!=Z?Z:""}})];case 13:return l=v.sent(),[3,15];case 14:if(u=v.sent(),b("DeployError"),u.message.includes("received message larger than max"))return eh("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return eh(u.message),[2];case 15:if(l.errors)return b("DeployError"),eh("Internal error. Please contact support: "+l.errors.map(function(e){return e.message}).join(", ")),[2];if(!l.data)return b("DeployError"),eh("Encountered an unknown error. Please contact support."),[2];if("Extension"===(h=l.data.deployExtension2).__typename)return b("Deploying"),p(),(0,ep.j)(ep.U3.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),Y(h),[2];if("message"in h)return b("DeployError"),eh(h.message),[2];return b("DeployError"),eh("Encountered an unknown error. Please contact support."),[2]}})}),[Z,c,I,D,eg,s,b,ev,f,d,m,ew,j,p]),eC=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Queued":case"Deploying":case"DeployError":return"Deploy"}}(y),e_=Cw.indexOf(eC);function eI(){return $?"Build error: ".concat($):et?"Validation error: ".concat(et):et?"Create extension error: ".concat(ec):ef?"Deploy error: ".concat(ef):void 0}var eG=(0,bp.Mu)().find(function(e){return e.extensionId===m}),eD=(0,J._)((0,en.useState)(!1),2),eP=eD[0],eB=eD[1],eU=(0,bp.WF)(),eA=(0,en.useMemo)(function(){return eP?(0,K.tZ)(eR.Z,{}):eG?(0,K.tZ)(aC.Z,{}):(0,K.tZ)(db.Z,{})},[eP,eG]),eO=(0,lL.F)().values.global,eX=(0,fP.$0)().fireBurst,eM=(0,J._)((0,en.useState)(!1),2),eW=eM[0],eN=eM[1],ej=(0,en.useRef)(null);if((0,en.useEffect)(function(){ej.current&&!eW&&"Success"===y&&(eX({x:ej.current.getBoundingClientRect().left,y:ej.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,fP.hd)(300,5e3)},size:function(){return{width:(0,fP.hd)(8,16),height:(0,fP.hd)(8,16)}},color:[eO.tealStronger,eO.blurpleStronger,eO.yellowStronger]}),eX({x:ej.current.getBoundingClientRect().right,y:ej.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,fP.hd)(300,5e3)},size:function(){return{width:(0,fP.hd)(8,16),height:(0,fP.hd)(8,16)}},color:[eO.blueStronger,eO.greenStronger,eO.pinkStronger]}),eN(!0))},[y,eO,eX,eW]),C===M.loading)return(0,K.tZ)(kv,{});if(C===M.fileReadError)return(0,K.tZ)(kS,{message:S.fileReadError});var eF=_.manifest,eV=_.error;return eV?(0,K.tZ)(kb,{performPaneOperation:a,manifestPath:S.manifestPath,error:eV}):(0,K.BX)(ei.G,{css:[eo.l0.flex.column,eo.l0.display.flex,eo.l0.height("100%"),eo.l0.justify.center,eo.l0.align.center,eo.l0.position.relative],children:[(0,K.tZ)(ei.G,{css:[eo.l0.position.absolute,eo.l0.top(0),eo.l0.left(0),eo.l0.right(0)],className:"Confetti",innerRef:ej}),(0,K.BX)(ei.G,{css:[eo.l0.p(12),eo.l0.pt(16),eo.l0.colWithGap(24),eo.l0.flex.growAndShrink(1),eo.l0.width("100%"),eo.l0.maxWidth(kJ.Y)],children:["Success"!==y?(0,K.BX)(K.HY,{children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.tZ)(eE.xv,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,K.tZ)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center],children:Cw.map(function(e,n){return(0,K.BX)(en.Fragment,{children:[0!==n&&(0,K.tZ)(Cd,{}),(0,K.tZ)(Cp,{state:n<e_?z.Complete:n!==e_?z.Pending:["CreatingExtensionError","DeployError"].includes(y)?z.Error:z.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===y?(0,K.tZ)(ei.G,{css:[eo.l0.flex.column,eo.l0.colWithGap(8),eo.l0.width("100%")],children:(0,K.tZ)(kL,{manifest:eF,updateManifest:E,onSubmit:function(e){E((0,eL._)({},eF,e)),b("Init")}})}):null,"Details"!==y?(0,K.BX)(K.HY,{children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(k6.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Build settings"}),(0,K.tZ)(ei.G,{css:[eo.l0.flex.grow(1),eo.l0.border({color:eo.TV.backgroundHighest,direction:"y"})]})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4)],children:[(0,K.BX)("label",{htmlFor:"buildCommand",css:[eo.l0.display.flex,eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,K.tZ)(e2.u,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,K.tZ)(ke.Z,{size:12})})]}),(0,K.tZ)(pf.II,{value:null!=Z?Z:"",onChange:function(e){return F(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==y&&CZ.includes(y)})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4)],children:[(0,K.BX)("label",{htmlFor:"outputFolder",css:[eo.l0.display.flex,eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(eE.xv,{color:"dimmer",variant:"small",children:"Output folder"}),(0,K.tZ)(e2.u,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,K.tZ)(ke.Z,{size:12})})]}),(0,K.tZ)(pf.II,{id:"outputFolder",value:null!=I?I:"",disabled:"Init"!==y&&CZ.includes(y),onChange:function(e){T(e.currentTarget.value),u.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),G?(0,K.tZ)(eE.xv,{css:[eo.l0.color.accentNegativeStronger],children:G.message}):null]}),(0,K.tZ)(e5.zx,{text:"Init"===y||y.endsWith("Error")?"Deploy and Release":"Deploying…",iconLeft:"Init"===y||y.endsWith("Error")?(0,K.tZ)(hR.Z,{}):(0,K.tZ)(eR.Z,{}),onClick:ek,disabled:"Init"!==y&&CZ.includes(y),colorway:"primary"}),(0,K.BX)(eE.xv,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,K.tZ)("a",{href:nP.Gu.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),B.length>0?(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8)],children:[(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(k5.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Build logs"}),(0,K.tZ)(ei.G,{css:[eo.l0.flex.grow(1),eo.l0.border({color:eo.TV.backgroundHighest,direction:"y"})]})]}),eI()?(0,K.tZ)(aL.E,{text:eI(),colorway:"red",icon:(0,K.tZ)(w3.Z,{})}):null,(0,K.tZ)(ei.G,{css:[eo.l0.display.flex,eo.l0.py(12),eo.l0.pl(16),eo.l0.borderRadius(8),eo.l0.overflow("hidden"),{border:"1px solid var(--outline-dimmest)",backgroundColor:null==W?void 0:W.background}],children:(0,K.tZ)(ei.K.div,{css:[eo.l0.width("100%"),eo.l0.maxWidth("100%")],ref:X})})]}):null,ex?(0,K.BX)(eS.Tg,{elevated:!0,css:[eo.l0.colWithGap(8),eo.l0.p(8),eo.l0.borderRadius(8)],children:[(0,K.tZ)(eE.xv,{variant:"text",multiline:!0,maxLines:3,children:ex.message}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(4),eo.l0.align.center],children:[(0,K.tZ)(e5.zx,{text:"No",css:[eo.l0.flex.grow(1)],onClick:function(){return ex.callback(!1)}}),(0,K.tZ)(e5.zx,{text:"Yes",colorway:"primary",css:[eo.l0.flex.grow(1)],onClick:function(){return ex.callback(!0)}})]})]}):null]}):null]}):null,H&&"Success"===y?(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(4)],children:[(0,K.tZ)(eE.xv,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,K.tZ)(ei.G,{css:[eo.l0.py(8)],children:(0,K.tZ)(k3.m,{showMetadata:!1,extension:H,onClick:function(){a({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,xw.T8)(H.id)}}})}})}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.align.center],children:[(0,K.tZ)(kN.Z,{}),(0,K.tZ)(eE.xv,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,K.tZ)(ei.G,{css:[eo.l0.flex.grow(1),eo.l0.border({color:eo.TV.backgroundHighest,direction:"y"})]})]}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8),eo.l0.p(12),eo.l0.border({color:eo.TV.outlineDimmest}),eo.l0.borderRadius(8)],children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:"Install your Extension"}),(0,K.tZ)(eE.xv,{color:"dimmer",children:"Once installed, you can use the extension in any of your Repls."}),(0,K.tZ)(e5.zx,{text:eG?"Already installed":"Install Extension",colorway:eG?"green":"primary",disabled:eP||!!eG,iconLeft:eA,loading:eP,onClick:(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return eB(!0),[4,eU({extensionId:(0,xw.T8)(H.id),replId:null})];case 1:return e.sent(),eB(!1),[2]}})})})]})]}):null]})]})}function CC(e){var n=e.performPaneOperation,t=(0,er.P5)({controlName:"flag-extensions-deployments-2",default:!1,type:"boolean"}),r=(0,J._)((0,en.useState)(0),2),i=r[0],o=r[1];return(0,K.tZ)(ei.G,{css:[eo.l0.flex.column,eo.l0.height("100%"),eo.l0.position.relative],children:(0,K.BX)(w4.mQ,{css:[eo.l0.flex.grow(1),eo.l0.flex.column,eo.l0.align.center,eo.l0.display.flex,eo.l0.overflow("hidden")],selectedIndex:i,onSelectionChange:function(e){return o(e)},children:[(0,K.tZ)(eS.Tg,{css:[eo.l0.align.center,eo.l0.top(0),eo.l0.width("100%"),eo.l0.zIndex(1)],children:(0,K.BX)(w4.td,{css:[eo.l0.align.center,eo.l0.width("100%"),eo.l0.pb(0),eo.l0.maxWidth(kJ.Y)],children:[(0,K.tZ)(w4.OK,{css:[eo.l0.p(12),eo.l0.height("100%"),eo.l0.borderRadius(0)],iconLeft:(0,K.tZ)(w8.Z,{}),children:"Home"}),(0,K.tZ)(w4.OK,{css:[eo.l0.p(12),eo.l0.height("100%"),eo.l0.borderRadius(0)],iconLeft:(0,K.tZ)(w5.Z,{}),children:"Releases"}),(0,K.tZ)(w4.OK,{css:[eo.l0.p(12),eo.l0.height("100%"),eo.l0.borderRadius(0)],iconLeft:(0,K.tZ)(w3.Z,{}),children:"Logs"}),(0,K.tZ)(ei.G,{css:eo.l0.flex.grow(1)}),(0,K.tZ)(eS.Tg,{css:[eo.l0.p(8),{boxShadow:"inset 0 -1px 0 var(--outline-dimmest)"}],children:(0,K.tZ)(e5.zx,{text:"Docs",onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:nP.TT.EXTENSIONS}}})},variant:"outlined",size:"small",iconLeft:(0,K.tZ)(d6.Z,{}),css:[eo.l0.display.inlineFlex]})})]})}),(0,K.BX)(w4.nP,{css:[eo.l0.flex.grow(1),eo.l0.align.center,eo.l0.justify.center,eo.l0.width("100%"),eo.l0.display.flex,eo.l0.overflow("hidden")],children:[(0,K.tZ)(w4.x4,{css:[eo.l0.height("100%"),eo.l0.p(12),eo.l0.maxWidth(kJ.Y),eo.l0.display.flex,eo.l0.width("100%"),eo.l0.justify.center,eo.l0.overflowY("scroll")],children:(0,K.tZ)(kq,{performPaneOperation:n,setSelectedTab:o})}),(0,K.tZ)(w4.x4,{css:[eo.l0.height("100%"),eo.l0.width("100%"),eo.l0.overflowY("scroll")],children:t?(0,K.tZ)(Ck,{performPaneOperation:n}):(0,K.tZ)(Cm,{performPaneOperation:n})}),(0,K.tZ)(w4.x4,{css:[eo.l0.height("100%"),eo.l0.width("100%")],children:(0,K.tZ)(k4,{})})]})]})})}var C_=lO.Dy.Object({type:lO.Dy.Literal("extensionDevtools")}),CS={Content:function(e){var n=e.options.performPaneOperation;return(0,K.tZ)(CC,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,K.tZ)(hC.Z,{size:n})},getTitle:function(){return"Extensions Devtools"},decode:function(e){return lz.B4.Decode(C_,e)}},CE=t(56623),CR=t(51126);function CI(e){var n=ii(tk),t=(0,bp.WF)(),r=(0,bp.LM)(),i=(0,bp.Mu)(),o=(0,en.useCallback)(function(t,r){if("cover"===t){if(null===r){o("store",null);return}n({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!=r?r:null,page:"cover"}}})}else n({paneId:e.paneId,pane:{type:"extensionStore",data:{page:t}}})},[n,e.paneId]);if("cover"===e.page){var a,l,c,s=null!==(c=null===(l=i.find(function(n){return n.extensionId===e.coverPageExtensionId}))||void 0===l?void 0:l.installationId)&&void 0!==c?c:null;return(0,K.tZ)(CR.f,{existingInstallationId:s,extensionId:e.coverPageExtensionId,goBackToStore:function(){return o("store",null)},installExtension:(0,nx._)(function(){var n;return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return[4,t({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(n=r.sent()))throw Error("Failed to install extension");return[2,(0,xw.Ad)(n.id)]}})}),uninstallExtension:(a=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return[4,r({installationId:e,replId:null})];case 1:return n.sent(),[2]}})}),function(e){return a.apply(this,arguments)})})}return(0,K.tZ)(CE.Z,{storeMode:"pane",openExtensionCover:function(e){return o("cover",e)},setPage:function(e){return o(e,null)},page:e.page})}var CT=lO.Dy.Union([lO.Dy.Object({page:lO.Dy.Union([lO.Dy.Literal("store"),lO.Dy.Literal("manage")])}),lO.Dy.Object({page:lO.Dy.Literal("cover"),coverPageExtensionId:lO.Dy.Unsafe(lO.Dy.String())})]),CG=lO.Dy.Object({type:lO.Dy.Literal("extensionStore"),data:CT}),CD={Content:function(e){return(0,K.tZ)(CI,(0,e0._)((0,eL._)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var n=e.size;return(0,K.tZ)(hC.Z,{size:n})},getTitle:function(){return"Extensions"},decode:function(e){return lz.B4.Decode(CG,e)}},CP=t(68333),CB=t(33195),CU=t(71914),CA=".lesson/".concat("instructions.md"),CL=function(e){var n=e.contents,t=(0,el.Z)().fs,r=(0,CB.l)(t,CA);return(0,K.BX)("div",{className:eb().dynamic([["1f56389e9060681d",[e6.j.tabletMin]]])+" root",children:[(0,K.tZ)("div",{className:eb().dynamic([["1f56389e9060681d",[e6.j.tabletMin]]])+" content",children:(0,K.tZ)(CP.ZP,{components:{img:r},sourcePos:!0,children:n})}),(0,K.tZ)(eb(),{id:"1f56389e9060681d",dynamic:[e6.j.tabletMin],children:".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative}.content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32)var(--space-16)}@media only screen and (min-width:".concat(e6.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48)var(--space-32)}}")})]})},CO=function(){var e=(0,ed.Z)(),n=(0,el.Z)().fs,t=(0,J._)((0,en.useState)(null),2),r=t[0],i=t[1],o=(0,ev.Z)().showError;return((0,en.useEffect)(function(){n.readFile(CA).then(function(e){if(e.error){e.error===rN.Df.NotFound?o("Instructions file not found. Please contact your instructor."):e.error===rN.Df.IsDirectory?o("Instructions file is misconfigured. Please contact your instructor."):co.$e(function(n){n.setTag("instructions-viewer",!0),co.Tb("Error loading instructions viewer: ".concat(e.error))});return}i(e.content.toString())})},[n,o,e]),r)?(0,K.tZ)(CL,{contents:r}):(0,K.tZ)(CU.Z,{preventHighlightBorder:!0})},CX=lO.Dy.Object({type:lO.Dy.Literal("instructions")}),CM={Content:function(){return(0,K.tZ)(CO,{})},Icon:function(e){var n=e.size;return(0,K.tZ)(d6.Z,{size:n})},getTitle:function(){return"Instructions"},decode:function(e){return lz.B4.Decode(CX,e)}},Cz=t(58003),CW=t(46320);function CN(){var e=function(){var e=(0,el.Z)().toolchain;function n(){return(n=(0,nx._)(function(n){return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:return[4,e.addModule(n).catch(function(e){lX.kg.error("Toolchain: failed to add Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function t(){return(t=(0,nx._)(function(n){return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:return[4,e.removeModule(n).catch(function(e){lX.kg.error("Toolchain: failed to remove Nix module: "+e.message)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}function r(){return(r=(0,nx._)(function(n,t){return(0,nZ.Jh)(this,function(r){switch(r.label){case 0:return[4,e.upgradeModule(n,t).catch(function(e){lX.kg.error("Toolchain: failed to upgrade Nix module: "+e.message)})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}return{modules:(0,lC.Z)(e.modules),addModule:function(e){return n.apply(this,arguments)},removeModule:function(e){return t.apply(this,arguments)},upgradeModule:function(e,n){return r.apply(this,arguments)}}}(),n=e.modules,t=e.addModule,r=e.removeModule,i=e.upgradeModule,o=(0,el.Z)().toolchain,a=(0,J._)((0,en.useState)(null),2),l=a[0],c=a[1];return(0,en.useEffect)(function(){o.getRegistry().then(function(e){c(e)}).catch(function(e){lX.kg.error("Toolchain: failed to get module registry: "+e.message)})},[o]),(0,K.BX)(w4.mQ,{css:[eo.l0.pb(8),eo.l0.pt(4)],children:[(0,K.BX)(w4.td,{withDividers:!1,children:[(0,K.tZ)(w4.OK,{iconLeft:(0,K.tZ)(kt.Z,{}),children:"Store"},1),(0,K.tZ)(w4.OK,{iconLeft:(0,K.tZ)(Cz.Z,{}),children:"Installed"},2)]}),(0,K.BX)(w4.nP,{children:[(0,K.tZ)(w4.x4,{children:(0,K.tZ)(Cj,{registry:l,modules:n,addModule:t})}),(0,K.tZ)(w4.x4,{children:(0,K.tZ)(CH,{modules:n,registry:l,removeModule:r,upgradeModule:i})})]})]})}function Cj(e){var n,t=e.registry,r=e.modules,i=e.addModule,o=(0,J._)((0,en.useState)(!1),2),a=o[0],l=o[1],c=(0,en.useMemo)(function(){var e=new Set((null==r?void 0:r.map(function(e){return e.referencedId}))||[]);return((null==t?void 0:t.modules)||[]).filter(function(n){return!e.has(CV(n))}).sort(function(e,n){return e.name===n.name?0:e.name>n.name?1:-1})},[t,r]);return(0,K.BX)(ei.G,{css:[eo.l0.pt(8),eo.l0.px(8),eo.l0.colWithGap(8)],children:[t?(0,K.tZ)(ei.G,{css:eo.l0.colWithGap(4),children:c.map(function(e){var n=e.id;return(0,K.BX)(ei.G,{css:[eo.l0.align.start,(0,ea._)({},eo.nC.min("mobileMin"),[eo.l0.rowWithGap(4),eo.l0.align.center])],children:[(0,K.BX)(eE.xv,{css:eo.l0.flex.shrink(1),children:[e.name," ",(0,K.BX)(eE.xv,{color:"dimmer",children:["v",e.version," ",e.description]})]}),(0,K.tZ)(CF,{}),(0,K.tZ)(e5.zx,{size:"small",variant:"nofill",text:"Install",css:[eo.l0.color.foregroundDimmer,eo.l0.hover(eo.l0.color.foregroundDefault)],onClick:function(){i(CV(e))}})]},n)})}):null,(0,K.tZ)(e5.zx,{text:"Add by source file",onClick:function(){l(!0)}}),(0,K.tZ)(eC.u,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,K.tZ)(bs.Z,{prompt:"Add module",desc:"What's the module file path?",placeholder:"path",type:"text",onCancel:function(){return l(!1)},onConfirm:(n=(0,nx._)(function(e){return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return[4,i(e)];case 1:return n.sent(),l(!1),[2]}})}),function(e){return n.apply(this,arguments)})})})]})}function CF(){return(0,K.tZ)(ei.G,{css:[eo.l0.height(1),eo.l0.flex.growAndShrink(1),(0,ea._)({},eo.nC.min("mobileMax"),eo.l0.backgroundColor.outlineDimmest)]})}function CV(e){return"".concat(e.id,":").concat(e.tag)}function CH(e){var n=e.registry,t=e.modules,r=e.removeModule,i=e.upgradeModule;return t?(t.sort(function(e,n){return e.name===n.name?0:e.name>n.name?1:-1}),(0,K.tZ)(ei.G,{css:eo.l0.pt(4),children:t.map(function(e){return(0,K.tZ)(CY,{removeModule:r,upgradeModule:i,moduleId:e.id,module:e,registry:n},e.id)})})):(0,K.tZ)(ei.G,{css:[eo.l0.p(8)],children:"Loading..."})}function CY(e){var n=e.moduleId,t=e.module,r=e.removeModule,i=e.upgradeModule,o=e.registry,a=null==o?void 0:o.recommendUpgrade[t.resolvedId],l=(0,en.useMemo)(function(){if(!o)return null;var e=o.recommendUpgrade[t.resolvedId];if(!e)return null;var n=e.to.split(":")[0];return o.modules.find(function(e){return e.id===n})},[o,t.resolvedId]);return(0,K.tZ)(ZI.Q,{round:!1,css:{":not(:first-of-type)":{borderTop:"1px solid "+eo.TV.outlineDimmest}},headerContent:function(e){var r=e.isExpanded;return(0,K.BX)(ei.G,{css:[eo.l0.flex.row,eo.l0.px(4),{"[aria-selected=true]":[eo.l0.fontWeight.medium]}],children:[t.name," ",t.version,!r&&a?(0,K.tZ)(CW.Z,{alt:"Upgrade available"}):null]},n)},children:(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(8),eo.l0.p(8),eo.l0.pt(4)],children:[(0,K.tZ)(Cq,{module:t}),a?(0,K.tZ)(e2.u,{tooltip:a.changelog,children:(0,K.tZ)(e5.zx,{iconRight:(0,K.tZ)(CW.Z,{}),text:"Upgrade to ".concat(null==l?void 0:l.name," v").concat(null==l?void 0:l.version),onClick:function(){i(t.referencedId,a.to)}})}):null,(0,K.tZ)(ab.hU,{alt:"Remove module",onClick:(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return[4,r(t.referencedId)];case 1:return e.sent(),[2]}})}),children:(0,K.tZ)(ds.Z,{})})]})})}function Cq(e){var n=e.module;return(0,K.BX)("ul",{css:[eo.l0.colWithGap(2),{flex:1}],children:["resolve"===n.buildType?(0,K.tZ)(CJ,{label:"Registry ID",content:n.resolvedId},"resolvedId"):null,"build"===n.buildType?(0,K.tZ)(CJ,{label:"Built from",content:n.resolvedId},"buildType"):null,n.referencedId!==n.resolvedId?(0,K.tZ)(CJ,{label:"Originally installed version",content:n.referencedId},n.referencedId):null,n.runners.map(function(e){return(0,K.tZ)(CJ,{label:"Runner",content:e.name},e.id)}),n.debuggers.map(function(e){return(0,K.tZ)(CJ,{label:"Debugger",content:e.name},e.id)}),n.languageServers.map(function(e){return(0,K.tZ)(CJ,{label:"Language server",content:e.name},e.id)}),n.packagers.map(function(e){return(0,K.tZ)(CJ,{label:"Packager",content:e.name},e.id)})]})}function CJ(e){var n=e.key,t=e.label,r=e.content;return(0,K.BX)("li",{children:[(0,K.BX)(eE.xv,{color:"dimmer",children:[t,": "]}),(0,K.tZ)(eE.xv,{children:r})]},n)}var CK=lO.Dy.Object({type:lO.Dy.Literal("modules")}),C$={Content:function(){return(0,K.tZ)(CN,{})},Icon:function(e){var n=e.size;return(0,K.tZ)(k6.Z,{size:n})},getTitle:function(){return"Modules"},decode:function(e){return lz.B4.Decode(CK,e)}},CQ=t(91215),C0={Content:function(){var e=p2();return(0,K.tZ)(ei.G,{css:[eo.l0.width("100%"),eo.l0.maxWidth(640),eo.l0.overflow("auto"),{marginRight:"auto",marginLeft:"auto"}],children:(0,K.tZ)(CQ.Z,{resetLayout:e,css:[{backgroundColor:"transparent"}]})})},Icon:function(e){var n=e.size;return(0,K.tZ)(Cz.Z,{size:n})},getTitle:function(){return"User Settings"},decode:t(15001).J},C1=t(13051),C2=t(24418),C4=t(59808),C3=t(16278),C8="Import HTML package",C5=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() </script>'}]}],C6=[{title:C8,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"></script>'}]}],C7=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],C9="Import Node package",_e=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],_n=[{title:C9,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],_t=(0,e4.X)({root:[eo.l0.colWithGap(4)],toolTipContainer:[eo.l0.rowWithGap(4),eo.l0.align.center],templateContainer:[eo.l0.rowWithGap(4),eo.l0.justify.center,eo.l0.backgroundColor.backgroundRoot,eo.l0.borderRadius(4),eo.l0.p(4),eo.l0.align.center],contentContainer:[eo.l0.colWithGap(4)],input:[eo.l0.minWidth(64),eo.l0.flex.growAndShrink(1)],codeExampleContainer:[eo.l0.borderRadius(4),eo.l0.flex.shrink(1)],codeExampleText:[eo.l0.font.code,eo.l0.color.foregroundDimmer,eo.l0.py(4),eo.l0.flex.growAndShrink(1)]}),_r=function(e){var n=e.title,t=e.content,r=(0,J._)((0,en.useState)(t),2),i=r[0],o=r[1];return(0,K.BX)(ei.G,{css:_t.root,children:[(0,K.BX)(ei.G,{css:_t.toolTipContainer,children:[(0,K.tZ)(eE.xv,{variant:"subheadDefault",children:n}),"Get user info"===n?(0,K.tZ)(ab.hU,{disabled:!0,tooltipPlacement:"top",alt:"User object contains 'id', 'name', 'roles', and 'teams'",children:(0,K.tZ)(ke.Z,{})}):null]}),(0,K.BX)(ei.G,{css:_t.contentContainer,children:[(0,K.tZ)(ei.G,{css:_t.templateContainer,children:t.map(function(e,t){var r=e.type;switch(r){case"input":return(0,K.tZ)(pf.II,{onChange:function(e){var n=(0,em._)(i);n[t].value=e.target.value,o(n)},placeholder:e.placeholder,value:e.value||"",css:_t.input},"".concat(n,"-").concat(t));case"code":return(0,K.tZ)(ei.G,{css:_t.codeExampleContainer,children:(0,K.tZ)(eE.xv,{multiline:!1,css:_t.codeExampleText,children:e.value})},"".concat(n,"-").concat(t));default:(0,hI.Z)(r)}})}),(0,K.tZ)(_i,{code:i.reduce(function(e,n){return"input"===n.type?e+(n.value||n.placeholder):e+n.value},""),packageImport:n===C9||n===C8})]})]})},_i=function(e){var n=e.code,t=e.packageImport,r=(0,ec.R3)(),i=(0,pa.Z)(r),o=(0,el.Z)().fs,a=(0,ec.Qt)();return i?(0,K.tZ)(eS.Tg,{children:(0,K.tZ)(e5.zx,{size:"small",variant:"outlined",onClick:function(){var e,l;if(t&&r&&o){if("html"!==(0,aS.r6)(r)){i({code:n,insertAt:0});return}o.readFile(r).then(function(e){if(e.error)throw e.error;var t=at.Z.from(e.content).toString(),r=t.indexOf("</head>")-1;-1===r&&(r=t.indexOf("<script")),-1===r&&(r=t.indexOf("</body>")),-1===r&&(r=t.length),i({code:n,insertAt:r})});return}i({code:n,insertAt:null!==(l=null===(e=a())||void 0===e?void 0:e.position.offset)&&void 0!==l?l:0})},text:t?"Auto add":"Insert",iconRight:(0,K.tZ)(mT.Z,{}),css:{width:"fit-content"}})}):(0,K.tZ)(eS.Tg,{children:(0,K.tZ)(e5.zx,{size:"small",variant:"outlined",onClick:function(){return(0,u7.Z)(n)},text:"Copy",iconLeft:(0,K.tZ)(dr.Z,{}),css:{width:"fit-content"}})})},_o=function(e){var n=e.examples;return(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(16)],children:n.map(function(e,n){return(0,K.tZ)(_r,{title:e.title,content:e.content},n)})})},_a=function(e){var n=e.langKey;return(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8)],children:[" ","html"!==n&&(0,K.tZ)(_o,{examples:C6}),(0,K.tZ)(_o,{examples:C7})]})},_l=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],_c=function(){return(0,K.tZ)(K.HY,{children:(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(16)],children:_l.map(function(e,n){return(0,K.tZ)(_r,{title:e.title,content:e.content},n)})})})},_s=function(e){var n=e.langKey,t=(0,K.tZ)(_c,{});switch(n){case"html":t=(0,K.tZ)(_o,{examples:C5});break;case"nodejs":t=(0,K.tZ)(_o,{examples:_e})}return(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(8)],children:t})},_u=function(e){var n=e.langKey,t=null;switch(n){case"html":t=C6;break;case"nodejs":t=_n}return t?(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(8)],children:(0,K.tZ)(_o,{examples:t})}):null};function _d(){var e=(0,eO._)(["\n  query ReplAuth($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return _d=function(){return e},e}var _p={},_f=(0,eX.Ps)(_d()),_h=(0,e4.X)({root:[eo.l0.colWithGap(16),eo.l0.p(8)],rootContents:[eo.l0.colWithGap(16),eo.l0.overflow("auto"),eo.l0.width("100%")],link:[eo.l0.color.accentPrimaryStronger,eo.l0.cursor.pointer],errorContainer:[eo.l0.textAlign.center,eo.l0.colWithGap(4)],mainContent:[eo.l0.colWithGap(24)],usageSectionTitle:[eo.l0.colWithGap(2)],usageSection:[eo.l0.colWithGap(8)],usageSectionTitleText:[{color:eo.TV.foregroundDimmest,textTransform:"uppercase",fontWeight:eo.TV.fontWeightMedium}],divider:[eo.l0.backgroundColor.outlineDimmer],usageExamples:[eo.l0.colWithGap(12)]});function _m(){var e,n,t,r,i,o=(0,ed.Z)(),a=(0,el.Z)(),l=a.dotReplit,c=a.fs,s=(0,ec.R3)(),u=s?(0,aS.r6)(s):null,d=(0,C3.I)(),p=(0,J._)((0,en.useState)(!1),2),f=p[0],h=p[1],m=(0,J._)((0,en.useState)(!1),2),v=m[0],g=m[1],y=(0,J._)((0,en.useState)(!0),2),b=y[0],x=y[1],Z=(0,J._)((0,en.useState)(!0),2),w=Z[0],k=Z[1],C=(0,J._)((0,en.useState)(),2),_=C[0],S=C[1],E=(0,J._)((0,en.useState)(""),2),R=E[0],I=E[1],T=(e=(0,eL._)({},_p,{variables:{replID:o}}),eM.a(_f,e)),G=T.data,D=T.error,P=T.loading,B=(null==G?void 0:G.repl.__typename)==="Repl"&&(null==G?void 0:null===(t=G.repl)||void 0===t?void 0:null===(n=t.config)||void 0===n?void 0:n.isServer),U=null!==(i=null==G?void 0:null===(r=G.currentUser)||void 0===r?void 0:r.isLoggedIn)&&void 0!==i&&i,A=f||v,L=(0,en.useCallback)((0,nx._)(function(){var e,n,t,r,i;return(0,nZ.Jh)(this,function(o){switch(o.label){case 0:S(void 0),x(!0),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,l.getConfig({bypassCache:!0})];case 2:switch((i=o.sent()).error){case C4.Yt.ParseError:throw Error("An error occurred parsing the .replit file, please ensure the syntax is valid");case C4.Yt.Disconnected:throw Error("Disconnected, cannot read .replit file.");case C4.Yt.NotFound:return k(!1),[2]}return h(!!(null==i?void 0:null===(n=i.config)||void 0===n?void 0:null===(e=n.auth)||void 0===e?void 0:e.buttonEnabled)),g(!!(null==i?void 0:null===(r=i.config)||void 0===r?void 0:null===(t=r.auth)||void 0===t?void 0:t.pageEnabled)),[3,5];case 3:return S(o.sent().message),[3,5];case 4:return x(!1),[7];case 5:return[2]}})}),[l,S,x,k,h,g]);(0,en.useEffect)(function(){var e;(e=(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:if(!c)return[2];return[4,L()];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[c,L]),(0,en.useEffect)(function(){if(c){var e=c.watchTextFile(C2.l,{onChange:(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return[4,L()];case 1:return e.sent(),[2]}})})});return function(){e(),g(!1),h(!1),x(!1)}}},[c,g,L]),(0,en.useEffect)(function(){if(d.find(function(e){return"react"===e.language})||"jsx"===u||"tsx"===u){I("react");return}d.length>0&&I(d[0].language)},[u,R,I,d]);var O=(0,en.useCallback)((0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return x(!0),(0,ep.j)(ep.U3.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),[4,l.updateDotReplit([(0,hN.$0)(!0),(0,hN.Jk)(!1)])];case 1:return e.sent().error&&(S("Couldn't enable login page, please try again"),x(!1)),[2]}})}),[x,l,S]),X=(0,en.useCallback)((0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return x(!0),(0,ep.j)(ep.U3.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),[4,l.updateDotReplit([(0,hN.$0)(!1),(0,hN.Jk)(!0)])];case 1:return e.sent().error&&(S("Couldn't enable login button, please try again"),x(!1)),[2]}})}),[x,l,S]),M=(0,en.useCallback)((0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return x(!0),(0,ep.j)(ep.U3.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),[4,l.updateDotReplit([(0,hN.$0)(!1),(0,hN.Jk)(!1)])];case 1:return e.sent().error&&(S("Couldn't disable Log in with Replit, please try again"),x(!1)),[2]}})}),[x,l,S]),z=(0,en.useMemo)(function(){return U?w?D?(0,K.tZ)(ei.G,{css:_h.errorContainer,children:(0,K.tZ)(aL.E,{colorway:"warning",text:"An error ocurred retrieving auth for this Repl. Please try again later."})}):"html"===R||B?A?(0,K.BX)(ei.G,{css:_h.mainContent,children:[(0,K.BX)(ei.G,{children:["nodejs"===R&&f?null:(0,K.tZ)(_u,{langKey:R}),f?(0,K.tZ)(_a,{langKey:R}):null]}),(0,K.BX)(ei.G,{css:_h.usageSection,children:[(0,K.BX)(ei.G,{css:_h.usageSectionTitle,children:[(0,K.tZ)(eE.xv,{multiline:!1,variant:"small",css:_h.usageSectionTitleText,children:"Usage"}),(0,K.tZ)(lB.R,{css:_h.divider})]}),(0,K.tZ)(ei.G,{children:(0,K.BX)(ei.G,{css:_h.usageExamples,children:[" ","nodejs"===R&&f?(0,K.tZ)(_u,{langKey:R}):null,(0,K.tZ)(_s,{langKey:R})]})})]}),(0,K.tZ)(e5.zx,{onClick:M,text:"Disable Auth",colorway:"negative",variant:"outlined",loading:b||P})]}):(0,K.BX)(ei.G,{css:eo.l0.colWithGap(8),children:[(0,K.tZ)(e5.zx,{colorway:"primary",onClick:O,text:"Enable Login Page",loading:b||P,disabled:!!_,iconLeft:(0,K.tZ)(C1.Z,{})}),(0,K.BX)(eE.xv,{css:eo.l0.textAlign.center,variant:"small",children:["Automatically redirect users to a prebuilt login page"," ",(0,K.tZ)("span",{onClick:X,css:_h.link,onKeyDown:X,role:"button",tabIndex:0,children:"or use your own custom button."})]})]}):(0,K.BX)(ei.G,{css:_h.errorContainer,children:[(0,K.tZ)(aL.E,{colorway:"warning",text:"Please start your web app to use Log in with Replit"}),(0,K.tZ)(eE.xv,{children:(0,K.tZ)("a",{href:"https://docs.replit.com/hosting/deploying-http-servers",target:"_blank",rel:"noopener",children:"Learn how to start a web app"})})]}):(0,K.BX)(ei.G,{css:_h.errorContainer,children:[(0,K.tZ)(aL.E,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,K.tZ)(eE.xv,{children:(0,K.tZ)("a",{href:"https://docs.replit.com/programming-ide/configuring-repl#replit",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,K.tZ)(ei.G,{css:_h.errorContainer,children:(0,K.tZ)(_v,{})})},[b,P,w,R,f,_,D,M,X,O,A,U,B]);return(0,K.BX)(ei.G,{css:_h.root,children:[(0,K.tZ)(eE.h4,{level:2,variant:"subheadBig",children:"Log in with Replit"}),(0,K.BX)(ei.G,{css:_h.rootContents,children:[(0,K.tZ)(function(){var e="html"===R||"nodejs"===R,n=(0,K.tZ)(eE.xv,{color:"dimmer",children:"You can use Log in with Replit with all web Repls. We have language clients for Nodejs and HTML - switch to a Repl that uses that language to see how to use it."});return f?(0,K.BX)(K.HY,{children:[(0,K.BX)(eE.xv,{color:"dimmer",children:["Your users can log in to your Repl using a custom button. Start by importing the package below"," ",(0,K.BX)("span",{onClick:O,css:_h.link,onKeyDown:O,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),!e&&n]}):v?(0,K.BX)(K.HY,{children:[(0,K.BX)(eE.xv,{color:"dimmer",children:["Your Repl will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,K.BX)("span",{onClick:X,css:_h.link,onKeyDown:X,role:"button",tabIndex:0,children:[" ","or use your own custom button."]})]})," ",!e&&n]}):(0,K.BX)(eE.xv,{children:["Let users log in to your Repl. Use a prebuilt login page or customize your own button."," ",(0,K.tZ)("a",{href:"https://docs.replit.com/hosting/repl-auth-sidebar",target:"_blank",rel:"noopener",css:_h.link,children:"Learn more"})]})},{}),z,_?(0,K.tZ)(aL.E,{text:_,colorway:A?void 0:"warning",icon:(0,K.tZ)(lD.Z,{})}):null]})]})}var _v=function(){return(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(16)],children:[(0,K.BX)(eE.xv,{children:[(0,K.tZ)("a",{href:"https://docs.replit.com/hosting/repl-auth-sidebar",target:"_blank",rel:"noopener",css:_h.link,children:"Replit Authentication"})," ","is the fastest and easiest way to set up authentication in your Repl. Try it out by logging in or signing up."]}),(0,K.tZ)(fO.Z,{href:"/auth",as:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,K.tZ)(ax.Z,{})})]})},_g=lO.Dy.Object({type:lO.Dy.Literal("replAuth")}),_y={Content:function(){return(0,K.tZ)(ei.G,{css:[eo.l0.height("100%"),eo.l0.overflowY("auto"),nw.F3],children:(0,K.tZ)(_m,{})})},Icon:function(e){var n=e.size;return(0,K.tZ)(C1.Z,{size:n})},getTitle:function(){return"Authentication"},decode:function(e){return lz.B4.Decode(_g,e)}},_b=t(13225),_x=function(e){var n;null===(n=e.focus)||void 0===n||n.call(e)};function _Z(e){var n=e.isValid,t=e.move,r=e.focus,i=void 0===r?_x:r,o=e.wrap,a=void 0!==o&&o,l=e.selector,c=e.boundary,s=(0,en.useRef)(null);return(0,en.useEffect)(function(){if(s.current){var e=s.current,r=function(r){if(n(r)){if(l)d=(0,em._)(e.querySelectorAll(l));else{var o;o=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])'),d=(0,em._)(o)}if(0!==d.length){var s=document.activeElement;if(e.contains(s)){if(l){if(c){var u=null==s?void 0:s.closest(c);s=(null==s?void 0:s.closest(l))||(null==u?void 0:u.querySelector(l))}else s=null==s?void 0:s.closest(l)}if(l&&(!s||!e.contains(document.activeElement))){r.preventDefault(),r.stopPropagation();var d,p,f=null===(p=document.activeElement)||void 0===p?void 0:p.querySelector(l);f?i(f):i(d[0]);return}if(!s){r.preventDefault(),r.stopPropagation(),i(d[0]);return}var h=d.findIndex(function(e){return e===s});if(-1===h){r.preventDefault(),r.stopPropagation(),i(d[0]);return}var m=t({event:r,children:d,activeIndex:h,activeElement:s});!a&&(m<0||m>d.length-1)||(i(m<0?d[d.length-1]:m>d.length-1?d[0]:d[m]),r.stopPropagation(),r.preventDefault())}}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}},[c,n,t,i,s,l,a]),s}var _w=t(50626),_k=t(6303),_C=t(32893),__=t(94655),_S=(0,e4.X)({self:[eo.l0.position.relative,eo.l0.flex.shrink(1),eo.l0.width("100%")],iconWrapper:[eo.l0.position.absolute,eo.l0.top(0),eo.l0.right(0),eo.l0.height("100%"),eo.l0.p(4)]}),_E=(0,en.forwardRef)(function(e,n){var t,r=e.onClear,i=(0,aq._)(e,["onClear"]);return(0,K.BX)(ei.G,{css:_S.self,children:[(0,K.tZ)(__.w,(0,eL._)({ref:n},i)),((null===(t=i.value)||void 0===t?void 0:t.length)||0)>0?(0,K.tZ)(ei.G,{css:_S.iconWrapper,children:(0,K.tZ)(ab.hU,{alt:"Clear search query",tooltipHidden:!0,onClick:r,css:{"&:hover":{backgroundColor:"".concat(eo.TV.backgroundHighest," !important")}},children:(0,K.tZ)(lI.Z,{})})}):null]})});_E.displayName="SearchInput";var _R=t(39469),_I=(0,e4.X)({self:[eo.l0.width(32),eo.l0.height(32)],queryPill:[eo.l0.display.inline,eo.l0.fontSize(eo.TV.fontSizeDefault)],popover:[{"& > .popover-control-container":eo.l0.mr(0)}],replaceButton:[eo.l0.width(104)]});function _T(e){var n=e.text;return(0,K.tZ)(ct.D,{css:_I.queryPill,text:0===n.length?"⎵":n})}function _G(e){var n=e.query,t=e.replacement,r=e.numMatches,i=e.onCancel,o=e.onConfirm;return(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(24)],children:[(0,K.BX)(eE.xv,{children:["Replace ",(0,K.tZ)(_T,{text:n})," with ",(0,K.tZ)(_T,{text:t})," ","in ",(0,aU.Z)("match",r,!0),"?"]}),(0,K.tZ)(eE.xv,{children:"This operation cannot be undone!"}),(0,K.BX)(ei.G,{css:[eo.l0.rowWithGap(12),eo.l0.justify.end],children:[(0,K.tZ)(e5.zx,{onClick:function(){return i()},text:"Cancel"}),(0,K.tZ)(e5.zx,{colorway:"negative",onClick:function(){return o()},text:"Yes, replace ".concat((0,aU.Z)("match",r,!0)),iconLeft:(0,K.tZ)(_R.Z,{})})]})]})}function _D(e){var n,t=e.disabled,r=e.loading,i=e.query,o=e.replacement,a=e.results,l=e.replace,c=e.onReplace,s=e.buttonProps,u=(0,J._)((0,en.useState)(!1),2),d=u[0],p=u[1],f=(n=(0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return p(!1),(0,ep.j)(ep.U3.SEARCH_PANE_USED,{action:"replace"}),[4,l()];case 1:return e.sent().success&&c(),[2]}})}),function(){return n.apply(this,arguments)}),h=(0,en.useMemo)(function(){return a.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[a]);return(0,K.tZ)(ei.G,{css:_I.popover,children:(0,K.BX)(e9.Z,{isOpen:d,maxWidth:400,showArrow:!0,children:[(0,K.tZ)(e5.zx,(0,e0._)((0,eL._)({},s),{text:"Replace All",css:_I.replaceButton,disabled:t||r,onClick:function(){p(function(e){return!e})}})),(0,K.tZ)(_G,{query:i,replacement:o,numMatches:h,onCancel:function(){return p(!1)},onConfirm:f})]})})}var _P=t(68681),_B=t(47357),_U=(0,e4.X)({self:[eo.l0.width("fit-content"),eo.l0.display.inlineBlock,eo.l0.color.accentNegativeDefault,eo.l0.fontWeight.bold]});function _A(e){var n=e.content;return(0,K.tZ)(K.HY,{children:n.split("\n").reduce(function(e,n,t){return null===e?[n]:(0,em._)(e).concat([(0,K.tZ)(ei.K.span,{css:_U.self,children:"\\n"},"".concat(n,"-").concat(t)),n])},null)})}var _L=ei.K.span,_O="SearchMatch";(w=V||(V={})).HIGHLIGHT="highlight",w.REMOVE="remove",w.ADD="add",w.TEXT="text";var _X=(0,e4.X)((H={self:[eo.l0.width("fit-content"),eo.l0.display.inlineBlock,eo.l0.cursor.pointer,{"&:focus-visible":[eo.l0.focusRing]}]},(0,ea._)(H,"highlight",[eo.l0.px(2),eo.l0.backgroundColor.accentPrimaryDimmest,eo.l0.borderRadius(4),eo.l0.border({color:eo.TV.accentPrimaryDimmer,width:1,direction:"full"})]),(0,ea._)(H,"remove",[eo.l0.px(2),eo.l0.backgroundColor.accentNegativeDimmest,eo.l0.borderRadius(4),eo.l0.border({color:eo.TV.accentNegativeDimmer,width:1,direction:"full"}),{textDecoration:"line-through"}]),(0,ea._)(H,"add",[eo.l0.px(2),eo.l0.backgroundColor.accentPositiveDimmest,eo.l0.borderRadius(4),eo.l0.border({color:eo.TV.accentPositiveDimmer,width:1,direction:"full"})]),(0,ea._)(H,"hiddenTextWrapper",[eo.l0.display.inlineBlock,eo.l0.mx(2),{"& > div":[eo.l0.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,ea._)(H,"firstHiddenTextWrapper",[eo.l0.ml(0)]),(0,ea._)(H,"lastHiddenTextWrapper",[eo.l0.mr(0)]),H));function _M(e){var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=e.isRegex,a=e.query,l=e.onOpenAtPosition;return(0,K.tZ)(K.HY,{children:(function(e){for(var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=[],a=r,l=0;l<t.length;l++){var c=t[l],s=c.start+c.length;o.push({start:a,end:c.start,type:"text"});var u=n.substring(c.start,s);i.length>0&&i!==u?(o.push({start:c.start,end:s,type:"remove"}),o.push({start:-1,end:s,type:"add"})):o.push({start:c.start,end:s,type:"highlight",matchIndex:l}),a=s}return o.push({start:a,end:n.length,type:"text"}),o})({content:n,matches:t,dedentBy:r,replacement:i}).map(function(e,t,r){var c=e.start,s=e.end,u=e.type,d="".concat(c,"-").concat(s),p=s-c;if("text"===u){var f=r[t+1];if(0===t&&p>50)return(0,K.BX)(en.Fragment,{children:[(0,K.tZ)(_L,{css:[_X.hiddenTextWrapper,_X.firstHiddenTextWrapper],children:(0,K.tZ)(ab.hU,{size:18,alt:"Jump to hidden text",onClick:function(){l(s-50)},children:(0,K.tZ)(vn.Z,{})})},d),(0,K.tZ)("span",{children:n.substring(s-50,s)})]},d);if(t===r.length-1&&p>50)return(0,K.BX)(en.Fragment,{children:[(0,K.tZ)("span",{children:n.substring(c,c+50)}),(0,K.tZ)(_L,{css:[_X.hiddenTextWrapper,_X.lastHiddenTextWrapper],children:(0,K.tZ)(ab.hU,{size:18,alt:"Jump to hidden text",onClick:function(){l(c+50)},children:(0,K.tZ)(vn.Z,{})})},d)]},d);if(f&&p>100)return(0,K.BX)(en.Fragment,{children:[(0,K.tZ)("span",{children:n.substring(c,c+50)}),(0,K.tZ)(_L,{css:_X.hiddenTextWrapper,children:(0,K.tZ)(ab.hU,{size:18,alt:"Jump to hidden text",onClick:function(){l(c+50)},children:(0,K.tZ)(vn.Z,{})})},d),(0,K.tZ)("span",{children:n.substring(s-50,s)})]},d)}var h=-1===c?i:n.substring(c,s);if("text"===u)return(0,K.tZ)(en.Fragment,{children:h},d);var m=null,v=r[t-1];return"add"===u&&(null==v?void 0:v.type)==="remove"&&(m=n.substring(v.start,v.end)),(0,K.tZ)(_z,{content:h,type:u,isRegex:o,query:a,replacement:i,removedText:m,onClick:function(e){e.stopPropagation(),l(s)}},d)})})}function _z(e){var n=e.content,t=e.type,r=e.isRegex,i=e.replacement,o=e.query,a=e.removedText,l=(0,aq._)(e,["content","type","isRegex","replacement","query","removedText"]),c=n,s=void 0;switch(t){case"highlight":s="Matched text ".concat(c);break;case"remove":s="Removed text ".concat(c);break;case"add":if(s="Added text ".concat(c),r&&null!==a)try{c=a.replace(new RegExp(o),i.replaceAll(/\$[&`']/g,"$$$&"))}catch(e){}}return(0,K.tZ)(ei.K.span,(0,e0._)((0,eL._)({css:[_X.self,_X[t]],tabIndex:0,"aria-label":s,role:"button","data-nav":_O},l),{children:"add"===t?(0,K.tZ)(_A,{content:c}):c}))}var _W="SearchLine",_N="--search-line-number-width",_j=(0,e4.X)({self:[eo.l0.rowWithGap(8),eo.l0.align.stretch,eo.l0.overflow("hidden"),eo.l0.cursor.pointer,eo.l0.borderRadius(4),{"&:focus-visible":[eo.l0.focusRing],"&:hover, &:focus-visible":[eo.l0.backgroundColor.backgroundHighest]}],content:[eo.l0.font.code,eo.l0.maxWidth("100%"),eo.l0.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word",lineHeight:eo.TV.lineHeightDefault}],lineNumberWrapper:[eo.l0.display.inlineBlock,eo.l0.color.foregroundDimmest,eo.l0.mr(8),eo.l0.pl(8),eo.l0.pt(4)],lineNumber:[eo.l0.display.inlineBlock,eo.l0.textAlign.right,{width:"var(".concat(_N,")")}]});function _F(e){var n=e.lineNumber,t=e.content,r=e.matches,i=e.path,o=e.dedentBy,a=e.performPaneOperation,l=(0,aq._)(e,["lineNumber","content","matches","path","dedentBy","performPaneOperation"]),c=(0,nb.Z)(function(){return function(e){(0,ep.j)(ep.U3.SEARCH_PANE_RESULT_CLICKED,(0,eL._)({},l)),a({operation:"open",pane:{type:"codeEditor",data:{path:i,line:n,col:e}},secondary:!0})}},[n,l,i,a]),s=(0,nb.Z)(function(){return function(){var e=r.length>0?r[0]:null;c(e?e.start+e.length:0)}},[r,c]);return(0,K.BX)(ei.G,{tabIndex:0,css:_j.self,"data-nav":_W,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),s())},onClick:s,children:[(0,K.tZ)(ei.G,{css:_j.lineNumberWrapper,children:(0,K.tZ)(ei.G,{tag:"span",css:_j.lineNumber,"aria-label":"Line ".concat(n),children:n})}),(0,K.tZ)("pre",{css:_j.content,children:(0,K.tZ)(_M,{isRegex:l.isRegex,content:t,matches:r,dedentBy:o,query:l.query,replacement:l.replacement,onOpenAtPosition:c})})]})}var _V=t(52527),_H=ei.K.span,_Y=(0,e4.X)({root:[eo.l0.display.flex,eo.l0.colWithGap(8),eo.l0.align.center,eo.l0.py(16)],icon:[eo.l0.color.foregroundDimmest],message:[eo.l0.color.foregroundDimmest]});function _q(e){var n=e.icon,t=void 0===n?null:n,r=e.message;return(0,K.BX)(ei.G,{css:_Y.root,children:[t?(0,K.tZ)(ei.G,{css:_Y.icon,children:t}):null,(0,K.tZ)(_H,{css:_Y.message,children:void 0===r?"No results found.":r})]})}var _J=(0,e4.X)({self:[eo.l0.flex.row,eo.l0.rowWithGap(4),eo.l0.align.center,eo.l0.justify.center,eo.l0.pt(8),eo.l0.pb(8),eo.l0.width("100%"),eo.l0.flex.wrap],text:[eo.l0.display.block,eo.l0.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function _K(e){var n=e.error;return(0,K.BX)(ei.G,{css:_J.self,children:[(0,K.tZ)(lD.Z,{}),(0,K.tZ)(eE.xv,{css:_J.text,multiline:!1,children:n})]})}function _$(e){return Math.log(e)*Math.LOG10E+1|0}var _Q="SearchFileNav",_0="SearchFileHeaderNav",_1="SearchQueryNav",_2="SearchQueryTogglesNav",_4=eD.Wx.space24,_3=parseInt(_4,10)+10,_8=(0,e4.X)({header:[eo.l0.rowWithGap(8),eo.l0.align.center,eo.l0.flex.row,eo.l0.flex.growAndShrink(1),eo.l0.overflow("hidden"),eo.l0.height(_4),eo.l0.overflow("hidden")],headerText:[eo.l0.flex.shrink(1)],gap:[eo.l0.height(24),eo.l0.display.flex,eo.l0.align.center,eo.l0.truncate],accordionWrapper:[eo.l0.backgroundColor.backgroundHigher,eo.l0.borderRadius(4)],accordionChildren:[eo.l0.p(8)],linesWrapper:[eo.l0.py(8),eo.l0.overflow("hidden"),eo.l0.borderRadius(4),eo.l0.colWithGap(2),eo.l0.font.code],hiddenLineWrapper:[eo.l0.display.flex,eo.l0.justify.end,{width:"calc(var(".concat(_N,") + ").concat(eD.TV.space16,")"),"& > div":[eo.l0.align.end]}],padding:eo.l0.pb(8)});function _5(e){var n=e.path,t=e.lines,r=e.dedentBy,i=e.isFirst,o=e.isLast,a=e.expanded,l=e.onClick,c=e.performPaneOperation,s=e.scrollOffset,u=(0,aq._)(e,["path","lines","dedentBy","isFirst","isLast","expanded","onClick","performPaneOperation","scrollOffset"]),d=(0,nE.Gn)("fontSize").preferences,p=(0,en.useRef)(null),f=(0,J._)((0,nb.Z)(function(){return[t.reduce(function(e,n){return e+n.matches.length},0),_6(t)]},[t]),2),h=f[0],m=f[1],v=(0,nb.Z)(function(){var e=t[t.length-1];if(!e)return{};var n=_$(e.lineNumber);return(0,ea._)({},_N,"".concat(n,"ch"))},[t]);return(0,K.tZ)(ei.G,{css:[!o&&_8.padding,v,eo.l0.fontSize(d.fontSize)],"data-nav":_Q,innerRef:p,children:(0,K.tZ)(eS.Tg,{css:_8.accordionWrapper,elevated:!0,children:(0,K.tZ)(ZI.Q,{expanded:void 0===a||a,onClick:function(){l(p.current)},headerProps:{"data-nav":"".concat(_0," ").concat(_W," ").concat(i?"".concat(_1," ").concat(_2):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(void 0===s?0:s,"px"),background:eD.TV.backgroundHigher}},headerContent:(0,K.BX)(ei.G,{css:_8.header,children:[(0,K.tZ)(oY.Z,{path:n}),(0,K.tZ)(eE.xv,{css:_8.headerText,multiline:!1,children:n.replace(/^\.\//,"")}),(0,K.BX)(eE.xv,{color:"dimmest",css:_8.headerText,multiline:!1,children:[h," ",(0,aU.Z)("match",h)]})]}),children:(0,K.tZ)(ei.G,{css:_8.accordionChildren,children:(0,K.tZ)(eS.Tg,{css:_8.linesWrapper,children:t.map(function(e,t){return(0,K.BX)(en.Fragment,{children:[(0,K.tZ)(_F,(0,e0._)((0,eL._)({},e,u),{path:n,dedentBy:r,performPaneOperation:c})),0!==m[t]?(0,K.tZ)(ei.G,{css:_8.hiddenLineWrapper,children:(0,K.tZ)(ab.hU,{alt:"".concat(m[t]," hidden ").concat((0,aU.Z)("line",m[t])),onClick:function(){c({operation:"open",pane:{type:"codeEditor",data:{path:n,line:e.lineNumber+1,col:0}},secondary:!0})},children:(0,K.tZ)(dZ.Z,{})})}):null]},e.lineNumber)})})})})})})}function _6(e){return e.map(function(n,t){var r=e[t+1];return r?r.lineNumber-n.lineNumber-1:0})}var _7=t(35908),_9=(0,e4.X)({container:[eo.l0.p(4),eo.l0.display.flex,eo.l0.flex.row,eo.l0.justify.spaceBetween],resultCount:[eo.l0.color.foregroundDimmer],actions:[eo.l0.display.flex,eo.l0.rowWithGap(4)]});function Se(e){var n="collapse"===e.collapseExpandAllState;return(0,K.BX)(ei.G,{css:_9.container,children:[(0,K.BX)(ei.G,{css:_9.resultCount,children:[e.totalCount," results in ",(0,aU.Z)("file",e.fileCount,!0)]}),(0,K.BX)(ei.G,{css:_9.actions,children:[(0,K.tZ)(ab.hU,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,K.tZ)(u$.Z,{})}),(0,K.tZ)(ab.hU,{alt:n?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:n?(0,K.tZ)(dt.Z,{}):(0,K.tZ)(_7.Z,{})})]})]})}var Sn=(0,$.F4)({from:{opacity:0},to:{opacity:1}}),St=(0,e4.X)({listWrapper:[eo.l0.overflowY("auto"),eo.l0.flex.grow(1),{contain:"strict"}],list:[eo.l0.width("100%"),eo.l0.position.relative],listItem:[eo.l0.position.absolute,eo.l0.top(0),eo.l0.left(0),eo.l0.width("100%")],resultCount:[eo.l0.p(4),eo.l0.pb(8),eo.l0.color.foregroundDimmer],resultRow:[{animation:"".concat(Sn," 120ms linear forwards")}]});function Sr(e){var n,t,r,i,o,a,l,c=e.results,s=e.error,u=e.paneRef,d=e.performPaneOperation,p=(0,aq._)(e,["results","error","paneRef","performPaneOperation"]),f=(0,nb.Z)(function(){return c.filter(function(e){return e.lines.length>0})},[c]),h=(0,nb.Z)(function(){return f.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[f]),m=(0,J._)((0,en.useState)({}),2),v=m[0],g=m[1],y=(0,en.useRef)(null),b=(0,_B.MG)({count:f.length,getScrollElement:function(){return y.current},estimateSize:function(e){var n;return function(e,n){var t=_6(e).map(function(e){return e>0}).filter(function(e){return e}).length,r=e.length;if(n)for(var i=n-48,o=0;o<e.length;o++){var a=e[o],l=9*_$(o)+9*a.content.length+4*a.matches.length;l>i&&(r+=Math.floor(i/l)+1)}return _3+40+24.39*r+2*r+24*t}(f[e].lines,null==u?void 0:null===(n=u.current)||void 0===n?void 0:n.offsetWidth)},overscan:3}),x=b.getVirtualItems(),Z=(0,en.useRef)(null),w=(0,en.useCallback)(function(e){var n=y.current;if(n&&Z.current!==e){if(e.matches('[data-nav*="'.concat(_0,'"]'))){e.focus();return}var t=e.closest('[data-nav="'.concat(_Q,'"]')),r=null==t?void 0:t.querySelector('[data-nav*="'.concat(_0,'"]'));if(!r){e.focus();return}var i=r.getBoundingClientRect();if(r.offsetTop+i.height>e.offsetTop){var o=e.offsetTop-i.height;Z.current=e;var a=function(){n.scrollTop===o&&(n.removeEventListener("scroll",a),Z.current===e&&(e.focus(),Z.current=null))};n.addEventListener("scroll",a),n.scrollTo({top:o})}else e.focus()}},[]),k=(n=(0,en.useCallback)(function(e){return"Tab"===e.key},[]),t=(0,en.useCallback)(function(e){var n=e.event,t=e.activeIndex;return n.shiftKey?t-1:t+1},[]),_Z((0,e0._)((0,eL._)({},{selector:'[data-nav*="'.concat(_0,'"]'),boundary:'[data-nav*="'.concat(_Q,'"]')}),{isValid:n,move:t}))),C=(r=(0,en.useCallback)(function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key},[]),i=(0,en.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowUp"===n.key?t-1:t+1},[]),_Z((0,e0._)((0,eL._)({},{selector:'[data-nav*="'.concat(_W,'"]'),focus:w}),{isValid:r,move:i}))),_=(o=(0,en.useCallback)(function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key},[]),a=(0,en.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowLeft"===n.key?t-1:t+1},[]),_Z((0,e0._)((0,eL._)({},{selector:'[data-nav*="'.concat(_O,'"]'),focus:w}),{isValid:o,move:a}))),S=(0,sH.lq)(k,C,_),E=(0,nb.Z)(function(){return f.length===Object.keys(v).length&&Object.values(v).every(Boolean)},[v,f.length]),R=null;return f.length>0?R=(0,K.BX)(K.HY,{children:[(0,K.tZ)(Se,{fileCount:f.length,totalCount:h,collapseExpandAllState:E?"expand":"collapse",onToggleCollapseExpandAll:function(){E?g({}):g(f.reduce(function(e,n){return(0,e0._)((0,eL._)({},e),(0,ea._)({},n.path,!0))},{}))},onStartNewSearch:function(){d({operation:"commit"}),d({operation:"open",pane:{type:"searchReplace"}})}}),(0,K.tZ)(ei.K.div,{ref:y,css:St.listWrapper,children:(0,K.tZ)(ei.G,{css:St.list,style:{height:b.getTotalSize()},children:(0,K.tZ)(ei.G,{css:St.listItem,style:{transform:"translateY(".concat(null===(l=x[0])||void 0===l?void 0:l.start,"px)")},innerRef:S,children:x.map(function(e){var n,t=f[e.index],r=t.path;return(0,K.tZ)(ei.K.div,{"data-index":e.index,ref:b.measureElement,css:St.resultRow,children:(0,K.tZ)(_5,(0,e0._)((0,eL._)({},t,p),{scrollOffset:null===(n=x[0])||void 0===n?void 0:n.start,performPaneOperation:d,isFirst:0===e.index,isLast:e.index===f.length-1,expanded:!0!==v[r],onClick:function(e){if(g(function(e){return(0,e0._)((0,eL._)({},e),(0,ea._)({},r,!(r in e)||!e[r]))}),y.current&&e){var n,t,i=Math.floor(null!==(t=null===(n=x[0])||void 0===n?void 0:n.start)&&void 0!==t?t:0),o=Math.floor(y.current.scrollTop),a=e.offsetTop+i;a>o||y.current.scrollTo({top:a-1})}}}))},e.key)})})})})]}):s===_V.f.EMPTY_RESULTS&&(R=(0,K.tZ)(_q,{icon:(0,K.tZ)(oJ.Z,{size:32}),message:s})),(0,K.BX)(K.HY,{children:[s&&s!==_V.f.EMPTY_RESULTS?(0,K.tZ)(_K,{error:s}):null,R]})}var Si=t(12763);function So(e){return(0,en.useMemo)(function(){return(0,em._)((0,Si.Eu)(e,",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0})},[e])}var Sa=t(42371);function Sl(){return(Sl=(0,nx._)(function(e){var n,t,r,i,o,a,l,c,s;return(0,nZ.Jh)(this,function(u){switch(u.label){case 0:if(t=e.container,r=e.fileList,0===(i=(0,aq._)(e,["container","fileList"])).query.length)return[2,{success:!1,errorOn:"exit",errorMessage:Y.QUERY_EMPTY}];if(i.query===i.replacement)return[2,{success:!1,errorOn:"exit",errorMessage:Y.QUERY_SAME}];if(!(r&&r.length>0))return[3,1];return o=r,[3,3];case 1:return[4,(a=t).exec.apply(a,(0,em._)((0,Sa.PR)((0,e0._)((0,eL._)({},i),{context:1,mode:"files"}))))];case 2:if((c=u.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===c.error?Y.NO_MATCHES:c.error}];o=(null===(l=c.output)||void 0===l?void 0:l.split("\n").filter(function(e){return e.trim().length>0}))||[],u.label=3;case 3:var d,p,f,h,m,v,g,y;if(0===o.length)return[2,{success:!1,errorOn:"rg",errorMessage:Y.NO_MATCHES}];return[4,(n=t).exec.apply(n,(0,em._)((p=(d=i).replacement,f=d.query,h=d.isRegex,m=d.isCaseSensitive,v=d.isMatchingWholeWords,g=["sd"],y=[f.indexOf("\n")>=0?"m":"e",m?"c":"i"],v&&y.push("w"),g.push("--flags",y.join("")),h||g.push("--string-mode"),f.startsWith("-")&&(f="\\"+f),g.push(f,p),g)).concat((0,em._)(o)))];case 4:if((s=u.sent()).error)return[2,{success:!1,errorOn:"sd",errorMessage:s.error}];return[2,{success:!0}]}})})).apply(this,arguments)}(k=Y||(Y={})).QUERY_EMPTY="The query is empty",k.QUERY_SAME="The query is the same as replacement",k.NO_MATCHES="No matches were found to replace",k.RG_EMPTY="Ripgrep didn't return a response",k.NOT_MOUNTED="Component wasn't mounted";var Sc=t(43891),Ss=t(19924),Su="SearchQueryControlsNav",Sd="SearchQueryExcludeNav",Sp="SearchQueryControlsColumnNav",Sf=(0,$.F4)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),Sh=(0,e4.X)({self:[eo.l0.p(8),eo.l0.colWithGap(8),eo.l0.height("100%"),eo.l0.overflow("hidden")],filesIncludeExcludeWrapper:[eo.l0.rowWithGap(4),eo.l0.align.center,eo.l0.flex.shrink(1),eo.l0.mt(6),eo.l0.mr(96),eo.l0.pr(12)],inputWithLabel:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(4)],inputLabelText:[{userSelect:"none"},eo.l0.color.foregroundDimmest,eo.l0.truncate,{fontSize:eo.TV.fontSizeSmall}],inputLabel:[eo.l0.flex.shrink(1),eo.l0.m(0),{lineHeight:1}],input:[eo.l0.viewStyle,eo.l0.border(),{blockSize:eo.TV.space32,"::placeholder":{color:eo.TV.foregroundDimmest},"&:hover::placeholder":{color:eo.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:eo.TV.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[eo.l0.flex.row,eo.l0.align.center,eo.l0.flex.shrink(0)],results:[eo.l0.position.relative,eo.l0.colWithGap(8),{flex:"1 1 auto"}],searchWrapper:[eo.l0.rowWithGap(4),eo.l0.align.center,{flex:"0 1 auto"}],replacementWrapper:[eo.l0.ml(24),eo.l0.pl(4)],replaceInputWrapper:[eo.l0.rowWithGap(4),eo.l0.align.center,eo.l0.flex.shrink(1)],horizontalLine:[eo.l0.mt(2),eo.l0.mb(8),eo.l0.height(1),eo.l0.borderRadius(2),eo.l0.width("100%"),eo.l0.backgroundColor.backgroundHigher],loadingBar:[eo.l0.position.absolute,eo.l0.mt(2),eo.l0.height(1),eo.l0.borderRadius(2),eo.l0.width("100%"),eo.l0.backgroundColor.accentPrimaryDimmer,{animation:"".concat(Sf," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function Sm(e){var n=e.updatePane,t=e.query,r=e.setQuery,i=e.isRegex,o=e.setIsRegex,a=e.isCaseSensitive,l=e.setIsCaseSensitive,c=e.isMatchingWholeWords,s=e.setIsMatchingWholeWords,u=e.isCollapsed,d=e.setIsCollapsed,p=e.executeSearch,f=(0,en.useRef)(null),h=(0,en.useCallback)(function(){var e,n;null===(e=f.current)||void 0===e||e.select(),null===(n=f.current)||void 0===n||n.focus()},[]);return(0,an.L5)(function(){return{type:"searchReplace",focusSearchInput:h}},[]),(0,an.Wk)(function(){return{focus:h}},[h]),(0,K.BX)(ei.G,{css:Sh.searchWrapper,children:[(0,K.tZ)(ab.hU,{onClick:function(){return d(function(e){return!e})},alt:u?"Show replacement options":"Hide replacement options",children:u?(0,K.tZ)(sZ.Z,{}):(0,K.tZ)(a3.Z,{})}),(0,K.tZ)(_E,{"data-nav":"".concat(_1," ").concat(Su),ref:f,autoSize:!0,placeholder:"Search",value:t,css:Sh.input,onChange:function(e){r(e),n({initialQuery:e})},onClear:function(){r(""),n({initialQuery:""})},onKeyDown:function(e){"Enter"!==e.key||(0,uK.jh)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),p())}}),(0,K.BX)(ei.G,{css:Sh.optionsWrapper,children:[(0,K.tZ)(_P.Z,{alt:"case sensitive","data-nav":"".concat(Su," ").concat(Sp),icon:(0,K.tZ)(_w.Z,{}),checked:a,onClick:function(){return l(function(e){return!e})}}),(0,K.tZ)(_P.Z,{alt:"regular expressions","data-nav":"".concat(Su," ").concat(Sp),icon:(0,K.tZ)(_k.Z,{}),checked:i,onClick:function(){return o(function(e){return!e})}}),(0,K.tZ)(_P.Z,{alt:"whole words","data-nav":"".concat(Su," ").concat(Sp),icon:(0,K.tZ)(_C.Z,{}),checked:c,onClick:function(){return s(function(e){return!e})}})]})]})}function Sv(e){var n=e.updatePane,t=e.replacement,r=e.setReplacement,i=e.query,o=e.replaceLoading,a=e.search,l=e.includeGlob,c=e.setIncludeGlob,s=e.excludeGlob,u=e.setExcludeGlob,d=e.replace,p=e.results;return(0,K.BX)(ei.G,{css:Sh.replacementWrapper,children:[(0,K.BX)(ei.G,{css:Sh.replaceInputWrapper,children:[(0,K.tZ)(_E,{"data-nav":"".concat(_1," ").concat(Su," ").concat(Sd),autoSize:!0,placeholder:"Replacement",value:t,css:Sh.input,onChange:function(e){r(e),n({initialReplacement:e})},onClear:function(){r(""),n({initialReplacement:""})}}),(0,K.tZ)(ei.G,{css:Sh.optionsWrapper,children:(0,K.tZ)(_D,{query:i,replacement:t,results:p,disabled:0===i.length,loading:o,replace:d,onReplace:a,buttonProps:{"data-nav":"".concat(Su," ").concat(_2," ").concat(Sp)}})})]}),(0,K.BX)(ei.G,{css:Sh.filesIncludeExcludeWrapper,children:[(0,K.BX)(ei.G,{css:Sh.inputWithLabel,id:"filesToInclude",children:[(0,K.tZ)("label",{htmlFor:"filesToIncludeInput",css:Sh.inputLabel,children:(0,K.tZ)(eE.xv,{css:Sh.inputLabelText,color:"dimmer",multiline:!1,children:"Files to include"})}),(0,K.tZ)(_E,{id:"filesToIncludeInput","data-nav":"".concat(_1," ").concat(Su),autoSize:!0,value:l,css:Sh.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){c(e),n({initialIncludeGlob:e})},onClear:function(){c(""),n({initialIncludeGlob:""})}})]}),(0,K.BX)(ei.G,{css:Sh.inputWithLabel,id:"filesToExclude",children:[(0,K.tZ)("label",{htmlFor:"filesToExcludeInput",css:Sh.inputLabel,children:(0,K.tZ)(eE.xv,{css:Sh.inputLabelText,color:"dimmer",multiline:!1,children:"Files to exclude"})}),(0,K.tZ)(_E,{id:"filesToExcludeInput","data-nav":"".concat(Su," ").concat(Sd),autoSize:!0,value:s,css:Sh.input,onChange:function(e){u(e),n({initialExcludeGlob:e})},onClear:function(){u(""),n({initialExcludeGlob:""})}})]})]})]})}function Sg(e){var n,t,r,i,o,a,l,c,s,u,d,p,f,h,m,v,g,y,b,x,Z,w,k,C,_,S,E,R,I,T,G,D,P,B,U,A,L,O,X,M,z,W=e.isActive,N=e.initialQuery,j=void 0===N?"":N,F=e.initialReplacement,V=e.initialIncludeGlob,H=e.initialExcludeGlob,Y=e.performPaneOperation,q=(0,J._)((0,en.useState)(j),2),$=q[0],Q=q[1],ee=(0,J._)((0,en.useState)(void 0===F?"":F),2),et=ee[0],eo=ee[1],ea=(0,J._)((0,en.useState)(!1),2),ec=ea[0],es=ea[1],eu=(0,J._)((0,en.useState)(!1),2),ed=eu[0],ef=eu[1],eh=(0,J._)((0,en.useState)(!1),2),ev=eh[0],eg=eh[1],ey=(0,J._)((0,en.useState)(!0),2),eb=ey[0],ex=ey[1],eZ=(0,J._)((0,en.useState)(void 0===H?"":H),2),ew=eZ[0],ek=eZ[1],eC=(0,J._)((0,en.useState)(void 0===V?"":V),2),e_=eC[0],eS=eC[1],eE=So(ew),eR=So(e_),eI=(0,en.useRef)(null),eT=(t=(n={query:$,isRegex:ec,isCaseSensitive:ed,isMatchingWholeWords:ev,excludeGlobs:eE,includeGlobs:eR}).query,r=n.isRegex,i=n.isCaseSensitive,o=n.isMatchingWholeWords,l=void 0===(a=n.includeGlobs)?[]:a,s=void 0===(c=n.excludeGlobs)?[]:c,d=(u=(0,el.Z)()).container,p=u.dotReplit,f=(0,Sc.n)(p),h=(0,er.P5)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),v=(m=(0,J._)((0,en.useState)([]),2))[0],g=m[1],b=(y=(0,J._)((0,en.useState)(null),2))[0],x=y[1],w=(Z=(0,J._)((0,en.useState)(t.length>0),2))[0],k=Z[1],C=(0,nb.Z)(function(){return(0,em._)(s).concat((0,em._)(f||[]),(0,em._)(dj.hD))},[s,f]),_=d.getConnectionState(),S=(0,en.useMemo)(function(){return(0,Ss.Z)({container:d,onError:function(e){return x(e)},onUpdate:function(e){return g(e)},onLoadingStateChange:function(e){return k(e)},isStreaming:!0,trackLatency:h})},[]),(0,en.useEffect)(function(){_===bf.em.CONNECTED&&S({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:C})},[_,S,t,r,i,o,l,C,f]),{loading:w,error:b,data:v,search:function(){return S({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:C})}}),eG=eT.loading,eD=eT.error,eP=eT.data,eB=eT.search;(0,_b.Z)(function(){""!==$&&(0,ep.j)(ep.U3.SEARCH_PANE_USED,{action:"search",isRegex:ec,isCaseSensitive:ed,hasIncludes:eR.length>0,hasExcludes:eE.length>0})},[$,eR,eE,ec,ed],1e3);var eU=(R=(E={replacement:et,query:$,isRegex:ec,isCaseSensitive:ed,isMatchingWholeWords:ev,excludeGlobs:eE,includeGlobs:eR,fileList:eD?void 0:eP}).query,I=E.replacement,T=E.fileList,G=(0,aq._)(E,["query","replacement","fileList"]),D=(0,el.Z)().container,B=(P=(0,J._)((0,en.useState)(!1),2))[0],U=P[1],L=(A=(0,J._)((0,en.useState)(null),2))[0],O=A[1],M=(X=(0,J._)((0,en.useState)(!1),2))[0],z=X[1],{replace:(0,en.useCallback)((0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return z(!0),O(null),[4,function(e){return Sl.apply(this,arguments)}((0,eL._)({container:D,query:R,replacement:I,fileList:null==T?void 0:T.map(function(e){return e.path})},G))];case 1:return(e=n.sent()).success||O(e.errorMessage),z(!1),U(e.success),[2,e]}})}),[D,R,I,T,G]),loading:M,error:L,data:B}),eA=eU.loading,eO=eU.replace,eX=(0,en.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Y({operation:"replace",pane:{type:"searchReplace",data:(0,eL._)({initialQuery:$,initialReplacement:et,initialExcludeGlob:ew,initialIncludeGlob:e_},e)}})},[Y,$,et,ew,e_]);(0,en.useLayoutEffect)(function(){Q(j)},[j]);var eM=_Z({selector:'[data-nav*="'.concat(_1,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(_1,'"]')),r=e.target.matches("[data-nav*=".concat(_0,"]"));return n&&t&&(e.altKey||r)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),ez=_Z({selector:'[data-nav*="'.concat(_2,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(_2,'"]')),r=e.target.matches("[data-nav*=".concat(_0,"]"));return n&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eW=_Z({selector:'[data-nav*="'.concat(Sp,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(_2,'"]'))&&"ArrowDown"===e.key)return!1;var t=e.target.matches('[data-nav*="'.concat(Sp,'"]'));return n&&t},move:function(e){var n=e.event,t=e.activeIndex,r=e.children,i=n.target.matches('[data-nav*="'.concat(_2,'"]'));return(n.preventDefault(),n.stopPropagation(),i)?0:0===t&&"ArrowUp"===n.key?-1:r.length-1}}),eN=_Z({selector:'[data-nav*="'.concat(Sd,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(Sd,'"]')),r=e.target.matches("[data-nav*=".concat(_1,"]"));return n&&e.altKey&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),ej=_Z({selector:'[data-nav*="'.concat(Su,'"]'),isValid:function(e){var n="ArrowLeft"===e.key||"ArrowRight"===e.key,t=e.target.matches('[data-nav*="'.concat(Sp,'"]'));return n&&(e.altKey||t)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowLeft"===n.key?t-1:t+1}}),eF=(0,aQ.l)(eM,ez,eW,eN,ej);return(0,K.BX)(ei.G,{css:Sh.self,innerRef:eF,children:[(0,K.tZ)(Sm,{isActive:W,query:$,setQuery:Q,updatePane:eX,isRegex:ec,isCaseSensitive:ed,isMatchingWholeWords:ev,setIsRegex:es,setIsCaseSensitive:ef,setIsMatchingWholeWords:eg,isCollapsed:eb,setIsCollapsed:ex,executeSearch:eB}),eb?null:(0,K.tZ)(Sv,{replacement:et,setReplacement:eo,updatePane:eX,query:$,replaceLoading:eA,search:eB,includeGlob:e_,setIncludeGlob:eS,excludeGlob:ew,setExcludeGlob:ek,replace:eO,results:eP}),(0,K.BX)(ei.G,{css:Sh.results,children:[(0,K.tZ)(ei.G,{css:Sh.horizontalLine}),eG?(0,K.tZ)(ei.G,{css:Sh.loadingBar},$):null,0===$.length&&0===eP.length?(0,K.tZ)(_q,{icon:(0,K.tZ)(oJ.Z,{size:32}),message:"Enter a query to start searching."}):(0,K.tZ)(Sr,{isRegex:ec,query:$,replacement:et,include:e_,exclude:ew,results:eP,error:eD,paneRef:eI,performPaneOperation:Y})]})]})}var Sy=lO.Dy.Object({type:lO.Dy.Literal("searchReplace"),data:lO.Dy.Optional(lO.Dy.Object({initialQuery:lO.Dy.Optional(lO.Dy.String()),initialReplacement:lO.Dy.Optional(lO.Dy.String()),initialIncludeGlob:lO.Dy.Optional(lO.Dy.String()),initialExcludeGlob:lO.Dy.Optional(lO.Dy.String())}))}),Sb={getTitle:function(e){var n,t=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.initialQuery;return t&&t.length>0?"Code Search: ".concat(t):"Code Search"},Icon:function(e){var n=e.size;return(0,K.tZ)(oJ.Z,{size:n})},Content:function(e){var n=e.pane,t=e.options;return(0,K.tZ)(Sg,(0,e0._)((0,eL._)({},(null==n?void 0:n.data)||{}),{isActive:t.isActive,performPaneOperation:t.performPaneOperation}))},decode:function(e){return lz.B4.Decode(Sy,e)}},Sx=lO.Dy.Object({type:lO.Dy.Literal("threadInbox")}),SZ={Content:function(e){var n=e.options;return(0,K.tZ)(Zz,{openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})},Icon:function(e){var n=e.size;return(0,K.tZ)(Za.Z,{size:n})},getTitle:function(){return"Threads"},decode:function(e){return lz.B4.Decode(Sx,e)}},Sw=t(40403),Sk=t(40852),SC=t(36102);function S_(){var e,n,t,r,i,o,a,l,c=(0,el.Z)().fs,s=(e=it(ou),n=it(op),t=ii(oh),n||!e?null:t),u=(0,se.Z)(ay.y.Sidepane),d=(0,J._)((0,en.useState)([]),2),p=d[0],f=d[1],h=(0,J._)((0,en.useState)("LOADING"),2),m=h[0],v=h[1],g=(0,ed.Z)(),y=(0,J._)((r="tutorialProgress--".concat(g),o=(i=(0,J._)((0,en.useState)(function(){var e;return null!==(e=ak.Z.get(r))&&void 0!==e?e:0}),2))[0],a=i[1],(0,en.useEffect)(function(){ak.Z.set(r,o)},[r,o]),[o,a]),2),b=y[0],x=y[1],Z=(0,J._)((0,en.useState)(!1),2),w=Z[0],k=Z[1],C=(0,en.useRef)(null),_=(0,bu.d)(),S=_?_.toString():"",E=(0,ec.Qt)(),R=(0,ec.R3)(),I=(0,pa.Z)(R),T=(0,nb.Z)(function(){return I?function(e){var n,t;return I({code:e,insertAt:null!==(t=null===(n=E())||void 0===n?void 0:n.position.offset)&&void 0!==t?t:"end"})}:void 0},[I,E]),G=(0,Sk.jJ)(S,g),D=G?(0,K.tZ)(Sk.gC,{challenge:G}):null,P=(0,en.useCallback)(function(){C.current&&(C.current.scrollTop=0)},[C]);return((0,en.useEffect)(function(){var e,n=!1;return(e=(0,nx._)(function(){var e,t,r,i,o,a,l,s,u,d,p,h,m,g;return(0,nZ.Jh)(this,function(y){switch(y.label){case 0:return v("LOADING"),[4,c.readDir(si.V)];case 1:if(e=y.sent(),n)return[2];if(e.error)return v("ERROR"),[2];return t=[],[4,Promise.all(e.children.filter(function(e){return e.type===rN.Tv.File&&Sw.c.includes((0,aS.r6)(e.filename))}).map(function(e){var n="".concat(si.V,"/").concat(e.filename);return Promise.all([n,c.readFile(n)])}))];case 2:if(r=y.sent(),n)return[2];i=!0,o=!1,a=void 0;try{for(l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)d=(u=(0,J._)(s.value,2))[0],(p=u[1]).error?v("ERROR"):(m=p.content.toString(),g=RegExp("^#\\s(?<title>.*)").exec(m),t.push({title:null==g?void 0:null===(h=g.groups)||void 0===h?void 0:h.title,content:m,path:d}))}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return f(t),v("READY"),[2]}})}),function(){return e.apply(this,arguments)})(),function(){n=!0}},[c]),(0,en.useEffect)(function(){p[b]||x(0)},[b,x,p]),"LOADING"===m)?(0,K.tZ)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.center],children:(0,K.tZ)(eR.Z,{})}):"ERROR"===m?(0,K.tZ)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.center],children:(0,K.BX)(ei.G,{css:[eo.l0.center,eo.l0.colWithGap(4)],children:[(0,K.tZ)(lI.Z,{color:eo.TV.accentNegativeDefault}),(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===p.length?(0,K.tZ)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.center],children:(0,K.BX)(ei.G,{css:[eo.l0.center,eo.l0.colWithGap(4)],children:[(0,K.tZ)(lI.Z,{color:eo.TV.accentNegativeDefault}),(0,K.tZ)(eE.xv,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):w?(0,K.BX)(ei.G,{css:[eo.l0.overflowY("scroll"),eo.l0.flex.growAndShrink(1),eo.l0.p(8),eo.l0.colWithGap(16)],children:[(0,K.tZ)(eE.xv,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,K.tZ)(ei.G,{css:[eo.l0.flex.growAndShrink(1),eo.l0.colWithGap(8)],children:p.map(function(e,n){return(0,K.BX)(ei.G,{css:[eo.l0.p(8),b===n?eo.l0.backgroundColor.backgroundHighest:eo.l0.backgroundColor.backgroundHigher,eo.l0.borderRadius(4),eo.l0.rowWithGap(8),eo.l0.align.center,eo.l0.cursor.pointer,b===n?{outline:"solid 2px var(--outline-dimmest)"}:{},{":hover":{outline:"solid 2px var(--outline-dimmest)"}}],onClick:function(){x(n),k(!1)},children:[(0,K.tZ)(ei.G,{css:[eo.l0.backgroundColor.backgroundHighest,eo.l0.width(20),eo.l0.height(20),eo.l0.borderRadius("full"),eo.l0.center,{outline:"solid 1px var(--outline-dimmest)"}],children:(0,K.tZ)(eE.xv,{variant:"small",color:"dimmest",multiline:!1,children:n+1})}),(0,K.tZ)(eE.xv,{css:[eo.l0.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)})})]}):(0,K.tZ)(ei.G,{innerRef:u,css:[eo.l0.height("100%")],children:(0,K.BX)(ei.G,{dataCy:"tutorial-viewer-content",innerRef:C,css:[eo.l0.overflowY("scroll"),eo.l0.flex.growAndShrink(1),eo.l0.p(16),eo.l0.pb(48),eo.l0.colWithGap(16)],children:[s?(0,K.tZ)(e5.zx,{text:"Show tutorial video",iconLeft:(0,K.tZ)(sY.Z,{}),onClick:function(){return s()}}):null,D,p.length>1&&(0,K.tZ)(e5.zx,{text:"Table of Contents",iconLeft:(0,K.tZ)(k5.Z,{}),onClick:function(){return k(!0)}}),(0,K.tZ)(SC.Z,{fs:c,path:p[b].path,source:p[b].content,sourcePos:!1,onCodeInsert:T}),p.length>1&&(0,K.BX)(ei.G,{css:[eo.l0.position.absolute,eo.l0.width("100%"),eo.l0.left(0),eo.l0.bottom(0),eo.l0.overflow("hidden")],children:[(0,K.tZ)(SS,{progress:(b+1)/p.length}),(0,K.BX)(ei.G,{css:[eo.l0.width("100%"),eo.l0.height(40),eo.l0.align.center,eo.l0.flex.row],children:[(0,K.tZ)(ei.G,{tag:"button",css:[eo.l0.justify.center,eo.l0.p(8),eo.l0.backgroundColor.backgroundHigher,eo.l0.cursor.pointer,eo.l0.width(40),eo.l0.height("100%")],onClick:function(){b>0&&(x(function(e){return e-1}),P())},children:b>0&&(0,K.tZ)(ZQ.Z,{size:24})}),(0,K.tZ)(ei.G,{tag:"button",css:[eo.l0.rowWithGap(8),eo.l0.flex.growAndShrink(1),eo.l0.height("100%"),eo.l0.justify.spaceBetween,eo.l0.backgroundColor.backgroundHighest,eo.l0.align.center,eo.l0.p(8),eo.l0.cursor.pointer,{userSelect:"none"}],onClick:function(){b<p.length-1&&(x(function(e){return e+1}),P())},children:b<p.length-1&&(0,K.BX)(K.HY,{children:[(0,K.BX)(eE.xv,{multiline:!1,css:[eo.l0.flex.growAndShrink(1),eo.l0.textAlign.left,eo.l0.fontSize(eo.TV.fontSizeSubheadDefault)],children:[(0,K.BX)("span",{css:[eo.l0.color.foregroundDimmer],children:["Next",p[b+1].title?": ":" page"]}),(0,K.tZ)("b",{children:null!==(l=p[b+1].title)&&void 0!==l?l:""})]}),(0,K.tZ)(sZ.Z,{size:24})]})})]})]})]})})}(C=q||(q={})).Ready="READY",C.Loading="LOADING",C.Error="ERROR";var SS=function(e){var n=e.progress;return(0,K.tZ)(e2.u,{tooltip:"Progress: ".concat(Math.round(1e3*n)/10,"%"),children:(0,K.tZ)(ei.G,{css:[eo.l0.width("100%"),eo.l0.height(4),eo.l0.backgroundColor.backgroundHigher],children:(0,K.tZ)(ei.G,{css:[eo.l0.width("".concat(100*n,"%")),eo.l0.height("100%"),eo.l0.backgroundColor.purpleDefault]})})})},SE=lO.Dy.Object({type:lO.Dy.Literal("tutorial")}),SR={Content:function(){return(0,K.tZ)(S_,{})},Icon:function(e){var n=e.size;return(0,K.tZ)(d6.Z,{size:n})},getTitle:function(){return"Tutorial"},decode:function(e){return lz.B4.Decode(SE,e)}},SI=["youtube.com","vimeo.com","wistia.com","sadanandpai.github.io"],ST=function(e){try{var n=new URL(e).hostname;return SI.some(function(e){return n===e||n.endsWith("."+e)})}catch(e){return!1}},SG=lO.Dy.Object({type:lO.Dy.Literal("videoPlayer"),data:lO.Dy.Object({embedUrl:lO.Dy.String(),title:lO.Dy.String()})}),SD={Content:function(e){var n=e.pane.data;return(0,K.tZ)(SP,{title:n.title,embedUrl:n.embedUrl})},Icon:function(e){var n=e.size;return(0,K.tZ)(sY.Z,{size:n})},getTitle:function(e){return e.data.title},decode:function(e){return lz.B4.Decode(SG,e)}};function SP(e){return ST(e.embedUrl)?(0,K.tZ)("iframe",{title:e.title,src:e.embedUrl,frameBorder:"0",css:[eo.l0.coverContainer,eo.l0.borderRadius(0,0,8,8)]}):(0,K.BX)("div",{children:["Only YouTube, Vimeo, and Wistia videos are supported."," ",(0,K.tZ)("a",{href:nP.xz,target:"_blank",children:"Request more formats here."})]})}var SB=t(57122),SU=t(37463),SA=t(51533),SL=t(86793),SO=t(45495),SX=t(62393),SM={Content:function(e){var n=e.pane.data,t=e.options,r=t.paneId,i=t.performPaneOperation,o=(0,el.Z)(),a=o.container,l=o.runner,c=ii(rV),s=(0,J._)((0,en.useState)(function(){return function(){}}),2),u=s[0],d=s[1],p=(0,SU.bg)();(0,SL.Z)({container:a,runner:l,refreshWebView:u}),(0,SO.Z)({runner:l,refreshWebView:u}),(0,an.L5)(function(){return{type:"webview",refresh:u}},[u]);var f=(0,ng.gf)(uc.webviewRefresh.id);av({match:nC.pl,data:{type:"action",label:"Refresh",icon:(0,K.tZ)(SB.Z,{}),description:uc.webviewRefresh.name,keyboardShortcut:f,run:function(){c(r),u()}}});var h=(0,se.Z)(ay.y.Output),m=(0,nR.T)();return(0,K.tZ)(SA.Z,{initialPort:(0,SX.Sp)(n,p),initialPath:null==n?void 0:n.path,containerRef:m?h:void 0,openPane:function(e){i({operation:"open",pane:e})},openNetworkingTool:function(){i({operation:"open",secondary:!0,pane:{type:"networking"}})},setRefreshCb:d})},Icon:function(e){var n=e.size;return(0,K.tZ)(s0.Z,{size:n})},getTitle:function(){return"Webview"},decode:SX.Jx},Sz=t(88377),SW=t(10896),SN=t(53672),Sj=t(70020),SF=t(85895),SV=t(75441),SH=t(18501),SY=t(49500),Sq=function(){function e(n){(0,xW._)(this,e),this.n=1,this.cleanup=n}var n=e.prototype;return n.ref=function(){this.n+=1},n.unref=function(){this.n-=1,0===this.n&&this.cleanup()},e}(),SJ=void 0,SK=function(e,n){if(SJ&&SJ.clientId===e)SJ.refcount.ref();else{var t,r=(t=(0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:return[4,n()];case 1:var r;return e=t.sent(),[2,new SV.Z(((r=new URL(e.gurl)).pathname="/wsv2/".concat(e.token),r.toString()))]}})}),function(){return t.apply(this,arguments)}),i="".concat(e,"-").concat((0,SH.x0)()),o=new SN.k(r,i,"SERVER",{codec:SF.f});(0,Sj.nb)(SY.log),(0,Sj.uR)("info");var a=new Sq(function(){o.close()});SJ={ctx:{client:(0,SW.eI)(o),transport:o,cleanup:function(){return null==SJ?void 0:SJ.refcount.unref()}},clientId:e,refcount:a}}return SJ.ctx},S$=t(91060),SQ=t(16835),S0=(0,en.createContext)(null);function S1(e){var n,t=e.clientName,r=e.replId,i=e.children,o=(0,er.P5)({controlName:"flag-pid2",logFlagToAnalytics:!1}),a=(0,en.useRef)(),l=(0,en.useCallback)((n=(0,nx._)(function(){var e,n;return(0,nZ.Jh)(this,function(t){switch(t.label){case 0:return n={replId:r,isLoggedIn:!0,pid2Version:null!==(e=ak.Z.get("pid2Version","string"))&&void 0!==e?e:"063b5ad061e5ba00d5316dae27b1e02a12f6bc79"},[4,(0,SQ.Z)()];case 1:return[2,S$.Z.apply(void 0,[(n.overrideClusterMetadata=t.sent(),n)])]}})}),function(){return n.apply(this,arguments)}),[r]),c=(0,en.useCallback)((0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:if(a.current)return[2,a.current];return[4,l()];case 1:return e=n.sent(),a.current=e,[2,e]}})}),[a,l]),s=(0,en.useMemo)(function(){return o?(0,e0._)((0,eL._)({},SK("".concat(t,"-").concat(r),(0,nx._)(function(){var e;return(0,nZ.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return e=n.sent(),a.current=e,[2,e]}})}))),{getCachedConnectionMetadata:c}):null},[o,t,r,l,c]);return(0,en.useEffect)(function(){return function(){null==s||s.cleanup()}},[s]),(0,K.tZ)(S0.Provider,{value:s,children:i})}var S2=t(44161),S4=t(78228),S3=t(8607),S8=t(95684),S5=t(66005),S6=(0,e4.X)({root:[eo.l0.position.absolute,eo.l0.borderRadius(8),eo.l0.pt(16),eo.l0.align.center,{border:"1px solid",borderColor:eo.TV.outlineDimmest}],content:[eo.l0.width("100%"),eo.l0.flex.growAndShrink(1),{"& > div > label + div":[eo.l0.maxWidth(600),eo.l0.width("100%"),{alignSelf:"center"}],'& [role="listbox"] > div':[eo.l0.align.center],'& [role="listbox"] > div > div':[eo.l0.maxWidth("calc(".concat(600,"px - ").concat(eo.TV.space16,")")),eo.l0.width("100%")],'& [role="option"] > div':[eo.l0.borderRadius(8)]}]});function S7(){var e,n,t,r,i,o=it(iC),a=ii(rX),l=(t=(n=(0,J._)((0,mt.L)({accept:[rN.Tv.File,uR.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){i.drag()},drop:function(e){if("nodes"===e.type){var n=(0,nw.ME)(e.nodes);n.length>0&&i.drop({panes:n})}if(e.type===uR.z.NewPane){var t=e.pane;i.drop({panes:[t]})}}}),2))[0].isOver,r=n[1],i=(e=ii(il),(0,en.useEffect)(function(){t||e(null)},[t,e]),{drag:ii(iw),drop:ii(ik)}),r),c=ac({openPane:(0,en.useCallback)(function(e){(0,ep.j)(ep.U3.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),a({pane:e.pane,edge:"left"})},[a])});return(0,K.tZ)(ei.G,{style:{width:o.width,height:o.height,transform:"translate(".concat(o.x,"px, ").concat(o.y,"px)")},css:S6.root,innerRef:l,children:(0,K.tZ)(ei.G,{css:S6.content,children:(0,K.tZ)(nv.X,{autoFocus:!0,command:c})})})}var S9=".config/gh/hosts.yml";function Ee(){var e=(0,ed.Z)(),n=(0,el.Z)(),r=n.fs,i=n.secrets,o=(0,ev.Z)(),a=(0,en.useRef)(0),l=(0,er.P5)({controlName:"flag-migrate-gh-creds",default:!1,logFlagToAnalytics:!1});return(0,en.useEffect)(function(){var e=r.watchFilePath(S9,{onChange:function(e){return(0,nx._)(function(){var n,c,s,u,d,p;return(0,nZ.Jh)(this,function(f){switch(f.label){case 0:if(n=++a.current,lX.kg.info("Workspace: sensitive credentials identified",{type:"github",path:".config/gh/hosts.yml"}),!l)return[2];return[4,t.e(487).then(t.bind(t,80487))];case 1:if(c=f.sent(),n!==a.current)return[2];f.label=2;case 2:if(f.trys.push([2,8,,9]),u=Object.keys(s=c.load(e.toString()))[0],d=s[u],n!==a.current)return[2];return p=[],"github.com"===u?p.push({key:"GH_TOKEN",value:d.oauth_token}):(p.push({key:"GH_HOST",value:u}),p.push({key:"GH_ENTERPRISE_TOKEN",value:d.oauth_token})),[4,i.writeSecrets(p)];case 3:if(f.sent(),n!==a.current)return[2];f.label=4;case 4:return f.trys.push([4,6,,7]),[4,r.deleteFile(S9)];case 5:return f.sent().error?o.showError("Failed to remove GitHub authentication token in: ".concat(S9)):o.showNotice("GitHub authentication token safely stored in Secrets"),[3,7];case 6:return f.sent(),o.showError("Failed to remove GitHub authentication token in: ".concat(S9)),[3,7];case 7:return[3,9];case 8:return f.sent(),o.showError("Failed to remove GitHub authentication token in: ".concat(S9)),[3,9];case 9:return[2]}})})()}});return function(){e()}},[r,e,l]),null}function En(e){var n=e.repl,t=e.currentUser,r=!!(0,eG.useRouter)().query.deploymentPane,i=(0,J._)((0,en.useState)(function(){var e;return(0,nw.fK)({config:(e=(0,xP.U)(),(0,e0._)((0,eL._)({},e),{webview:SM,commands:Zj,debugger:wl,docs:wc,chat:ZN,threadInbox:SZ,tutorial:SR,videoPlayer:SD,extension:w2,extensionStore:CD,replAuth:_y,searchReplace:Sb,modules:C$,deployments:xG.R,education:wq,autograder:x5,instructions:CM,config:ZY,preferences:C0,multiplayer:xD.Z,submitEduRepl:xD.Z,extensionDevtools:CS}))})}),1)[0],o=n.layoutState?fo(n.layoutState,i.decode):null;return(0,K.tZ)(S1,{clientName:t.username,replId:n.id,children:(0,K.tZ)(ec.eA,{children:(0,K.tZ)(r9,{deploymentPane:r,savedLayoutState:o,isHTML:n.language.startsWith("html"),isStacked:t.editorPreferences.isLayoutStacked,isExtension:!!n.config.isExtension,children:(0,K.tZ)(Et,{ui:i,repl:n,currentUser:t})})})})}function Et(e){var n,t,r,i,o,a,l,c,s,u,d,p,f,h,m,v,g,y,b,x,Z,w,k,C,_,S,E=e.repl,R=e.currentUser,I=e.ui,T=(n=oM(),t=ii(iN),r=ii(ij),i=(0,gX.uV)(),o=(0,er.P5)({controlName:o7.wK,logFlagToAnalytics:!0}),a=(0,er.P5)({controlName:"flag-channel-request-priority",logFlagToAnalytics:!1})?void 0:bf.h.High,l=(0,er.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),c="html"===E.language?"html":"outputs",u=(s=(0,J._)((0,en.useState)(!1),2))[0],d=s[1],f=(p=(0,J._)((0,en.useState)(!1),2))[0],h=p[1],v=(m=(0,J._)((0,en.useState)(!1),2))[0],g=m[1],y=(0,ne.e_)(),b=(0,ne.f)(),x=(0,er.P5)({controlName:"flag-open-telemetry-tracing"}),Z=(0,en.useContext)(S0),w=xR.D.active(),C=(k=(0,ym.eh)(w,"workspace.desktop.useCreateServices")).span,_=k.childCtx,S=(0,Sz.H)({riverCtx:Z,runnerMode:c,onPresenceCommand:y,getColorForUser:b,onUnrecoverableError:(0,S2.Z)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===S5.Gs.NotAllowed?h(!0):e===S5.Gs.FirewallDenied?d(!0):e===S5.Gs.RequiresRefresh&&g(!0)},throwBsod:i}),openFile:n,openMultipleFiles:t,openMultipleURLs:o?r:void 0,onFirewallDenied:function(){return d(!0)},enableUserEvents:l,channelRequestPriority:{fs:a,dotReplit:a},autoUpdateDotReplitOnPortInfo:o,openTelemetryTracing:x,ctx:_}),C.end(),{services:S,isFirewallDenied:u,isPleaseRefresh:v,isNotAllowed:f}),G=T.services,D=T.isFirewallDenied,P=T.isPleaseRefresh,B=T.isNotAllowed;(0,S8.mK)(!!E.layoutState);var U=(0,nb.Z)(function(){return(0,vQ._)(null==R?void 0:R.keybindings.keybindings)},[R]),A=(0,er.P5)({controlName:"flag-warn-gh-creds",default:!1,logFlagToAnalytics:!1}),L=(0,xT.l)(),O=(0,K.tZ)(u0.du,{children:(0,K.BX)(gr,{ui:I,services:G,repl:E,userKeybindings:U,children:[(0,K.BX)(mr.Z,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,K.tZ)(mR,{}),(0,K.tZ)(uu,{isAdmin:R.isAdmin,isServer:!!E.config.isServer}),(0,K.tZ)(xE.Z,{replTitle:E.title}),(0,K.tZ)(me,{repl:E,currentUser:R}),(0,K.tZ)(ag,{}),(0,K.tZ)(gJ,{}),(0,K.tZ)(bc,{repl:E,currentUser:R}),(0,K.tZ)(ga,{}),(0,K.tZ)(Ec,{}),(0,K.tZ)(gM.Z,{container:G.container}),(0,K.tZ)(gC,{}),A?(0,K.tZ)(Ee,{}):null,(0,K.tZ)(gL,{}),(0,K.tZ)(gF,{}),(0,K.tZ)(Ei,{isMultiplayerSession:E.multiplayers.length>0}),(0,K.tZ)(gg,{repl:E}),(0,K.tZ)(gV.Z,{isOpen:D&&!B&&!P}),(0,K.tZ)(gH.Z,{isOpen:B}),(0,K.tZ)(S3.Z,{isOpen:P}),(0,K.tZ)(gc.E,{}),(0,K.tZ)(xS,{hostedUrl:E.hostedUrl}),(0,K.tZ)(g_,{}),(0,K.tZ)(gb,{replId:E.id})]}),(0,K.tZ)(Er,{})]})});if(!L)return O;var X=((null==R?void 0:R.editorPreferences.ghostwriterChatServiceEnvironment)||S4.fT.production).replace(/ws$/,"river_ws"),M=R.hasAiPro||R.userSubscriptionType===eT.HP.HackerPro;return(0,K.tZ)(xI.k,{replId:E.id,currentUserId:R.id,hasAccessToAdvancedModel:M,endpoint:X,children:O})}function Er(){var e,n,t,r,i,o,a=(0,J._)((0,gX.qg)(),1)[0],l=(e=(0,ed.Z)(),n=(0,nR.T)(),t=(0,nE.Gn)("isLayoutStacked").preferences.isLayoutStacked,r=(0,nI.cR)(),o=(0,J._)((i=(0,eL._)({},tj,void 0),ez.D(tF,i)),1)[0],(0,en.useCallback)(function(){var i=nA({isStacked:t,isHTML:n,isExtension:r});o({variables:{input:{replId:e,state:{layout:i.layout,data:i.data}}}})},[e,o,n,t,r]));return(0,en.useEffect)(function(){a&&l()},[a,l]),(0,K.tZ)(gO.Z,{})}function Ei(e){var n,t,r,i,o,a,l=(n=e.isMultiplayerSession,r=(t=(0,J._)((0,en.useState)(!1),2))[0],i=t[1],a=(o=(0,gs.X)())&&!o.isDone&&!o.isLoading,(0,en.useEffect)(function(){!a&&n&&"default"===y0()&&i(!0)},[n,a]),{shouldShowModal:r,hideModal:(0,en.useCallback)(function(){y3(!0),i(!1)},[]),confirm:(0,en.useCallback)((0,nx._)(function(){return(0,nZ.Jh)(this,function(e){switch(e.label){case 0:return[4,function(){return y2.apply(this,arguments)}()];case 1:return e.sent(),i(!1),[2]}})}),[])}),c=l.shouldShowModal,s=l.hideModal,u=l.confirm;return c?(0,K.tZ)(gY,{onCancel:s,onConfirm:u}):null}var Eo=ei.K.div,Ea=(0,$.F4)({from:{opacity:0},to:{opacity:1}}),El=(0,e4.X)({container:[eo.l0.height("calc(100% - ".concat(et.Mz,"px)")),eo.l0.width("100%"),eo.l0.top(et.Mz),eo.l0.left(0),eo.l0.position.absolute],main:[{opacity:1,animation:"".concat(Ea," 0.2s ease-in-out")}]});function Ec(){var e,n,t,r,i,o,a,l=(e=ii(tD),n=(0,lk.Z)(),t=(0,hw.NJ)(),r=(0,hw.Cl)(),i=(t||r)&&n?et.Mz:0,o=(0,en.useRef)(null),a=(0,c6.Z)(function(n){var t=n.width,r=n.height;if(t&&r&&o.current){var a=o.current.getBoundingClientRect(),l=a.top;e({width:t,height:r,x:a.left,y:l-i})}}),(0,en.useCallback)(function(e){o.current=e,a(e)},[a])),c=it(tb),s=it(nY),u=it(nq),d=it(nJ),p=(0,nE.Gn)("fontSize").preferences,f=(0,er.P5)({controlName:"flag-floating-drop-points"});return(0,K.tZ)(Eo,{ref:l,css:[El.container],children:c?(0,K.BX)(K.HY,{children:[(0,K.tZ)(pM,{}),(0,K.BX)("main",{id:"main-content",css:El.main,children:[u.map(function(e){return(0,K.tZ)(c3,{handleId:e},e)}),d.map(function(e){return(0,K.tZ)(vJ,{headerId:e},e)}),s.map(function(e){return(0,K.tZ)(mw,{paneId:e},e)}),0===s.length?(0,K.tZ)(S7,{}):null]}),(0,K.tZ)(iZ,{}),f?null:(0,K.tZ)(oP,{}),(0,K.tZ)(gl,{}),(0,K.tZ)(ve,{}),(0,K.tZ)(u0.xV,{fontSize:p.fontSize})]}):null})}function Es(e){var n=e.src,t=e.autoPlay,r=e.loop,i=e.width;return(0,K.tZ)(ei.G,{css:[eo.l0.p(4),eo.l0.borderRadius(8),eo.l0.width(void 0===i?280:i),eo.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(eo.TV.outlineDimmest)}],children:(0,K.tZ)("video",{style:{width:"100%"},css:eo.l0.borderRadius(8),src:n,autoPlay:void 0===t||t,loop:void 0===r||r,playsInline:!0,muted:!0})})}var Eu=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},Ed={id:"workspace-desktop-new-user-tour",steps:[{id:ay.y.Welcome,isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,K.tZ)(ei.G,{"data-cy":"workspace-tour-welcome",css:[eo.l0.maxWidth(400)],children:(0,K.BX)(eE.xv,{children:["The Workspace is where you create projects on Replit. These are called"," ",(0,K.tZ)("strong",{children:"Repls."}),(0,K.tZ)("br",{}),"Let's explore around!"]})})}},{id:ay.y.Editor,title:"Code Editor",content:function(){return(0,K.BX)(ei.G,{css:[eo.l0.width("100%"),eo.l0.center,eo.l0.position.relative],children:[(0,K.tZ)(Es,{src:Eu("editor"),autoPlay:!0,loop:!0}),(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(8),eo.l0.width("100%"),eo.l0.py(8)],children:(0,K.tZ)(eE.xv,{children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:ay.y.Examples,title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:ay.y.Run,title:"Run Button",content:function(){return(0,K.BX)(ei.G,{css:[eo.l0.width("100%"),eo.l0.center,eo.l0.position.relative],children:[(0,K.tZ)(Es,{src:Eu("run-button"),autoPlay:!0,loop:!0}),(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(8),eo.l0.width("100%"),eo.l0.py(8)],children:(0,K.tZ)(eE.xv,{children:"Tap the Run button to “run” your code and see its output."})})]})}},{id:ay.y.Output,title:"Output",content:function(){return(0,K.BX)(ei.G,{css:[eo.l0.width("100%"),eo.l0.center,eo.l0.position.relative],children:[(0,K.tZ)(Es,{src:Eu("output"),autoPlay:!0,loop:!0}),(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(8),eo.l0.width("100%"),eo.l0.py(8)],children:(0,K.tZ)(eE.xv,{children:"This is where your run output appears. This can be text, websites, games, and more depending on the template you’re using."})})]})}},{id:ay.y.Sidepane,title:"Sidebar",content:function(){return(0,K.BX)(ei.G,{css:[eo.l0.width("100%"),eo.l0.center,eo.l0.position.relative],children:[(0,K.tZ)(Es,{src:Eu("sidebar"),autoPlay:!0,loop:!0}),(0,K.BX)(ei.G,{css:[eo.l0.colWithGap(8),eo.l0.width("100%"),eo.l0.p(8)],children:[(0,K.BX)(eE.xv,{children:[(0,K.tZ)("strong",{children:"Files"})," is where all of your Repl’s code is."]}),(0,K.BX)(eE.xv,{children:[(0,K.tZ)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,K.tZ)(eE.xv,{children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:ay.y.Share,title:"Invite & Collaborate",content:function(){return(0,K.BX)(ei.G,{css:[eo.l0.width("100%"),eo.l0.center,eo.l0.position.relative],children:[(0,K.tZ)(Es,{src:Eu("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,K.tZ)(ei.G,{css:[eo.l0.colWithGap(8),eo.l0.width("100%"),eo.l0.py(8)],children:(0,K.tZ)(eE.xv,{children:"Invite others to your Repl to collaborate and work together at the same time."})})]})}}]};function Ep(e){var n=e.children,t=e.tour,r=e.userId;if(!t)return(0,K.tZ)(K.HY,{children:n});var i="workspace-desktop-new-user-tour"===t.id;function o(e){i&&t&&(0,ep.yV)({id:r.toString(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})}return(0,K.tZ)(aZ.r,{tour:t,onStep:o,onDone:o,children:n})}var Ef=t(47075),Eh=t(65243),Em=t(9915),Ev=t(82278),Eg=t(5805);function Ey(){var e=(0,eO._)(["\n  query ReplEnvironmentDesktop(\n    $url: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    repl(url: $url) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n        ...ReplEnvironmentTourRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n        isOwner\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Ey=function(){return e},e}var Eb={},Ex=(0,eX.Ps)(Ey(),hl,ht,ha),EZ=(0,$.iv)([eo.l0.position.fixed,eo.l0.top(0),eo.l0.left(0),eo.l0.height("100%"),eo.l0.width("100%")]),Ew=(0,$.iv)([eo.l0.center,eo.l0.flex.growAndShrink(1),eo.l0.dragRegion]),Ek=function(){var e,n,t,r,i,o,a,l,c,s,u,d=null,p=(0,eG.useRouter)().query;if(!p.replUrl)throw Error("Expected replUrl to be set");var f=p.replUrl.toString(),h=(e={variables:{url:f,environment:(0,Ev.O)(),platform:(0,Eg.X)()},ssr:!!p.ssr},n=(0,eL._)({},Eb,e),eM.a(Ex,n)),m=h.data,v=h.loading,g=h.error,y=m&&"Repl"===m.repl.__typename?m.repl:null,b=(null==m?void 0:m.currentUser)||void 0,x="https://replit.com".concat(f),Z=null!==(u=null==y?void 0:y.description)&&void 0!==u?u:void 0,w=(0,J._)((0,en.useState)(!1),2),k=w[0],C=w[1];(0,en.useEffect)(function(){return C(!0)},[]),t=(null==m?void 0:m.repl)||null,r=(0,eG.useRouter)(),i=(0,er.P5)({controlName:"migrate2nix-enabled",logFlagToAnalytics:!1}),o=(null==t?void 0:t.__typename)==="Repl"?t.language:null,a=(0,er.P5)({controlName:"migrate-".concat(o,"-to-nix"),default:!1,logFlagToAnalytics:!1}),(0,en.useEffect)(function(){if(i&&a&&(null==t?void 0:t.__typename)==="Repl"&&"nix"!==t.language&&"html"!==t.language){var e=new URL(window.location.href);r.query.skipMigration||e.searchParams.get("skipMigration")||"/migrateReplToNix"===r.pathname||r.query.migrateNonNix||(e.searchParams.set("migrateNonNix","1"),window.location.replace(e))}},[t,r,a,i]),(0,en.useEffect)(function(){if((null==t?void 0:t.__typename)==="SubscriptionExpiredError"){var e,n=t.replId,i=t.isOwner,o=f.split("/")[1].slice(1);r.replace({pathname:"/expiredPrivateRepl",query:{isOwner:(e={isOwner:i,ownerUsername:o,replId:n}).isOwner,ownerUsername:e.ownerUsername,replId:e.replId}},r.asPath)}},[t,r,f]);var _=(c=(l={repl:y,currentUser:b}).repl,s=l.currentUser,!c||!s||null!=c.lesson||s.hasSeenOldWorkspaceTour||s.hasSeenOldSidebarTour?null:Ed);return d=g?(0,K.tZ)(ei.G,{css:[eo.l0.center,eo.l0.flex.growAndShrink(1)],children:(0,K.tZ)(eE.xv,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):v||!k?(0,K.tZ)(ei.G,{css:Ew,children:(0,K.tZ)(Ef.Z,{height:100})}):y&&b?_?(0,K.tZ)(Ep,{tour:_,userId:b.id,children:(0,K.tZ)(En,{repl:y,currentUser:b},y.id)}):(0,K.tZ)(En,{repl:y,currentUser:b},y.id):(0,K.tZ)(ei.G,{css:Ew,children:(0,K.tZ)(Ef.Z,{height:100})}),(0,K.tZ)(Q.Z,{children:(0,K.tZ)(ee.Z,{dataCy:"workspace-page",title:"".concat((null==y?void 0:y.title)||""),oembedUrl:x,description:Z,noHeader:!0,noFooter:!0,noMain:!0,noSidebar:!0,hideEmailVerify:!0,children:(0,K.BX)(eS.Tg,{css:EZ,children:[(0,K.tZ)(Eh.g,{}),(0,K.tZ)(Em.G,{}),d]})})})}},64630:function(e,n,t){"use strict";t.d(n,{Pc:function(){return x},Pu:function(){return C}});var r=t(41733),i=t(21262),o=t(71440),a=t(65967);function l(){var e=(0,i._)(["\n  fragment TeamTemplateReplTemplateMember on TeamMembership {\n    id\n    user {\n      id\n      image\n      username\n      firstName\n      lastName\n    }\n    nickname\n    email\n    permissions\n  }\n"]);return l=function(){return e},e}var c=(0,o.Ps)(l()),s=t(78747),u=t(58995);function d(){var e=(0,i._)(["\n  fragment TeamTemplateUser on User {\n    id\n    username\n    displayName\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment TeamTemplateReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...TeamTemplateUser\n    }\n    repl {\n      id\n      title\n      timeCreated\n      template {\n        id\n        dueDate\n      }\n      ...ReplLinkRepl\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment TeamTemplateSubmissionGroup on ReplSubmissionGroup {\n    submission {\n      id\n      timeSubmitted\n      timeLastReviewed\n      isGroupSubmission\n      repl {\n        id\n        url\n        nextPagePathname\n      }\n    }\n    users {\n      id\n      ...TeamTemplateUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment TeamTemplateReplTemplate on ReplTemplate {\n    id\n    isGroupProject\n    isPublished\n    imageUrl\n    url\n    dueDate\n    repl {\n      id\n    }\n    team {\n      id\n      username\n      displayName\n      members {\n        id\n        ...TeamTemplateReplTemplateMember\n      }\n    }\n    author {\n      id\n      username\n      image\n      ...UserLinkUser\n    }\n    submissions {\n      id\n      ...TeamTemplateReplSubmission\n    }\n    submissionGroups {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment TeamTemplateRepl on Repl {\n    id\n    title\n    slug\n    description\n    ...ReplLinkRepl\n    template {\n      id\n      ...TeamTemplateReplTemplate\n    }\n  }\n  ","\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  query TeamTemplate($replUrl: String!) {\n    repl(url: $replUrl) {\n      ... on Repl {\n        id\n        ...TeamTemplateRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n        repl {\n          id\n        }\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}var g={},y=(0,o.Ps)(d()),b=(0,o.Ps)(p(),y,a.Y),x=(0,o.Ps)(f(),y),Z=(0,o.Ps)(h(),c,s._,b,x),w=(0,o.Ps)(m(),a.Y,Z),k=(0,o.Ps)(v(),w);function C(e){var n=(0,r._)({},g,e);return u.a(k,n)}},50699:function(e,n,t){"use strict";t.d(n,{D$:function(){return c},Ex:function(){return i},OH:function(){return l}});var r,i,o=t(27387),a=t(96583);(r=i||(i={})).Initializing="initialize",r.Connecting="connect",r.GettingInitialConfig="get init config",r.ImportingMigrationTemplate="import migration template",r.MergeDotReplit="merge dot replit",r.ExecingPostMigration="exec post migration",r.UpdatingLanguage="set language",r.Finished="finished",r.Failed="error";var l=".cache/replit/migrate2nix";function c(e){return s.apply(this,arguments)}function s(){return(s=(0,o._)(function(e){var n,t,r,i,o;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=e.fs,t=e.templateId,[4,n.stat(l)];case 1:if(!a.sent().exists)return[2,[]];if(r=[],!t)return[3,3];return i="".concat(l,"/").concat(t),[4,n.stat(i)];case 2:a.sent().exists&&r.push(i),a.label=3;case 3:return o="".concat(l,"/_"),[4,n.stat(o)];case 4:return a.sent().exists&&r.push(o),[2,r]}})})).apply(this,arguments)}}},function(e){e.O(0,[7649,2570,3709,3789,9879,2100,5689,4308,3872,1694,7629,5899,668,7745,6415,3694,6557,3933,8855,9010,5542,3503,8133,1784,1296,889,1683,5123,9159,2386,6598,358,4731,3134,862,8239,8333,1455,5198,6190,943,442,5265,6645,4607,5571,2858,4895,4513,6623,2971,8917,1126,9774,2888,179],function(){return e(e.s=92179)}),_N_E=e.O()}]);
//# sourceMappingURL=replEnvironmentDesktop-c59ed5dac0db5ba3.js.map